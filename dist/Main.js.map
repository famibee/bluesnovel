{"version":3,"file":"Main.js","sources":["../node_modules/react/cjs/react-jsx-runtime.production.js","../node_modules/react/cjs/react.production.js","../node_modules/react/cjs/react.development.js","../node_modules/react/index.js","../node_modules/react/cjs/react-jsx-runtime.development.js","../node_modules/react/jsx-runtime.js","../node_modules/@emotion/sheet/dist/emotion-sheet.esm.js","../node_modules/stylis/src/Enum.js","../node_modules/stylis/src/Utility.js","../node_modules/stylis/src/Tokenizer.js","../node_modules/stylis/src/Parser.js","../node_modules/stylis/src/Serializer.js","../node_modules/stylis/src/Middleware.js","../node_modules/@emotion/memoize/dist/emotion-memoize.esm.js","../node_modules/@emotion/cache/dist/emotion-cache.browser.esm.js","../node_modules/hoist-non-react-statics/node_modules/react-is/cjs/react-is.production.min.js","../node_modules/hoist-non-react-statics/node_modules/react-is/cjs/react-is.development.js","../node_modules/hoist-non-react-statics/node_modules/react-is/index.js","../node_modules/hoist-non-react-statics/dist/hoist-non-react-statics.cjs.js","../node_modules/@emotion/utils/dist/emotion-utils.browser.esm.js","../node_modules/@emotion/hash/dist/emotion-hash.esm.js","../node_modules/@emotion/unitless/dist/emotion-unitless.esm.js","../node_modules/@emotion/serialize/dist/emotion-serialize.esm.js","../node_modules/@emotion/use-insertion-effect-with-fallbacks/dist/emotion-use-insertion-effect-with-fallbacks.browser.esm.js","../node_modules/@emotion/react/dist/emotion-element-f0de968e.browser.esm.js","../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js","../node_modules/@egjs/agent/dist/agent.esm.js","../node_modules/framework-utils/dist/utils.esm.js","../node_modules/@daybrush/utils/dist/utils.esm.js","../node_modules/@scena/matrix/dist/matrix.esm.js","../node_modules/css-to-mat/dist/css-to-mat.esm.js","../node_modules/@egjs/list-differ/dist/list-differ.esm.js","../node_modules/@egjs/children-differ/dist/children-differ.esm.js","../node_modules/@scena/event-emitter/dist/event-emitter.esm.js","../node_modules/@scena/dragscroll/dist/dragscroll.esm.js","../node_modules/overlap-area/dist/overlap-area.esm.js","../node_modules/gesto/dist/gesto.esm.js","../node_modules/css-styled/dist/styled.esm.js","../node_modules/react-css-styled/dist/styled.esm.js","../node_modules/react-moveable/dist/moveable.esm.js","../src/components/GrpLayer.tsx","../node_modules/@emotion/react/dist/emotion-react.browser.esm.js","../src/components/TxtLayer.tsx","../node_modules/zustand/esm/vanilla.mjs","../node_modules/zustand/esm/react.mjs","../src/store/store.tsx","../node_modules/react-use/esm/misc/util.js","../node_modules/react-use/esm/useToggle.js","../node_modules/react-use/esm/useEffectOnce.js","../node_modules/react-use/esm/useEvent.js","../node_modules/react-use/esm/useKey.js","../node_modules/react-use/esm/useLongPress.js","../node_modules/react-use/esm/useMount.js","../node_modules/react-use/esm/useTitle.js","../src/components/Stage.tsx","../node_modules/@pixi/extensions/lib/index.mjs","../src/components/Main.tsx"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nvar REACT_ELEMENT_TYPE = Symbol.for(\"react.transitional.element\"),\n  REACT_FRAGMENT_TYPE = Symbol.for(\"react.fragment\");\nfunction jsxProd(type, config, maybeKey) {\n  var key = null;\n  void 0 !== maybeKey && (key = \"\" + maybeKey);\n  void 0 !== config.key && (key = \"\" + config.key);\n  if (\"key\" in config) {\n    maybeKey = {};\n    for (var propName in config)\n      \"key\" !== propName && (maybeKey[propName] = config[propName]);\n  } else maybeKey = config;\n  config = maybeKey.ref;\n  return {\n    $$typeof: REACT_ELEMENT_TYPE,\n    type: type,\n    key: key,\n    ref: void 0 !== config ? config : null,\n    props: maybeKey\n  };\n}\nexports.Fragment = REACT_FRAGMENT_TYPE;\nexports.jsx = jsxProd;\nexports.jsxs = jsxProd;\n","/**\n * @license React\n * react.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nvar REACT_ELEMENT_TYPE = Symbol.for(\"react.transitional.element\"),\n  REACT_PORTAL_TYPE = Symbol.for(\"react.portal\"),\n  REACT_FRAGMENT_TYPE = Symbol.for(\"react.fragment\"),\n  REACT_STRICT_MODE_TYPE = Symbol.for(\"react.strict_mode\"),\n  REACT_PROFILER_TYPE = Symbol.for(\"react.profiler\"),\n  REACT_CONSUMER_TYPE = Symbol.for(\"react.consumer\"),\n  REACT_CONTEXT_TYPE = Symbol.for(\"react.context\"),\n  REACT_FORWARD_REF_TYPE = Symbol.for(\"react.forward_ref\"),\n  REACT_SUSPENSE_TYPE = Symbol.for(\"react.suspense\"),\n  REACT_MEMO_TYPE = Symbol.for(\"react.memo\"),\n  REACT_LAZY_TYPE = Symbol.for(\"react.lazy\"),\n  MAYBE_ITERATOR_SYMBOL = Symbol.iterator;\nfunction getIteratorFn(maybeIterable) {\n  if (null === maybeIterable || \"object\" !== typeof maybeIterable) return null;\n  maybeIterable =\n    (MAYBE_ITERATOR_SYMBOL && maybeIterable[MAYBE_ITERATOR_SYMBOL]) ||\n    maybeIterable[\"@@iterator\"];\n  return \"function\" === typeof maybeIterable ? maybeIterable : null;\n}\nvar ReactNoopUpdateQueue = {\n    isMounted: function () {\n      return !1;\n    },\n    enqueueForceUpdate: function () {},\n    enqueueReplaceState: function () {},\n    enqueueSetState: function () {}\n  },\n  assign = Object.assign,\n  emptyObject = {};\nfunction Component(props, context, updater) {\n  this.props = props;\n  this.context = context;\n  this.refs = emptyObject;\n  this.updater = updater || ReactNoopUpdateQueue;\n}\nComponent.prototype.isReactComponent = {};\nComponent.prototype.setState = function (partialState, callback) {\n  if (\n    \"object\" !== typeof partialState &&\n    \"function\" !== typeof partialState &&\n    null != partialState\n  )\n    throw Error(\n      \"takes an object of state variables to update or a function which returns an object of state variables.\"\n    );\n  this.updater.enqueueSetState(this, partialState, callback, \"setState\");\n};\nComponent.prototype.forceUpdate = function (callback) {\n  this.updater.enqueueForceUpdate(this, callback, \"forceUpdate\");\n};\nfunction ComponentDummy() {}\nComponentDummy.prototype = Component.prototype;\nfunction PureComponent(props, context, updater) {\n  this.props = props;\n  this.context = context;\n  this.refs = emptyObject;\n  this.updater = updater || ReactNoopUpdateQueue;\n}\nvar pureComponentPrototype = (PureComponent.prototype = new ComponentDummy());\npureComponentPrototype.constructor = PureComponent;\nassign(pureComponentPrototype, Component.prototype);\npureComponentPrototype.isPureReactComponent = !0;\nvar isArrayImpl = Array.isArray,\n  ReactSharedInternals = { H: null, A: null, T: null, S: null },\n  hasOwnProperty = Object.prototype.hasOwnProperty;\nfunction ReactElement(type, key, self, source, owner, props) {\n  self = props.ref;\n  return {\n    $$typeof: REACT_ELEMENT_TYPE,\n    type: type,\n    key: key,\n    ref: void 0 !== self ? self : null,\n    props: props\n  };\n}\nfunction cloneAndReplaceKey(oldElement, newKey) {\n  return ReactElement(\n    oldElement.type,\n    newKey,\n    void 0,\n    void 0,\n    void 0,\n    oldElement.props\n  );\n}\nfunction isValidElement(object) {\n  return (\n    \"object\" === typeof object &&\n    null !== object &&\n    object.$$typeof === REACT_ELEMENT_TYPE\n  );\n}\nfunction escape(key) {\n  var escaperLookup = { \"=\": \"=0\", \":\": \"=2\" };\n  return (\n    \"$\" +\n    key.replace(/[=:]/g, function (match) {\n      return escaperLookup[match];\n    })\n  );\n}\nvar userProvidedKeyEscapeRegex = /\\/+/g;\nfunction getElementKey(element, index) {\n  return \"object\" === typeof element && null !== element && null != element.key\n    ? escape(\"\" + element.key)\n    : index.toString(36);\n}\nfunction noop$1() {}\nfunction resolveThenable(thenable) {\n  switch (thenable.status) {\n    case \"fulfilled\":\n      return thenable.value;\n    case \"rejected\":\n      throw thenable.reason;\n    default:\n      switch (\n        (\"string\" === typeof thenable.status\n          ? thenable.then(noop$1, noop$1)\n          : ((thenable.status = \"pending\"),\n            thenable.then(\n              function (fulfilledValue) {\n                \"pending\" === thenable.status &&\n                  ((thenable.status = \"fulfilled\"),\n                  (thenable.value = fulfilledValue));\n              },\n              function (error) {\n                \"pending\" === thenable.status &&\n                  ((thenable.status = \"rejected\"), (thenable.reason = error));\n              }\n            )),\n        thenable.status)\n      ) {\n        case \"fulfilled\":\n          return thenable.value;\n        case \"rejected\":\n          throw thenable.reason;\n      }\n  }\n  throw thenable;\n}\nfunction mapIntoArray(children, array, escapedPrefix, nameSoFar, callback) {\n  var type = typeof children;\n  if (\"undefined\" === type || \"boolean\" === type) children = null;\n  var invokeCallback = !1;\n  if (null === children) invokeCallback = !0;\n  else\n    switch (type) {\n      case \"bigint\":\n      case \"string\":\n      case \"number\":\n        invokeCallback = !0;\n        break;\n      case \"object\":\n        switch (children.$$typeof) {\n          case REACT_ELEMENT_TYPE:\n          case REACT_PORTAL_TYPE:\n            invokeCallback = !0;\n            break;\n          case REACT_LAZY_TYPE:\n            return (\n              (invokeCallback = children._init),\n              mapIntoArray(\n                invokeCallback(children._payload),\n                array,\n                escapedPrefix,\n                nameSoFar,\n                callback\n              )\n            );\n        }\n    }\n  if (invokeCallback)\n    return (\n      (callback = callback(children)),\n      (invokeCallback =\n        \"\" === nameSoFar ? \".\" + getElementKey(children, 0) : nameSoFar),\n      isArrayImpl(callback)\n        ? ((escapedPrefix = \"\"),\n          null != invokeCallback &&\n            (escapedPrefix =\n              invokeCallback.replace(userProvidedKeyEscapeRegex, \"$&/\") + \"/\"),\n          mapIntoArray(callback, array, escapedPrefix, \"\", function (c) {\n            return c;\n          }))\n        : null != callback &&\n          (isValidElement(callback) &&\n            (callback = cloneAndReplaceKey(\n              callback,\n              escapedPrefix +\n                (null == callback.key ||\n                (children && children.key === callback.key)\n                  ? \"\"\n                  : (\"\" + callback.key).replace(\n                      userProvidedKeyEscapeRegex,\n                      \"$&/\"\n                    ) + \"/\") +\n                invokeCallback\n            )),\n          array.push(callback)),\n      1\n    );\n  invokeCallback = 0;\n  var nextNamePrefix = \"\" === nameSoFar ? \".\" : nameSoFar + \":\";\n  if (isArrayImpl(children))\n    for (var i = 0; i < children.length; i++)\n      (nameSoFar = children[i]),\n        (type = nextNamePrefix + getElementKey(nameSoFar, i)),\n        (invokeCallback += mapIntoArray(\n          nameSoFar,\n          array,\n          escapedPrefix,\n          type,\n          callback\n        ));\n  else if (((i = getIteratorFn(children)), \"function\" === typeof i))\n    for (\n      children = i.call(children), i = 0;\n      !(nameSoFar = children.next()).done;\n\n    )\n      (nameSoFar = nameSoFar.value),\n        (type = nextNamePrefix + getElementKey(nameSoFar, i++)),\n        (invokeCallback += mapIntoArray(\n          nameSoFar,\n          array,\n          escapedPrefix,\n          type,\n          callback\n        ));\n  else if (\"object\" === type) {\n    if (\"function\" === typeof children.then)\n      return mapIntoArray(\n        resolveThenable(children),\n        array,\n        escapedPrefix,\n        nameSoFar,\n        callback\n      );\n    array = String(children);\n    throw Error(\n      \"Objects are not valid as a React child (found: \" +\n        (\"[object Object]\" === array\n          ? \"object with keys {\" + Object.keys(children).join(\", \") + \"}\"\n          : array) +\n        \"). If you meant to render a collection of children, use an array instead.\"\n    );\n  }\n  return invokeCallback;\n}\nfunction mapChildren(children, func, context) {\n  if (null == children) return children;\n  var result = [],\n    count = 0;\n  mapIntoArray(children, result, \"\", \"\", function (child) {\n    return func.call(context, child, count++);\n  });\n  return result;\n}\nfunction lazyInitializer(payload) {\n  if (-1 === payload._status) {\n    var ctor = payload._result;\n    ctor = ctor();\n    ctor.then(\n      function (moduleObject) {\n        if (0 === payload._status || -1 === payload._status)\n          (payload._status = 1), (payload._result = moduleObject);\n      },\n      function (error) {\n        if (0 === payload._status || -1 === payload._status)\n          (payload._status = 2), (payload._result = error);\n      }\n    );\n    -1 === payload._status && ((payload._status = 0), (payload._result = ctor));\n  }\n  if (1 === payload._status) return payload._result.default;\n  throw payload._result;\n}\nvar reportGlobalError =\n  \"function\" === typeof reportError\n    ? reportError\n    : function (error) {\n        if (\n          \"object\" === typeof window &&\n          \"function\" === typeof window.ErrorEvent\n        ) {\n          var event = new window.ErrorEvent(\"error\", {\n            bubbles: !0,\n            cancelable: !0,\n            message:\n              \"object\" === typeof error &&\n              null !== error &&\n              \"string\" === typeof error.message\n                ? String(error.message)\n                : String(error),\n            error: error\n          });\n          if (!window.dispatchEvent(event)) return;\n        } else if (\n          \"object\" === typeof process &&\n          \"function\" === typeof process.emit\n        ) {\n          process.emit(\"uncaughtException\", error);\n          return;\n        }\n        console.error(error);\n      };\nfunction noop() {}\nexports.Children = {\n  map: mapChildren,\n  forEach: function (children, forEachFunc, forEachContext) {\n    mapChildren(\n      children,\n      function () {\n        forEachFunc.apply(this, arguments);\n      },\n      forEachContext\n    );\n  },\n  count: function (children) {\n    var n = 0;\n    mapChildren(children, function () {\n      n++;\n    });\n    return n;\n  },\n  toArray: function (children) {\n    return (\n      mapChildren(children, function (child) {\n        return child;\n      }) || []\n    );\n  },\n  only: function (children) {\n    if (!isValidElement(children))\n      throw Error(\n        \"React.Children.only expected to receive a single React element child.\"\n      );\n    return children;\n  }\n};\nexports.Component = Component;\nexports.Fragment = REACT_FRAGMENT_TYPE;\nexports.Profiler = REACT_PROFILER_TYPE;\nexports.PureComponent = PureComponent;\nexports.StrictMode = REACT_STRICT_MODE_TYPE;\nexports.Suspense = REACT_SUSPENSE_TYPE;\nexports.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE =\n  ReactSharedInternals;\nexports.act = function () {\n  throw Error(\"act(...) is not supported in production builds of React.\");\n};\nexports.cache = function (fn) {\n  return function () {\n    return fn.apply(null, arguments);\n  };\n};\nexports.cloneElement = function (element, config, children) {\n  if (null === element || void 0 === element)\n    throw Error(\n      \"The argument must be a React element, but you passed \" + element + \".\"\n    );\n  var props = assign({}, element.props),\n    key = element.key,\n    owner = void 0;\n  if (null != config)\n    for (propName in (void 0 !== config.ref && (owner = void 0),\n    void 0 !== config.key && (key = \"\" + config.key),\n    config))\n      !hasOwnProperty.call(config, propName) ||\n        \"key\" === propName ||\n        \"__self\" === propName ||\n        \"__source\" === propName ||\n        (\"ref\" === propName && void 0 === config.ref) ||\n        (props[propName] = config[propName]);\n  var propName = arguments.length - 2;\n  if (1 === propName) props.children = children;\n  else if (1 < propName) {\n    for (var childArray = Array(propName), i = 0; i < propName; i++)\n      childArray[i] = arguments[i + 2];\n    props.children = childArray;\n  }\n  return ReactElement(element.type, key, void 0, void 0, owner, props);\n};\nexports.createContext = function (defaultValue) {\n  defaultValue = {\n    $$typeof: REACT_CONTEXT_TYPE,\n    _currentValue: defaultValue,\n    _currentValue2: defaultValue,\n    _threadCount: 0,\n    Provider: null,\n    Consumer: null\n  };\n  defaultValue.Provider = defaultValue;\n  defaultValue.Consumer = {\n    $$typeof: REACT_CONSUMER_TYPE,\n    _context: defaultValue\n  };\n  return defaultValue;\n};\nexports.createElement = function (type, config, children) {\n  var propName,\n    props = {},\n    key = null;\n  if (null != config)\n    for (propName in (void 0 !== config.key && (key = \"\" + config.key), config))\n      hasOwnProperty.call(config, propName) &&\n        \"key\" !== propName &&\n        \"__self\" !== propName &&\n        \"__source\" !== propName &&\n        (props[propName] = config[propName]);\n  var childrenLength = arguments.length - 2;\n  if (1 === childrenLength) props.children = children;\n  else if (1 < childrenLength) {\n    for (var childArray = Array(childrenLength), i = 0; i < childrenLength; i++)\n      childArray[i] = arguments[i + 2];\n    props.children = childArray;\n  }\n  if (type && type.defaultProps)\n    for (propName in ((childrenLength = type.defaultProps), childrenLength))\n      void 0 === props[propName] &&\n        (props[propName] = childrenLength[propName]);\n  return ReactElement(type, key, void 0, void 0, null, props);\n};\nexports.createRef = function () {\n  return { current: null };\n};\nexports.forwardRef = function (render) {\n  return { $$typeof: REACT_FORWARD_REF_TYPE, render: render };\n};\nexports.isValidElement = isValidElement;\nexports.lazy = function (ctor) {\n  return {\n    $$typeof: REACT_LAZY_TYPE,\n    _payload: { _status: -1, _result: ctor },\n    _init: lazyInitializer\n  };\n};\nexports.memo = function (type, compare) {\n  return {\n    $$typeof: REACT_MEMO_TYPE,\n    type: type,\n    compare: void 0 === compare ? null : compare\n  };\n};\nexports.startTransition = function (scope) {\n  var prevTransition = ReactSharedInternals.T,\n    currentTransition = {};\n  ReactSharedInternals.T = currentTransition;\n  try {\n    var returnValue = scope(),\n      onStartTransitionFinish = ReactSharedInternals.S;\n    null !== onStartTransitionFinish &&\n      onStartTransitionFinish(currentTransition, returnValue);\n    \"object\" === typeof returnValue &&\n      null !== returnValue &&\n      \"function\" === typeof returnValue.then &&\n      returnValue.then(noop, reportGlobalError);\n  } catch (error) {\n    reportGlobalError(error);\n  } finally {\n    ReactSharedInternals.T = prevTransition;\n  }\n};\nexports.unstable_useCacheRefresh = function () {\n  return ReactSharedInternals.H.useCacheRefresh();\n};\nexports.use = function (usable) {\n  return ReactSharedInternals.H.use(usable);\n};\nexports.useActionState = function (action, initialState, permalink) {\n  return ReactSharedInternals.H.useActionState(action, initialState, permalink);\n};\nexports.useCallback = function (callback, deps) {\n  return ReactSharedInternals.H.useCallback(callback, deps);\n};\nexports.useContext = function (Context) {\n  return ReactSharedInternals.H.useContext(Context);\n};\nexports.useDebugValue = function () {};\nexports.useDeferredValue = function (value, initialValue) {\n  return ReactSharedInternals.H.useDeferredValue(value, initialValue);\n};\nexports.useEffect = function (create, deps) {\n  return ReactSharedInternals.H.useEffect(create, deps);\n};\nexports.useId = function () {\n  return ReactSharedInternals.H.useId();\n};\nexports.useImperativeHandle = function (ref, create, deps) {\n  return ReactSharedInternals.H.useImperativeHandle(ref, create, deps);\n};\nexports.useInsertionEffect = function (create, deps) {\n  return ReactSharedInternals.H.useInsertionEffect(create, deps);\n};\nexports.useLayoutEffect = function (create, deps) {\n  return ReactSharedInternals.H.useLayoutEffect(create, deps);\n};\nexports.useMemo = function (create, deps) {\n  return ReactSharedInternals.H.useMemo(create, deps);\n};\nexports.useOptimistic = function (passthrough, reducer) {\n  return ReactSharedInternals.H.useOptimistic(passthrough, reducer);\n};\nexports.useReducer = function (reducer, initialArg, init) {\n  return ReactSharedInternals.H.useReducer(reducer, initialArg, init);\n};\nexports.useRef = function (initialValue) {\n  return ReactSharedInternals.H.useRef(initialValue);\n};\nexports.useState = function (initialState) {\n  return ReactSharedInternals.H.useState(initialState);\n};\nexports.useSyncExternalStore = function (\n  subscribe,\n  getSnapshot,\n  getServerSnapshot\n) {\n  return ReactSharedInternals.H.useSyncExternalStore(\n    subscribe,\n    getSnapshot,\n    getServerSnapshot\n  );\n};\nexports.useTransition = function () {\n  return ReactSharedInternals.H.useTransition();\n};\nexports.version = \"19.0.0\";\n","/**\n * @license React\n * react.development.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\n\"production\" !== process.env.NODE_ENV &&\n  (function () {\n    function defineDeprecationWarning(methodName, info) {\n      Object.defineProperty(Component.prototype, methodName, {\n        get: function () {\n          console.warn(\n            \"%s(...) is deprecated in plain JavaScript React classes. %s\",\n            info[0],\n            info[1]\n          );\n        }\n      });\n    }\n    function getIteratorFn(maybeIterable) {\n      if (null === maybeIterable || \"object\" !== typeof maybeIterable)\n        return null;\n      maybeIterable =\n        (MAYBE_ITERATOR_SYMBOL && maybeIterable[MAYBE_ITERATOR_SYMBOL]) ||\n        maybeIterable[\"@@iterator\"];\n      return \"function\" === typeof maybeIterable ? maybeIterable : null;\n    }\n    function warnNoop(publicInstance, callerName) {\n      publicInstance =\n        ((publicInstance = publicInstance.constructor) &&\n          (publicInstance.displayName || publicInstance.name)) ||\n        \"ReactClass\";\n      var warningKey = publicInstance + \".\" + callerName;\n      didWarnStateUpdateForUnmountedComponent[warningKey] ||\n        (console.error(\n          \"Can't call %s on a component that is not yet mounted. This is a no-op, but it might indicate a bug in your application. Instead, assign to `this.state` directly or define a `state = {};` class property with the desired state in the %s component.\",\n          callerName,\n          publicInstance\n        ),\n        (didWarnStateUpdateForUnmountedComponent[warningKey] = !0));\n    }\n    function Component(props, context, updater) {\n      this.props = props;\n      this.context = context;\n      this.refs = emptyObject;\n      this.updater = updater || ReactNoopUpdateQueue;\n    }\n    function ComponentDummy() {}\n    function PureComponent(props, context, updater) {\n      this.props = props;\n      this.context = context;\n      this.refs = emptyObject;\n      this.updater = updater || ReactNoopUpdateQueue;\n    }\n    function testStringCoercion(value) {\n      return \"\" + value;\n    }\n    function checkKeyStringCoercion(value) {\n      try {\n        testStringCoercion(value);\n        var JSCompiler_inline_result = !1;\n      } catch (e) {\n        JSCompiler_inline_result = !0;\n      }\n      if (JSCompiler_inline_result) {\n        JSCompiler_inline_result = console;\n        var JSCompiler_temp_const = JSCompiler_inline_result.error;\n        var JSCompiler_inline_result$jscomp$0 =\n          (\"function\" === typeof Symbol &&\n            Symbol.toStringTag &&\n            value[Symbol.toStringTag]) ||\n          value.constructor.name ||\n          \"Object\";\n        JSCompiler_temp_const.call(\n          JSCompiler_inline_result,\n          \"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.\",\n          JSCompiler_inline_result$jscomp$0\n        );\n        return testStringCoercion(value);\n      }\n    }\n    function getComponentNameFromType(type) {\n      if (null == type) return null;\n      if (\"function\" === typeof type)\n        return type.$$typeof === REACT_CLIENT_REFERENCE$2\n          ? null\n          : type.displayName || type.name || null;\n      if (\"string\" === typeof type) return type;\n      switch (type) {\n        case REACT_FRAGMENT_TYPE:\n          return \"Fragment\";\n        case REACT_PORTAL_TYPE:\n          return \"Portal\";\n        case REACT_PROFILER_TYPE:\n          return \"Profiler\";\n        case REACT_STRICT_MODE_TYPE:\n          return \"StrictMode\";\n        case REACT_SUSPENSE_TYPE:\n          return \"Suspense\";\n        case REACT_SUSPENSE_LIST_TYPE:\n          return \"SuspenseList\";\n      }\n      if (\"object\" === typeof type)\n        switch (\n          (\"number\" === typeof type.tag &&\n            console.error(\n              \"Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue.\"\n            ),\n          type.$$typeof)\n        ) {\n          case REACT_CONTEXT_TYPE:\n            return (type.displayName || \"Context\") + \".Provider\";\n          case REACT_CONSUMER_TYPE:\n            return (type._context.displayName || \"Context\") + \".Consumer\";\n          case REACT_FORWARD_REF_TYPE:\n            var innerType = type.render;\n            type = type.displayName;\n            type ||\n              ((type = innerType.displayName || innerType.name || \"\"),\n              (type = \"\" !== type ? \"ForwardRef(\" + type + \")\" : \"ForwardRef\"));\n            return type;\n          case REACT_MEMO_TYPE:\n            return (\n              (innerType = type.displayName || null),\n              null !== innerType\n                ? innerType\n                : getComponentNameFromType(type.type) || \"Memo\"\n            );\n          case REACT_LAZY_TYPE:\n            innerType = type._payload;\n            type = type._init;\n            try {\n              return getComponentNameFromType(type(innerType));\n            } catch (x) {}\n        }\n      return null;\n    }\n    function isValidElementType(type) {\n      return \"string\" === typeof type ||\n        \"function\" === typeof type ||\n        type === REACT_FRAGMENT_TYPE ||\n        type === REACT_PROFILER_TYPE ||\n        type === REACT_STRICT_MODE_TYPE ||\n        type === REACT_SUSPENSE_TYPE ||\n        type === REACT_SUSPENSE_LIST_TYPE ||\n        type === REACT_OFFSCREEN_TYPE ||\n        (\"object\" === typeof type &&\n          null !== type &&\n          (type.$$typeof === REACT_LAZY_TYPE ||\n            type.$$typeof === REACT_MEMO_TYPE ||\n            type.$$typeof === REACT_CONTEXT_TYPE ||\n            type.$$typeof === REACT_CONSUMER_TYPE ||\n            type.$$typeof === REACT_FORWARD_REF_TYPE ||\n            type.$$typeof === REACT_CLIENT_REFERENCE$1 ||\n            void 0 !== type.getModuleId))\n        ? !0\n        : !1;\n    }\n    function disabledLog() {}\n    function disableLogs() {\n      if (0 === disabledDepth) {\n        prevLog = console.log;\n        prevInfo = console.info;\n        prevWarn = console.warn;\n        prevError = console.error;\n        prevGroup = console.group;\n        prevGroupCollapsed = console.groupCollapsed;\n        prevGroupEnd = console.groupEnd;\n        var props = {\n          configurable: !0,\n          enumerable: !0,\n          value: disabledLog,\n          writable: !0\n        };\n        Object.defineProperties(console, {\n          info: props,\n          log: props,\n          warn: props,\n          error: props,\n          group: props,\n          groupCollapsed: props,\n          groupEnd: props\n        });\n      }\n      disabledDepth++;\n    }\n    function reenableLogs() {\n      disabledDepth--;\n      if (0 === disabledDepth) {\n        var props = { configurable: !0, enumerable: !0, writable: !0 };\n        Object.defineProperties(console, {\n          log: assign({}, props, { value: prevLog }),\n          info: assign({}, props, { value: prevInfo }),\n          warn: assign({}, props, { value: prevWarn }),\n          error: assign({}, props, { value: prevError }),\n          group: assign({}, props, { value: prevGroup }),\n          groupCollapsed: assign({}, props, { value: prevGroupCollapsed }),\n          groupEnd: assign({}, props, { value: prevGroupEnd })\n        });\n      }\n      0 > disabledDepth &&\n        console.error(\n          \"disabledDepth fell below zero. This is a bug in React. Please file an issue.\"\n        );\n    }\n    function describeBuiltInComponentFrame(name) {\n      if (void 0 === prefix)\n        try {\n          throw Error();\n        } catch (x) {\n          var match = x.stack.trim().match(/\\n( *(at )?)/);\n          prefix = (match && match[1]) || \"\";\n          suffix =\n            -1 < x.stack.indexOf(\"\\n    at\")\n              ? \" (<anonymous>)\"\n              : -1 < x.stack.indexOf(\"@\")\n                ? \"@unknown:0:0\"\n                : \"\";\n        }\n      return \"\\n\" + prefix + name + suffix;\n    }\n    function describeNativeComponentFrame(fn, construct) {\n      if (!fn || reentry) return \"\";\n      var frame = componentFrameCache.get(fn);\n      if (void 0 !== frame) return frame;\n      reentry = !0;\n      frame = Error.prepareStackTrace;\n      Error.prepareStackTrace = void 0;\n      var previousDispatcher = null;\n      previousDispatcher = ReactSharedInternals.H;\n      ReactSharedInternals.H = null;\n      disableLogs();\n      try {\n        var RunInRootFrame = {\n          DetermineComponentFrameRoot: function () {\n            try {\n              if (construct) {\n                var Fake = function () {\n                  throw Error();\n                };\n                Object.defineProperty(Fake.prototype, \"props\", {\n                  set: function () {\n                    throw Error();\n                  }\n                });\n                if (\"object\" === typeof Reflect && Reflect.construct) {\n                  try {\n                    Reflect.construct(Fake, []);\n                  } catch (x) {\n                    var control = x;\n                  }\n                  Reflect.construct(fn, [], Fake);\n                } else {\n                  try {\n                    Fake.call();\n                  } catch (x$0) {\n                    control = x$0;\n                  }\n                  fn.call(Fake.prototype);\n                }\n              } else {\n                try {\n                  throw Error();\n                } catch (x$1) {\n                  control = x$1;\n                }\n                (Fake = fn()) &&\n                  \"function\" === typeof Fake.catch &&\n                  Fake.catch(function () {});\n              }\n            } catch (sample) {\n              if (sample && control && \"string\" === typeof sample.stack)\n                return [sample.stack, control.stack];\n            }\n            return [null, null];\n          }\n        };\n        RunInRootFrame.DetermineComponentFrameRoot.displayName =\n          \"DetermineComponentFrameRoot\";\n        var namePropDescriptor = Object.getOwnPropertyDescriptor(\n          RunInRootFrame.DetermineComponentFrameRoot,\n          \"name\"\n        );\n        namePropDescriptor &&\n          namePropDescriptor.configurable &&\n          Object.defineProperty(\n            RunInRootFrame.DetermineComponentFrameRoot,\n            \"name\",\n            { value: \"DetermineComponentFrameRoot\" }\n          );\n        var _RunInRootFrame$Deter =\n            RunInRootFrame.DetermineComponentFrameRoot(),\n          sampleStack = _RunInRootFrame$Deter[0],\n          controlStack = _RunInRootFrame$Deter[1];\n        if (sampleStack && controlStack) {\n          var sampleLines = sampleStack.split(\"\\n\"),\n            controlLines = controlStack.split(\"\\n\");\n          for (\n            _RunInRootFrame$Deter = namePropDescriptor = 0;\n            namePropDescriptor < sampleLines.length &&\n            !sampleLines[namePropDescriptor].includes(\n              \"DetermineComponentFrameRoot\"\n            );\n\n          )\n            namePropDescriptor++;\n          for (\n            ;\n            _RunInRootFrame$Deter < controlLines.length &&\n            !controlLines[_RunInRootFrame$Deter].includes(\n              \"DetermineComponentFrameRoot\"\n            );\n\n          )\n            _RunInRootFrame$Deter++;\n          if (\n            namePropDescriptor === sampleLines.length ||\n            _RunInRootFrame$Deter === controlLines.length\n          )\n            for (\n              namePropDescriptor = sampleLines.length - 1,\n                _RunInRootFrame$Deter = controlLines.length - 1;\n              1 <= namePropDescriptor &&\n              0 <= _RunInRootFrame$Deter &&\n              sampleLines[namePropDescriptor] !==\n                controlLines[_RunInRootFrame$Deter];\n\n            )\n              _RunInRootFrame$Deter--;\n          for (\n            ;\n            1 <= namePropDescriptor && 0 <= _RunInRootFrame$Deter;\n            namePropDescriptor--, _RunInRootFrame$Deter--\n          )\n            if (\n              sampleLines[namePropDescriptor] !==\n              controlLines[_RunInRootFrame$Deter]\n            ) {\n              if (1 !== namePropDescriptor || 1 !== _RunInRootFrame$Deter) {\n                do\n                  if (\n                    (namePropDescriptor--,\n                    _RunInRootFrame$Deter--,\n                    0 > _RunInRootFrame$Deter ||\n                      sampleLines[namePropDescriptor] !==\n                        controlLines[_RunInRootFrame$Deter])\n                  ) {\n                    var _frame =\n                      \"\\n\" +\n                      sampleLines[namePropDescriptor].replace(\n                        \" at new \",\n                        \" at \"\n                      );\n                    fn.displayName &&\n                      _frame.includes(\"<anonymous>\") &&\n                      (_frame = _frame.replace(\"<anonymous>\", fn.displayName));\n                    \"function\" === typeof fn &&\n                      componentFrameCache.set(fn, _frame);\n                    return _frame;\n                  }\n                while (1 <= namePropDescriptor && 0 <= _RunInRootFrame$Deter);\n              }\n              break;\n            }\n        }\n      } finally {\n        (reentry = !1),\n          (ReactSharedInternals.H = previousDispatcher),\n          reenableLogs(),\n          (Error.prepareStackTrace = frame);\n      }\n      sampleLines = (sampleLines = fn ? fn.displayName || fn.name : \"\")\n        ? describeBuiltInComponentFrame(sampleLines)\n        : \"\";\n      \"function\" === typeof fn && componentFrameCache.set(fn, sampleLines);\n      return sampleLines;\n    }\n    function describeUnknownElementTypeFrameInDEV(type) {\n      if (null == type) return \"\";\n      if (\"function\" === typeof type) {\n        var prototype = type.prototype;\n        return describeNativeComponentFrame(\n          type,\n          !(!prototype || !prototype.isReactComponent)\n        );\n      }\n      if (\"string\" === typeof type) return describeBuiltInComponentFrame(type);\n      switch (type) {\n        case REACT_SUSPENSE_TYPE:\n          return describeBuiltInComponentFrame(\"Suspense\");\n        case REACT_SUSPENSE_LIST_TYPE:\n          return describeBuiltInComponentFrame(\"SuspenseList\");\n      }\n      if (\"object\" === typeof type)\n        switch (type.$$typeof) {\n          case REACT_FORWARD_REF_TYPE:\n            return (type = describeNativeComponentFrame(type.render, !1)), type;\n          case REACT_MEMO_TYPE:\n            return describeUnknownElementTypeFrameInDEV(type.type);\n          case REACT_LAZY_TYPE:\n            prototype = type._payload;\n            type = type._init;\n            try {\n              return describeUnknownElementTypeFrameInDEV(type(prototype));\n            } catch (x) {}\n        }\n      return \"\";\n    }\n    function getOwner() {\n      var dispatcher = ReactSharedInternals.A;\n      return null === dispatcher ? null : dispatcher.getOwner();\n    }\n    function hasValidKey(config) {\n      if (hasOwnProperty.call(config, \"key\")) {\n        var getter = Object.getOwnPropertyDescriptor(config, \"key\").get;\n        if (getter && getter.isReactWarning) return !1;\n      }\n      return void 0 !== config.key;\n    }\n    function defineKeyPropWarningGetter(props, displayName) {\n      function warnAboutAccessingKey() {\n        specialPropKeyWarningShown ||\n          ((specialPropKeyWarningShown = !0),\n          console.error(\n            \"%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)\",\n            displayName\n          ));\n      }\n      warnAboutAccessingKey.isReactWarning = !0;\n      Object.defineProperty(props, \"key\", {\n        get: warnAboutAccessingKey,\n        configurable: !0\n      });\n    }\n    function elementRefGetterWithDeprecationWarning() {\n      var componentName = getComponentNameFromType(this.type);\n      didWarnAboutElementRef[componentName] ||\n        ((didWarnAboutElementRef[componentName] = !0),\n        console.error(\n          \"Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.\"\n        ));\n      componentName = this.props.ref;\n      return void 0 !== componentName ? componentName : null;\n    }\n    function ReactElement(type, key, self, source, owner, props) {\n      self = props.ref;\n      type = {\n        $$typeof: REACT_ELEMENT_TYPE,\n        type: type,\n        key: key,\n        props: props,\n        _owner: owner\n      };\n      null !== (void 0 !== self ? self : null)\n        ? Object.defineProperty(type, \"ref\", {\n            enumerable: !1,\n            get: elementRefGetterWithDeprecationWarning\n          })\n        : Object.defineProperty(type, \"ref\", { enumerable: !1, value: null });\n      type._store = {};\n      Object.defineProperty(type._store, \"validated\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: 0\n      });\n      Object.defineProperty(type, \"_debugInfo\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: null\n      });\n      Object.freeze && (Object.freeze(type.props), Object.freeze(type));\n      return type;\n    }\n    function cloneAndReplaceKey(oldElement, newKey) {\n      newKey = ReactElement(\n        oldElement.type,\n        newKey,\n        void 0,\n        void 0,\n        oldElement._owner,\n        oldElement.props\n      );\n      newKey._store.validated = oldElement._store.validated;\n      return newKey;\n    }\n    function validateChildKeys(node, parentType) {\n      if (\n        \"object\" === typeof node &&\n        node &&\n        node.$$typeof !== REACT_CLIENT_REFERENCE\n      )\n        if (isArrayImpl(node))\n          for (var i = 0; i < node.length; i++) {\n            var child = node[i];\n            isValidElement(child) && validateExplicitKey(child, parentType);\n          }\n        else if (isValidElement(node))\n          node._store && (node._store.validated = 1);\n        else if (\n          ((i = getIteratorFn(node)),\n          \"function\" === typeof i &&\n            i !== node.entries &&\n            ((i = i.call(node)), i !== node))\n        )\n          for (; !(node = i.next()).done; )\n            isValidElement(node.value) &&\n              validateExplicitKey(node.value, parentType);\n    }\n    function isValidElement(object) {\n      return (\n        \"object\" === typeof object &&\n        null !== object &&\n        object.$$typeof === REACT_ELEMENT_TYPE\n      );\n    }\n    function validateExplicitKey(element, parentType) {\n      if (\n        element._store &&\n        !element._store.validated &&\n        null == element.key &&\n        ((element._store.validated = 1),\n        (parentType = getCurrentComponentErrorInfo(parentType)),\n        !ownerHasKeyUseWarning[parentType])\n      ) {\n        ownerHasKeyUseWarning[parentType] = !0;\n        var childOwner = \"\";\n        element &&\n          null != element._owner &&\n          element._owner !== getOwner() &&\n          ((childOwner = null),\n          \"number\" === typeof element._owner.tag\n            ? (childOwner = getComponentNameFromType(element._owner.type))\n            : \"string\" === typeof element._owner.name &&\n              (childOwner = element._owner.name),\n          (childOwner = \" It was passed a child from \" + childOwner + \".\"));\n        var prevGetCurrentStack = ReactSharedInternals.getCurrentStack;\n        ReactSharedInternals.getCurrentStack = function () {\n          var stack = describeUnknownElementTypeFrameInDEV(element.type);\n          prevGetCurrentStack && (stack += prevGetCurrentStack() || \"\");\n          return stack;\n        };\n        console.error(\n          'Each child in a list should have a unique \"key\" prop.%s%s See https://react.dev/link/warning-keys for more information.',\n          parentType,\n          childOwner\n        );\n        ReactSharedInternals.getCurrentStack = prevGetCurrentStack;\n      }\n    }\n    function getCurrentComponentErrorInfo(parentType) {\n      var info = \"\",\n        owner = getOwner();\n      owner &&\n        (owner = getComponentNameFromType(owner.type)) &&\n        (info = \"\\n\\nCheck the render method of `\" + owner + \"`.\");\n      info ||\n        ((parentType = getComponentNameFromType(parentType)) &&\n          (info =\n            \"\\n\\nCheck the top-level render call using <\" + parentType + \">.\"));\n      return info;\n    }\n    function escape(key) {\n      var escaperLookup = { \"=\": \"=0\", \":\": \"=2\" };\n      return (\n        \"$\" +\n        key.replace(/[=:]/g, function (match) {\n          return escaperLookup[match];\n        })\n      );\n    }\n    function getElementKey(element, index) {\n      return \"object\" === typeof element &&\n        null !== element &&\n        null != element.key\n        ? (checkKeyStringCoercion(element.key), escape(\"\" + element.key))\n        : index.toString(36);\n    }\n    function noop$1() {}\n    function resolveThenable(thenable) {\n      switch (thenable.status) {\n        case \"fulfilled\":\n          return thenable.value;\n        case \"rejected\":\n          throw thenable.reason;\n        default:\n          switch (\n            (\"string\" === typeof thenable.status\n              ? thenable.then(noop$1, noop$1)\n              : ((thenable.status = \"pending\"),\n                thenable.then(\n                  function (fulfilledValue) {\n                    \"pending\" === thenable.status &&\n                      ((thenable.status = \"fulfilled\"),\n                      (thenable.value = fulfilledValue));\n                  },\n                  function (error) {\n                    \"pending\" === thenable.status &&\n                      ((thenable.status = \"rejected\"),\n                      (thenable.reason = error));\n                  }\n                )),\n            thenable.status)\n          ) {\n            case \"fulfilled\":\n              return thenable.value;\n            case \"rejected\":\n              throw thenable.reason;\n          }\n      }\n      throw thenable;\n    }\n    function mapIntoArray(children, array, escapedPrefix, nameSoFar, callback) {\n      var type = typeof children;\n      if (\"undefined\" === type || \"boolean\" === type) children = null;\n      var invokeCallback = !1;\n      if (null === children) invokeCallback = !0;\n      else\n        switch (type) {\n          case \"bigint\":\n          case \"string\":\n          case \"number\":\n            invokeCallback = !0;\n            break;\n          case \"object\":\n            switch (children.$$typeof) {\n              case REACT_ELEMENT_TYPE:\n              case REACT_PORTAL_TYPE:\n                invokeCallback = !0;\n                break;\n              case REACT_LAZY_TYPE:\n                return (\n                  (invokeCallback = children._init),\n                  mapIntoArray(\n                    invokeCallback(children._payload),\n                    array,\n                    escapedPrefix,\n                    nameSoFar,\n                    callback\n                  )\n                );\n            }\n        }\n      if (invokeCallback) {\n        invokeCallback = children;\n        callback = callback(invokeCallback);\n        var childKey =\n          \"\" === nameSoFar ? \".\" + getElementKey(invokeCallback, 0) : nameSoFar;\n        isArrayImpl(callback)\n          ? ((escapedPrefix = \"\"),\n            null != childKey &&\n              (escapedPrefix =\n                childKey.replace(userProvidedKeyEscapeRegex, \"$&/\") + \"/\"),\n            mapIntoArray(callback, array, escapedPrefix, \"\", function (c) {\n              return c;\n            }))\n          : null != callback &&\n            (isValidElement(callback) &&\n              (null != callback.key &&\n                ((invokeCallback && invokeCallback.key === callback.key) ||\n                  checkKeyStringCoercion(callback.key)),\n              (escapedPrefix = cloneAndReplaceKey(\n                callback,\n                escapedPrefix +\n                  (null == callback.key ||\n                  (invokeCallback && invokeCallback.key === callback.key)\n                    ? \"\"\n                    : (\"\" + callback.key).replace(\n                        userProvidedKeyEscapeRegex,\n                        \"$&/\"\n                      ) + \"/\") +\n                  childKey\n              )),\n              \"\" !== nameSoFar &&\n                null != invokeCallback &&\n                isValidElement(invokeCallback) &&\n                null == invokeCallback.key &&\n                invokeCallback._store &&\n                !invokeCallback._store.validated &&\n                (escapedPrefix._store.validated = 2),\n              (callback = escapedPrefix)),\n            array.push(callback));\n        return 1;\n      }\n      invokeCallback = 0;\n      childKey = \"\" === nameSoFar ? \".\" : nameSoFar + \":\";\n      if (isArrayImpl(children))\n        for (var i = 0; i < children.length; i++)\n          (nameSoFar = children[i]),\n            (type = childKey + getElementKey(nameSoFar, i)),\n            (invokeCallback += mapIntoArray(\n              nameSoFar,\n              array,\n              escapedPrefix,\n              type,\n              callback\n            ));\n      else if (((i = getIteratorFn(children)), \"function\" === typeof i))\n        for (\n          i === children.entries &&\n            (didWarnAboutMaps ||\n              console.warn(\n                \"Using Maps as children is not supported. Use an array of keyed ReactElements instead.\"\n              ),\n            (didWarnAboutMaps = !0)),\n            children = i.call(children),\n            i = 0;\n          !(nameSoFar = children.next()).done;\n\n        )\n          (nameSoFar = nameSoFar.value),\n            (type = childKey + getElementKey(nameSoFar, i++)),\n            (invokeCallback += mapIntoArray(\n              nameSoFar,\n              array,\n              escapedPrefix,\n              type,\n              callback\n            ));\n      else if (\"object\" === type) {\n        if (\"function\" === typeof children.then)\n          return mapIntoArray(\n            resolveThenable(children),\n            array,\n            escapedPrefix,\n            nameSoFar,\n            callback\n          );\n        array = String(children);\n        throw Error(\n          \"Objects are not valid as a React child (found: \" +\n            (\"[object Object]\" === array\n              ? \"object with keys {\" + Object.keys(children).join(\", \") + \"}\"\n              : array) +\n            \"). If you meant to render a collection of children, use an array instead.\"\n        );\n      }\n      return invokeCallback;\n    }\n    function mapChildren(children, func, context) {\n      if (null == children) return children;\n      var result = [],\n        count = 0;\n      mapIntoArray(children, result, \"\", \"\", function (child) {\n        return func.call(context, child, count++);\n      });\n      return result;\n    }\n    function lazyInitializer(payload) {\n      if (-1 === payload._status) {\n        var ctor = payload._result;\n        ctor = ctor();\n        ctor.then(\n          function (moduleObject) {\n            if (0 === payload._status || -1 === payload._status)\n              (payload._status = 1), (payload._result = moduleObject);\n          },\n          function (error) {\n            if (0 === payload._status || -1 === payload._status)\n              (payload._status = 2), (payload._result = error);\n          }\n        );\n        -1 === payload._status &&\n          ((payload._status = 0), (payload._result = ctor));\n      }\n      if (1 === payload._status)\n        return (\n          (ctor = payload._result),\n          void 0 === ctor &&\n            console.error(\n              \"lazy: Expected the result of a dynamic import() call. Instead received: %s\\n\\nYour code should look like: \\n  const MyComponent = lazy(() => import('./MyComponent'))\\n\\nDid you accidentally put curly braces around the import?\",\n              ctor\n            ),\n          \"default\" in ctor ||\n            console.error(\n              \"lazy: Expected the result of a dynamic import() call. Instead received: %s\\n\\nYour code should look like: \\n  const MyComponent = lazy(() => import('./MyComponent'))\",\n              ctor\n            ),\n          ctor.default\n        );\n      throw payload._result;\n    }\n    function resolveDispatcher() {\n      var dispatcher = ReactSharedInternals.H;\n      null === dispatcher &&\n        console.error(\n          \"Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:\\n1. You might have mismatching versions of React and the renderer (such as React DOM)\\n2. You might be breaking the Rules of Hooks\\n3. You might have more than one copy of React in the same app\\nSee https://react.dev/link/invalid-hook-call for tips about how to debug and fix this problem.\"\n        );\n      return dispatcher;\n    }\n    function noop() {}\n    function enqueueTask(task) {\n      if (null === enqueueTaskImpl)\n        try {\n          var requireString = (\"require\" + Math.random()).slice(0, 7);\n          enqueueTaskImpl = (module && module[requireString]).call(\n            module,\n            \"timers\"\n          ).setImmediate;\n        } catch (_err) {\n          enqueueTaskImpl = function (callback) {\n            !1 === didWarnAboutMessageChannel &&\n              ((didWarnAboutMessageChannel = !0),\n              \"undefined\" === typeof MessageChannel &&\n                console.error(\n                  \"This browser does not have a MessageChannel implementation, so enqueuing tasks via await act(async () => ...) will fail. Please file an issue at https://github.com/facebook/react/issues if you encounter this warning.\"\n                ));\n            var channel = new MessageChannel();\n            channel.port1.onmessage = callback;\n            channel.port2.postMessage(void 0);\n          };\n        }\n      return enqueueTaskImpl(task);\n    }\n    function aggregateErrors(errors) {\n      return 1 < errors.length && \"function\" === typeof AggregateError\n        ? new AggregateError(errors)\n        : errors[0];\n    }\n    function popActScope(prevActQueue, prevActScopeDepth) {\n      prevActScopeDepth !== actScopeDepth - 1 &&\n        console.error(\n          \"You seem to have overlapping act() calls, this is not supported. Be sure to await previous act() calls before making a new one. \"\n        );\n      actScopeDepth = prevActScopeDepth;\n    }\n    function recursivelyFlushAsyncActWork(returnValue, resolve, reject) {\n      var queue = ReactSharedInternals.actQueue;\n      if (null !== queue)\n        if (0 !== queue.length)\n          try {\n            flushActQueue(queue);\n            enqueueTask(function () {\n              return recursivelyFlushAsyncActWork(returnValue, resolve, reject);\n            });\n            return;\n          } catch (error) {\n            ReactSharedInternals.thrownErrors.push(error);\n          }\n        else ReactSharedInternals.actQueue = null;\n      0 < ReactSharedInternals.thrownErrors.length\n        ? ((queue = aggregateErrors(ReactSharedInternals.thrownErrors)),\n          (ReactSharedInternals.thrownErrors.length = 0),\n          reject(queue))\n        : resolve(returnValue);\n    }\n    function flushActQueue(queue) {\n      if (!isFlushing) {\n        isFlushing = !0;\n        var i = 0;\n        try {\n          for (; i < queue.length; i++) {\n            var callback = queue[i];\n            do {\n              ReactSharedInternals.didUsePromise = !1;\n              var continuation = callback(!1);\n              if (null !== continuation) {\n                if (ReactSharedInternals.didUsePromise) {\n                  queue[i] = callback;\n                  queue.splice(0, i);\n                  return;\n                }\n                callback = continuation;\n              } else break;\n            } while (1);\n          }\n          queue.length = 0;\n        } catch (error) {\n          queue.splice(0, i + 1), ReactSharedInternals.thrownErrors.push(error);\n        } finally {\n          isFlushing = !1;\n        }\n      }\n    }\n    \"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&\n      \"function\" ===\n        typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart &&\n      __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());\n    var REACT_ELEMENT_TYPE = Symbol.for(\"react.transitional.element\"),\n      REACT_PORTAL_TYPE = Symbol.for(\"react.portal\"),\n      REACT_FRAGMENT_TYPE = Symbol.for(\"react.fragment\"),\n      REACT_STRICT_MODE_TYPE = Symbol.for(\"react.strict_mode\"),\n      REACT_PROFILER_TYPE = Symbol.for(\"react.profiler\");\n    Symbol.for(\"react.provider\");\n    var REACT_CONSUMER_TYPE = Symbol.for(\"react.consumer\"),\n      REACT_CONTEXT_TYPE = Symbol.for(\"react.context\"),\n      REACT_FORWARD_REF_TYPE = Symbol.for(\"react.forward_ref\"),\n      REACT_SUSPENSE_TYPE = Symbol.for(\"react.suspense\"),\n      REACT_SUSPENSE_LIST_TYPE = Symbol.for(\"react.suspense_list\"),\n      REACT_MEMO_TYPE = Symbol.for(\"react.memo\"),\n      REACT_LAZY_TYPE = Symbol.for(\"react.lazy\"),\n      REACT_OFFSCREEN_TYPE = Symbol.for(\"react.offscreen\"),\n      MAYBE_ITERATOR_SYMBOL = Symbol.iterator,\n      didWarnStateUpdateForUnmountedComponent = {},\n      ReactNoopUpdateQueue = {\n        isMounted: function () {\n          return !1;\n        },\n        enqueueForceUpdate: function (publicInstance) {\n          warnNoop(publicInstance, \"forceUpdate\");\n        },\n        enqueueReplaceState: function (publicInstance) {\n          warnNoop(publicInstance, \"replaceState\");\n        },\n        enqueueSetState: function (publicInstance) {\n          warnNoop(publicInstance, \"setState\");\n        }\n      },\n      assign = Object.assign,\n      emptyObject = {};\n    Object.freeze(emptyObject);\n    Component.prototype.isReactComponent = {};\n    Component.prototype.setState = function (partialState, callback) {\n      if (\n        \"object\" !== typeof partialState &&\n        \"function\" !== typeof partialState &&\n        null != partialState\n      )\n        throw Error(\n          \"takes an object of state variables to update or a function which returns an object of state variables.\"\n        );\n      this.updater.enqueueSetState(this, partialState, callback, \"setState\");\n    };\n    Component.prototype.forceUpdate = function (callback) {\n      this.updater.enqueueForceUpdate(this, callback, \"forceUpdate\");\n    };\n    var deprecatedAPIs = {\n        isMounted: [\n          \"isMounted\",\n          \"Instead, make sure to clean up subscriptions and pending requests in componentWillUnmount to prevent memory leaks.\"\n        ],\n        replaceState: [\n          \"replaceState\",\n          \"Refactor your code to use setState instead (see https://github.com/facebook/react/issues/3236).\"\n        ]\n      },\n      fnName;\n    for (fnName in deprecatedAPIs)\n      deprecatedAPIs.hasOwnProperty(fnName) &&\n        defineDeprecationWarning(fnName, deprecatedAPIs[fnName]);\n    ComponentDummy.prototype = Component.prototype;\n    deprecatedAPIs = PureComponent.prototype = new ComponentDummy();\n    deprecatedAPIs.constructor = PureComponent;\n    assign(deprecatedAPIs, Component.prototype);\n    deprecatedAPIs.isPureReactComponent = !0;\n    var isArrayImpl = Array.isArray,\n      REACT_CLIENT_REFERENCE$2 = Symbol.for(\"react.client.reference\"),\n      ReactSharedInternals = {\n        H: null,\n        A: null,\n        T: null,\n        S: null,\n        actQueue: null,\n        isBatchingLegacy: !1,\n        didScheduleLegacyUpdate: !1,\n        didUsePromise: !1,\n        thrownErrors: [],\n        getCurrentStack: null\n      },\n      hasOwnProperty = Object.prototype.hasOwnProperty,\n      REACT_CLIENT_REFERENCE$1 = Symbol.for(\"react.client.reference\"),\n      disabledDepth = 0,\n      prevLog,\n      prevInfo,\n      prevWarn,\n      prevError,\n      prevGroup,\n      prevGroupCollapsed,\n      prevGroupEnd;\n    disabledLog.__reactDisabledLog = !0;\n    var prefix,\n      suffix,\n      reentry = !1;\n    var componentFrameCache = new (\n      \"function\" === typeof WeakMap ? WeakMap : Map\n    )();\n    var REACT_CLIENT_REFERENCE = Symbol.for(\"react.client.reference\"),\n      specialPropKeyWarningShown,\n      didWarnAboutOldJSXRuntime;\n    var didWarnAboutElementRef = {};\n    var ownerHasKeyUseWarning = {},\n      didWarnAboutMaps = !1,\n      userProvidedKeyEscapeRegex = /\\/+/g,\n      reportGlobalError =\n        \"function\" === typeof reportError\n          ? reportError\n          : function (error) {\n              if (\n                \"object\" === typeof window &&\n                \"function\" === typeof window.ErrorEvent\n              ) {\n                var event = new window.ErrorEvent(\"error\", {\n                  bubbles: !0,\n                  cancelable: !0,\n                  message:\n                    \"object\" === typeof error &&\n                    null !== error &&\n                    \"string\" === typeof error.message\n                      ? String(error.message)\n                      : String(error),\n                  error: error\n                });\n                if (!window.dispatchEvent(event)) return;\n              } else if (\n                \"object\" === typeof process &&\n                \"function\" === typeof process.emit\n              ) {\n                process.emit(\"uncaughtException\", error);\n                return;\n              }\n              console.error(error);\n            },\n      didWarnAboutMessageChannel = !1,\n      enqueueTaskImpl = null,\n      actScopeDepth = 0,\n      didWarnNoAwaitAct = !1,\n      isFlushing = !1,\n      queueSeveralMicrotasks =\n        \"function\" === typeof queueMicrotask\n          ? function (callback) {\n              queueMicrotask(function () {\n                return queueMicrotask(callback);\n              });\n            }\n          : enqueueTask;\n    exports.Children = {\n      map: mapChildren,\n      forEach: function (children, forEachFunc, forEachContext) {\n        mapChildren(\n          children,\n          function () {\n            forEachFunc.apply(this, arguments);\n          },\n          forEachContext\n        );\n      },\n      count: function (children) {\n        var n = 0;\n        mapChildren(children, function () {\n          n++;\n        });\n        return n;\n      },\n      toArray: function (children) {\n        return (\n          mapChildren(children, function (child) {\n            return child;\n          }) || []\n        );\n      },\n      only: function (children) {\n        if (!isValidElement(children))\n          throw Error(\n            \"React.Children.only expected to receive a single React element child.\"\n          );\n        return children;\n      }\n    };\n    exports.Component = Component;\n    exports.Fragment = REACT_FRAGMENT_TYPE;\n    exports.Profiler = REACT_PROFILER_TYPE;\n    exports.PureComponent = PureComponent;\n    exports.StrictMode = REACT_STRICT_MODE_TYPE;\n    exports.Suspense = REACT_SUSPENSE_TYPE;\n    exports.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE =\n      ReactSharedInternals;\n    exports.act = function (callback) {\n      var prevActQueue = ReactSharedInternals.actQueue,\n        prevActScopeDepth = actScopeDepth;\n      actScopeDepth++;\n      var queue = (ReactSharedInternals.actQueue =\n          null !== prevActQueue ? prevActQueue : []),\n        didAwaitActCall = !1;\n      try {\n        var result = callback();\n      } catch (error) {\n        ReactSharedInternals.thrownErrors.push(error);\n      }\n      if (0 < ReactSharedInternals.thrownErrors.length)\n        throw (\n          (popActScope(prevActQueue, prevActScopeDepth),\n          (callback = aggregateErrors(ReactSharedInternals.thrownErrors)),\n          (ReactSharedInternals.thrownErrors.length = 0),\n          callback)\n        );\n      if (\n        null !== result &&\n        \"object\" === typeof result &&\n        \"function\" === typeof result.then\n      ) {\n        var thenable = result;\n        queueSeveralMicrotasks(function () {\n          didAwaitActCall ||\n            didWarnNoAwaitAct ||\n            ((didWarnNoAwaitAct = !0),\n            console.error(\n              \"You called act(async () => ...) without await. This could lead to unexpected testing behaviour, interleaving multiple act calls and mixing their scopes. You should - await act(async () => ...);\"\n            ));\n        });\n        return {\n          then: function (resolve, reject) {\n            didAwaitActCall = !0;\n            thenable.then(\n              function (returnValue) {\n                popActScope(prevActQueue, prevActScopeDepth);\n                if (0 === prevActScopeDepth) {\n                  try {\n                    flushActQueue(queue),\n                      enqueueTask(function () {\n                        return recursivelyFlushAsyncActWork(\n                          returnValue,\n                          resolve,\n                          reject\n                        );\n                      });\n                  } catch (error$2) {\n                    ReactSharedInternals.thrownErrors.push(error$2);\n                  }\n                  if (0 < ReactSharedInternals.thrownErrors.length) {\n                    var _thrownError = aggregateErrors(\n                      ReactSharedInternals.thrownErrors\n                    );\n                    ReactSharedInternals.thrownErrors.length = 0;\n                    reject(_thrownError);\n                  }\n                } else resolve(returnValue);\n              },\n              function (error) {\n                popActScope(prevActQueue, prevActScopeDepth);\n                0 < ReactSharedInternals.thrownErrors.length\n                  ? ((error = aggregateErrors(\n                      ReactSharedInternals.thrownErrors\n                    )),\n                    (ReactSharedInternals.thrownErrors.length = 0),\n                    reject(error))\n                  : reject(error);\n              }\n            );\n          }\n        };\n      }\n      var returnValue$jscomp$0 = result;\n      popActScope(prevActQueue, prevActScopeDepth);\n      0 === prevActScopeDepth &&\n        (flushActQueue(queue),\n        0 !== queue.length &&\n          queueSeveralMicrotasks(function () {\n            didAwaitActCall ||\n              didWarnNoAwaitAct ||\n              ((didWarnNoAwaitAct = !0),\n              console.error(\n                \"A component suspended inside an `act` scope, but the `act` call was not awaited. When testing React components that depend on asynchronous data, you must await the result:\\n\\nawait act(() => ...)\"\n              ));\n          }),\n        (ReactSharedInternals.actQueue = null));\n      if (0 < ReactSharedInternals.thrownErrors.length)\n        throw (\n          ((callback = aggregateErrors(ReactSharedInternals.thrownErrors)),\n          (ReactSharedInternals.thrownErrors.length = 0),\n          callback)\n        );\n      return {\n        then: function (resolve, reject) {\n          didAwaitActCall = !0;\n          0 === prevActScopeDepth\n            ? ((ReactSharedInternals.actQueue = queue),\n              enqueueTask(function () {\n                return recursivelyFlushAsyncActWork(\n                  returnValue$jscomp$0,\n                  resolve,\n                  reject\n                );\n              }))\n            : resolve(returnValue$jscomp$0);\n        }\n      };\n    };\n    exports.cache = function (fn) {\n      return function () {\n        return fn.apply(null, arguments);\n      };\n    };\n    exports.cloneElement = function (element, config, children) {\n      if (null === element || void 0 === element)\n        throw Error(\n          \"The argument must be a React element, but you passed \" +\n            element +\n            \".\"\n        );\n      var props = assign({}, element.props),\n        key = element.key,\n        owner = element._owner;\n      if (null != config) {\n        var JSCompiler_inline_result;\n        a: {\n          if (\n            hasOwnProperty.call(config, \"ref\") &&\n            (JSCompiler_inline_result = Object.getOwnPropertyDescriptor(\n              config,\n              \"ref\"\n            ).get) &&\n            JSCompiler_inline_result.isReactWarning\n          ) {\n            JSCompiler_inline_result = !1;\n            break a;\n          }\n          JSCompiler_inline_result = void 0 !== config.ref;\n        }\n        JSCompiler_inline_result && (owner = getOwner());\n        hasValidKey(config) &&\n          (checkKeyStringCoercion(config.key), (key = \"\" + config.key));\n        for (propName in config)\n          !hasOwnProperty.call(config, propName) ||\n            \"key\" === propName ||\n            \"__self\" === propName ||\n            \"__source\" === propName ||\n            (\"ref\" === propName && void 0 === config.ref) ||\n            (props[propName] = config[propName]);\n      }\n      var propName = arguments.length - 2;\n      if (1 === propName) props.children = children;\n      else if (1 < propName) {\n        JSCompiler_inline_result = Array(propName);\n        for (var i = 0; i < propName; i++)\n          JSCompiler_inline_result[i] = arguments[i + 2];\n        props.children = JSCompiler_inline_result;\n      }\n      props = ReactElement(element.type, key, void 0, void 0, owner, props);\n      for (key = 2; key < arguments.length; key++)\n        validateChildKeys(arguments[key], props.type);\n      return props;\n    };\n    exports.createContext = function (defaultValue) {\n      defaultValue = {\n        $$typeof: REACT_CONTEXT_TYPE,\n        _currentValue: defaultValue,\n        _currentValue2: defaultValue,\n        _threadCount: 0,\n        Provider: null,\n        Consumer: null\n      };\n      defaultValue.Provider = defaultValue;\n      defaultValue.Consumer = {\n        $$typeof: REACT_CONSUMER_TYPE,\n        _context: defaultValue\n      };\n      defaultValue._currentRenderer = null;\n      defaultValue._currentRenderer2 = null;\n      return defaultValue;\n    };\n    exports.createElement = function (type, config, children) {\n      if (isValidElementType(type))\n        for (var i = 2; i < arguments.length; i++)\n          validateChildKeys(arguments[i], type);\n      else {\n        i = \"\";\n        if (\n          void 0 === type ||\n          (\"object\" === typeof type &&\n            null !== type &&\n            0 === Object.keys(type).length)\n        )\n          i +=\n            \" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.\";\n        if (null === type) var typeString = \"null\";\n        else\n          isArrayImpl(type)\n            ? (typeString = \"array\")\n            : void 0 !== type && type.$$typeof === REACT_ELEMENT_TYPE\n              ? ((typeString =\n                  \"<\" +\n                  (getComponentNameFromType(type.type) || \"Unknown\") +\n                  \" />\"),\n                (i =\n                  \" Did you accidentally export a JSX literal instead of a component?\"))\n              : (typeString = typeof type);\n        console.error(\n          \"React.createElement: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s\",\n          typeString,\n          i\n        );\n      }\n      var propName;\n      i = {};\n      typeString = null;\n      if (null != config)\n        for (propName in (didWarnAboutOldJSXRuntime ||\n          !(\"__self\" in config) ||\n          \"key\" in config ||\n          ((didWarnAboutOldJSXRuntime = !0),\n          console.warn(\n            \"Your app (or one of its dependencies) is using an outdated JSX transform. Update to the modern JSX transform for faster performance: https://react.dev/link/new-jsx-transform\"\n          )),\n        hasValidKey(config) &&\n          (checkKeyStringCoercion(config.key), (typeString = \"\" + config.key)),\n        config))\n          hasOwnProperty.call(config, propName) &&\n            \"key\" !== propName &&\n            \"__self\" !== propName &&\n            \"__source\" !== propName &&\n            (i[propName] = config[propName]);\n      var childrenLength = arguments.length - 2;\n      if (1 === childrenLength) i.children = children;\n      else if (1 < childrenLength) {\n        for (\n          var childArray = Array(childrenLength), _i = 0;\n          _i < childrenLength;\n          _i++\n        )\n          childArray[_i] = arguments[_i + 2];\n        Object.freeze && Object.freeze(childArray);\n        i.children = childArray;\n      }\n      if (type && type.defaultProps)\n        for (propName in ((childrenLength = type.defaultProps), childrenLength))\n          void 0 === i[propName] && (i[propName] = childrenLength[propName]);\n      typeString &&\n        defineKeyPropWarningGetter(\n          i,\n          \"function\" === typeof type\n            ? type.displayName || type.name || \"Unknown\"\n            : type\n        );\n      return ReactElement(type, typeString, void 0, void 0, getOwner(), i);\n    };\n    exports.createRef = function () {\n      var refObject = { current: null };\n      Object.seal(refObject);\n      return refObject;\n    };\n    exports.forwardRef = function (render) {\n      null != render && render.$$typeof === REACT_MEMO_TYPE\n        ? console.error(\n            \"forwardRef requires a render function but received a `memo` component. Instead of forwardRef(memo(...)), use memo(forwardRef(...)).\"\n          )\n        : \"function\" !== typeof render\n          ? console.error(\n              \"forwardRef requires a render function but was given %s.\",\n              null === render ? \"null\" : typeof render\n            )\n          : 0 !== render.length &&\n            2 !== render.length &&\n            console.error(\n              \"forwardRef render functions accept exactly two parameters: props and ref. %s\",\n              1 === render.length\n                ? \"Did you forget to use the ref parameter?\"\n                : \"Any additional parameter will be undefined.\"\n            );\n      null != render &&\n        null != render.defaultProps &&\n        console.error(\n          \"forwardRef render functions do not support defaultProps. Did you accidentally pass a React component?\"\n        );\n      var elementType = { $$typeof: REACT_FORWARD_REF_TYPE, render: render },\n        ownName;\n      Object.defineProperty(elementType, \"displayName\", {\n        enumerable: !1,\n        configurable: !0,\n        get: function () {\n          return ownName;\n        },\n        set: function (name) {\n          ownName = name;\n          render.name ||\n            render.displayName ||\n            (Object.defineProperty(render, \"name\", { value: name }),\n            (render.displayName = name));\n        }\n      });\n      return elementType;\n    };\n    exports.isValidElement = isValidElement;\n    exports.lazy = function (ctor) {\n      return {\n        $$typeof: REACT_LAZY_TYPE,\n        _payload: { _status: -1, _result: ctor },\n        _init: lazyInitializer\n      };\n    };\n    exports.memo = function (type, compare) {\n      isValidElementType(type) ||\n        console.error(\n          \"memo: The first argument must be a component. Instead received: %s\",\n          null === type ? \"null\" : typeof type\n        );\n      compare = {\n        $$typeof: REACT_MEMO_TYPE,\n        type: type,\n        compare: void 0 === compare ? null : compare\n      };\n      var ownName;\n      Object.defineProperty(compare, \"displayName\", {\n        enumerable: !1,\n        configurable: !0,\n        get: function () {\n          return ownName;\n        },\n        set: function (name) {\n          ownName = name;\n          type.name ||\n            type.displayName ||\n            (Object.defineProperty(type, \"name\", { value: name }),\n            (type.displayName = name));\n        }\n      });\n      return compare;\n    };\n    exports.startTransition = function (scope) {\n      var prevTransition = ReactSharedInternals.T,\n        currentTransition = {};\n      ReactSharedInternals.T = currentTransition;\n      currentTransition._updatedFibers = new Set();\n      try {\n        var returnValue = scope(),\n          onStartTransitionFinish = ReactSharedInternals.S;\n        null !== onStartTransitionFinish &&\n          onStartTransitionFinish(currentTransition, returnValue);\n        \"object\" === typeof returnValue &&\n          null !== returnValue &&\n          \"function\" === typeof returnValue.then &&\n          returnValue.then(noop, reportGlobalError);\n      } catch (error) {\n        reportGlobalError(error);\n      } finally {\n        null === prevTransition &&\n          currentTransition._updatedFibers &&\n          ((scope = currentTransition._updatedFibers.size),\n          currentTransition._updatedFibers.clear(),\n          10 < scope &&\n            console.warn(\n              \"Detected a large number of updates inside startTransition. If this is due to a subscription please re-write it to use React provided hooks. Otherwise concurrent mode guarantees are off the table.\"\n            )),\n          (ReactSharedInternals.T = prevTransition);\n      }\n    };\n    exports.unstable_useCacheRefresh = function () {\n      return resolveDispatcher().useCacheRefresh();\n    };\n    exports.use = function (usable) {\n      return resolveDispatcher().use(usable);\n    };\n    exports.useActionState = function (action, initialState, permalink) {\n      return resolveDispatcher().useActionState(\n        action,\n        initialState,\n        permalink\n      );\n    };\n    exports.useCallback = function (callback, deps) {\n      return resolveDispatcher().useCallback(callback, deps);\n    };\n    exports.useContext = function (Context) {\n      var dispatcher = resolveDispatcher();\n      Context.$$typeof === REACT_CONSUMER_TYPE &&\n        console.error(\n          \"Calling useContext(Context.Consumer) is not supported and will cause bugs. Did you mean to call useContext(Context) instead?\"\n        );\n      return dispatcher.useContext(Context);\n    };\n    exports.useDebugValue = function (value, formatterFn) {\n      return resolveDispatcher().useDebugValue(value, formatterFn);\n    };\n    exports.useDeferredValue = function (value, initialValue) {\n      return resolveDispatcher().useDeferredValue(value, initialValue);\n    };\n    exports.useEffect = function (create, deps) {\n      return resolveDispatcher().useEffect(create, deps);\n    };\n    exports.useId = function () {\n      return resolveDispatcher().useId();\n    };\n    exports.useImperativeHandle = function (ref, create, deps) {\n      return resolveDispatcher().useImperativeHandle(ref, create, deps);\n    };\n    exports.useInsertionEffect = function (create, deps) {\n      return resolveDispatcher().useInsertionEffect(create, deps);\n    };\n    exports.useLayoutEffect = function (create, deps) {\n      return resolveDispatcher().useLayoutEffect(create, deps);\n    };\n    exports.useMemo = function (create, deps) {\n      return resolveDispatcher().useMemo(create, deps);\n    };\n    exports.useOptimistic = function (passthrough, reducer) {\n      return resolveDispatcher().useOptimistic(passthrough, reducer);\n    };\n    exports.useReducer = function (reducer, initialArg, init) {\n      return resolveDispatcher().useReducer(reducer, initialArg, init);\n    };\n    exports.useRef = function (initialValue) {\n      return resolveDispatcher().useRef(initialValue);\n    };\n    exports.useState = function (initialState) {\n      return resolveDispatcher().useState(initialState);\n    };\n    exports.useSyncExternalStore = function (\n      subscribe,\n      getSnapshot,\n      getServerSnapshot\n    ) {\n      return resolveDispatcher().useSyncExternalStore(\n        subscribe,\n        getSnapshot,\n        getServerSnapshot\n      );\n    };\n    exports.useTransition = function () {\n      return resolveDispatcher().useTransition();\n    };\n    exports.version = \"19.0.0\";\n    \"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&\n      \"function\" ===\n        typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop &&\n      __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error());\n  })();\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react.production.js');\n} else {\n  module.exports = require('./cjs/react.development.js');\n}\n","/**\n * @license React\n * react-jsx-runtime.development.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\n\"production\" !== process.env.NODE_ENV &&\n  (function () {\n    function getComponentNameFromType(type) {\n      if (null == type) return null;\n      if (\"function\" === typeof type)\n        return type.$$typeof === REACT_CLIENT_REFERENCE$2\n          ? null\n          : type.displayName || type.name || null;\n      if (\"string\" === typeof type) return type;\n      switch (type) {\n        case REACT_FRAGMENT_TYPE:\n          return \"Fragment\";\n        case REACT_PORTAL_TYPE:\n          return \"Portal\";\n        case REACT_PROFILER_TYPE:\n          return \"Profiler\";\n        case REACT_STRICT_MODE_TYPE:\n          return \"StrictMode\";\n        case REACT_SUSPENSE_TYPE:\n          return \"Suspense\";\n        case REACT_SUSPENSE_LIST_TYPE:\n          return \"SuspenseList\";\n      }\n      if (\"object\" === typeof type)\n        switch (\n          (\"number\" === typeof type.tag &&\n            console.error(\n              \"Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue.\"\n            ),\n          type.$$typeof)\n        ) {\n          case REACT_CONTEXT_TYPE:\n            return (type.displayName || \"Context\") + \".Provider\";\n          case REACT_CONSUMER_TYPE:\n            return (type._context.displayName || \"Context\") + \".Consumer\";\n          case REACT_FORWARD_REF_TYPE:\n            var innerType = type.render;\n            type = type.displayName;\n            type ||\n              ((type = innerType.displayName || innerType.name || \"\"),\n              (type = \"\" !== type ? \"ForwardRef(\" + type + \")\" : \"ForwardRef\"));\n            return type;\n          case REACT_MEMO_TYPE:\n            return (\n              (innerType = type.displayName || null),\n              null !== innerType\n                ? innerType\n                : getComponentNameFromType(type.type) || \"Memo\"\n            );\n          case REACT_LAZY_TYPE:\n            innerType = type._payload;\n            type = type._init;\n            try {\n              return getComponentNameFromType(type(innerType));\n            } catch (x) {}\n        }\n      return null;\n    }\n    function testStringCoercion(value) {\n      return \"\" + value;\n    }\n    function checkKeyStringCoercion(value) {\n      try {\n        testStringCoercion(value);\n        var JSCompiler_inline_result = !1;\n      } catch (e) {\n        JSCompiler_inline_result = !0;\n      }\n      if (JSCompiler_inline_result) {\n        JSCompiler_inline_result = console;\n        var JSCompiler_temp_const = JSCompiler_inline_result.error;\n        var JSCompiler_inline_result$jscomp$0 =\n          (\"function\" === typeof Symbol &&\n            Symbol.toStringTag &&\n            value[Symbol.toStringTag]) ||\n          value.constructor.name ||\n          \"Object\";\n        JSCompiler_temp_const.call(\n          JSCompiler_inline_result,\n          \"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.\",\n          JSCompiler_inline_result$jscomp$0\n        );\n        return testStringCoercion(value);\n      }\n    }\n    function disabledLog() {}\n    function disableLogs() {\n      if (0 === disabledDepth) {\n        prevLog = console.log;\n        prevInfo = console.info;\n        prevWarn = console.warn;\n        prevError = console.error;\n        prevGroup = console.group;\n        prevGroupCollapsed = console.groupCollapsed;\n        prevGroupEnd = console.groupEnd;\n        var props = {\n          configurable: !0,\n          enumerable: !0,\n          value: disabledLog,\n          writable: !0\n        };\n        Object.defineProperties(console, {\n          info: props,\n          log: props,\n          warn: props,\n          error: props,\n          group: props,\n          groupCollapsed: props,\n          groupEnd: props\n        });\n      }\n      disabledDepth++;\n    }\n    function reenableLogs() {\n      disabledDepth--;\n      if (0 === disabledDepth) {\n        var props = { configurable: !0, enumerable: !0, writable: !0 };\n        Object.defineProperties(console, {\n          log: assign({}, props, { value: prevLog }),\n          info: assign({}, props, { value: prevInfo }),\n          warn: assign({}, props, { value: prevWarn }),\n          error: assign({}, props, { value: prevError }),\n          group: assign({}, props, { value: prevGroup }),\n          groupCollapsed: assign({}, props, { value: prevGroupCollapsed }),\n          groupEnd: assign({}, props, { value: prevGroupEnd })\n        });\n      }\n      0 > disabledDepth &&\n        console.error(\n          \"disabledDepth fell below zero. This is a bug in React. Please file an issue.\"\n        );\n    }\n    function describeBuiltInComponentFrame(name) {\n      if (void 0 === prefix)\n        try {\n          throw Error();\n        } catch (x) {\n          var match = x.stack.trim().match(/\\n( *(at )?)/);\n          prefix = (match && match[1]) || \"\";\n          suffix =\n            -1 < x.stack.indexOf(\"\\n    at\")\n              ? \" (<anonymous>)\"\n              : -1 < x.stack.indexOf(\"@\")\n                ? \"@unknown:0:0\"\n                : \"\";\n        }\n      return \"\\n\" + prefix + name + suffix;\n    }\n    function describeNativeComponentFrame(fn, construct) {\n      if (!fn || reentry) return \"\";\n      var frame = componentFrameCache.get(fn);\n      if (void 0 !== frame) return frame;\n      reentry = !0;\n      frame = Error.prepareStackTrace;\n      Error.prepareStackTrace = void 0;\n      var previousDispatcher = null;\n      previousDispatcher = ReactSharedInternals.H;\n      ReactSharedInternals.H = null;\n      disableLogs();\n      try {\n        var RunInRootFrame = {\n          DetermineComponentFrameRoot: function () {\n            try {\n              if (construct) {\n                var Fake = function () {\n                  throw Error();\n                };\n                Object.defineProperty(Fake.prototype, \"props\", {\n                  set: function () {\n                    throw Error();\n                  }\n                });\n                if (\"object\" === typeof Reflect && Reflect.construct) {\n                  try {\n                    Reflect.construct(Fake, []);\n                  } catch (x) {\n                    var control = x;\n                  }\n                  Reflect.construct(fn, [], Fake);\n                } else {\n                  try {\n                    Fake.call();\n                  } catch (x$0) {\n                    control = x$0;\n                  }\n                  fn.call(Fake.prototype);\n                }\n              } else {\n                try {\n                  throw Error();\n                } catch (x$1) {\n                  control = x$1;\n                }\n                (Fake = fn()) &&\n                  \"function\" === typeof Fake.catch &&\n                  Fake.catch(function () {});\n              }\n            } catch (sample) {\n              if (sample && control && \"string\" === typeof sample.stack)\n                return [sample.stack, control.stack];\n            }\n            return [null, null];\n          }\n        };\n        RunInRootFrame.DetermineComponentFrameRoot.displayName =\n          \"DetermineComponentFrameRoot\";\n        var namePropDescriptor = Object.getOwnPropertyDescriptor(\n          RunInRootFrame.DetermineComponentFrameRoot,\n          \"name\"\n        );\n        namePropDescriptor &&\n          namePropDescriptor.configurable &&\n          Object.defineProperty(\n            RunInRootFrame.DetermineComponentFrameRoot,\n            \"name\",\n            { value: \"DetermineComponentFrameRoot\" }\n          );\n        var _RunInRootFrame$Deter =\n            RunInRootFrame.DetermineComponentFrameRoot(),\n          sampleStack = _RunInRootFrame$Deter[0],\n          controlStack = _RunInRootFrame$Deter[1];\n        if (sampleStack && controlStack) {\n          var sampleLines = sampleStack.split(\"\\n\"),\n            controlLines = controlStack.split(\"\\n\");\n          for (\n            _RunInRootFrame$Deter = namePropDescriptor = 0;\n            namePropDescriptor < sampleLines.length &&\n            !sampleLines[namePropDescriptor].includes(\n              \"DetermineComponentFrameRoot\"\n            );\n\n          )\n            namePropDescriptor++;\n          for (\n            ;\n            _RunInRootFrame$Deter < controlLines.length &&\n            !controlLines[_RunInRootFrame$Deter].includes(\n              \"DetermineComponentFrameRoot\"\n            );\n\n          )\n            _RunInRootFrame$Deter++;\n          if (\n            namePropDescriptor === sampleLines.length ||\n            _RunInRootFrame$Deter === controlLines.length\n          )\n            for (\n              namePropDescriptor = sampleLines.length - 1,\n                _RunInRootFrame$Deter = controlLines.length - 1;\n              1 <= namePropDescriptor &&\n              0 <= _RunInRootFrame$Deter &&\n              sampleLines[namePropDescriptor] !==\n                controlLines[_RunInRootFrame$Deter];\n\n            )\n              _RunInRootFrame$Deter--;\n          for (\n            ;\n            1 <= namePropDescriptor && 0 <= _RunInRootFrame$Deter;\n            namePropDescriptor--, _RunInRootFrame$Deter--\n          )\n            if (\n              sampleLines[namePropDescriptor] !==\n              controlLines[_RunInRootFrame$Deter]\n            ) {\n              if (1 !== namePropDescriptor || 1 !== _RunInRootFrame$Deter) {\n                do\n                  if (\n                    (namePropDescriptor--,\n                    _RunInRootFrame$Deter--,\n                    0 > _RunInRootFrame$Deter ||\n                      sampleLines[namePropDescriptor] !==\n                        controlLines[_RunInRootFrame$Deter])\n                  ) {\n                    var _frame =\n                      \"\\n\" +\n                      sampleLines[namePropDescriptor].replace(\n                        \" at new \",\n                        \" at \"\n                      );\n                    fn.displayName &&\n                      _frame.includes(\"<anonymous>\") &&\n                      (_frame = _frame.replace(\"<anonymous>\", fn.displayName));\n                    \"function\" === typeof fn &&\n                      componentFrameCache.set(fn, _frame);\n                    return _frame;\n                  }\n                while (1 <= namePropDescriptor && 0 <= _RunInRootFrame$Deter);\n              }\n              break;\n            }\n        }\n      } finally {\n        (reentry = !1),\n          (ReactSharedInternals.H = previousDispatcher),\n          reenableLogs(),\n          (Error.prepareStackTrace = frame);\n      }\n      sampleLines = (sampleLines = fn ? fn.displayName || fn.name : \"\")\n        ? describeBuiltInComponentFrame(sampleLines)\n        : \"\";\n      \"function\" === typeof fn && componentFrameCache.set(fn, sampleLines);\n      return sampleLines;\n    }\n    function describeUnknownElementTypeFrameInDEV(type) {\n      if (null == type) return \"\";\n      if (\"function\" === typeof type) {\n        var prototype = type.prototype;\n        return describeNativeComponentFrame(\n          type,\n          !(!prototype || !prototype.isReactComponent)\n        );\n      }\n      if (\"string\" === typeof type) return describeBuiltInComponentFrame(type);\n      switch (type) {\n        case REACT_SUSPENSE_TYPE:\n          return describeBuiltInComponentFrame(\"Suspense\");\n        case REACT_SUSPENSE_LIST_TYPE:\n          return describeBuiltInComponentFrame(\"SuspenseList\");\n      }\n      if (\"object\" === typeof type)\n        switch (type.$$typeof) {\n          case REACT_FORWARD_REF_TYPE:\n            return (type = describeNativeComponentFrame(type.render, !1)), type;\n          case REACT_MEMO_TYPE:\n            return describeUnknownElementTypeFrameInDEV(type.type);\n          case REACT_LAZY_TYPE:\n            prototype = type._payload;\n            type = type._init;\n            try {\n              return describeUnknownElementTypeFrameInDEV(type(prototype));\n            } catch (x) {}\n        }\n      return \"\";\n    }\n    function getOwner() {\n      var dispatcher = ReactSharedInternals.A;\n      return null === dispatcher ? null : dispatcher.getOwner();\n    }\n    function hasValidKey(config) {\n      if (hasOwnProperty.call(config, \"key\")) {\n        var getter = Object.getOwnPropertyDescriptor(config, \"key\").get;\n        if (getter && getter.isReactWarning) return !1;\n      }\n      return void 0 !== config.key;\n    }\n    function defineKeyPropWarningGetter(props, displayName) {\n      function warnAboutAccessingKey() {\n        specialPropKeyWarningShown ||\n          ((specialPropKeyWarningShown = !0),\n          console.error(\n            \"%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)\",\n            displayName\n          ));\n      }\n      warnAboutAccessingKey.isReactWarning = !0;\n      Object.defineProperty(props, \"key\", {\n        get: warnAboutAccessingKey,\n        configurable: !0\n      });\n    }\n    function elementRefGetterWithDeprecationWarning() {\n      var componentName = getComponentNameFromType(this.type);\n      didWarnAboutElementRef[componentName] ||\n        ((didWarnAboutElementRef[componentName] = !0),\n        console.error(\n          \"Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.\"\n        ));\n      componentName = this.props.ref;\n      return void 0 !== componentName ? componentName : null;\n    }\n    function ReactElement(type, key, self, source, owner, props) {\n      self = props.ref;\n      type = {\n        $$typeof: REACT_ELEMENT_TYPE,\n        type: type,\n        key: key,\n        props: props,\n        _owner: owner\n      };\n      null !== (void 0 !== self ? self : null)\n        ? Object.defineProperty(type, \"ref\", {\n            enumerable: !1,\n            get: elementRefGetterWithDeprecationWarning\n          })\n        : Object.defineProperty(type, \"ref\", { enumerable: !1, value: null });\n      type._store = {};\n      Object.defineProperty(type._store, \"validated\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: 0\n      });\n      Object.defineProperty(type, \"_debugInfo\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: null\n      });\n      Object.freeze && (Object.freeze(type.props), Object.freeze(type));\n      return type;\n    }\n    function jsxDEVImpl(\n      type,\n      config,\n      maybeKey,\n      isStaticChildren,\n      source,\n      self\n    ) {\n      if (\n        \"string\" === typeof type ||\n        \"function\" === typeof type ||\n        type === REACT_FRAGMENT_TYPE ||\n        type === REACT_PROFILER_TYPE ||\n        type === REACT_STRICT_MODE_TYPE ||\n        type === REACT_SUSPENSE_TYPE ||\n        type === REACT_SUSPENSE_LIST_TYPE ||\n        type === REACT_OFFSCREEN_TYPE ||\n        (\"object\" === typeof type &&\n          null !== type &&\n          (type.$$typeof === REACT_LAZY_TYPE ||\n            type.$$typeof === REACT_MEMO_TYPE ||\n            type.$$typeof === REACT_CONTEXT_TYPE ||\n            type.$$typeof === REACT_CONSUMER_TYPE ||\n            type.$$typeof === REACT_FORWARD_REF_TYPE ||\n            type.$$typeof === REACT_CLIENT_REFERENCE$1 ||\n            void 0 !== type.getModuleId))\n      ) {\n        var children = config.children;\n        if (void 0 !== children)\n          if (isStaticChildren)\n            if (isArrayImpl(children)) {\n              for (\n                isStaticChildren = 0;\n                isStaticChildren < children.length;\n                isStaticChildren++\n              )\n                validateChildKeys(children[isStaticChildren], type);\n              Object.freeze && Object.freeze(children);\n            } else\n              console.error(\n                \"React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.\"\n              );\n          else validateChildKeys(children, type);\n      } else {\n        children = \"\";\n        if (\n          void 0 === type ||\n          (\"object\" === typeof type &&\n            null !== type &&\n            0 === Object.keys(type).length)\n        )\n          children +=\n            \" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.\";\n        null === type\n          ? (isStaticChildren = \"null\")\n          : isArrayImpl(type)\n            ? (isStaticChildren = \"array\")\n            : void 0 !== type && type.$$typeof === REACT_ELEMENT_TYPE\n              ? ((isStaticChildren =\n                  \"<\" +\n                  (getComponentNameFromType(type.type) || \"Unknown\") +\n                  \" />\"),\n                (children =\n                  \" Did you accidentally export a JSX literal instead of a component?\"))\n              : (isStaticChildren = typeof type);\n        console.error(\n          \"React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s\",\n          isStaticChildren,\n          children\n        );\n      }\n      if (hasOwnProperty.call(config, \"key\")) {\n        children = getComponentNameFromType(type);\n        var keys = Object.keys(config).filter(function (k) {\n          return \"key\" !== k;\n        });\n        isStaticChildren =\n          0 < keys.length\n            ? \"{key: someKey, \" + keys.join(\": ..., \") + \": ...}\"\n            : \"{key: someKey}\";\n        didWarnAboutKeySpread[children + isStaticChildren] ||\n          ((keys =\n            0 < keys.length ? \"{\" + keys.join(\": ..., \") + \": ...}\" : \"{}\"),\n          console.error(\n            'A props object containing a \"key\" prop is being spread into JSX:\\n  let props = %s;\\n  <%s {...props} />\\nReact keys must be passed directly to JSX without using spread:\\n  let props = %s;\\n  <%s key={someKey} {...props} />',\n            isStaticChildren,\n            children,\n            keys,\n            children\n          ),\n          (didWarnAboutKeySpread[children + isStaticChildren] = !0));\n      }\n      children = null;\n      void 0 !== maybeKey &&\n        (checkKeyStringCoercion(maybeKey), (children = \"\" + maybeKey));\n      hasValidKey(config) &&\n        (checkKeyStringCoercion(config.key), (children = \"\" + config.key));\n      if (\"key\" in config) {\n        maybeKey = {};\n        for (var propName in config)\n          \"key\" !== propName && (maybeKey[propName] = config[propName]);\n      } else maybeKey = config;\n      children &&\n        defineKeyPropWarningGetter(\n          maybeKey,\n          \"function\" === typeof type\n            ? type.displayName || type.name || \"Unknown\"\n            : type\n        );\n      return ReactElement(type, children, self, source, getOwner(), maybeKey);\n    }\n    function validateChildKeys(node, parentType) {\n      if (\n        \"object\" === typeof node &&\n        node &&\n        node.$$typeof !== REACT_CLIENT_REFERENCE\n      )\n        if (isArrayImpl(node))\n          for (var i = 0; i < node.length; i++) {\n            var child = node[i];\n            isValidElement(child) && validateExplicitKey(child, parentType);\n          }\n        else if (isValidElement(node))\n          node._store && (node._store.validated = 1);\n        else if (\n          (null === node || \"object\" !== typeof node\n            ? (i = null)\n            : ((i =\n                (MAYBE_ITERATOR_SYMBOL && node[MAYBE_ITERATOR_SYMBOL]) ||\n                node[\"@@iterator\"]),\n              (i = \"function\" === typeof i ? i : null)),\n          \"function\" === typeof i &&\n            i !== node.entries &&\n            ((i = i.call(node)), i !== node))\n        )\n          for (; !(node = i.next()).done; )\n            isValidElement(node.value) &&\n              validateExplicitKey(node.value, parentType);\n    }\n    function isValidElement(object) {\n      return (\n        \"object\" === typeof object &&\n        null !== object &&\n        object.$$typeof === REACT_ELEMENT_TYPE\n      );\n    }\n    function validateExplicitKey(element, parentType) {\n      if (\n        element._store &&\n        !element._store.validated &&\n        null == element.key &&\n        ((element._store.validated = 1),\n        (parentType = getCurrentComponentErrorInfo(parentType)),\n        !ownerHasKeyUseWarning[parentType])\n      ) {\n        ownerHasKeyUseWarning[parentType] = !0;\n        var childOwner = \"\";\n        element &&\n          null != element._owner &&\n          element._owner !== getOwner() &&\n          ((childOwner = null),\n          \"number\" === typeof element._owner.tag\n            ? (childOwner = getComponentNameFromType(element._owner.type))\n            : \"string\" === typeof element._owner.name &&\n              (childOwner = element._owner.name),\n          (childOwner = \" It was passed a child from \" + childOwner + \".\"));\n        var prevGetCurrentStack = ReactSharedInternals.getCurrentStack;\n        ReactSharedInternals.getCurrentStack = function () {\n          var stack = describeUnknownElementTypeFrameInDEV(element.type);\n          prevGetCurrentStack && (stack += prevGetCurrentStack() || \"\");\n          return stack;\n        };\n        console.error(\n          'Each child in a list should have a unique \"key\" prop.%s%s See https://react.dev/link/warning-keys for more information.',\n          parentType,\n          childOwner\n        );\n        ReactSharedInternals.getCurrentStack = prevGetCurrentStack;\n      }\n    }\n    function getCurrentComponentErrorInfo(parentType) {\n      var info = \"\",\n        owner = getOwner();\n      owner &&\n        (owner = getComponentNameFromType(owner.type)) &&\n        (info = \"\\n\\nCheck the render method of `\" + owner + \"`.\");\n      info ||\n        ((parentType = getComponentNameFromType(parentType)) &&\n          (info =\n            \"\\n\\nCheck the top-level render call using <\" + parentType + \">.\"));\n      return info;\n    }\n    var React = require(\"react\"),\n      REACT_ELEMENT_TYPE = Symbol.for(\"react.transitional.element\"),\n      REACT_PORTAL_TYPE = Symbol.for(\"react.portal\"),\n      REACT_FRAGMENT_TYPE = Symbol.for(\"react.fragment\"),\n      REACT_STRICT_MODE_TYPE = Symbol.for(\"react.strict_mode\"),\n      REACT_PROFILER_TYPE = Symbol.for(\"react.profiler\");\n    Symbol.for(\"react.provider\");\n    var REACT_CONSUMER_TYPE = Symbol.for(\"react.consumer\"),\n      REACT_CONTEXT_TYPE = Symbol.for(\"react.context\"),\n      REACT_FORWARD_REF_TYPE = Symbol.for(\"react.forward_ref\"),\n      REACT_SUSPENSE_TYPE = Symbol.for(\"react.suspense\"),\n      REACT_SUSPENSE_LIST_TYPE = Symbol.for(\"react.suspense_list\"),\n      REACT_MEMO_TYPE = Symbol.for(\"react.memo\"),\n      REACT_LAZY_TYPE = Symbol.for(\"react.lazy\"),\n      REACT_OFFSCREEN_TYPE = Symbol.for(\"react.offscreen\"),\n      MAYBE_ITERATOR_SYMBOL = Symbol.iterator,\n      REACT_CLIENT_REFERENCE$2 = Symbol.for(\"react.client.reference\"),\n      ReactSharedInternals =\n        React.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,\n      hasOwnProperty = Object.prototype.hasOwnProperty,\n      assign = Object.assign,\n      REACT_CLIENT_REFERENCE$1 = Symbol.for(\"react.client.reference\"),\n      isArrayImpl = Array.isArray,\n      disabledDepth = 0,\n      prevLog,\n      prevInfo,\n      prevWarn,\n      prevError,\n      prevGroup,\n      prevGroupCollapsed,\n      prevGroupEnd;\n    disabledLog.__reactDisabledLog = !0;\n    var prefix,\n      suffix,\n      reentry = !1;\n    var componentFrameCache = new (\n      \"function\" === typeof WeakMap ? WeakMap : Map\n    )();\n    var REACT_CLIENT_REFERENCE = Symbol.for(\"react.client.reference\"),\n      specialPropKeyWarningShown;\n    var didWarnAboutElementRef = {};\n    var didWarnAboutKeySpread = {},\n      ownerHasKeyUseWarning = {};\n    exports.Fragment = REACT_FRAGMENT_TYPE;\n    exports.jsx = function (type, config, maybeKey, source, self) {\n      return jsxDEVImpl(type, config, maybeKey, !1, source, self);\n    };\n    exports.jsxs = function (type, config, maybeKey, source, self) {\n      return jsxDEVImpl(type, config, maybeKey, !0, source, self);\n    };\n  })();\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","var isDevelopment = false;\n\n/*\n\nBased off glamor's StyleSheet, thanks Sunil \n\nhigh performance StyleSheet for css-in-js systems\n\n- uses multiple style tags behind the scenes for millions of rules\n- uses `insertRule` for appending in production for *much* faster performance\n\n// usage\n\nimport { StyleSheet } from '@emotion/sheet'\n\nlet styleSheet = new StyleSheet({ key: '', container: document.head })\n\nstyleSheet.insert('#box { border: 1px solid red; }')\n- appends a css rule into the stylesheet\n\nstyleSheet.flush()\n- empties the stylesheet of all its contents\n\n*/\n\nfunction sheetForTag(tag) {\n  if (tag.sheet) {\n    return tag.sheet;\n  } // this weirdness brought to you by firefox\n\n  /* istanbul ignore next */\n\n\n  for (var i = 0; i < document.styleSheets.length; i++) {\n    if (document.styleSheets[i].ownerNode === tag) {\n      return document.styleSheets[i];\n    }\n  } // this function should always return with a value\n  // TS can't understand it though so we make it stop complaining here\n\n\n  return undefined;\n}\n\nfunction createStyleElement(options) {\n  var tag = document.createElement('style');\n  tag.setAttribute('data-emotion', options.key);\n\n  if (options.nonce !== undefined) {\n    tag.setAttribute('nonce', options.nonce);\n  }\n\n  tag.appendChild(document.createTextNode(''));\n  tag.setAttribute('data-s', '');\n  return tag;\n}\n\nvar StyleSheet = /*#__PURE__*/function () {\n  // Using Node instead of HTMLElement since container may be a ShadowRoot\n  function StyleSheet(options) {\n    var _this = this;\n\n    this._insertTag = function (tag) {\n      var before;\n\n      if (_this.tags.length === 0) {\n        if (_this.insertionPoint) {\n          before = _this.insertionPoint.nextSibling;\n        } else if (_this.prepend) {\n          before = _this.container.firstChild;\n        } else {\n          before = _this.before;\n        }\n      } else {\n        before = _this.tags[_this.tags.length - 1].nextSibling;\n      }\n\n      _this.container.insertBefore(tag, before);\n\n      _this.tags.push(tag);\n    };\n\n    this.isSpeedy = options.speedy === undefined ? !isDevelopment : options.speedy;\n    this.tags = [];\n    this.ctr = 0;\n    this.nonce = options.nonce; // key is the value of the data-emotion attribute, it's used to identify different sheets\n\n    this.key = options.key;\n    this.container = options.container;\n    this.prepend = options.prepend;\n    this.insertionPoint = options.insertionPoint;\n    this.before = null;\n  }\n\n  var _proto = StyleSheet.prototype;\n\n  _proto.hydrate = function hydrate(nodes) {\n    nodes.forEach(this._insertTag);\n  };\n\n  _proto.insert = function insert(rule) {\n    // the max length is how many rules we have per style tag, it's 65000 in speedy mode\n    // it's 1 in dev because we insert source maps that map a single rule to a location\n    // and you can only have one source map per style tag\n    if (this.ctr % (this.isSpeedy ? 65000 : 1) === 0) {\n      this._insertTag(createStyleElement(this));\n    }\n\n    var tag = this.tags[this.tags.length - 1];\n\n    if (this.isSpeedy) {\n      var sheet = sheetForTag(tag);\n\n      try {\n        // this is the ultrafast version, works across browsers\n        // the big drawback is that the css won't be editable in devtools\n        sheet.insertRule(rule, sheet.cssRules.length);\n      } catch (e) {\n      }\n    } else {\n      tag.appendChild(document.createTextNode(rule));\n    }\n\n    this.ctr++;\n  };\n\n  _proto.flush = function flush() {\n    this.tags.forEach(function (tag) {\n      var _tag$parentNode;\n\n      return (_tag$parentNode = tag.parentNode) == null ? void 0 : _tag$parentNode.removeChild(tag);\n    });\n    this.tags = [];\n    this.ctr = 0;\n  };\n\n  return StyleSheet;\n}();\n\nexport { StyleSheet };\n","export var MS = '-ms-'\nexport var MOZ = '-moz-'\nexport var WEBKIT = '-webkit-'\n\nexport var COMMENT = 'comm'\nexport var RULESET = 'rule'\nexport var DECLARATION = 'decl'\n\nexport var PAGE = '@page'\nexport var MEDIA = '@media'\nexport var IMPORT = '@import'\nexport var CHARSET = '@charset'\nexport var VIEWPORT = '@viewport'\nexport var SUPPORTS = '@supports'\nexport var DOCUMENT = '@document'\nexport var NAMESPACE = '@namespace'\nexport var KEYFRAMES = '@keyframes'\nexport var FONT_FACE = '@font-face'\nexport var COUNTER_STYLE = '@counter-style'\nexport var FONT_FEATURE_VALUES = '@font-feature-values'\nexport var LAYER = '@layer'\n","/**\n * @param {number}\n * @return {number}\n */\nexport var abs = Math.abs\n\n/**\n * @param {number}\n * @return {string}\n */\nexport var from = String.fromCharCode\n\n/**\n * @param {object}\n * @return {object}\n */\nexport var assign = Object.assign\n\n/**\n * @param {string} value\n * @param {number} length\n * @return {number}\n */\nexport function hash (value, length) {\n\treturn charat(value, 0) ^ 45 ? (((((((length << 2) ^ charat(value, 0)) << 2) ^ charat(value, 1)) << 2) ^ charat(value, 2)) << 2) ^ charat(value, 3) : 0\n}\n\n/**\n * @param {string} value\n * @return {string}\n */\nexport function trim (value) {\n\treturn value.trim()\n}\n\n/**\n * @param {string} value\n * @param {RegExp} pattern\n * @return {string?}\n */\nexport function match (value, pattern) {\n\treturn (value = pattern.exec(value)) ? value[0] : value\n}\n\n/**\n * @param {string} value\n * @param {(string|RegExp)} pattern\n * @param {string} replacement\n * @return {string}\n */\nexport function replace (value, pattern, replacement) {\n\treturn value.replace(pattern, replacement)\n}\n\n/**\n * @param {string} value\n * @param {string} search\n * @return {number}\n */\nexport function indexof (value, search) {\n\treturn value.indexOf(search)\n}\n\n/**\n * @param {string} value\n * @param {number} index\n * @return {number}\n */\nexport function charat (value, index) {\n\treturn value.charCodeAt(index) | 0\n}\n\n/**\n * @param {string} value\n * @param {number} begin\n * @param {number} end\n * @return {string}\n */\nexport function substr (value, begin, end) {\n\treturn value.slice(begin, end)\n}\n\n/**\n * @param {string} value\n * @return {number}\n */\nexport function strlen (value) {\n\treturn value.length\n}\n\n/**\n * @param {any[]} value\n * @return {number}\n */\nexport function sizeof (value) {\n\treturn value.length\n}\n\n/**\n * @param {any} value\n * @param {any[]} array\n * @return {any}\n */\nexport function append (value, array) {\n\treturn array.push(value), value\n}\n\n/**\n * @param {string[]} array\n * @param {function} callback\n * @return {string}\n */\nexport function combine (array, callback) {\n\treturn array.map(callback).join('')\n}\n","import {from, trim, charat, strlen, substr, append, assign} from './Utility.js'\n\nexport var line = 1\nexport var column = 1\nexport var length = 0\nexport var position = 0\nexport var character = 0\nexport var characters = ''\n\n/**\n * @param {string} value\n * @param {object | null} root\n * @param {object | null} parent\n * @param {string} type\n * @param {string[] | string} props\n * @param {object[] | string} children\n * @param {number} length\n */\nexport function node (value, root, parent, type, props, children, length) {\n\treturn {value: value, root: root, parent: parent, type: type, props: props, children: children, line: line, column: column, length: length, return: ''}\n}\n\n/**\n * @param {object} root\n * @param {object} props\n * @return {object}\n */\nexport function copy (root, props) {\n\treturn assign(node('', null, null, '', null, null, 0), root, {length: -root.length}, props)\n}\n\n/**\n * @return {number}\n */\nexport function char () {\n\treturn character\n}\n\n/**\n * @return {number}\n */\nexport function prev () {\n\tcharacter = position > 0 ? charat(characters, --position) : 0\n\n\tif (column--, character === 10)\n\t\tcolumn = 1, line--\n\n\treturn character\n}\n\n/**\n * @return {number}\n */\nexport function next () {\n\tcharacter = position < length ? charat(characters, position++) : 0\n\n\tif (column++, character === 10)\n\t\tcolumn = 1, line++\n\n\treturn character\n}\n\n/**\n * @return {number}\n */\nexport function peek () {\n\treturn charat(characters, position)\n}\n\n/**\n * @return {number}\n */\nexport function caret () {\n\treturn position\n}\n\n/**\n * @param {number} begin\n * @param {number} end\n * @return {string}\n */\nexport function slice (begin, end) {\n\treturn substr(characters, begin, end)\n}\n\n/**\n * @param {number} type\n * @return {number}\n */\nexport function token (type) {\n\tswitch (type) {\n\t\t// \\0 \\t \\n \\r \\s whitespace token\n\t\tcase 0: case 9: case 10: case 13: case 32:\n\t\t\treturn 5\n\t\t// ! + , / > @ ~ isolate token\n\t\tcase 33: case 43: case 44: case 47: case 62: case 64: case 126:\n\t\t// ; { } breakpoint token\n\t\tcase 59: case 123: case 125:\n\t\t\treturn 4\n\t\t// : accompanied token\n\t\tcase 58:\n\t\t\treturn 3\n\t\t// \" ' ( [ opening delimit token\n\t\tcase 34: case 39: case 40: case 91:\n\t\t\treturn 2\n\t\t// ) ] closing delimit token\n\t\tcase 41: case 93:\n\t\t\treturn 1\n\t}\n\n\treturn 0\n}\n\n/**\n * @param {string} value\n * @return {any[]}\n */\nexport function alloc (value) {\n\treturn line = column = 1, length = strlen(characters = value), position = 0, []\n}\n\n/**\n * @param {any} value\n * @return {any}\n */\nexport function dealloc (value) {\n\treturn characters = '', value\n}\n\n/**\n * @param {number} type\n * @return {string}\n */\nexport function delimit (type) {\n\treturn trim(slice(position - 1, delimiter(type === 91 ? type + 2 : type === 40 ? type + 1 : type)))\n}\n\n/**\n * @param {string} value\n * @return {string[]}\n */\nexport function tokenize (value) {\n\treturn dealloc(tokenizer(alloc(value)))\n}\n\n/**\n * @param {number} type\n * @return {string}\n */\nexport function whitespace (type) {\n\twhile (character = peek())\n\t\tif (character < 33)\n\t\t\tnext()\n\t\telse\n\t\t\tbreak\n\n\treturn token(type) > 2 || token(character) > 3 ? '' : ' '\n}\n\n/**\n * @param {string[]} children\n * @return {string[]}\n */\nexport function tokenizer (children) {\n\twhile (next())\n\t\tswitch (token(character)) {\n\t\t\tcase 0: append(identifier(position - 1), children)\n\t\t\t\tbreak\n\t\t\tcase 2: append(delimit(character), children)\n\t\t\t\tbreak\n\t\t\tdefault: append(from(character), children)\n\t\t}\n\n\treturn children\n}\n\n/**\n * @param {number} index\n * @param {number} count\n * @return {string}\n */\nexport function escaping (index, count) {\n\twhile (--count && next())\n\t\t// not 0-9 A-F a-f\n\t\tif (character < 48 || character > 102 || (character > 57 && character < 65) || (character > 70 && character < 97))\n\t\t\tbreak\n\n\treturn slice(index, caret() + (count < 6 && peek() == 32 && next() == 32))\n}\n\n/**\n * @param {number} type\n * @return {number}\n */\nexport function delimiter (type) {\n\twhile (next())\n\t\tswitch (character) {\n\t\t\t// ] ) \" '\n\t\t\tcase type:\n\t\t\t\treturn position\n\t\t\t// \" '\n\t\t\tcase 34: case 39:\n\t\t\t\tif (type !== 34 && type !== 39)\n\t\t\t\t\tdelimiter(character)\n\t\t\t\tbreak\n\t\t\t// (\n\t\t\tcase 40:\n\t\t\t\tif (type === 41)\n\t\t\t\t\tdelimiter(type)\n\t\t\t\tbreak\n\t\t\t// \\\n\t\t\tcase 92:\n\t\t\t\tnext()\n\t\t\t\tbreak\n\t\t}\n\n\treturn position\n}\n\n/**\n * @param {number} type\n * @param {number} index\n * @return {number}\n */\nexport function commenter (type, index) {\n\twhile (next())\n\t\t// //\n\t\tif (type + character === 47 + 10)\n\t\t\tbreak\n\t\t// /*\n\t\telse if (type + character === 42 + 42 && peek() === 47)\n\t\t\tbreak\n\n\treturn '/*' + slice(index, position - 1) + '*' + from(type === 47 ? type : next())\n}\n\n/**\n * @param {number} index\n * @return {string}\n */\nexport function identifier (index) {\n\twhile (!token(peek()))\n\t\tnext()\n\n\treturn slice(index, position)\n}\n","import {COMMENT, RULESET, DECLARATION} from './Enum.js'\nimport {abs, charat, trim, from, sizeof, strlen, substr, append, replace, indexof} from './Utility.js'\nimport {node, char, prev, next, peek, caret, alloc, dealloc, delimit, whitespace, escaping, identifier, commenter} from './Tokenizer.js'\n\n/**\n * @param {string} value\n * @return {object[]}\n */\nexport function compile (value) {\n\treturn dealloc(parse('', null, null, null, [''], value = alloc(value), 0, [0], value))\n}\n\n/**\n * @param {string} value\n * @param {object} root\n * @param {object?} parent\n * @param {string[]} rule\n * @param {string[]} rules\n * @param {string[]} rulesets\n * @param {number[]} pseudo\n * @param {number[]} points\n * @param {string[]} declarations\n * @return {object}\n */\nexport function parse (value, root, parent, rule, rules, rulesets, pseudo, points, declarations) {\n\tvar index = 0\n\tvar offset = 0\n\tvar length = pseudo\n\tvar atrule = 0\n\tvar property = 0\n\tvar previous = 0\n\tvar variable = 1\n\tvar scanning = 1\n\tvar ampersand = 1\n\tvar character = 0\n\tvar type = ''\n\tvar props = rules\n\tvar children = rulesets\n\tvar reference = rule\n\tvar characters = type\n\n\twhile (scanning)\n\t\tswitch (previous = character, character = next()) {\n\t\t\t// (\n\t\t\tcase 40:\n\t\t\t\tif (previous != 108 && charat(characters, length - 1) == 58) {\n\t\t\t\t\tif (indexof(characters += replace(delimit(character), '&', '&\\f'), '&\\f') != -1)\n\t\t\t\t\t\tampersand = -1\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t// \" ' [\n\t\t\tcase 34: case 39: case 91:\n\t\t\t\tcharacters += delimit(character)\n\t\t\t\tbreak\n\t\t\t// \\t \\n \\r \\s\n\t\t\tcase 9: case 10: case 13: case 32:\n\t\t\t\tcharacters += whitespace(previous)\n\t\t\t\tbreak\n\t\t\t// \\\n\t\t\tcase 92:\n\t\t\t\tcharacters += escaping(caret() - 1, 7)\n\t\t\t\tcontinue\n\t\t\t// /\n\t\t\tcase 47:\n\t\t\t\tswitch (peek()) {\n\t\t\t\t\tcase 42: case 47:\n\t\t\t\t\t\tappend(comment(commenter(next(), caret()), root, parent), declarations)\n\t\t\t\t\t\tbreak\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tcharacters += '/'\n\t\t\t\t}\n\t\t\t\tbreak\n\t\t\t// {\n\t\t\tcase 123 * variable:\n\t\t\t\tpoints[index++] = strlen(characters) * ampersand\n\t\t\t// } ; \\0\n\t\t\tcase 125 * variable: case 59: case 0:\n\t\t\t\tswitch (character) {\n\t\t\t\t\t// \\0 }\n\t\t\t\t\tcase 0: case 125: scanning = 0\n\t\t\t\t\t// ;\n\t\t\t\t\tcase 59 + offset: if (ampersand == -1) characters = replace(characters, /\\f/g, '')\n\t\t\t\t\t\tif (property > 0 && (strlen(characters) - length))\n\t\t\t\t\t\t\tappend(property > 32 ? declaration(characters + ';', rule, parent, length - 1) : declaration(replace(characters, ' ', '') + ';', rule, parent, length - 2), declarations)\n\t\t\t\t\t\tbreak\n\t\t\t\t\t// @ ;\n\t\t\t\t\tcase 59: characters += ';'\n\t\t\t\t\t// { rule/at-rule\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tappend(reference = ruleset(characters, root, parent, index, offset, rules, points, type, props = [], children = [], length), rulesets)\n\n\t\t\t\t\t\tif (character === 123)\n\t\t\t\t\t\t\tif (offset === 0)\n\t\t\t\t\t\t\t\tparse(characters, root, reference, reference, props, rulesets, length, points, children)\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tswitch (atrule === 99 && charat(characters, 3) === 110 ? 100 : atrule) {\n\t\t\t\t\t\t\t\t\t// d l m s\n\t\t\t\t\t\t\t\t\tcase 100: case 108: case 109: case 115:\n\t\t\t\t\t\t\t\t\t\tparse(value, reference, reference, rule && append(ruleset(value, reference, reference, 0, 0, rules, points, type, rules, props = [], length), children), rules, children, length, points, rule ? props : children)\n\t\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tparse(characters, reference, reference, reference, [''], children, 0, points, children)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tindex = offset = property = 0, variable = ampersand = 1, type = characters = '', length = pseudo\n\t\t\t\tbreak\n\t\t\t// :\n\t\t\tcase 58:\n\t\t\t\tlength = 1 + strlen(characters), property = previous\n\t\t\tdefault:\n\t\t\t\tif (variable < 1)\n\t\t\t\t\tif (character == 123)\n\t\t\t\t\t\t--variable\n\t\t\t\t\telse if (character == 125 && variable++ == 0 && prev() == 125)\n\t\t\t\t\t\tcontinue\n\n\t\t\t\tswitch (characters += from(character), character * variable) {\n\t\t\t\t\t// &\n\t\t\t\t\tcase 38:\n\t\t\t\t\t\tampersand = offset > 0 ? 1 : (characters += '\\f', -1)\n\t\t\t\t\t\tbreak\n\t\t\t\t\t// ,\n\t\t\t\t\tcase 44:\n\t\t\t\t\t\tpoints[index++] = (strlen(characters) - 1) * ampersand, ampersand = 1\n\t\t\t\t\t\tbreak\n\t\t\t\t\t// @\n\t\t\t\t\tcase 64:\n\t\t\t\t\t\t// -\n\t\t\t\t\t\tif (peek() === 45)\n\t\t\t\t\t\t\tcharacters += delimit(next())\n\n\t\t\t\t\t\tatrule = peek(), offset = length = strlen(type = characters += identifier(caret())), character++\n\t\t\t\t\t\tbreak\n\t\t\t\t\t// -\n\t\t\t\t\tcase 45:\n\t\t\t\t\t\tif (previous === 45 && strlen(characters) == 2)\n\t\t\t\t\t\t\tvariable = 0\n\t\t\t\t}\n\t\t}\n\n\treturn rulesets\n}\n\n/**\n * @param {string} value\n * @param {object} root\n * @param {object?} parent\n * @param {number} index\n * @param {number} offset\n * @param {string[]} rules\n * @param {number[]} points\n * @param {string} type\n * @param {string[]} props\n * @param {string[]} children\n * @param {number} length\n * @return {object}\n */\nexport function ruleset (value, root, parent, index, offset, rules, points, type, props, children, length) {\n\tvar post = offset - 1\n\tvar rule = offset === 0 ? rules : ['']\n\tvar size = sizeof(rule)\n\n\tfor (var i = 0, j = 0, k = 0; i < index; ++i)\n\t\tfor (var x = 0, y = substr(value, post + 1, post = abs(j = points[i])), z = value; x < size; ++x)\n\t\t\tif (z = trim(j > 0 ? rule[x] + ' ' + y : replace(y, /&\\f/g, rule[x])))\n\t\t\t\tprops[k++] = z\n\n\treturn node(value, root, parent, offset === 0 ? RULESET : type, props, children, length)\n}\n\n/**\n * @param {number} value\n * @param {object} root\n * @param {object?} parent\n * @return {object}\n */\nexport function comment (value, root, parent) {\n\treturn node(value, root, parent, COMMENT, from(char()), substr(value, 2, -2), 0)\n}\n\n/**\n * @param {string} value\n * @param {object} root\n * @param {object?} parent\n * @param {number} length\n * @return {object}\n */\nexport function declaration (value, root, parent, length) {\n\treturn node(value, root, parent, DECLARATION, substr(value, 0, length), substr(value, length + 1, -1), length)\n}\n","import {IMPORT, LAYER, COMMENT, RULESET, DECLARATION, KEYFRAMES} from './Enum.js'\nimport {strlen, sizeof} from './Utility.js'\n\n/**\n * @param {object[]} children\n * @param {function} callback\n * @return {string}\n */\nexport function serialize (children, callback) {\n\tvar output = ''\n\tvar length = sizeof(children)\n\n\tfor (var i = 0; i < length; i++)\n\t\toutput += callback(children[i], i, children, callback) || ''\n\n\treturn output\n}\n\n/**\n * @param {object} element\n * @param {number} index\n * @param {object[]} children\n * @param {function} callback\n * @return {string}\n */\nexport function stringify (element, index, children, callback) {\n\tswitch (element.type) {\n\t\tcase LAYER: if (element.children.length) break\n\t\tcase IMPORT: case DECLARATION: return element.return = element.return || element.value\n\t\tcase COMMENT: return ''\n\t\tcase KEYFRAMES: return element.return = element.value + '{' + serialize(element.children, callback) + '}'\n\t\tcase RULESET: element.value = element.props.join(',')\n\t}\n\n\treturn strlen(children = serialize(element.children, callback)) ? element.return = element.value + '{' + children + '}' : ''\n}\n","import {MS, MOZ, WEBKIT, RULESET, KEYFRAMES, DECLARATION} from './Enum.js'\nimport {match, charat, substr, strlen, sizeof, replace, combine} from './Utility.js'\nimport {copy, tokenize} from './Tokenizer.js'\nimport {serialize} from './Serializer.js'\nimport {prefix} from './Prefixer.js'\n\n/**\n * @param {function[]} collection\n * @return {function}\n */\nexport function middleware (collection) {\n\tvar length = sizeof(collection)\n\n\treturn function (element, index, children, callback) {\n\t\tvar output = ''\n\n\t\tfor (var i = 0; i < length; i++)\n\t\t\toutput += collection[i](element, index, children, callback) || ''\n\n\t\treturn output\n\t}\n}\n\n/**\n * @param {function} callback\n * @return {function}\n */\nexport function rulesheet (callback) {\n\treturn function (element) {\n\t\tif (!element.root)\n\t\t\tif (element = element.return)\n\t\t\t\tcallback(element)\n\t}\n}\n\n/**\n * @param {object} element\n * @param {number} index\n * @param {object[]} children\n * @param {function} callback\n */\nexport function prefixer (element, index, children, callback) {\n\tif (element.length > -1)\n\t\tif (!element.return)\n\t\t\tswitch (element.type) {\n\t\t\t\tcase DECLARATION: element.return = prefix(element.value, element.length, children)\n\t\t\t\t\treturn\n\t\t\t\tcase KEYFRAMES:\n\t\t\t\t\treturn serialize([copy(element, {value: replace(element.value, '@', '@' + WEBKIT)})], callback)\n\t\t\t\tcase RULESET:\n\t\t\t\t\tif (element.length)\n\t\t\t\t\t\treturn combine(element.props, function (value) {\n\t\t\t\t\t\t\tswitch (match(value, /(::plac\\w+|:read-\\w+)/)) {\n\t\t\t\t\t\t\t\t// :read-(only|write)\n\t\t\t\t\t\t\t\tcase ':read-only': case ':read-write':\n\t\t\t\t\t\t\t\t\treturn serialize([copy(element, {props: [replace(value, /:(read-\\w+)/, ':' + MOZ + '$1')]})], callback)\n\t\t\t\t\t\t\t\t// :placeholder\n\t\t\t\t\t\t\t\tcase '::placeholder':\n\t\t\t\t\t\t\t\t\treturn serialize([\n\t\t\t\t\t\t\t\t\t\tcopy(element, {props: [replace(value, /:(plac\\w+)/, ':' + WEBKIT + 'input-$1')]}),\n\t\t\t\t\t\t\t\t\t\tcopy(element, {props: [replace(value, /:(plac\\w+)/, ':' + MOZ + '$1')]}),\n\t\t\t\t\t\t\t\t\t\tcopy(element, {props: [replace(value, /:(plac\\w+)/, MS + 'input-$1')]})\n\t\t\t\t\t\t\t\t\t], callback)\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn ''\n\t\t\t\t\t\t})\n\t\t\t}\n}\n\n/**\n * @param {object} element\n * @param {number} index\n * @param {object[]} children\n */\nexport function namespace (element) {\n\tswitch (element.type) {\n\t\tcase RULESET:\n\t\t\telement.props = element.props.map(function (value) {\n\t\t\t\treturn combine(tokenize(value), function (value, index, children) {\n\t\t\t\t\tswitch (charat(value, 0)) {\n\t\t\t\t\t\t// \\f\n\t\t\t\t\t\tcase 12:\n\t\t\t\t\t\t\treturn substr(value, 1, strlen(value))\n\t\t\t\t\t\t// \\0 ( + > ~\n\t\t\t\t\t\tcase 0: case 40: case 43: case 62: case 126:\n\t\t\t\t\t\t\treturn value\n\t\t\t\t\t\t// :\n\t\t\t\t\t\tcase 58:\n\t\t\t\t\t\t\tif (children[++index] === 'global')\n\t\t\t\t\t\t\t\tchildren[index] = '', children[++index] = '\\f' + substr(children[index], index = 1, -1)\n\t\t\t\t\t\t// \\s\n\t\t\t\t\t\tcase 32:\n\t\t\t\t\t\t\treturn index === 1 ? '' : value\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tswitch (index) {\n\t\t\t\t\t\t\t\tcase 0: element = value\n\t\t\t\t\t\t\t\t\treturn sizeof(children) > 1 ? '' : value\n\t\t\t\t\t\t\t\tcase index = sizeof(children) - 1: case 2:\n\t\t\t\t\t\t\t\t\treturn index === 2 ? value + element + element : value + element\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\treturn value\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t})\n\t}\n}\n","function memoize(fn) {\n  var cache = Object.create(null);\n  return function (arg) {\n    if (cache[arg] === undefined) cache[arg] = fn(arg);\n    return cache[arg];\n  };\n}\n\nexport { memoize as default };\n","import { StyleSheet } from '@emotion/sheet';\nimport { dealloc, alloc, next, token, from, peek, delimit, slice, position, RULESET, combine, match, serialize, copy, replace, WEBKIT, MOZ, MS, KEYFRAMES, DECLARATION, hash, charat, strlen, indexof, stringify, rulesheet, middleware, compile } from 'stylis';\nimport '@emotion/weak-memoize';\nimport '@emotion/memoize';\n\nvar identifierWithPointTracking = function identifierWithPointTracking(begin, points, index) {\n  var previous = 0;\n  var character = 0;\n\n  while (true) {\n    previous = character;\n    character = peek(); // &\\f\n\n    if (previous === 38 && character === 12) {\n      points[index] = 1;\n    }\n\n    if (token(character)) {\n      break;\n    }\n\n    next();\n  }\n\n  return slice(begin, position);\n};\n\nvar toRules = function toRules(parsed, points) {\n  // pretend we've started with a comma\n  var index = -1;\n  var character = 44;\n\n  do {\n    switch (token(character)) {\n      case 0:\n        // &\\f\n        if (character === 38 && peek() === 12) {\n          // this is not 100% correct, we don't account for literal sequences here - like for example quoted strings\n          // stylis inserts \\f after & to know when & where it should replace this sequence with the context selector\n          // and when it should just concatenate the outer and inner selectors\n          // it's very unlikely for this sequence to actually appear in a different context, so we just leverage this fact here\n          points[index] = 1;\n        }\n\n        parsed[index] += identifierWithPointTracking(position - 1, points, index);\n        break;\n\n      case 2:\n        parsed[index] += delimit(character);\n        break;\n\n      case 4:\n        // comma\n        if (character === 44) {\n          // colon\n          parsed[++index] = peek() === 58 ? '&\\f' : '';\n          points[index] = parsed[index].length;\n          break;\n        }\n\n      // fallthrough\n\n      default:\n        parsed[index] += from(character);\n    }\n  } while (character = next());\n\n  return parsed;\n};\n\nvar getRules = function getRules(value, points) {\n  return dealloc(toRules(alloc(value), points));\n}; // WeakSet would be more appropriate, but only WeakMap is supported in IE11\n\n\nvar fixedElements = /* #__PURE__ */new WeakMap();\nvar compat = function compat(element) {\n  if (element.type !== 'rule' || !element.parent || // positive .length indicates that this rule contains pseudo\n  // negative .length indicates that this rule has been already prefixed\n  element.length < 1) {\n    return;\n  }\n\n  var value = element.value;\n  var parent = element.parent;\n  var isImplicitRule = element.column === parent.column && element.line === parent.line;\n\n  while (parent.type !== 'rule') {\n    parent = parent.parent;\n    if (!parent) return;\n  } // short-circuit for the simplest case\n\n\n  if (element.props.length === 1 && value.charCodeAt(0) !== 58\n  /* colon */\n  && !fixedElements.get(parent)) {\n    return;\n  } // if this is an implicitly inserted rule (the one eagerly inserted at the each new nested level)\n  // then the props has already been manipulated beforehand as they that array is shared between it and its \"rule parent\"\n\n\n  if (isImplicitRule) {\n    return;\n  }\n\n  fixedElements.set(element, true);\n  var points = [];\n  var rules = getRules(value, points);\n  var parentRules = parent.props;\n\n  for (var i = 0, k = 0; i < rules.length; i++) {\n    for (var j = 0; j < parentRules.length; j++, k++) {\n      element.props[k] = points[i] ? rules[i].replace(/&\\f/g, parentRules[j]) : parentRules[j] + \" \" + rules[i];\n    }\n  }\n};\nvar removeLabel = function removeLabel(element) {\n  if (element.type === 'decl') {\n    var value = element.value;\n\n    if ( // charcode for l\n    value.charCodeAt(0) === 108 && // charcode for b\n    value.charCodeAt(2) === 98) {\n      // this ignores label\n      element[\"return\"] = '';\n      element.value = '';\n    }\n  }\n};\n\n/* eslint-disable no-fallthrough */\n\nfunction prefix(value, length) {\n  switch (hash(value, length)) {\n    // color-adjust\n    case 5103:\n      return WEBKIT + 'print-' + value + value;\n    // animation, animation-(delay|direction|duration|fill-mode|iteration-count|name|play-state|timing-function)\n\n    case 5737:\n    case 4201:\n    case 3177:\n    case 3433:\n    case 1641:\n    case 4457:\n    case 2921: // text-decoration, filter, clip-path, backface-visibility, column, box-decoration-break\n\n    case 5572:\n    case 6356:\n    case 5844:\n    case 3191:\n    case 6645:\n    case 3005: // mask, mask-image, mask-(mode|clip|size), mask-(repeat|origin), mask-position, mask-composite,\n\n    case 6391:\n    case 5879:\n    case 5623:\n    case 6135:\n    case 4599:\n    case 4855: // background-clip, columns, column-(count|fill|gap|rule|rule-color|rule-style|rule-width|span|width)\n\n    case 4215:\n    case 6389:\n    case 5109:\n    case 5365:\n    case 5621:\n    case 3829:\n      return WEBKIT + value + value;\n    // appearance, user-select, transform, hyphens, text-size-adjust\n\n    case 5349:\n    case 4246:\n    case 4810:\n    case 6968:\n    case 2756:\n      return WEBKIT + value + MOZ + value + MS + value + value;\n    // flex, flex-direction\n\n    case 6828:\n    case 4268:\n      return WEBKIT + value + MS + value + value;\n    // order\n\n    case 6165:\n      return WEBKIT + value + MS + 'flex-' + value + value;\n    // align-items\n\n    case 5187:\n      return WEBKIT + value + replace(value, /(\\w+).+(:[^]+)/, WEBKIT + 'box-$1$2' + MS + 'flex-$1$2') + value;\n    // align-self\n\n    case 5443:\n      return WEBKIT + value + MS + 'flex-item-' + replace(value, /flex-|-self/, '') + value;\n    // align-content\n\n    case 4675:\n      return WEBKIT + value + MS + 'flex-line-pack' + replace(value, /align-content|flex-|-self/, '') + value;\n    // flex-shrink\n\n    case 5548:\n      return WEBKIT + value + MS + replace(value, 'shrink', 'negative') + value;\n    // flex-basis\n\n    case 5292:\n      return WEBKIT + value + MS + replace(value, 'basis', 'preferred-size') + value;\n    // flex-grow\n\n    case 6060:\n      return WEBKIT + 'box-' + replace(value, '-grow', '') + WEBKIT + value + MS + replace(value, 'grow', 'positive') + value;\n    // transition\n\n    case 4554:\n      return WEBKIT + replace(value, /([^-])(transform)/g, '$1' + WEBKIT + '$2') + value;\n    // cursor\n\n    case 6187:\n      return replace(replace(replace(value, /(zoom-|grab)/, WEBKIT + '$1'), /(image-set)/, WEBKIT + '$1'), value, '') + value;\n    // background, background-image\n\n    case 5495:\n    case 3959:\n      return replace(value, /(image-set\\([^]*)/, WEBKIT + '$1' + '$`$1');\n    // justify-content\n\n    case 4968:\n      return replace(replace(value, /(.+:)(flex-)?(.*)/, WEBKIT + 'box-pack:$3' + MS + 'flex-pack:$3'), /s.+-b[^;]+/, 'justify') + WEBKIT + value + value;\n    // (margin|padding)-inline-(start|end)\n\n    case 4095:\n    case 3583:\n    case 4068:\n    case 2532:\n      return replace(value, /(.+)-inline(.+)/, WEBKIT + '$1$2') + value;\n    // (min|max)?(width|height|inline-size|block-size)\n\n    case 8116:\n    case 7059:\n    case 5753:\n    case 5535:\n    case 5445:\n    case 5701:\n    case 4933:\n    case 4677:\n    case 5533:\n    case 5789:\n    case 5021:\n    case 4765:\n      // stretch, max-content, min-content, fill-available\n      if (strlen(value) - 1 - length > 6) switch (charat(value, length + 1)) {\n        // (m)ax-content, (m)in-content\n        case 109:\n          // -\n          if (charat(value, length + 4) !== 45) break;\n        // (f)ill-available, (f)it-content\n\n        case 102:\n          return replace(value, /(.+:)(.+)-([^]+)/, '$1' + WEBKIT + '$2-$3' + '$1' + MOZ + (charat(value, length + 3) == 108 ? '$3' : '$2-$3')) + value;\n        // (s)tretch\n\n        case 115:\n          return ~indexof(value, 'stretch') ? prefix(replace(value, 'stretch', 'fill-available'), length) + value : value;\n      }\n      break;\n    // position: sticky\n\n    case 4949:\n      // (s)ticky?\n      if (charat(value, length + 1) !== 115) break;\n    // display: (flex|inline-flex)\n\n    case 6444:\n      switch (charat(value, strlen(value) - 3 - (~indexof(value, '!important') && 10))) {\n        // stic(k)y\n        case 107:\n          return replace(value, ':', ':' + WEBKIT) + value;\n        // (inline-)?fl(e)x\n\n        case 101:\n          return replace(value, /(.+:)([^;!]+)(;|!.+)?/, '$1' + WEBKIT + (charat(value, 14) === 45 ? 'inline-' : '') + 'box$3' + '$1' + WEBKIT + '$2$3' + '$1' + MS + '$2box$3') + value;\n      }\n\n      break;\n    // writing-mode\n\n    case 5936:\n      switch (charat(value, length + 11)) {\n        // vertical-l(r)\n        case 114:\n          return WEBKIT + value + MS + replace(value, /[svh]\\w+-[tblr]{2}/, 'tb') + value;\n        // vertical-r(l)\n\n        case 108:\n          return WEBKIT + value + MS + replace(value, /[svh]\\w+-[tblr]{2}/, 'tb-rl') + value;\n        // horizontal(-)tb\n\n        case 45:\n          return WEBKIT + value + MS + replace(value, /[svh]\\w+-[tblr]{2}/, 'lr') + value;\n      }\n\n      return WEBKIT + value + MS + value + value;\n  }\n\n  return value;\n}\n\nvar prefixer = function prefixer(element, index, children, callback) {\n  if (element.length > -1) if (!element[\"return\"]) switch (element.type) {\n    case DECLARATION:\n      element[\"return\"] = prefix(element.value, element.length);\n      break;\n\n    case KEYFRAMES:\n      return serialize([copy(element, {\n        value: replace(element.value, '@', '@' + WEBKIT)\n      })], callback);\n\n    case RULESET:\n      if (element.length) return combine(element.props, function (value) {\n        switch (match(value, /(::plac\\w+|:read-\\w+)/)) {\n          // :read-(only|write)\n          case ':read-only':\n          case ':read-write':\n            return serialize([copy(element, {\n              props: [replace(value, /:(read-\\w+)/, ':' + MOZ + '$1')]\n            })], callback);\n          // :placeholder\n\n          case '::placeholder':\n            return serialize([copy(element, {\n              props: [replace(value, /:(plac\\w+)/, ':' + WEBKIT + 'input-$1')]\n            }), copy(element, {\n              props: [replace(value, /:(plac\\w+)/, ':' + MOZ + '$1')]\n            }), copy(element, {\n              props: [replace(value, /:(plac\\w+)/, MS + 'input-$1')]\n            })], callback);\n        }\n\n        return '';\n      });\n  }\n};\n\nvar defaultStylisPlugins = [prefixer];\n\nvar createCache = function createCache(options) {\n  var key = options.key;\n\n  if (key === 'css') {\n    var ssrStyles = document.querySelectorAll(\"style[data-emotion]:not([data-s])\"); // get SSRed styles out of the way of React's hydration\n    // document.head is a safe place to move them to(though note document.head is not necessarily the last place they will be)\n    // note this very very intentionally targets all style elements regardless of the key to ensure\n    // that creating a cache works inside of render of a React component\n\n    Array.prototype.forEach.call(ssrStyles, function (node) {\n      // we want to only move elements which have a space in the data-emotion attribute value\n      // because that indicates that it is an Emotion 11 server-side rendered style elements\n      // while we will already ignore Emotion 11 client-side inserted styles because of the :not([data-s]) part in the selector\n      // Emotion 10 client-side inserted styles did not have data-s (but importantly did not have a space in their data-emotion attributes)\n      // so checking for the space ensures that loading Emotion 11 after Emotion 10 has inserted some styles\n      // will not result in the Emotion 10 styles being destroyed\n      var dataEmotionAttribute = node.getAttribute('data-emotion');\n\n      if (dataEmotionAttribute.indexOf(' ') === -1) {\n        return;\n      }\n\n      document.head.appendChild(node);\n      node.setAttribute('data-s', '');\n    });\n  }\n\n  var stylisPlugins = options.stylisPlugins || defaultStylisPlugins;\n\n  var inserted = {};\n  var container;\n  var nodesToHydrate = [];\n\n  {\n    container = options.container || document.head;\n    Array.prototype.forEach.call( // this means we will ignore elements which don't have a space in them which\n    // means that the style elements we're looking at are only Emotion 11 server-rendered style elements\n    document.querySelectorAll(\"style[data-emotion^=\\\"\" + key + \" \\\"]\"), function (node) {\n      var attrib = node.getAttribute(\"data-emotion\").split(' ');\n\n      for (var i = 1; i < attrib.length; i++) {\n        inserted[attrib[i]] = true;\n      }\n\n      nodesToHydrate.push(node);\n    });\n  }\n\n  var _insert;\n\n  var omnipresentPlugins = [compat, removeLabel];\n\n  {\n    var currentSheet;\n    var finalizingPlugins = [stringify, rulesheet(function (rule) {\n      currentSheet.insert(rule);\n    })];\n    var serializer = middleware(omnipresentPlugins.concat(stylisPlugins, finalizingPlugins));\n\n    var stylis = function stylis(styles) {\n      return serialize(compile(styles), serializer);\n    };\n\n    _insert = function insert(selector, serialized, sheet, shouldCache) {\n      currentSheet = sheet;\n\n      stylis(selector ? selector + \"{\" + serialized.styles + \"}\" : serialized.styles);\n\n      if (shouldCache) {\n        cache.inserted[serialized.name] = true;\n      }\n    };\n  }\n\n  var cache = {\n    key: key,\n    sheet: new StyleSheet({\n      key: key,\n      container: container,\n      nonce: options.nonce,\n      speedy: options.speedy,\n      prepend: options.prepend,\n      insertionPoint: options.insertionPoint\n    }),\n    nonce: options.nonce,\n    inserted: inserted,\n    registered: {},\n    insert: _insert\n  };\n  cache.sheet.hydrate(nodesToHydrate);\n  return cache;\n};\n\nexport { createCache as default };\n","/** @license React v16.13.1\n * react-is.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';var b=\"function\"===typeof Symbol&&Symbol.for,c=b?Symbol.for(\"react.element\"):60103,d=b?Symbol.for(\"react.portal\"):60106,e=b?Symbol.for(\"react.fragment\"):60107,f=b?Symbol.for(\"react.strict_mode\"):60108,g=b?Symbol.for(\"react.profiler\"):60114,h=b?Symbol.for(\"react.provider\"):60109,k=b?Symbol.for(\"react.context\"):60110,l=b?Symbol.for(\"react.async_mode\"):60111,m=b?Symbol.for(\"react.concurrent_mode\"):60111,n=b?Symbol.for(\"react.forward_ref\"):60112,p=b?Symbol.for(\"react.suspense\"):60113,q=b?\nSymbol.for(\"react.suspense_list\"):60120,r=b?Symbol.for(\"react.memo\"):60115,t=b?Symbol.for(\"react.lazy\"):60116,v=b?Symbol.for(\"react.block\"):60121,w=b?Symbol.for(\"react.fundamental\"):60117,x=b?Symbol.for(\"react.responder\"):60118,y=b?Symbol.for(\"react.scope\"):60119;\nfunction z(a){if(\"object\"===typeof a&&null!==a){var u=a.$$typeof;switch(u){case c:switch(a=a.type,a){case l:case m:case e:case g:case f:case p:return a;default:switch(a=a&&a.$$typeof,a){case k:case n:case t:case r:case h:return a;default:return u}}case d:return u}}}function A(a){return z(a)===m}exports.AsyncMode=l;exports.ConcurrentMode=m;exports.ContextConsumer=k;exports.ContextProvider=h;exports.Element=c;exports.ForwardRef=n;exports.Fragment=e;exports.Lazy=t;exports.Memo=r;exports.Portal=d;\nexports.Profiler=g;exports.StrictMode=f;exports.Suspense=p;exports.isAsyncMode=function(a){return A(a)||z(a)===l};exports.isConcurrentMode=A;exports.isContextConsumer=function(a){return z(a)===k};exports.isContextProvider=function(a){return z(a)===h};exports.isElement=function(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===c};exports.isForwardRef=function(a){return z(a)===n};exports.isFragment=function(a){return z(a)===e};exports.isLazy=function(a){return z(a)===t};\nexports.isMemo=function(a){return z(a)===r};exports.isPortal=function(a){return z(a)===d};exports.isProfiler=function(a){return z(a)===g};exports.isStrictMode=function(a){return z(a)===f};exports.isSuspense=function(a){return z(a)===p};\nexports.isValidElementType=function(a){return\"string\"===typeof a||\"function\"===typeof a||a===e||a===m||a===g||a===f||a===p||a===q||\"object\"===typeof a&&null!==a&&(a.$$typeof===t||a.$$typeof===r||a.$$typeof===h||a.$$typeof===k||a.$$typeof===n||a.$$typeof===w||a.$$typeof===x||a.$$typeof===y||a.$$typeof===v)};exports.typeOf=z;\n","/** @license React v16.13.1\n * react-is.development.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\n\n\nif (process.env.NODE_ENV !== \"production\") {\n  (function() {\n'use strict';\n\n// The Symbol used to tag the ReactElement-like types. If there is no native Symbol\n// nor polyfill, then a plain number is used for performance.\nvar hasSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = hasSymbol ? Symbol.for('react.element') : 0xeac7;\nvar REACT_PORTAL_TYPE = hasSymbol ? Symbol.for('react.portal') : 0xeaca;\nvar REACT_FRAGMENT_TYPE = hasSymbol ? Symbol.for('react.fragment') : 0xeacb;\nvar REACT_STRICT_MODE_TYPE = hasSymbol ? Symbol.for('react.strict_mode') : 0xeacc;\nvar REACT_PROFILER_TYPE = hasSymbol ? Symbol.for('react.profiler') : 0xead2;\nvar REACT_PROVIDER_TYPE = hasSymbol ? Symbol.for('react.provider') : 0xeacd;\nvar REACT_CONTEXT_TYPE = hasSymbol ? Symbol.for('react.context') : 0xeace; // TODO: We don't use AsyncMode or ConcurrentMode anymore. They were temporary\n// (unstable) APIs that have been removed. Can we remove the symbols?\n\nvar REACT_ASYNC_MODE_TYPE = hasSymbol ? Symbol.for('react.async_mode') : 0xeacf;\nvar REACT_CONCURRENT_MODE_TYPE = hasSymbol ? Symbol.for('react.concurrent_mode') : 0xeacf;\nvar REACT_FORWARD_REF_TYPE = hasSymbol ? Symbol.for('react.forward_ref') : 0xead0;\nvar REACT_SUSPENSE_TYPE = hasSymbol ? Symbol.for('react.suspense') : 0xead1;\nvar REACT_SUSPENSE_LIST_TYPE = hasSymbol ? Symbol.for('react.suspense_list') : 0xead8;\nvar REACT_MEMO_TYPE = hasSymbol ? Symbol.for('react.memo') : 0xead3;\nvar REACT_LAZY_TYPE = hasSymbol ? Symbol.for('react.lazy') : 0xead4;\nvar REACT_BLOCK_TYPE = hasSymbol ? Symbol.for('react.block') : 0xead9;\nvar REACT_FUNDAMENTAL_TYPE = hasSymbol ? Symbol.for('react.fundamental') : 0xead5;\nvar REACT_RESPONDER_TYPE = hasSymbol ? Symbol.for('react.responder') : 0xead6;\nvar REACT_SCOPE_TYPE = hasSymbol ? Symbol.for('react.scope') : 0xead7;\n\nfunction isValidElementType(type) {\n  return typeof type === 'string' || typeof type === 'function' || // Note: its typeof might be other than 'symbol' or 'number' if it's a polyfill.\n  type === REACT_FRAGMENT_TYPE || type === REACT_CONCURRENT_MODE_TYPE || type === REACT_PROFILER_TYPE || type === REACT_STRICT_MODE_TYPE || type === REACT_SUSPENSE_TYPE || type === REACT_SUSPENSE_LIST_TYPE || typeof type === 'object' && type !== null && (type.$$typeof === REACT_LAZY_TYPE || type.$$typeof === REACT_MEMO_TYPE || type.$$typeof === REACT_PROVIDER_TYPE || type.$$typeof === REACT_CONTEXT_TYPE || type.$$typeof === REACT_FORWARD_REF_TYPE || type.$$typeof === REACT_FUNDAMENTAL_TYPE || type.$$typeof === REACT_RESPONDER_TYPE || type.$$typeof === REACT_SCOPE_TYPE || type.$$typeof === REACT_BLOCK_TYPE);\n}\n\nfunction typeOf(object) {\n  if (typeof object === 'object' && object !== null) {\n    var $$typeof = object.$$typeof;\n\n    switch ($$typeof) {\n      case REACT_ELEMENT_TYPE:\n        var type = object.type;\n\n        switch (type) {\n          case REACT_ASYNC_MODE_TYPE:\n          case REACT_CONCURRENT_MODE_TYPE:\n          case REACT_FRAGMENT_TYPE:\n          case REACT_PROFILER_TYPE:\n          case REACT_STRICT_MODE_TYPE:\n          case REACT_SUSPENSE_TYPE:\n            return type;\n\n          default:\n            var $$typeofType = type && type.$$typeof;\n\n            switch ($$typeofType) {\n              case REACT_CONTEXT_TYPE:\n              case REACT_FORWARD_REF_TYPE:\n              case REACT_LAZY_TYPE:\n              case REACT_MEMO_TYPE:\n              case REACT_PROVIDER_TYPE:\n                return $$typeofType;\n\n              default:\n                return $$typeof;\n            }\n\n        }\n\n      case REACT_PORTAL_TYPE:\n        return $$typeof;\n    }\n  }\n\n  return undefined;\n} // AsyncMode is deprecated along with isAsyncMode\n\nvar AsyncMode = REACT_ASYNC_MODE_TYPE;\nvar ConcurrentMode = REACT_CONCURRENT_MODE_TYPE;\nvar ContextConsumer = REACT_CONTEXT_TYPE;\nvar ContextProvider = REACT_PROVIDER_TYPE;\nvar Element = REACT_ELEMENT_TYPE;\nvar ForwardRef = REACT_FORWARD_REF_TYPE;\nvar Fragment = REACT_FRAGMENT_TYPE;\nvar Lazy = REACT_LAZY_TYPE;\nvar Memo = REACT_MEMO_TYPE;\nvar Portal = REACT_PORTAL_TYPE;\nvar Profiler = REACT_PROFILER_TYPE;\nvar StrictMode = REACT_STRICT_MODE_TYPE;\nvar Suspense = REACT_SUSPENSE_TYPE;\nvar hasWarnedAboutDeprecatedIsAsyncMode = false; // AsyncMode should be deprecated\n\nfunction isAsyncMode(object) {\n  {\n    if (!hasWarnedAboutDeprecatedIsAsyncMode) {\n      hasWarnedAboutDeprecatedIsAsyncMode = true; // Using console['warn'] to evade Babel and ESLint\n\n      console['warn']('The ReactIs.isAsyncMode() alias has been deprecated, ' + 'and will be removed in React 17+. Update your code to use ' + 'ReactIs.isConcurrentMode() instead. It has the exact same API.');\n    }\n  }\n\n  return isConcurrentMode(object) || typeOf(object) === REACT_ASYNC_MODE_TYPE;\n}\nfunction isConcurrentMode(object) {\n  return typeOf(object) === REACT_CONCURRENT_MODE_TYPE;\n}\nfunction isContextConsumer(object) {\n  return typeOf(object) === REACT_CONTEXT_TYPE;\n}\nfunction isContextProvider(object) {\n  return typeOf(object) === REACT_PROVIDER_TYPE;\n}\nfunction isElement(object) {\n  return typeof object === 'object' && object !== null && object.$$typeof === REACT_ELEMENT_TYPE;\n}\nfunction isForwardRef(object) {\n  return typeOf(object) === REACT_FORWARD_REF_TYPE;\n}\nfunction isFragment(object) {\n  return typeOf(object) === REACT_FRAGMENT_TYPE;\n}\nfunction isLazy(object) {\n  return typeOf(object) === REACT_LAZY_TYPE;\n}\nfunction isMemo(object) {\n  return typeOf(object) === REACT_MEMO_TYPE;\n}\nfunction isPortal(object) {\n  return typeOf(object) === REACT_PORTAL_TYPE;\n}\nfunction isProfiler(object) {\n  return typeOf(object) === REACT_PROFILER_TYPE;\n}\nfunction isStrictMode(object) {\n  return typeOf(object) === REACT_STRICT_MODE_TYPE;\n}\nfunction isSuspense(object) {\n  return typeOf(object) === REACT_SUSPENSE_TYPE;\n}\n\nexports.AsyncMode = AsyncMode;\nexports.ConcurrentMode = ConcurrentMode;\nexports.ContextConsumer = ContextConsumer;\nexports.ContextProvider = ContextProvider;\nexports.Element = Element;\nexports.ForwardRef = ForwardRef;\nexports.Fragment = Fragment;\nexports.Lazy = Lazy;\nexports.Memo = Memo;\nexports.Portal = Portal;\nexports.Profiler = Profiler;\nexports.StrictMode = StrictMode;\nexports.Suspense = Suspense;\nexports.isAsyncMode = isAsyncMode;\nexports.isConcurrentMode = isConcurrentMode;\nexports.isContextConsumer = isContextConsumer;\nexports.isContextProvider = isContextProvider;\nexports.isElement = isElement;\nexports.isForwardRef = isForwardRef;\nexports.isFragment = isFragment;\nexports.isLazy = isLazy;\nexports.isMemo = isMemo;\nexports.isPortal = isPortal;\nexports.isProfiler = isProfiler;\nexports.isStrictMode = isStrictMode;\nexports.isSuspense = isSuspense;\nexports.isValidElementType = isValidElementType;\nexports.typeOf = typeOf;\n  })();\n}\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-is.production.min.js');\n} else {\n  module.exports = require('./cjs/react-is.development.js');\n}\n","'use strict';\n\nvar reactIs = require('react-is');\n\n/**\n * Copyright 2015, Yahoo! Inc.\n * Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.\n */\nvar REACT_STATICS = {\n  childContextTypes: true,\n  contextType: true,\n  contextTypes: true,\n  defaultProps: true,\n  displayName: true,\n  getDefaultProps: true,\n  getDerivedStateFromError: true,\n  getDerivedStateFromProps: true,\n  mixins: true,\n  propTypes: true,\n  type: true\n};\nvar KNOWN_STATICS = {\n  name: true,\n  length: true,\n  prototype: true,\n  caller: true,\n  callee: true,\n  arguments: true,\n  arity: true\n};\nvar FORWARD_REF_STATICS = {\n  '$$typeof': true,\n  render: true,\n  defaultProps: true,\n  displayName: true,\n  propTypes: true\n};\nvar MEMO_STATICS = {\n  '$$typeof': true,\n  compare: true,\n  defaultProps: true,\n  displayName: true,\n  propTypes: true,\n  type: true\n};\nvar TYPE_STATICS = {};\nTYPE_STATICS[reactIs.ForwardRef] = FORWARD_REF_STATICS;\nTYPE_STATICS[reactIs.Memo] = MEMO_STATICS;\n\nfunction getStatics(component) {\n  // React v16.11 and below\n  if (reactIs.isMemo(component)) {\n    return MEMO_STATICS;\n  } // React v16.12 and above\n\n\n  return TYPE_STATICS[component['$$typeof']] || REACT_STATICS;\n}\n\nvar defineProperty = Object.defineProperty;\nvar getOwnPropertyNames = Object.getOwnPropertyNames;\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar getPrototypeOf = Object.getPrototypeOf;\nvar objectPrototype = Object.prototype;\nfunction hoistNonReactStatics(targetComponent, sourceComponent, blacklist) {\n  if (typeof sourceComponent !== 'string') {\n    // don't hoist over string (html) components\n    if (objectPrototype) {\n      var inheritedComponent = getPrototypeOf(sourceComponent);\n\n      if (inheritedComponent && inheritedComponent !== objectPrototype) {\n        hoistNonReactStatics(targetComponent, inheritedComponent, blacklist);\n      }\n    }\n\n    var keys = getOwnPropertyNames(sourceComponent);\n\n    if (getOwnPropertySymbols) {\n      keys = keys.concat(getOwnPropertySymbols(sourceComponent));\n    }\n\n    var targetStatics = getStatics(targetComponent);\n    var sourceStatics = getStatics(sourceComponent);\n\n    for (var i = 0; i < keys.length; ++i) {\n      var key = keys[i];\n\n      if (!KNOWN_STATICS[key] && !(blacklist && blacklist[key]) && !(sourceStatics && sourceStatics[key]) && !(targetStatics && targetStatics[key])) {\n        var descriptor = getOwnPropertyDescriptor(sourceComponent, key);\n\n        try {\n          // Avoid failures from read-only properties\n          defineProperty(targetComponent, key, descriptor);\n        } catch (e) {}\n      }\n    }\n  }\n\n  return targetComponent;\n}\n\nmodule.exports = hoistNonReactStatics;\n","var isBrowser = true;\n\nfunction getRegisteredStyles(registered, registeredStyles, classNames) {\n  var rawClassName = '';\n  classNames.split(' ').forEach(function (className) {\n    if (registered[className] !== undefined) {\n      registeredStyles.push(registered[className] + \";\");\n    } else if (className) {\n      rawClassName += className + \" \";\n    }\n  });\n  return rawClassName;\n}\nvar registerStyles = function registerStyles(cache, serialized, isStringTag) {\n  var className = cache.key + \"-\" + serialized.name;\n\n  if ( // we only need to add the styles to the registered cache if the\n  // class name could be used further down\n  // the tree but if it's a string tag, we know it won't\n  // so we don't have to add it to registered cache.\n  // this improves memory usage since we can avoid storing the whole style string\n  (isStringTag === false || // we need to always store it if we're in compat mode and\n  // in node since emotion-server relies on whether a style is in\n  // the registered cache to know whether a style is global or not\n  // also, note that this check will be dead code eliminated in the browser\n  isBrowser === false ) && cache.registered[className] === undefined) {\n    cache.registered[className] = serialized.styles;\n  }\n};\nvar insertStyles = function insertStyles(cache, serialized, isStringTag) {\n  registerStyles(cache, serialized, isStringTag);\n  var className = cache.key + \"-\" + serialized.name;\n\n  if (cache.inserted[serialized.name] === undefined) {\n    var current = serialized;\n\n    do {\n      cache.insert(serialized === current ? \".\" + className : '', current, cache.sheet, true);\n\n      current = current.next;\n    } while (current !== undefined);\n  }\n};\n\nexport { getRegisteredStyles, insertStyles, registerStyles };\n","/* eslint-disable */\n// Inspired by https://github.com/garycourt/murmurhash-js\n// Ported from https://github.com/aappleby/smhasher/blob/61a0530f28277f2e850bfc39600ce61d02b518de/src/MurmurHash2.cpp#L37-L86\nfunction murmur2(str) {\n  // 'm' and 'r' are mixing constants generated offline.\n  // They're not really 'magic', they just happen to work well.\n  // const m = 0x5bd1e995;\n  // const r = 24;\n  // Initialize the hash\n  var h = 0; // Mix 4 bytes at a time into the hash\n\n  var k,\n      i = 0,\n      len = str.length;\n\n  for (; len >= 4; ++i, len -= 4) {\n    k = str.charCodeAt(i) & 0xff | (str.charCodeAt(++i) & 0xff) << 8 | (str.charCodeAt(++i) & 0xff) << 16 | (str.charCodeAt(++i) & 0xff) << 24;\n    k =\n    /* Math.imul(k, m): */\n    (k & 0xffff) * 0x5bd1e995 + ((k >>> 16) * 0xe995 << 16);\n    k ^=\n    /* k >>> r: */\n    k >>> 24;\n    h =\n    /* Math.imul(k, m): */\n    (k & 0xffff) * 0x5bd1e995 + ((k >>> 16) * 0xe995 << 16) ^\n    /* Math.imul(h, m): */\n    (h & 0xffff) * 0x5bd1e995 + ((h >>> 16) * 0xe995 << 16);\n  } // Handle the last few bytes of the input array\n\n\n  switch (len) {\n    case 3:\n      h ^= (str.charCodeAt(i + 2) & 0xff) << 16;\n\n    case 2:\n      h ^= (str.charCodeAt(i + 1) & 0xff) << 8;\n\n    case 1:\n      h ^= str.charCodeAt(i) & 0xff;\n      h =\n      /* Math.imul(h, m): */\n      (h & 0xffff) * 0x5bd1e995 + ((h >>> 16) * 0xe995 << 16);\n  } // Do a few final mixes of the hash to ensure the last few\n  // bytes are well-incorporated.\n\n\n  h ^= h >>> 13;\n  h =\n  /* Math.imul(h, m): */\n  (h & 0xffff) * 0x5bd1e995 + ((h >>> 16) * 0xe995 << 16);\n  return ((h ^ h >>> 15) >>> 0).toString(36);\n}\n\nexport { murmur2 as default };\n","var unitlessKeys = {\n  animationIterationCount: 1,\n  aspectRatio: 1,\n  borderImageOutset: 1,\n  borderImageSlice: 1,\n  borderImageWidth: 1,\n  boxFlex: 1,\n  boxFlexGroup: 1,\n  boxOrdinalGroup: 1,\n  columnCount: 1,\n  columns: 1,\n  flex: 1,\n  flexGrow: 1,\n  flexPositive: 1,\n  flexShrink: 1,\n  flexNegative: 1,\n  flexOrder: 1,\n  gridRow: 1,\n  gridRowEnd: 1,\n  gridRowSpan: 1,\n  gridRowStart: 1,\n  gridColumn: 1,\n  gridColumnEnd: 1,\n  gridColumnSpan: 1,\n  gridColumnStart: 1,\n  msGridRow: 1,\n  msGridRowSpan: 1,\n  msGridColumn: 1,\n  msGridColumnSpan: 1,\n  fontWeight: 1,\n  lineHeight: 1,\n  opacity: 1,\n  order: 1,\n  orphans: 1,\n  scale: 1,\n  tabSize: 1,\n  widows: 1,\n  zIndex: 1,\n  zoom: 1,\n  WebkitLineClamp: 1,\n  // SVG-related properties\n  fillOpacity: 1,\n  floodOpacity: 1,\n  stopOpacity: 1,\n  strokeDasharray: 1,\n  strokeDashoffset: 1,\n  strokeMiterlimit: 1,\n  strokeOpacity: 1,\n  strokeWidth: 1\n};\n\nexport { unitlessKeys as default };\n","import hashString from '@emotion/hash';\nimport unitless from '@emotion/unitless';\nimport memoize from '@emotion/memoize';\n\nvar isDevelopment = false;\n\nvar hyphenateRegex = /[A-Z]|^ms/g;\nvar animationRegex = /_EMO_([^_]+?)_([^]*?)_EMO_/g;\n\nvar isCustomProperty = function isCustomProperty(property) {\n  return property.charCodeAt(1) === 45;\n};\n\nvar isProcessableValue = function isProcessableValue(value) {\n  return value != null && typeof value !== 'boolean';\n};\n\nvar processStyleName = /* #__PURE__ */memoize(function (styleName) {\n  return isCustomProperty(styleName) ? styleName : styleName.replace(hyphenateRegex, '-$&').toLowerCase();\n});\n\nvar processStyleValue = function processStyleValue(key, value) {\n  switch (key) {\n    case 'animation':\n    case 'animationName':\n      {\n        if (typeof value === 'string') {\n          return value.replace(animationRegex, function (match, p1, p2) {\n            cursor = {\n              name: p1,\n              styles: p2,\n              next: cursor\n            };\n            return p1;\n          });\n        }\n      }\n  }\n\n  if (unitless[key] !== 1 && !isCustomProperty(key) && typeof value === 'number' && value !== 0) {\n    return value + 'px';\n  }\n\n  return value;\n};\n\nvar noComponentSelectorMessage = 'Component selectors can only be used in conjunction with ' + '@emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware ' + 'compiler transform.';\n\nfunction handleInterpolation(mergedProps, registered, interpolation) {\n  if (interpolation == null) {\n    return '';\n  }\n\n  var componentSelector = interpolation;\n\n  if (componentSelector.__emotion_styles !== undefined) {\n\n    return componentSelector;\n  }\n\n  switch (typeof interpolation) {\n    case 'boolean':\n      {\n        return '';\n      }\n\n    case 'object':\n      {\n        var keyframes = interpolation;\n\n        if (keyframes.anim === 1) {\n          cursor = {\n            name: keyframes.name,\n            styles: keyframes.styles,\n            next: cursor\n          };\n          return keyframes.name;\n        }\n\n        var serializedStyles = interpolation;\n\n        if (serializedStyles.styles !== undefined) {\n          var next = serializedStyles.next;\n\n          if (next !== undefined) {\n            // not the most efficient thing ever but this is a pretty rare case\n            // and there will be very few iterations of this generally\n            while (next !== undefined) {\n              cursor = {\n                name: next.name,\n                styles: next.styles,\n                next: cursor\n              };\n              next = next.next;\n            }\n          }\n\n          var styles = serializedStyles.styles + \";\";\n          return styles;\n        }\n\n        return createStringFromObject(mergedProps, registered, interpolation);\n      }\n\n    case 'function':\n      {\n        if (mergedProps !== undefined) {\n          var previousCursor = cursor;\n          var result = interpolation(mergedProps);\n          cursor = previousCursor;\n          return handleInterpolation(mergedProps, registered, result);\n        }\n\n        break;\n      }\n  } // finalize string values (regular strings and functions interpolated into css calls)\n\n\n  var asString = interpolation;\n\n  if (registered == null) {\n    return asString;\n  }\n\n  var cached = registered[asString];\n  return cached !== undefined ? cached : asString;\n}\n\nfunction createStringFromObject(mergedProps, registered, obj) {\n  var string = '';\n\n  if (Array.isArray(obj)) {\n    for (var i = 0; i < obj.length; i++) {\n      string += handleInterpolation(mergedProps, registered, obj[i]) + \";\";\n    }\n  } else {\n    for (var key in obj) {\n      var value = obj[key];\n\n      if (typeof value !== 'object') {\n        var asString = value;\n\n        if (registered != null && registered[asString] !== undefined) {\n          string += key + \"{\" + registered[asString] + \"}\";\n        } else if (isProcessableValue(asString)) {\n          string += processStyleName(key) + \":\" + processStyleValue(key, asString) + \";\";\n        }\n      } else {\n        if (key === 'NO_COMPONENT_SELECTOR' && isDevelopment) {\n          throw new Error(noComponentSelectorMessage);\n        }\n\n        if (Array.isArray(value) && typeof value[0] === 'string' && (registered == null || registered[value[0]] === undefined)) {\n          for (var _i = 0; _i < value.length; _i++) {\n            if (isProcessableValue(value[_i])) {\n              string += processStyleName(key) + \":\" + processStyleValue(key, value[_i]) + \";\";\n            }\n          }\n        } else {\n          var interpolated = handleInterpolation(mergedProps, registered, value);\n\n          switch (key) {\n            case 'animation':\n            case 'animationName':\n              {\n                string += processStyleName(key) + \":\" + interpolated + \";\";\n                break;\n              }\n\n            default:\n              {\n\n                string += key + \"{\" + interpolated + \"}\";\n              }\n          }\n        }\n      }\n    }\n  }\n\n  return string;\n}\n\nvar labelPattern = /label:\\s*([^\\s;{]+)\\s*(;|$)/g; // this is the cursor for keyframes\n// keyframes are stored on the SerializedStyles object as a linked list\n\nvar cursor;\nfunction serializeStyles(args, registered, mergedProps) {\n  if (args.length === 1 && typeof args[0] === 'object' && args[0] !== null && args[0].styles !== undefined) {\n    return args[0];\n  }\n\n  var stringMode = true;\n  var styles = '';\n  cursor = undefined;\n  var strings = args[0];\n\n  if (strings == null || strings.raw === undefined) {\n    stringMode = false;\n    styles += handleInterpolation(mergedProps, registered, strings);\n  } else {\n    var asTemplateStringsArr = strings;\n\n    styles += asTemplateStringsArr[0];\n  } // we start at 1 since we've already handled the first arg\n\n\n  for (var i = 1; i < args.length; i++) {\n    styles += handleInterpolation(mergedProps, registered, args[i]);\n\n    if (stringMode) {\n      var templateStringsArr = strings;\n\n      styles += templateStringsArr[i];\n    }\n  } // using a global regex with .exec is stateful so lastIndex has to be reset each time\n\n\n  labelPattern.lastIndex = 0;\n  var identifierName = '';\n  var match; // https://esbench.com/bench/5b809c2cf2949800a0f61fb5\n\n  while ((match = labelPattern.exec(styles)) !== null) {\n    identifierName += '-' + match[1];\n  }\n\n  var name = hashString(styles) + identifierName;\n\n  return {\n    name: name,\n    styles: styles,\n    next: cursor\n  };\n}\n\nexport { serializeStyles };\n","import * as React from 'react';\n\nvar syncFallback = function syncFallback(create) {\n  return create();\n};\n\nvar useInsertionEffect = React['useInsertion' + 'Effect'] ? React['useInsertion' + 'Effect'] : false;\nvar useInsertionEffectAlwaysWithSyncFallback = useInsertionEffect || syncFallback;\nvar useInsertionEffectWithLayoutFallback = useInsertionEffect || React.useLayoutEffect;\n\nexport { useInsertionEffectAlwaysWithSyncFallback, useInsertionEffectWithLayoutFallback };\n","import * as React from 'react';\nimport { useContext, forwardRef } from 'react';\nimport createCache from '@emotion/cache';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport weakMemoize from '@emotion/weak-memoize';\nimport hoistNonReactStatics from '../_isolated-hnrs/dist/emotion-react-_isolated-hnrs.browser.esm.js';\nimport { getRegisteredStyles, registerStyles, insertStyles } from '@emotion/utils';\nimport { serializeStyles } from '@emotion/serialize';\nimport { useInsertionEffectAlwaysWithSyncFallback } from '@emotion/use-insertion-effect-with-fallbacks';\n\nvar isDevelopment = false;\n\nvar EmotionCacheContext = /* #__PURE__ */React.createContext( // we're doing this to avoid preconstruct's dead code elimination in this one case\n// because this module is primarily intended for the browser and node\n// but it's also required in react native and similar environments sometimes\n// and we could have a special build just for that\n// but this is much easier and the native packages\n// might use a different theme context in the future anyway\ntypeof HTMLElement !== 'undefined' ? /* #__PURE__ */createCache({\n  key: 'css'\n}) : null);\n\nvar CacheProvider = EmotionCacheContext.Provider;\nvar __unsafe_useEmotionCache = function useEmotionCache() {\n  return useContext(EmotionCacheContext);\n};\n\nvar withEmotionCache = function withEmotionCache(func) {\n  return /*#__PURE__*/forwardRef(function (props, ref) {\n    // the cache will never be null in the browser\n    var cache = useContext(EmotionCacheContext);\n    return func(props, cache, ref);\n  });\n};\n\nvar ThemeContext = /* #__PURE__ */React.createContext({});\n\nvar useTheme = function useTheme() {\n  return React.useContext(ThemeContext);\n};\n\nvar getTheme = function getTheme(outerTheme, theme) {\n  if (typeof theme === 'function') {\n    var mergedTheme = theme(outerTheme);\n\n    return mergedTheme;\n  }\n\n  return _extends({}, outerTheme, theme);\n};\n\nvar createCacheWithTheme = /* #__PURE__ */weakMemoize(function (outerTheme) {\n  return weakMemoize(function (theme) {\n    return getTheme(outerTheme, theme);\n  });\n});\nvar ThemeProvider = function ThemeProvider(props) {\n  var theme = React.useContext(ThemeContext);\n\n  if (props.theme !== theme) {\n    theme = createCacheWithTheme(theme)(props.theme);\n  }\n\n  return /*#__PURE__*/React.createElement(ThemeContext.Provider, {\n    value: theme\n  }, props.children);\n};\nfunction withTheme(Component) {\n  var componentName = Component.displayName || Component.name || 'Component';\n  var WithTheme = /*#__PURE__*/React.forwardRef(function render(props, ref) {\n    var theme = React.useContext(ThemeContext);\n    return /*#__PURE__*/React.createElement(Component, _extends({\n      theme: theme,\n      ref: ref\n    }, props));\n  });\n  WithTheme.displayName = \"WithTheme(\" + componentName + \")\";\n  return hoistNonReactStatics(WithTheme, Component);\n}\n\nvar hasOwn = {}.hasOwnProperty;\n\nvar typePropName = '__EMOTION_TYPE_PLEASE_DO_NOT_USE__';\nvar createEmotionProps = function createEmotionProps(type, props) {\n\n  var newProps = {};\n\n  for (var _key in props) {\n    if (hasOwn.call(props, _key)) {\n      newProps[_key] = props[_key];\n    }\n  }\n\n  newProps[typePropName] = type; // Runtime labeling is an opt-in feature because:\n\n  return newProps;\n};\n\nvar Insertion = function Insertion(_ref) {\n  var cache = _ref.cache,\n      serialized = _ref.serialized,\n      isStringTag = _ref.isStringTag;\n  registerStyles(cache, serialized, isStringTag);\n  useInsertionEffectAlwaysWithSyncFallback(function () {\n    return insertStyles(cache, serialized, isStringTag);\n  });\n\n  return null;\n};\n\nvar Emotion = /* #__PURE__ */withEmotionCache(function (props, cache, ref) {\n  var cssProp = props.css; // so that using `css` from `emotion` and passing the result to the css prop works\n  // not passing the registered cache to serializeStyles because it would\n  // make certain babel optimisations not possible\n\n  if (typeof cssProp === 'string' && cache.registered[cssProp] !== undefined) {\n    cssProp = cache.registered[cssProp];\n  }\n\n  var WrappedComponent = props[typePropName];\n  var registeredStyles = [cssProp];\n  var className = '';\n\n  if (typeof props.className === 'string') {\n    className = getRegisteredStyles(cache.registered, registeredStyles, props.className);\n  } else if (props.className != null) {\n    className = props.className + \" \";\n  }\n\n  var serialized = serializeStyles(registeredStyles, undefined, React.useContext(ThemeContext));\n\n  className += cache.key + \"-\" + serialized.name;\n  var newProps = {};\n\n  for (var _key2 in props) {\n    if (hasOwn.call(props, _key2) && _key2 !== 'css' && _key2 !== typePropName && (!isDevelopment )) {\n      newProps[_key2] = props[_key2];\n    }\n  }\n\n  newProps.className = className;\n\n  if (ref) {\n    newProps.ref = ref;\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Insertion, {\n    cache: cache,\n    serialized: serialized,\n    isStringTag: typeof WrappedComponent === 'string'\n  }), /*#__PURE__*/React.createElement(WrappedComponent, newProps));\n});\n\nvar Emotion$1 = Emotion;\n\nexport { CacheProvider as C, Emotion$1 as E, ThemeContext as T, __unsafe_useEmotionCache as _, ThemeProvider as a, withTheme as b, createEmotionProps as c, hasOwn as h, isDevelopment as i, useTheme as u, withEmotionCache as w };\n","import * as ReactJSXRuntime from 'react/jsx-runtime';\nimport { h as hasOwn, E as Emotion, c as createEmotionProps } from '../../dist/emotion-element-f0de968e.browser.esm.js';\nimport 'react';\nimport '@emotion/cache';\nimport '@babel/runtime/helpers/extends';\nimport '@emotion/weak-memoize';\nimport '../../_isolated-hnrs/dist/emotion-react-_isolated-hnrs.browser.esm.js';\nimport 'hoist-non-react-statics';\nimport '@emotion/utils';\nimport '@emotion/serialize';\nimport '@emotion/use-insertion-effect-with-fallbacks';\n\nvar Fragment = ReactJSXRuntime.Fragment;\nvar jsx = function jsx(type, props, key) {\n  if (!hasOwn.call(props, 'css')) {\n    return ReactJSXRuntime.jsx(type, props, key);\n  }\n\n  return ReactJSXRuntime.jsx(Emotion, createEmotionProps(type, props), key);\n};\nvar jsxs = function jsxs(type, props, key) {\n  if (!hasOwn.call(props, 'css')) {\n    return ReactJSXRuntime.jsxs(type, props, key);\n  }\n\n  return ReactJSXRuntime.jsxs(Emotion, createEmotionProps(type, props), key);\n};\n\nexport { Fragment, jsx, jsxs };\n","/*\nCopyright (c) 2015 NAVER Corp.\nname: @egjs/agent\nlicense: MIT\nauthor: NAVER Corp.\nrepository: git+https://github.com/naver/egjs-agent.git\nversion: 2.4.4\n*/\nfunction some(arr, callback) {\n  var length = arr.length;\n\n  for (var i = 0; i < length; ++i) {\n    if (callback(arr[i], i)) {\n      return true;\n    }\n  }\n\n  return false;\n}\nfunction find(arr, callback) {\n  var length = arr.length;\n\n  for (var i = 0; i < length; ++i) {\n    if (callback(arr[i], i)) {\n      return arr[i];\n    }\n  }\n\n  return null;\n}\nfunction getUserAgentString(agent) {\n  var userAgent = agent;\n\n  if (typeof userAgent === \"undefined\") {\n    if (typeof navigator === \"undefined\" || !navigator) {\n      return \"\";\n    }\n\n    userAgent = navigator.userAgent || \"\";\n  }\n\n  return userAgent.toLowerCase();\n}\nfunction execRegExp(pattern, text) {\n  try {\n    return new RegExp(pattern, \"g\").exec(text);\n  } catch (e) {\n    return null;\n  }\n}\nfunction hasUserAgentData() {\n  if (typeof navigator === \"undefined\" || !navigator || !navigator.userAgentData) {\n    return false;\n  }\n\n  var userAgentData = navigator.userAgentData;\n  var brands = userAgentData.brands || userAgentData.uaList;\n  return !!(brands && brands.length);\n}\nfunction findVersion(versionTest, userAgent) {\n  var result = execRegExp(\"(\" + versionTest + \")((?:\\\\/|\\\\s|:)([0-9|\\\\.|_]+))\", userAgent);\n  return result ? result[3] : \"\";\n}\nfunction convertVersion(text) {\n  return text.replace(/_/g, \".\");\n}\nfunction findPreset(presets, userAgent) {\n  var userPreset = null;\n  var version = \"-1\";\n  some(presets, function (preset) {\n    var result = execRegExp(\"(\" + preset.test + \")((?:\\\\/|\\\\s|:)([0-9|\\\\.|_]+))?\", userAgent);\n\n    if (!result || preset.brand) {\n      return false;\n    }\n\n    userPreset = preset;\n    version = result[3] || \"-1\";\n\n    if (preset.versionAlias) {\n      version = preset.versionAlias;\n    } else if (preset.versionTest) {\n      version = findVersion(preset.versionTest.toLowerCase(), userAgent) || version;\n    }\n\n    version = convertVersion(version);\n    return true;\n  });\n  return {\n    preset: userPreset,\n    version: version\n  };\n}\nfunction findPresetBrand(presets, brands) {\n  var brandInfo = {\n    brand: \"\",\n    version: \"-1\"\n  };\n  some(presets, function (preset) {\n    var result = findBrand(brands, preset);\n\n    if (!result) {\n      return false;\n    }\n\n    brandInfo.brand = preset.id;\n    brandInfo.version = preset.versionAlias || result.version;\n    return brandInfo.version !== \"-1\";\n  });\n  return brandInfo;\n}\nfunction findBrand(brands, preset) {\n  return find(brands, function (_a) {\n    var brand = _a.brand;\n    return execRegExp(\"\" + preset.test, brand.toLowerCase());\n  });\n}\n\nvar BROWSER_PRESETS = [{\n  test: \"phantomjs\",\n  id: \"phantomjs\"\n}, {\n  test: \"whale\",\n  id: \"whale\"\n}, {\n  test: \"edgios|edge|edg\",\n  id: \"edge\"\n}, {\n  test: \"msie|trident|windows phone\",\n  id: \"ie\",\n  versionTest: \"iemobile|msie|rv\"\n}, {\n  test: \"miuibrowser\",\n  id: \"miui browser\"\n}, {\n  test: \"samsungbrowser\",\n  id: \"samsung internet\"\n}, {\n  test: \"samsung\",\n  id: \"samsung internet\",\n  versionTest: \"version\"\n}, {\n  test: \"chrome|crios\",\n  id: \"chrome\"\n}, {\n  test: \"firefox|fxios\",\n  id: \"firefox\"\n}, {\n  test: \"android\",\n  id: \"android browser\",\n  versionTest: \"version\"\n}, {\n  test: \"safari|iphone|ipad|ipod\",\n  id: \"safari\",\n  versionTest: \"version\"\n}]; // chromium's engine(blink) is based on applewebkit 537.36.\n\nvar CHROMIUM_PRESETS = [{\n  test: \"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\\\schrome)\",\n  id: \"chrome\",\n  versionTest: \"chrome\"\n}, {\n  test: \"chromium\",\n  id: \"chrome\"\n}, {\n  test: \"whale\",\n  id: \"chrome\",\n  versionAlias: \"-1\",\n  brand: true\n}];\nvar WEBKIT_PRESETS = [{\n  test: \"applewebkit\",\n  id: \"webkit\",\n  versionTest: \"applewebkit|safari\"\n}];\nvar WEBVIEW_PRESETS = [{\n  test: \"(?=(iphone|ipad))(?!(.*version))\",\n  id: \"webview\"\n}, {\n  test: \"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))\",\n  id: \"webview\"\n}, {\n  // test webview\n  test: \"webview\",\n  id: \"webview\"\n}];\nvar OS_PRESETS = [{\n  test: \"windows phone\",\n  id: \"windows phone\"\n}, {\n  test: \"windows 2000\",\n  id: \"window\",\n  versionAlias: \"5.0\"\n}, {\n  test: \"windows nt\",\n  id: \"window\"\n}, {\n  test: \"win32|windows\",\n  id: \"window\"\n}, {\n  test: \"iphone|ipad|ipod\",\n  id: \"ios\",\n  versionTest: \"iphone os|cpu os\"\n}, {\n  test: \"macos|macintel|mac os x\",\n  id: \"mac\"\n}, {\n  test: \"android|linux armv81\",\n  id: \"android\"\n}, {\n  test: \"tizen\",\n  id: \"tizen\"\n}, {\n  test: \"webos|web0s\",\n  id: \"webos\"\n}];\n\nfunction isWebView(userAgent) {\n  return !!findPreset(WEBVIEW_PRESETS, userAgent).preset;\n}\nfunction getLegacyAgent(userAgent) {\n  var nextAgent = getUserAgentString(userAgent);\n  var isMobile = !!/mobi/g.exec(nextAgent);\n  var browser = {\n    name: \"unknown\",\n    version: \"-1\",\n    majorVersion: -1,\n    webview: isWebView(nextAgent),\n    chromium: false,\n    chromiumVersion: \"-1\",\n    webkit: false,\n    webkitVersion: \"-1\"\n  };\n  var os = {\n    name: \"unknown\",\n    version: \"-1\",\n    majorVersion: -1\n  };\n\n  var _a = findPreset(BROWSER_PRESETS, nextAgent),\n      browserPreset = _a.preset,\n      browserVersion = _a.version;\n\n  var _b = findPreset(OS_PRESETS, nextAgent),\n      osPreset = _b.preset,\n      osVersion = _b.version;\n\n  var chromiumPreset = findPreset(CHROMIUM_PRESETS, nextAgent);\n  browser.chromium = !!chromiumPreset.preset;\n  browser.chromiumVersion = chromiumPreset.version;\n\n  if (!browser.chromium) {\n    var webkitPreset = findPreset(WEBKIT_PRESETS, nextAgent);\n    browser.webkit = !!webkitPreset.preset;\n    browser.webkitVersion = webkitPreset.version;\n  }\n\n  if (osPreset) {\n    os.name = osPreset.id;\n    os.version = osVersion;\n    os.majorVersion = parseInt(osVersion, 10);\n  }\n\n  if (browserPreset) {\n    browser.name = browserPreset.id;\n    browser.version = browserVersion; // Early whale bugs\n\n    if (browser.webview && os.name === \"ios\" && browser.name !== \"safari\") {\n      browser.webview = false;\n    }\n  }\n\n  browser.majorVersion = parseInt(browser.version, 10);\n  return {\n    browser: browser,\n    os: os,\n    isMobile: isMobile,\n    isHints: false\n  };\n}\n\nfunction getClientHintsAgent(osData) {\n  var userAgentData = navigator.userAgentData;\n  var brands = (userAgentData.uaList || userAgentData.brands).slice();\n  var fullVersionList = osData && osData.fullVersionList;\n  var isMobile = userAgentData.mobile || false;\n  var firstBrand = brands[0];\n  var platform = (osData && osData.platform || userAgentData.platform || navigator.platform).toLowerCase();\n  var browser = {\n    name: firstBrand.brand,\n    version: firstBrand.version,\n    majorVersion: -1,\n    webkit: false,\n    webkitVersion: \"-1\",\n    chromium: false,\n    chromiumVersion: \"-1\",\n    webview: !!findPresetBrand(WEBVIEW_PRESETS, brands).brand || isWebView(getUserAgentString())\n  };\n  var os = {\n    name: \"unknown\",\n    version: \"-1\",\n    majorVersion: -1\n  };\n  browser.webkit = !browser.chromium && some(WEBKIT_PRESETS, function (preset) {\n    return findBrand(brands, preset);\n  });\n  var chromiumBrand = findPresetBrand(CHROMIUM_PRESETS, brands);\n  browser.chromium = !!chromiumBrand.brand;\n  browser.chromiumVersion = chromiumBrand.version || \"-1\";\n\n  if (!browser.chromium) {\n    var webkitBrand = findPresetBrand(WEBKIT_PRESETS, brands);\n    browser.webkit = !!webkitBrand.brand;\n    browser.webkitVersion = webkitBrand.version || \"-1\";\n  }\n\n  var platfomResult = find(OS_PRESETS, function (preset) {\n    return new RegExp(\"\" + preset.test, \"g\").exec(platform);\n  });\n  os.name = platfomResult ? platfomResult.id : \"\";\n\n  if (osData) {\n    os.version = osData.platformVersion || \"-1\";\n  }\n\n  if (fullVersionList && fullVersionList.length) {\n    var browserBrandByFullVersionList = findPresetBrand(BROWSER_PRESETS, fullVersionList);\n    browser.name = browserBrandByFullVersionList.brand || browser.name;\n    browser.version = browserBrandByFullVersionList.version || browser.version;\n  } else {\n    var browserBrand = findPresetBrand(BROWSER_PRESETS, brands);\n    browser.name = browserBrand.brand || browser.name;\n    browser.version = browserBrand.brand && osData ? osData.uaFullVersion : browserBrand.version;\n  }\n\n  if (browser.webkit) {\n    os.name = isMobile ? \"ios\" : \"mac\";\n  }\n\n  if (os.name === \"ios\" && browser.webview) {\n    browser.version = \"-1\";\n  }\n\n  os.version = convertVersion(os.version);\n  browser.version = convertVersion(browser.version);\n  os.majorVersion = parseInt(os.version, 10);\n  browser.majorVersion = parseInt(browser.version, 10);\n  return {\n    browser: browser,\n    os: os,\n    isMobile: isMobile,\n    isHints: true\n  };\n}\n\n/**\n * @namespace eg.agent\n */\n\n/**\n* Extracts accuate browser and operating system information from the user agent string or client hints.\n* @ko     client hints     .\n* @function eg.agent#getAccurateAgent\n* @param - Callback function to get the accuate agent <ko>    callback </ko>\n* @return - get the accuate agent promise. If Promise are not supported, null is returned. <ko>   promise . Promise    , null . </ko>\n* @example\nimport { getAccurateAgent } from \"@egjs/agent\";\n// eg.agent.getAccurateAgent()\ngetAccurateAgent().then(agent => {\n   const { os, browser, isMobile } = agent;\n});\ngetAccurateAgent(agent => {\n    const { os, browser, isMobile } = agent;\n});\n*/\n\nfunction getAccurateAgent(callback) {\n  if (hasUserAgentData()) {\n    return navigator.userAgentData.getHighEntropyValues([\"architecture\", \"model\", \"platform\", \"platformVersion\", \"uaFullVersion\", \"fullVersionList\"]).then(function (info) {\n      var agentInfo = getClientHintsAgent(info);\n      callback && callback(agentInfo);\n      return agentInfo;\n    });\n  }\n\n  callback && callback(agent());\n\n  if (typeof Promise === \"undefined\" || !Promise) {\n    return null;\n  }\n\n  return Promise.resolve(agent());\n}\n/**\n * Extracts browser and operating system information from the user agent string.\n * @ko       .\n * @function eg.agent#agent\n * @param - user agent string to parse <ko>  </ko>\n * @return - agent Info <ko>   </ko>\n * @example\nimport agent from \"@egjs/agent\";\n// eg.agent();\nconst { os, browser, isMobile } = agent();\n */\n\nfunction agent(userAgent) {\n  if (typeof userAgent === \"undefined\" && hasUserAgentData()) {\n    return getClientHintsAgent();\n  } else {\n    return getLegacyAgent(userAgent);\n  }\n}\n\nexport default agent;\nexport { getAccurateAgent, getLegacyAgent };\n//# sourceMappingURL=agent.esm.js.map\n","/*\nCopyright (c) 2019 Daybrush\nname: framework-utils\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/framework-utils.git\nversion: 1.1.0\n*/\nfunction prefixNames(prefix) {\n  var classNames = [];\n\n  for (var _i = 1; _i < arguments.length; _i++) {\n    classNames[_i - 1] = arguments[_i];\n  }\n\n  return classNames.map(function (className) {\n    return className.split(\" \").map(function (name) {\n      return name ? \"\" + prefix + name : \"\";\n    }).join(\" \");\n  }).join(\" \");\n}\nfunction prefixCSS(prefix, css) {\n  return css.replace(/([^}{]*){/gm, function (_, selector) {\n    return selector.replace(/\\.([^{,\\s\\d.]+)/g, \".\" + prefix + \"$1\") + \"{\";\n  });\n}\n/* react */\n\nfunction ref(target, name) {\n  return function (e) {\n    e && (target[name] = e);\n  };\n}\nfunction refs(target, name, i) {\n  return function (e) {\n    e && (target[name][i] = e);\n  };\n}\n/* Class Decorator */\n\nfunction Properties(properties, action) {\n  return function (component) {\n    var prototype = component.prototype;\n    properties.forEach(function (property) {\n      action(prototype, property);\n    });\n  };\n}\n/* Property Decorator */\n\nfunction withMethods(methods, duplicate) {\n  if (duplicate === void 0) {\n    duplicate = {};\n  }\n\n  return function (prototype, propertyName) {\n    methods.forEach(function (name) {\n      var methodName = duplicate[name] || name;\n\n      if (methodName in prototype) {\n        return;\n      }\n\n      prototype[methodName] = function () {\n        var _a;\n\n        var args = [];\n\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n\n        var result = (_a = this[propertyName])[name].apply(_a, args);\n\n        if (result === this[propertyName]) {\n          return this;\n        } else {\n          return result;\n        }\n      };\n    });\n  };\n}\n\nexport { Properties, prefixCSS, prefixNames, ref, refs, withMethods };\n//# sourceMappingURL=utils.esm.js.map\n","/*\nCopyright (c) 2018 Daybrush\n@name: @daybrush/utils\nlicense: MIT\nauthor: Daybrush\nrepository: https://github.com/daybrush/utils\n@version 1.13.0\n*/\n/**\n* @namespace\n* @name Consts\n*/\n/**\n* get string \"rgb\"\n* @memberof Color\n* @example\nimport {RGB} from \"@daybrush/utils\";\n\nconsole.log(RGB); // \"rgb\"\n*/\nvar RGB = \"rgb\";\n/**\n* get string \"rgba\"\n* @memberof Color\n* @example\nimport {RGBA} from \"@daybrush/utils\";\n\nconsole.log(RGBA); // \"rgba\"\n*/\nvar RGBA = \"rgba\";\n/**\n* get string \"hsl\"\n* @memberof Color\n* @example\nimport {HSL} from \"@daybrush/utils\";\n\nconsole.log(HSL); // \"hsl\"\n*/\nvar HSL = \"hsl\";\n/**\n* get string \"hsla\"\n* @memberof Color\n* @example\nimport {HSLA} from \"@daybrush/utils\";\n\nconsole.log(HSLA); // \"hsla\"\n*/\nvar HSLA = \"hsla\";\n/**\n* gets an array of color models.\n* @memberof Color\n* @example\nimport {COLOR_MODELS} from \"@daybrush/utils\";\n\nconsole.log(COLOR_MODELS); // [\"rgb\", \"rgba\", \"hsl\", \"hsla\"];\n*/\nvar COLOR_MODELS = [RGB, RGBA, HSL, HSLA];\n/**\n* get string \"function\"\n* @memberof Consts\n* @example\nimport {FUNCTION} from \"@daybrush/utils\";\n\nconsole.log(FUNCTION); // \"function\"\n*/\nvar FUNCTION = \"function\";\n/**\n* get string \"property\"\n* @memberof Consts\n* @example\nimport {PROPERTY} from \"@daybrush/utils\";\n\nconsole.log(PROPERTY); // \"property\"\n*/\nvar PROPERTY = \"property\";\n/**\n* get string \"array\"\n* @memberof Consts\n* @example\nimport {ARRAY} from \"@daybrush/utils\";\n\nconsole.log(ARRAY); // \"array\"\n*/\nvar ARRAY = \"array\";\n/**\n* get string \"object\"\n* @memberof Consts\n* @example\nimport {OBJECT} from \"@daybrush/utils\";\n\nconsole.log(OBJECT); // \"object\"\n*/\nvar OBJECT = \"object\";\n/**\n* get string \"string\"\n* @memberof Consts\n* @example\nimport {STRING} from \"@daybrush/utils\";\n\nconsole.log(STRING); // \"string\"\n*/\nvar STRING = \"string\";\n/**\n* get string \"number\"\n* @memberof Consts\n* @example\nimport {NUMBER} from \"@daybrush/utils\";\n\nconsole.log(NUMBER); // \"number\"\n*/\nvar NUMBER = \"number\";\n/**\n* get string \"undefined\"\n* @memberof Consts\n* @example\nimport {UNDEFINED} from \"@daybrush/utils\";\n\nconsole.log(UNDEFINED); // \"undefined\"\n*/\nvar UNDEFINED = \"undefined\";\n/**\n* Check whether the environment is window or node.js.\n* @memberof Consts\n* @example\nimport {IS_WINDOW} from \"@daybrush/utils\";\n\nconsole.log(IS_WINDOW); // false in node.js\nconsole.log(IS_WINDOW); // true in browser\n*/\nvar IS_WINDOW = typeof window !== UNDEFINED;\n/**\n* Check whether the environment is window or node.js.\n* @memberof Consts\n* @name document\n* @example\nimport {IS_WINDOW} from \"@daybrush/utils\";\n\nconsole.log(IS_WINDOW); // false in node.js\nconsole.log(IS_WINDOW); // true in browser\n*/\nvar doc = typeof document !== UNDEFINED && document; // FIXME: this type maybe false\nvar prefixes = [\"webkit\", \"ms\", \"moz\", \"o\"];\n/**\n * @namespace CrossBrowser\n */\n/**\n* Get a CSS property with a vendor prefix that supports cross browser.\n* @function\n* @param {string} property - A CSS property\n* @return {string} CSS property with cross-browser vendor prefix\n* @memberof CrossBrowser\n* @example\nimport {getCrossBrowserProperty} from \"@daybrush/utils\";\n\nconsole.log(getCrossBrowserProperty(\"transform\")); // \"transform\", \"-ms-transform\", \"-webkit-transform\"\nconsole.log(getCrossBrowserProperty(\"filter\")); // \"filter\", \"-webkit-filter\"\n*/\nvar getCrossBrowserProperty = /*#__PURE__*/function (property) {\n  if (!doc) {\n    return \"\";\n  }\n  var styles = (doc.body || doc.documentElement).style;\n  var length = prefixes.length;\n  if (typeof styles[property] !== UNDEFINED) {\n    return property;\n  }\n  for (var i = 0; i < length; ++i) {\n    var name = \"-\" + prefixes[i] + \"-\" + property;\n    if (typeof styles[name] !== UNDEFINED) {\n      return name;\n    }\n  }\n  return \"\";\n};\n/**\n* get string \"transfrom\" with the vendor prefix.\n* @memberof CrossBrowser\n* @example\nimport {TRANSFORM} from \"@daybrush/utils\";\n\nconsole.log(TRANSFORM); // \"transform\", \"-ms-transform\", \"-webkit-transform\"\n*/\nvar TRANSFORM = /*#__PURE__*/getCrossBrowserProperty(\"transform\");\n/**\n* get string \"filter\" with the vendor prefix.\n* @memberof CrossBrowser\n* @example\nimport {FILTER} from \"@daybrush/utils\";\n\nconsole.log(FILTER); // \"filter\", \"-ms-filter\", \"-webkit-filter\"\n*/\nvar FILTER = /*#__PURE__*/getCrossBrowserProperty(\"filter\");\n/**\n* get string \"animation\" with the vendor prefix.\n* @memberof CrossBrowser\n* @example\nimport {ANIMATION} from \"@daybrush/utils\";\n\nconsole.log(ANIMATION); // \"animation\", \"-ms-animation\", \"-webkit-animation\"\n*/\nvar ANIMATION = /*#__PURE__*/getCrossBrowserProperty(\"animation\");\n/**\n* get string \"keyframes\" with the vendor prefix.\n* @memberof CrossBrowser\n* @example\nimport {KEYFRAMES} from \"@daybrush/utils\";\n\nconsole.log(KEYFRAMES); // \"keyframes\", \"-ms-keyframes\", \"-webkit-keyframes\"\n*/\nvar KEYFRAMES = /*#__PURE__*/ANIMATION.replace(\"animation\", \"keyframes\");\nvar OPEN_CLOSED_CHARACTERS = [{\n  open: \"(\",\n  close: \")\"\n}, {\n  open: \"\\\"\",\n  close: \"\\\"\"\n}, {\n  open: \"'\",\n  close: \"'\"\n}, {\n  open: \"\\\\\\\"\",\n  close: \"\\\\\\\"\"\n}, {\n  open: \"\\\\'\",\n  close: \"\\\\'\"\n}];\nvar TINY_NUM = 0.0000001;\nvar REVERSE_TINY_NUM = 1 / TINY_NUM;\nvar DEFAULT_UNIT_PRESETS = {\n  \"cm\": function (pos) {\n    return pos * 96 / 2.54;\n  },\n  \"mm\": function (pos) {\n    return pos * 96 / 254;\n  },\n  \"in\": function (pos) {\n    return pos * 96;\n  },\n  \"pt\": function (pos) {\n    return pos * 96 / 72;\n  },\n  \"pc\": function (pos) {\n    return pos * 96 / 6;\n  },\n  \"%\": function (pos, size) {\n    return pos * size / 100;\n  },\n  \"vw\": function (pos, size) {\n    if (size === void 0) {\n      size = window.innerWidth;\n    }\n    return pos / 100 * size;\n  },\n  \"vh\": function (pos, size) {\n    if (size === void 0) {\n      size = window.innerHeight;\n    }\n    return pos / 100 * size;\n  },\n  \"vmax\": function (pos, size) {\n    if (size === void 0) {\n      size = Math.max(window.innerWidth, window.innerHeight);\n    }\n    return pos / 100 * size;\n  },\n  \"vmin\": function (pos, size) {\n    if (size === void 0) {\n      size = Math.min(window.innerWidth, window.innerHeight);\n    }\n    return pos / 100 * size;\n  }\n};\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\nfunction __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n  return r;\n}\n\n/**\n* @namespace\n* @name Utils\n*/\n/**\n * Returns the inner product of two numbers(`a1`, `a2`) by two criteria(`b1`, `b2`).\n * @memberof Utils\n * @param - The first number\n * @param - The second number\n * @param - The first number to base on the inner product\n * @param - The second number to base on the inner product\n * @return - Returns the inner product\nimport { dot } from \"@daybrush/utils\";\n\nconsole.log(dot(0, 15, 2, 3)); // 6\nconsole.log(dot(5, 15, 2, 3)); // 9\nconsole.log(dot(5, 15, 1, 1)); // 10\n */\nfunction dot(a1, a2, b1, b2) {\n  return (a1 * b2 + a2 * b1) / (b1 + b2);\n}\n/**\n* Check the type that the value is undefined.\n* @memberof Utils\n* @param {string} value - Value to check the type\n* @return {boolean} true if the type is correct, false otherwise\n* @example\nimport {isUndefined} from \"@daybrush/utils\";\n\nconsole.log(isUndefined(undefined)); // true\nconsole.log(isUndefined(\"\")); // false\nconsole.log(isUndefined(1)); // false\nconsole.log(isUndefined(null)); // false\n*/\nfunction isUndefined(value) {\n  return typeof value === UNDEFINED;\n}\n/**\n* Check the type that the value is object.\n* @memberof Utils\n* @param {string} value - Value to check the type\n* @return {} true if the type is correct, false otherwise\n* @example\nimport {isObject} from \"@daybrush/utils\";\n\nconsole.log(isObject({})); // true\nconsole.log(isObject(undefined)); // false\nconsole.log(isObject(\"\")); // false\nconsole.log(isObject(null)); // false\n*/\nfunction isObject(value) {\n  return value && typeof value === OBJECT;\n}\n/**\n* Check the type that the value is isArray.\n* @memberof Utils\n* @param {string} value - Value to check the type\n* @return {} true if the type is correct, false otherwise\n* @example\nimport {isArray} from \"@daybrush/utils\";\n\nconsole.log(isArray([])); // true\nconsole.log(isArray({})); // false\nconsole.log(isArray(undefined)); // false\nconsole.log(isArray(null)); // false\n*/\nfunction isArray(value) {\n  return Array.isArray(value);\n}\n/**\n* Check the type that the value is string.\n* @memberof Utils\n* @param {string} value - Value to check the type\n* @return {} true if the type is correct, false otherwise\n* @example\nimport {isString} from \"@daybrush/utils\";\n\nconsole.log(isString(\"1234\")); // true\nconsole.log(isString(undefined)); // false\nconsole.log(isString(1)); // false\nconsole.log(isString(null)); // false\n*/\nfunction isString(value) {\n  return typeof value === STRING;\n}\nfunction isNumber(value) {\n  return typeof value === NUMBER;\n}\n/**\n* Check the type that the value is function.\n* @memberof Utils\n* @param {string} value - Value to check the type\n* @return {} true if the type is correct, false otherwise\n* @example\nimport {isFunction} from \"@daybrush/utils\";\n\nconsole.log(isFunction(function a() {})); // true\nconsole.log(isFunction(() => {})); // true\nconsole.log(isFunction(\"1234\")); // false\nconsole.log(isFunction(1)); // false\nconsole.log(isFunction(null)); // false\n*/\nfunction isFunction(value) {\n  return typeof value === FUNCTION;\n}\nfunction isEqualSeparator(character, separator) {\n  var isCharacterSpace = character === \"\" || character == \" \";\n  var isSeparatorSpace = separator === \"\" || separator == \" \";\n  return isSeparatorSpace && isCharacterSpace || character === separator;\n}\nfunction findOpen(openCharacter, texts, index, length, openCloseCharacters) {\n  var isIgnore = findIgnore(openCharacter, texts, index);\n  if (!isIgnore) {\n    return findClose(openCharacter, texts, index + 1, length, openCloseCharacters);\n  }\n  return index;\n}\nfunction findIgnore(character, texts, index) {\n  if (!character.ignore) {\n    return null;\n  }\n  var otherText = texts.slice(Math.max(index - 3, 0), index + 3).join(\"\");\n  return new RegExp(character.ignore).exec(otherText);\n}\nfunction findClose(closeCharacter, texts, index, length, openCloseCharacters) {\n  var _loop_1 = function (i) {\n    var character = texts[i].trim();\n    if (character === closeCharacter.close && !findIgnore(closeCharacter, texts, i)) {\n      return {\n        value: i\n      };\n    }\n    var nextIndex = i;\n    // re open\n    var openCharacter = find(openCloseCharacters, function (_a) {\n      var open = _a.open;\n      return open === character;\n    });\n    if (openCharacter) {\n      nextIndex = findOpen(openCharacter, texts, i, length, openCloseCharacters);\n    }\n    if (nextIndex === -1) {\n      return out_i_1 = i, \"break\";\n    }\n    i = nextIndex;\n    out_i_1 = i;\n  };\n  var out_i_1;\n  for (var i = index; i < length; ++i) {\n    var state_1 = _loop_1(i);\n    i = out_i_1;\n    if (typeof state_1 === \"object\") return state_1.value;\n    if (state_1 === \"break\") break;\n  }\n  return -1;\n}\nfunction splitText(text, splitOptions) {\n  var _a = isString(splitOptions) ? {\n      separator: splitOptions\n    } : splitOptions,\n    _b = _a.separator,\n    separator = _b === void 0 ? \",\" : _b,\n    isSeparateFirst = _a.isSeparateFirst,\n    isSeparateOnlyOpenClose = _a.isSeparateOnlyOpenClose,\n    _c = _a.isSeparateOpenClose,\n    isSeparateOpenClose = _c === void 0 ? isSeparateOnlyOpenClose : _c,\n    _d = _a.openCloseCharacters,\n    openCloseCharacters = _d === void 0 ? OPEN_CLOSED_CHARACTERS : _d;\n  var openClosedText = openCloseCharacters.map(function (_a) {\n    var open = _a.open,\n      close = _a.close;\n    if (open === close) {\n      return open;\n    }\n    return open + \"|\" + close;\n  }).join(\"|\");\n  var regexText = \"(\\\\s*\" + separator + \"\\\\s*|\" + openClosedText + \"|\\\\s+)\";\n  var regex = new RegExp(regexText, \"g\");\n  var texts = text.split(regex).filter(function (chr) {\n    return chr && chr !== \"undefined\";\n  });\n  var length = texts.length;\n  var values = [];\n  var tempValues = [];\n  function resetTemp() {\n    if (tempValues.length) {\n      values.push(tempValues.join(\"\"));\n      tempValues = [];\n      return true;\n    }\n    return false;\n  }\n  var _loop_2 = function (i) {\n    var character = texts[i].trim();\n    var nextIndex = i;\n    var openCharacter = find(openCloseCharacters, function (_a) {\n      var open = _a.open;\n      return open === character;\n    });\n    var closeCharacter = find(openCloseCharacters, function (_a) {\n      var close = _a.close;\n      return close === character;\n    });\n    if (openCharacter) {\n      nextIndex = findOpen(openCharacter, texts, i, length, openCloseCharacters);\n      if (nextIndex !== -1 && isSeparateOpenClose) {\n        if (resetTemp() && isSeparateFirst) {\n          return out_i_2 = i, \"break\";\n        }\n        values.push(texts.slice(i, nextIndex + 1).join(\"\"));\n        i = nextIndex;\n        if (isSeparateFirst) {\n          return out_i_2 = i, \"break\";\n        }\n        return out_i_2 = i, \"continue\";\n      }\n    } else if (closeCharacter && !findIgnore(closeCharacter, texts, i)) {\n      var nextOpenCloseCharacters = __spreadArrays(openCloseCharacters);\n      nextOpenCloseCharacters.splice(openCloseCharacters.indexOf(closeCharacter), 1);\n      return {\n        value: splitText(text, {\n          separator: separator,\n          isSeparateFirst: isSeparateFirst,\n          isSeparateOnlyOpenClose: isSeparateOnlyOpenClose,\n          isSeparateOpenClose: isSeparateOpenClose,\n          openCloseCharacters: nextOpenCloseCharacters\n        })\n      };\n    } else if (isEqualSeparator(character, separator) && !isSeparateOnlyOpenClose) {\n      resetTemp();\n      if (isSeparateFirst) {\n        return out_i_2 = i, \"break\";\n      }\n      return out_i_2 = i, \"continue\";\n    }\n    if (nextIndex === -1) {\n      nextIndex = length - 1;\n    }\n    tempValues.push(texts.slice(i, nextIndex + 1).join(\"\"));\n    i = nextIndex;\n    out_i_2 = i;\n  };\n  var out_i_2;\n  for (var i = 0; i < length; ++i) {\n    var state_2 = _loop_2(i);\n    i = out_i_2;\n    if (typeof state_2 === \"object\") return state_2.value;\n    if (state_2 === \"break\") break;\n  }\n  if (tempValues.length) {\n    values.push(tempValues.join(\"\"));\n  }\n  return values;\n}\n/**\n* divide text by space.\n* @memberof Utils\n* @param {string} text - text to divide\n* @return {Array} divided texts\n* @example\nimport {spliceSpace} from \"@daybrush/utils\";\n\nconsole.log(splitSpace(\"a b c d e f g\"));\n// [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\"]\nconsole.log(splitSpace(\"'a,b' c 'd,e' f g\"));\n// [\"'a,b'\", \"c\", \"'d,e'\", \"f\", \"g\"]\n*/\nfunction splitSpace(text) {\n  // divide comma(space)\n  return splitText(text, \"\");\n}\n/**\n* divide text by comma.\n* @memberof Utils\n* @param {string} text - text to divide\n* @return {Array} divided texts\n* @example\nimport {splitComma} from \"@daybrush/utils\";\n\nconsole.log(splitComma(\"a,b,c,d,e,f,g\"));\n// [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\"]\nconsole.log(splitComma(\"'a,b',c,'d,e',f,g\"));\n// [\"'a,b'\", \"c\", \"'d,e'\", \"f\", \"g\"]\n*/\nfunction splitComma(text) {\n  // divide comma(,)\n  // \"[^\"]*\"|'[^']*'\n  return splitText(text, \",\");\n}\n/**\n* divide text by bracket \"(\", \")\".\n* @memberof Utils\n* @param {string} text - text to divide\n* @return {object} divided texts\n* @example\nimport {splitBracket} from \"@daybrush/utils\";\n\nconsole.log(splitBracket(\"a(1, 2)\"));\n// {prefix: \"a\", value: \"1, 2\", suffix: \"\"}\nconsole.log(splitBracket(\"a(1, 2)b\"));\n// {prefix: \"a\", value: \"1, 2\", suffix: \"b\"}\n*/\nfunction splitBracket(text) {\n  var matches = /([^(]*)\\(([\\s\\S]*)\\)([\\s\\S]*)/g.exec(text);\n  if (!matches || matches.length < 4) {\n    return {};\n  } else {\n    return {\n      prefix: matches[1],\n      value: matches[2],\n      suffix: matches[3]\n    };\n  }\n}\n/**\n* divide text by number and unit.\n* @memberof Utils\n* @param {string} text - text to divide\n* @return {} divided texts\n* @example\nimport {splitUnit} from \"@daybrush/utils\";\n\nconsole.log(splitUnit(\"10px\"));\n// {prefix: \"\", value: 10, unit: \"px\"}\nconsole.log(splitUnit(\"-10px\"));\n// {prefix: \"\", value: -10, unit: \"px\"}\nconsole.log(splitUnit(\"a10%\"));\n// {prefix: \"a\", value: 10, unit: \"%\"}\n*/\nfunction splitUnit(text) {\n  var matches = /^([^\\d|e|\\-|\\+]*)((?:\\d|\\.|-|e-|e\\+)+)(\\S*)$/g.exec(text);\n  if (!matches) {\n    return {\n      prefix: \"\",\n      unit: \"\",\n      value: NaN\n    };\n  }\n  var prefix = matches[1];\n  var value = matches[2];\n  var unit = matches[3];\n  return {\n    prefix: prefix,\n    unit: unit,\n    value: parseFloat(value)\n  };\n}\n/**\n* transform strings to camel-case\n* @memberof Utils\n* @param {String} text - string\n* @return {String} camel-case string\n* @example\nimport {camelize} from \"@daybrush/utils\";\n\nconsole.log(camelize(\"transform-origin\")); // transformOrigin\nconsole.log(camelize(\"abcd_efg\")); // abcdEfg\nconsole.log(camelize(\"abcd efg\")); // abcdEfg\n*/\nfunction camelize(str) {\n  return str.replace(/[\\s-_]+([^\\s-_])/g, function (all, letter) {\n    return letter.toUpperCase();\n  });\n}\n/**\n* transform a camelized string into a lowercased string.\n* @memberof Utils\n* @param {string} text - a camel-cased string\n* @param {string} [separator=\"-\"] - a separator\n* @return {string}  a lowercased string\n* @example\nimport {decamelize} from \"@daybrush/utils\";\n\nconsole.log(decamelize(\"transformOrigin\")); // transform-origin\nconsole.log(decamelize(\"abcdEfg\", \"_\")); // abcd_efg\n*/\nfunction decamelize(str, separator) {\n  if (separator === void 0) {\n    separator = \"-\";\n  }\n  return str.replace(/([a-z])([A-Z])/g, function (all, letter, letter2) {\n    return \"\" + letter + separator + letter2.toLowerCase();\n  });\n}\n/**\n* transforms something in an array into an array.\n* @memberof Utils\n* @param - Array form\n* @return an array\n* @example\nimport {toArray} from \"@daybrush/utils\";\n\nconst arr1 = toArray(document.querySelectorAll(\".a\")); // Element[]\nconst arr2 = toArray(document.querySelectorAll<HTMLElement>(\".a\")); // HTMLElement[]\n*/\nfunction toArray(value) {\n  return [].slice.call(value);\n}\n/**\n* Date.now() method\n* @memberof CrossBrowser\n* @return {number} milliseconds\n* @example\nimport {now} from \"@daybrush/utils\";\n\nconsole.log(now()); // 12121324241(milliseconds)\n*/\nfunction now() {\n  return Date.now ? Date.now() : new Date().getTime();\n}\n/**\n* Returns the index of the first element in the array that satisfies the provided testing function.\n* @function\n* @memberof CrossBrowser\n* @param - The array `findIndex` was called upon.\n* @param - A function to execute on each value in the array until the function returns true, indicating that the satisfying element was found.\n* @param - Returns defaultIndex if not found by the function.\n* @example\nimport { findIndex } from \"@daybrush/utils\";\n\nfindIndex([{a: 1}, {a: 2}, {a: 3}, {a: 4}], ({ a }) => a === 2); // 1\n*/\nfunction findIndex(arr, callback, defaultIndex) {\n  if (defaultIndex === void 0) {\n    defaultIndex = -1;\n  }\n  var length = arr.length;\n  for (var i = 0; i < length; ++i) {\n    if (callback(arr[i], i, arr)) {\n      return i;\n    }\n  }\n  return defaultIndex;\n}\n/**\n* Returns the reverse direction index of the first element in the array that satisfies the provided testing function.\n* @function\n* @memberof CrossBrowser\n* @param - The array `findLastIndex` was called upon.\n* @param - A function to execute on each value in the array until the function returns true, indicating that the satisfying element was found.\n* @param - Returns defaultIndex if not found by the function.\n* @example\nimport { findLastIndex } from \"@daybrush/utils\";\n\nfindLastIndex([{a: 1}, {a: 2}, {a: 3}, {a: 4}], ({ a }) => a === 2); // 1\n*/\nfunction findLastIndex(arr, callback, defaultIndex) {\n  if (defaultIndex === void 0) {\n    defaultIndex = -1;\n  }\n  var length = arr.length;\n  for (var i = length - 1; i >= 0; --i) {\n    if (callback(arr[i], i, arr)) {\n      return i;\n    }\n  }\n  return defaultIndex;\n}\n/**\n* Returns the value of the reverse direction element in the array that satisfies the provided testing function.\n* @function\n* @memberof CrossBrowser\n* @param - The array `findLast` was called upon.\n* @param - A function to execute on each value in the array,\n* @param - Returns defalutValue if not found by the function.\n* @example\nimport { find } from \"@daybrush/utils\";\n\nfind([{a: 1}, {a: 2}, {a: 3}, {a: 4}], ({ a }) => a === 2); // {a: 2}\n*/\nfunction findLast(arr, callback, defalutValue) {\n  var index = findLastIndex(arr, callback);\n  return index > -1 ? arr[index] : defalutValue;\n}\n/**\n* Returns the value of the first element in the array that satisfies the provided testing function.\n* @function\n* @memberof CrossBrowser\n* @param - The array `find` was called upon.\n* @param - A function to execute on each value in the array,\n* @param - Returns defalutValue if not found by the function.\n* @example\nimport { find } from \"@daybrush/utils\";\n\nfind([{a: 1}, {a: 2}, {a: 3}, {a: 4}], ({ a }) => a === 2); // {a: 2}\n*/\nfunction find(arr, callback, defalutValue) {\n  var index = findIndex(arr, callback);\n  return index > -1 ? arr[index] : defalutValue;\n}\n/**\n* window.requestAnimationFrame() method with cross browser.\n* @function\n* @memberof CrossBrowser\n* @param {FrameRequestCallback} callback - The function to call when it's time to update your animation for the next repaint.\n* @return {number} id\n* @example\nimport {requestAnimationFrame} from \"@daybrush/utils\";\n\nrequestAnimationFrame((timestamp) => {\n  console.log(timestamp);\n});\n*/\nvar requestAnimationFrame = /*#__PURE__*/function () {\n  var firstTime = now();\n  var raf = IS_WINDOW && (window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.msRequestAnimationFrame);\n  return raf ? raf.bind(window) : function (callback) {\n    var currTime = now();\n    var id = setTimeout(function () {\n      callback(currTime - firstTime);\n    }, 1000 / 60);\n    return id;\n  };\n}();\n/**\n* window.cancelAnimationFrame() method with cross browser.\n* @function\n* @memberof CrossBrowser\n* @param {number} handle - the id obtained through requestAnimationFrame method\n* @return {void}\n* @example\nimport { requestAnimationFrame, cancelAnimationFrame } from \"@daybrush/utils\";\n\nconst id = requestAnimationFrame((timestamp) => {\n  console.log(timestamp);\n});\n\ncancelAnimationFrame(id);\n*/\nvar cancelAnimationFrame = /*#__PURE__*/function () {\n  var caf = IS_WINDOW && (window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || window.msCancelAnimationFrame);\n  return caf ? caf.bind(window) : function (handle) {\n    clearTimeout(handle);\n  };\n}();\n/**\n* @function\n* @memberof Utils\n*/\nfunction getKeys(obj) {\n  return Object.keys(obj);\n}\n/**\n* @function\n* @memberof Utils\n*/\nfunction getValues(obj) {\n  var keys = getKeys(obj);\n  return keys.map(function (key) {\n    return obj[key];\n  });\n}\n/**\n* @function\n* @memberof Utils\n*/\nfunction getEntries(obj) {\n  var keys = getKeys(obj);\n  return keys.map(function (key) {\n    return [key, obj[key]];\n  });\n}\n/**\n* @function\n* @memberof Utils\n*/\nfunction sortOrders(keys, orders) {\n  if (orders === void 0) {\n    orders = [];\n  }\n  keys.sort(function (a, b) {\n    var index1 = orders.indexOf(a);\n    var index2 = orders.indexOf(b);\n    if (index2 === -1 && index1 === -1) {\n      return 0;\n    }\n    if (index1 === -1) {\n      return 1;\n    }\n    if (index2 === -1) {\n      return -1;\n    }\n    return index1 - index2;\n  });\n}\n/**\n* convert unit size to px size\n* @function\n* @memberof Utils\n*/\nfunction convertUnitSize(pos, size) {\n  var _a = splitUnit(pos),\n    value = _a.value,\n    unit = _a.unit;\n  if (isObject(size)) {\n    var sizeFunction = size[unit];\n    if (sizeFunction) {\n      if (isFunction(sizeFunction)) {\n        return sizeFunction(value);\n      } else if (DEFAULT_UNIT_PRESETS[unit]) {\n        return DEFAULT_UNIT_PRESETS[unit](value, sizeFunction);\n      }\n    }\n  } else if (unit === \"%\") {\n    return value * size / 100;\n  }\n  if (DEFAULT_UNIT_PRESETS[unit]) {\n    return DEFAULT_UNIT_PRESETS[unit](value);\n  }\n  return value;\n}\n/**\n* calculate between min, max\n* @function\n* @memberof Utils\n*/\nfunction between(value, min, max) {\n  return Math.max(min, Math.min(value, max));\n}\nfunction checkBoundSize(targetSize, compareSize, isMax, ratio) {\n  if (ratio === void 0) {\n    ratio = targetSize[0] / targetSize[1];\n  }\n  return [[throttle(compareSize[0], TINY_NUM), throttle(compareSize[0] / ratio, TINY_NUM)], [throttle(compareSize[1] * ratio, TINY_NUM), throttle(compareSize[1], TINY_NUM)]].filter(function (size) {\n    return size.every(function (value, i) {\n      var defaultSize = compareSize[i];\n      var throttledSize = throttle(defaultSize, TINY_NUM);\n      return isMax ? value <= defaultSize || value <= throttledSize : value >= defaultSize || value >= throttledSize;\n    });\n  })[0] || targetSize;\n}\n/**\n* calculate bound size\n* @function\n* @memberof Utils\n*/\nfunction calculateBoundSize(size, minSize, maxSize, keepRatio) {\n  if (!keepRatio) {\n    return size.map(function (value, i) {\n      return between(value, minSize[i], maxSize[i]);\n    });\n  }\n  var width = size[0],\n    height = size[1];\n  var ratio = keepRatio === true ? width / height : keepRatio;\n  // width : height = minWidth : minHeight;\n  var _a = checkBoundSize(size, minSize, false, ratio),\n    minWidth = _a[0],\n    minHeight = _a[1];\n  var _b = checkBoundSize(size, maxSize, true, ratio),\n    maxWidth = _b[0],\n    maxHeight = _b[1];\n  if (width < minWidth || height < minHeight) {\n    width = minWidth;\n    height = minHeight;\n  } else if (width > maxWidth || height > maxHeight) {\n    width = maxWidth;\n    height = maxHeight;\n  }\n  return [width, height];\n}\n/**\n* Add all the numbers.\n* @function\n* @memberof Utils\n*/\nfunction sum(nums) {\n  var length = nums.length;\n  var total = 0;\n  for (var i = length - 1; i >= 0; --i) {\n    total += nums[i];\n  }\n  return total;\n}\n/**\n* Average all numbers.\n* @function\n* @memberof Utils\n*/\nfunction average(nums) {\n  var length = nums.length;\n  var total = 0;\n  for (var i = length - 1; i >= 0; --i) {\n    total += nums[i];\n  }\n  return length ? total / length : 0;\n}\n/**\n* Get the angle of two points. (0 <= rad < 359)\n* @function\n* @memberof Utils\n*/\nfunction getRad(pos1, pos2) {\n  var distX = pos2[0] - pos1[0];\n  var distY = pos2[1] - pos1[1];\n  var rad = Math.atan2(distY, distX);\n  return rad >= 0 ? rad : rad + Math.PI * 2;\n}\n/**\n* Get the average point of all points.\n* @function\n* @memberof Utils\n*/\nfunction getCenterPoint(points) {\n  return [0, 1].map(function (i) {\n    return average(points.map(function (pos) {\n      return pos[i];\n    }));\n  });\n}\n/**\n* Gets the direction of the shape.\n* @function\n* @memberof Utils\n*/\nfunction getShapeDirection(points) {\n  var center = getCenterPoint(points);\n  var pos1Rad = getRad(center, points[0]);\n  var pos2Rad = getRad(center, points[1]);\n  return pos1Rad < pos2Rad && pos2Rad - pos1Rad < Math.PI || pos1Rad > pos2Rad && pos2Rad - pos1Rad < -Math.PI ? 1 : -1;\n}\n/**\n* Get the distance between two points.\n* @function\n* @memberof Utils\n*/\nfunction getDist(a, b) {\n  return Math.sqrt(Math.pow((b ? b[0] : 0) - a[0], 2) + Math.pow((b ? b[1] : 0) - a[1], 2));\n}\n/**\n* throttle number depending on the unit.\n* @function\n* @memberof Utils\n*/\nfunction throttle(num, unit) {\n  if (!unit) {\n    return num;\n  }\n  var reverseUnit = 1 / unit;\n  return Math.round(num / unit) / reverseUnit;\n}\n/**\n* throttle number array depending on the unit.\n* @function\n* @memberof Utils\n*/\nfunction throttleArray(nums, unit) {\n  nums.forEach(function (_, i) {\n    nums[i] = throttle(nums[i], unit);\n  });\n  return nums;\n}\n/**\n* @function\n* @memberof Utils\n*/\nfunction counter(num) {\n  var nums = [];\n  for (var i = 0; i < num; ++i) {\n    nums.push(i);\n  }\n  return nums;\n}\n/**\n* @function\n* @memberof Utils\n*/\nfunction replaceOnce(text, fromText, toText) {\n  var isOnce = false;\n  return text.replace(fromText, function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n    if (isOnce) {\n      return args[0];\n    }\n    isOnce = true;\n    return isString(toText) ? toText : toText.apply(void 0, args);\n  });\n}\n/**\n* @function\n* @memberof Utils\n*/\nfunction flat(arr) {\n  return arr.reduce(function (prev, cur) {\n    return prev.concat(cur);\n  }, []);\n}\n/**\n* @function\n* @memberof Utils\n*/\nfunction deepFlat(arr) {\n  return arr.reduce(function (prev, cur) {\n    if (isArray(cur)) {\n      prev.push.apply(prev, deepFlat(cur));\n    } else {\n      prev.push(cur);\n    }\n    return prev;\n  }, []);\n}\n/**\n * @function\n * @memberof Utils\n */\nfunction pushSet(elements, element) {\n  if (elements.indexOf(element) === -1) {\n    elements.push(element);\n  }\n}\n\n/**\n* @namespace\n* @name Color\n*/\n/**\n* Remove the # from the hex color.\n* @memberof Color\n* @param {} hex - hex color\n* @return {} hex color\n* @example\nimport {cutHex} from \"@daybrush/utils\";\n\nconsole.log(cutHex(\"#000000\")) // \"000000\"\n*/\nfunction cutHex(hex) {\n  return hex.replace(\"#\", \"\");\n}\n/**\n* convert hex color to rgb color.\n* @memberof Color\n* @param {} hex - hex color\n* @return {} rgb color\n* @example\nimport {hexToRGBA} from \"@daybrush/utils\";\n\nconsole.log(hexToRGBA(\"#00000005\"));\n// [0, 0, 0, 1]\nconsole.log(hexToRGBA(\"#201045\"));\n// [32, 16, 69, 1]\n*/\nfunction hexToRGBA(hex) {\n  var h = cutHex(hex);\n  var r = parseInt(h.substring(0, 2), 16);\n  var g = parseInt(h.substring(2, 4), 16);\n  var b = parseInt(h.substring(4, 6), 16);\n  var a = parseInt(h.substring(6, 8), 16) / 255;\n  if (isNaN(a)) {\n    a = 1;\n  }\n  return [r, g, b, a];\n}\n/**\n* convert 3(or 4)-digit hex color to 6(or 8)-digit hex color.\n* @memberof Color\n* @param {} hex - 3(or 4)-digit hex color\n* @return {} 6(or 8)-digit hex color\n* @example\nimport {toFullHex} from \"@daybrush/utils\";\n\nconsole.log(toFullHex(\"#123\")); // \"#112233\"\nconsole.log(toFullHex(\"#123a\")); // \"#112233aa\"\n*/\nfunction toFullHex(h) {\n  var r = h.charAt(1);\n  var g = h.charAt(2);\n  var b = h.charAt(3);\n  var a = h.charAt(4);\n  var arr = [\"#\", r, r, g, g, b, b, a, a];\n  return arr.join(\"\");\n}\n/**\n* convert hsl color to rgba color.\n* @memberof Color\n* @param {} hsl - hsl color(hue: 0 ~ 360, saturation: 0 ~ 1, lightness: 0 ~ 1, alpha: 0 ~ 1)\n* @return {} rgba color\n* @example\nimport {hslToRGBA} from \"@daybrush/utils\";\n\nconsole.log(hslToRGBA([150, 0.5, 0.4]));\n// [51, 153, 102, 1]\n*/\nfunction hslToRGBA(hsl) {\n  var _a;\n  var h = hsl[0];\n  var s = hsl[1];\n  var l = hsl[2];\n  if (h < 0) {\n    h += Math.floor((Math.abs(h) + 360) / 360) * 360;\n  }\n  h %= 360;\n  var c = (1 - Math.abs(2 * l - 1)) * s;\n  var x = c * (1 - Math.abs(h / 60 % 2 - 1));\n  var m = l - c / 2;\n  var rgb;\n  if (h < 60) {\n    rgb = [c, x, 0];\n  } else if (h < 120) {\n    rgb = [x, c, 0];\n  } else if (h < 180) {\n    rgb = [0, c, x];\n  } else if (h < 240) {\n    rgb = [0, x, c];\n  } else if (h < 300) {\n    rgb = [x, 0, c];\n  } else if (h < 360) {\n    rgb = [c, 0, x];\n  } else {\n    rgb = [0, 0, 0];\n  }\n  return [Math.round((rgb[0] + m) * 255), Math.round((rgb[1] + m) * 255), Math.round((rgb[2] + m) * 255), (_a = hsl[3]) !== null && _a !== void 0 ? _a : 1];\n}\n/**\n* convert string to rgba color.\n* @memberof Color\n* @param {} - 3-hex(#000), 4-hex(#0000) 6-hex(#000000), 8-hex(#00000000) or RGB(A), or HSL(A)\n* @return {} rgba color\n* @example\nimport {stringToRGBA} from \"@daybrush/utils\";\n\nconsole.log(stringToRGBA(\"#000000\")); // [0, 0, 0, 1]\nconsole.log(stringToRGBA(\"rgb(100, 100, 100)\")); // [100, 100, 100, 1]\nconsole.log(stringToRGBA(\"hsl(150, 0.5, 0.4)\")); // [51, 153, 102, 1]\n*/\nfunction stringToRGBA(color) {\n  if (color.charAt(0) === \"#\") {\n    if (color.length === 4 || color.length === 5) {\n      return hexToRGBA(toFullHex(color));\n    } else {\n      return hexToRGBA(color);\n    }\n  } else if (color.indexOf(\"(\") !== -1) {\n    // in bracket.\n    var _a = splitBracket(color),\n      prefix = _a.prefix,\n      value = _a.value;\n    if (!prefix || !value) {\n      return undefined;\n    }\n    var arr = splitComma(value);\n    var colorArr = [0, 0, 0, 1];\n    var length = arr.length;\n    switch (prefix) {\n      case RGB:\n      case RGBA:\n        for (var i = 0; i < length; ++i) {\n          colorArr[i] = parseFloat(arr[i]);\n        }\n        return colorArr;\n      case HSL:\n      case HSLA:\n        for (var i = 0; i < length; ++i) {\n          if (arr[i].indexOf(\"%\") !== -1) {\n            colorArr[i] = parseFloat(arr[i]) / 100;\n          } else {\n            colorArr[i] = parseFloat(arr[i]);\n          }\n        }\n        // hsl, hsla to rgba\n        return hslToRGBA(colorArr);\n    }\n  }\n  return undefined;\n}\n\n/**\n * Returns all element descendants of node that\n * match selectors.\n */\n/**\n * Checks if the specified class value exists in the element's class attribute.\n * @memberof DOM\n * @param - A DOMString containing one or more selectors to match\n * @param - If multi is true, a DOMString containing one or more selectors to match against.\n * @example\nimport {$} from \"@daybrush/utils\";\n\nconsole.log($(\"div\")); // div element\nconsole.log($(\"div\", true)); // [div, div] elements\n*/\nfunction $(selectors, multi) {\n  if (!doc) {\n    return multi ? [] : null;\n  }\n  return multi ? doc.querySelectorAll(selectors) : doc.querySelector(selectors);\n}\n/**\n* Checks if the specified class value exists in the element's class attribute.\n* @memberof DOM\n* @param element - target\n* @param className - the class name to search\n* @return {boolean} return false if the class is not found.\n* @example\nimport {hasClass} from \"@daybrush/utils\";\n\nconsole.log(hasClass(element, \"start\")); // true or false\n*/\nfunction hasClass(element, className) {\n  if (element.classList) {\n    return element.classList.contains(className);\n  }\n  return !!element.className.match(new RegExp(\"(\\\\s|^)\" + className + \"(\\\\s|$)\"));\n}\n/**\n* Add the specified class value. If these classe already exist in the element's class attribute they are ignored.\n* @memberof DOM\n* @param element - target\n* @param className - the class name to add\n* @example\nimport {addClass} from \"@daybrush/utils\";\n\naddClass(element, \"start\");\n*/\nfunction addClass(element, className) {\n  if (element.classList) {\n    element.classList.add(className);\n  } else {\n    element.className += \" \" + className;\n  }\n}\n/**\n* Removes the specified class value.\n* @memberof DOM\n* @param element - target\n* @param className - the class name to remove\n* @example\nimport {removeClass} from \"@daybrush/utils\";\n\nremoveClass(element, \"start\");\n*/\nfunction removeClass(element, className) {\n  if (element.classList) {\n    element.classList.remove(className);\n  } else {\n    var reg = new RegExp(\"(\\\\s|^)\" + className + \"(\\\\s|$)\");\n    element.className = element.className.replace(reg, \" \");\n  }\n}\n/**\n* Gets the CSS properties from the element.\n* @memberof DOM\n* @param elements - elements\n* @param properites - the CSS properties\n* @return returns CSS properties and values.\n* @example\nimport {fromCSS} from \"@daybrush/utils\";\n\nconsole.log(fromCSS(element, [\"left\", \"opacity\", \"top\"])); // {\"left\": \"10px\", \"opacity\": 1, \"top\": \"10px\"}\n*/\nfunction fromCSS(elements, properties) {\n  if (!elements || !properties || !properties.length) {\n    return {};\n  }\n  var element;\n  if (elements instanceof Element) {\n    element = elements;\n  } else if (elements.length) {\n    element = elements[0];\n  } else {\n    return {};\n  }\n  var cssObject = {};\n  var styles = getWindow(element).getComputedStyle(element);\n  var length = properties.length;\n  for (var i = 0; i < length; ++i) {\n    cssObject[properties[i]] = styles[properties[i]];\n  }\n  return cssObject;\n}\n/**\n* Sets up a function that will be called whenever the specified event is delivered to the target\n* @memberof DOM\n* @param - event target\n* @param - A case-sensitive string representing the event type to listen for.\n* @param - The object which receives a notification (an object that implements the Event interface) when an event of the specified type occurs\n* @param - An options object that specifies characteristics about the event listener.\n* @example\nimport {addEvent} from \"@daybrush/utils\";\n\naddEvent(el, \"click\", e => {\n  console.log(e);\n});\n*/\nfunction addEvent(el, type, listener, options) {\n  el.addEventListener(type, listener, options);\n}\n/**\n* removes from the EventTarget an event listener previously registered with EventTarget.addEventListener()\n* @memberof DOM\n* @param - event target\n* @param - A case-sensitive string representing the event type to listen for.\n* @param - The EventListener function of the event handler to remove from the event target.\n* @param - An options object that specifies characteristics about the event listener.\n* @example\nimport {addEvent, removeEvent} from \"@daybrush/utils\";\nconst listener = e => {\n  console.log(e);\n};\naddEvent(el, \"click\", listener);\nremoveEvent(el, \"click\", listener);\n*/\nfunction removeEvent(el, type, listener, options) {\n  el.removeEventListener(type, listener, options);\n}\nfunction getDocument(el) {\n  return (el === null || el === void 0 ? void 0 : el.ownerDocument) || doc;\n}\nfunction getDocumentElement(el) {\n  return getDocument(el).documentElement;\n}\nfunction getDocumentBody(el) {\n  return getDocument(el).body;\n}\nfunction getWindow(el) {\n  var _a;\n  return ((_a = el === null || el === void 0 ? void 0 : el.ownerDocument) === null || _a === void 0 ? void 0 : _a.defaultView) || window;\n}\nfunction isWindow(val) {\n  return val && \"postMessage\" in val && \"blur\" in val && \"self\" in val;\n}\nfunction isNode(el) {\n  return isObject(el) && el.nodeName && el.nodeType && \"ownerDocument\" in el;\n}\n\nexport { RGB, RGBA, HSL, HSLA, COLOR_MODELS, FUNCTION, PROPERTY, ARRAY, OBJECT, STRING, NUMBER, UNDEFINED, IS_WINDOW, doc as document, getCrossBrowserProperty, TRANSFORM, FILTER, ANIMATION, KEYFRAMES, OPEN_CLOSED_CHARACTERS, TINY_NUM, REVERSE_TINY_NUM, DEFAULT_UNIT_PRESETS, cutHex, hexToRGBA, toFullHex, hslToRGBA, stringToRGBA, dot, isUndefined, isObject, isArray, isString, isNumber, isFunction, splitText, splitSpace, splitComma, splitBracket, splitUnit, camelize, decamelize, toArray, now, findIndex, findLastIndex, findLast, find, requestAnimationFrame, cancelAnimationFrame, getKeys, getValues, getEntries, sortOrders, convertUnitSize, between, checkBoundSize, calculateBoundSize, sum, average, getRad, getCenterPoint, getShapeDirection, getDist, throttle, throttleArray, counter, replaceOnce, flat, deepFlat, pushSet, $, hasClass, addClass, removeClass, fromCSS, addEvent, removeEvent, getDocument, getDocumentElement, getDocumentBody, getWindow, isWindow, isNode };\n//# sourceMappingURL=utils.esm.js.map\n","/*\nCopyright (c) 2020 Daybrush\nname: @scena/matrix\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/matrix\nversion: 1.1.1\n*/\nimport { throttle, TINY_NUM, average } from '@daybrush/utils';\n\nfunction add(matrix, inverseMatrix, startIndex, fromIndex, n, k) {\n  for (var i = 0; i < n; ++i) {\n    var x = startIndex + i * n;\n    var fromX = fromIndex + i * n;\n    matrix[x] += matrix[fromX] * k;\n    inverseMatrix[x] += inverseMatrix[fromX] * k;\n  }\n}\n\nfunction swap(matrix, inverseMatrix, startIndex, fromIndex, n) {\n  for (var i = 0; i < n; ++i) {\n    var x = startIndex + i * n;\n    var fromX = fromIndex + i * n;\n    var v = matrix[x];\n    var iv = inverseMatrix[x];\n    matrix[x] = matrix[fromX];\n    matrix[fromX] = v;\n    inverseMatrix[x] = inverseMatrix[fromX];\n    inverseMatrix[fromX] = iv;\n  }\n}\n\nfunction divide(matrix, inverseMatrix, startIndex, n, k) {\n  for (var i = 0; i < n; ++i) {\n    var x = startIndex + i * n;\n    matrix[x] /= k;\n    inverseMatrix[x] /= k;\n  }\n}\n/**\n *\n * @namespace Matrix\n */\n\n/**\n * @memberof Matrix\n */\n\n\nfunction ignoreDimension(matrix, m, n) {\n  if (n === void 0) {\n    n = Math.sqrt(matrix.length);\n  }\n\n  var newMatrix = matrix.slice();\n\n  for (var i = 0; i < n; ++i) {\n    newMatrix[i * n + m - 1] = 0;\n    newMatrix[(m - 1) * n + i] = 0;\n  }\n\n  newMatrix[(m - 1) * (n + 1)] = 1;\n  return newMatrix;\n}\n/**\n * @memberof Matrix\n */\n\nfunction invert(matrix, n) {\n  if (n === void 0) {\n    n = Math.sqrt(matrix.length);\n  }\n\n  var newMatrix = matrix.slice();\n  var inverseMatrix = createIdentityMatrix(n);\n\n  for (var i = 0; i < n; ++i) {\n    // diagonal\n    var identityIndex = n * i + i;\n\n    if (!throttle(newMatrix[identityIndex], TINY_NUM)) {\n      // newMatrix[identityIndex] = 0;\n      for (var j = i + 1; j < n; ++j) {\n        if (newMatrix[n * i + j]) {\n          swap(newMatrix, inverseMatrix, i, j, n);\n          break;\n        }\n      }\n    }\n\n    if (!throttle(newMatrix[identityIndex], TINY_NUM)) {\n      // no inverse matrix\n      return [];\n    }\n\n    divide(newMatrix, inverseMatrix, i, n, newMatrix[identityIndex]);\n\n    for (var j = 0; j < n; ++j) {\n      var targetStartIndex = j;\n      var targetIndex = j + i * n;\n      var target = newMatrix[targetIndex];\n\n      if (!throttle(target, TINY_NUM) || i === j) {\n        continue;\n      }\n\n      add(newMatrix, inverseMatrix, targetStartIndex, i, n, -target);\n    }\n  }\n\n  return inverseMatrix;\n}\n/**\n * @memberof Matrix\n */\n\nfunction transpose(matrix, n) {\n  if (n === void 0) {\n    n = Math.sqrt(matrix.length);\n  }\n\n  var newMatrix = [];\n\n  for (var i = 0; i < n; ++i) {\n    for (var j = 0; j < n; ++j) {\n      newMatrix[j * n + i] = matrix[n * i + j];\n    }\n  }\n\n  return newMatrix;\n}\n/**\n * @memberof Matrix\n */\n\nfunction getOrigin(matrix, n) {\n  if (n === void 0) {\n    n = Math.sqrt(matrix.length);\n  }\n\n  var originMatrix = [];\n  var w = matrix[n * n - 1];\n\n  for (var i = 0; i < n - 1; ++i) {\n    originMatrix[i] = matrix[n * (n - 1) + i] / w;\n  }\n\n  originMatrix[n - 1] = 0;\n  return originMatrix;\n}\n/**\n * @memberof Matrix\n */\n\nfunction fromTranslation(pos, n) {\n  var newMatrix = createIdentityMatrix(n);\n\n  for (var i = 0; i < n - 1; ++i) {\n    newMatrix[n * (n - 1) + i] = pos[i] || 0;\n  }\n\n  return newMatrix;\n}\n/**\n * @memberof Matrix\n */\n\nfunction convertPositionMatrix(matrix, n) {\n  var newMatrix = matrix.slice();\n\n  for (var i = matrix.length; i < n - 1; ++i) {\n    newMatrix[i] = 0;\n  }\n\n  newMatrix[n - 1] = 1;\n  return newMatrix;\n}\n/**\n * @memberof Matrix\n */\n\nfunction convertDimension(matrix, n, m) {\n  if (n === void 0) {\n    n = Math.sqrt(matrix.length);\n  } // n < m\n\n\n  if (n === m) {\n    return matrix;\n  }\n\n  var newMatrix = createIdentityMatrix(m);\n  var length = Math.min(n, m);\n\n  for (var i = 0; i < length - 1; ++i) {\n    for (var j = 0; j < length - 1; ++j) {\n      newMatrix[i * m + j] = matrix[i * n + j];\n    }\n\n    newMatrix[(i + 1) * m - 1] = matrix[(i + 1) * n - 1];\n    newMatrix[(m - 1) * m + i] = matrix[(n - 1) * n + i];\n  }\n\n  newMatrix[m * m - 1] = matrix[n * n - 1];\n  return newMatrix;\n}\n/**\n * @memberof Matrix\n */\n\nfunction multiplies(n) {\n  var matrixes = [];\n\n  for (var _i = 1; _i < arguments.length; _i++) {\n    matrixes[_i - 1] = arguments[_i];\n  }\n\n  var m = createIdentityMatrix(n);\n  matrixes.forEach(function (matrix) {\n    m = multiply(m, matrix, n);\n  });\n  return m;\n}\n/**\n * @memberof Matrix\n */\n\nfunction multiply(matrix, matrix2, n) {\n  if (n === void 0) {\n    n = Math.sqrt(matrix.length);\n  }\n\n  var newMatrix = []; // 1 y: n\n  // 1 x: m\n  // 2 x: m\n  // 2 y: k\n  // n * m X m * k\n\n  var m = matrix.length / n;\n  var k = matrix2.length / m;\n\n  if (!m) {\n    return matrix2;\n  } else if (!k) {\n    return matrix;\n  }\n\n  for (var i = 0; i < n; ++i) {\n    for (var j = 0; j < k; ++j) {\n      newMatrix[j * n + i] = 0;\n\n      for (var l = 0; l < m; ++l) {\n        // m1 x: m(l), y: n(i)\n        // m2 x: k(j):  y: m(l)\n        // nw x: n(i), y: k(j)\n        newMatrix[j * n + i] += matrix[l * n + i] * matrix2[j * m + l];\n      }\n    }\n  } // n * k\n\n\n  return newMatrix;\n}\n/**\n * @memberof Matrix\n */\n\nfunction plus(pos1, pos2) {\n  var length = Math.min(pos1.length, pos2.length);\n  var nextPos = pos1.slice();\n\n  for (var i = 0; i < length; ++i) {\n    nextPos[i] = nextPos[i] + pos2[i];\n  }\n\n  return nextPos;\n}\n/**\n * @memberof Matrix\n */\n\nfunction minus(pos1, pos2) {\n  var length = Math.min(pos1.length, pos2.length);\n  var nextPos = pos1.slice();\n\n  for (var i = 0; i < length; ++i) {\n    nextPos[i] = nextPos[i] - pos2[i];\n  }\n\n  return nextPos;\n}\n/**\n * @memberof Matrix\n */\n\nfunction convertCSStoMatrix(a, is2d) {\n  if (is2d === void 0) {\n    is2d = a.length === 6;\n  }\n\n  if (is2d) {\n    return [a[0], a[1], 0, a[2], a[3], 0, a[4], a[5], 1];\n  }\n\n  return a;\n}\n/**\n * @memberof Matrix\n */\n\nfunction convertMatrixtoCSS(a, is2d) {\n  if (is2d === void 0) {\n    is2d = a.length === 9;\n  }\n\n  if (is2d) {\n    return [a[0], a[1], a[3], a[4], a[6], a[7]];\n  }\n\n  return a;\n}\n/**\n * @memberof Matrix\n */\n\nfunction calculate(matrix, matrix2, n) {\n  if (n === void 0) {\n    n = matrix2.length;\n  }\n\n  var result = multiply(matrix, matrix2, n);\n  var k = result[n - 1];\n  return result.map(function (v) {\n    return v / k;\n  });\n}\n/**\n * @memberof Matrix\n */\n\nfunction rotateX3d(matrix, rad) {\n  return multiply(matrix, [1, 0, 0, 0, 0, Math.cos(rad), Math.sin(rad), 0, 0, -Math.sin(rad), Math.cos(rad), 0, 0, 0, 0, 1], 4);\n}\n/**\n * @memberof Matrix\n */\n\nfunction rotateY3d(matrix, rad) {\n  return multiply(matrix, [Math.cos(rad), 0, -Math.sin(rad), 0, 0, 1, 0, 0, Math.sin(rad), 0, Math.cos(rad), 0, 0, 0, 0, 1], 4);\n}\n/**\n * @memberof Matrix\n */\n\nfunction rotateZ3d(matrix, rad) {\n  return multiply(matrix, createRotateMatrix(rad, 4));\n}\n/**\n * @memberof Matrix\n */\n\nfunction scale3d(matrix, _a) {\n  var _b = _a[0],\n      sx = _b === void 0 ? 1 : _b,\n      _c = _a[1],\n      sy = _c === void 0 ? 1 : _c,\n      _d = _a[2],\n      sz = _d === void 0 ? 1 : _d;\n  return multiply(matrix, [sx, 0, 0, 0, 0, sy, 0, 0, 0, 0, sz, 0, 0, 0, 0, 1], 4);\n}\n/**\n * @memberof Matrix\n */\n\nfunction rotate(pos, rad) {\n  return calculate(createRotateMatrix(rad, 3), convertPositionMatrix(pos, 3));\n}\n/**\n * @memberof Matrix\n */\n\nfunction translate3d(matrix, _a) {\n  var _b = _a[0],\n      tx = _b === void 0 ? 0 : _b,\n      _c = _a[1],\n      ty = _c === void 0 ? 0 : _c,\n      _d = _a[2],\n      tz = _d === void 0 ? 0 : _d;\n  return multiply(matrix, [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, tx, ty, tz, 1], 4);\n}\n/**\n * @memberof Matrix\n */\n\nfunction matrix3d(matrix1, matrix2) {\n  return multiply(matrix1, matrix2, 4);\n}\n/**\n * @memberof Matrix\n */\n\nfunction createRotateMatrix(rad, n) {\n  var cos = Math.cos(rad);\n  var sin = Math.sin(rad);\n  var m = createIdentityMatrix(n); // cos -sin\n  // sin cos\n\n  m[0] = cos;\n  m[1] = sin;\n  m[n] = -sin;\n  m[n + 1] = cos;\n  return m;\n}\n/**\n * @memberof Matrix\n */\n\nfunction createIdentityMatrix(n) {\n  var length = n * n;\n  var matrix = [];\n\n  for (var i = 0; i < length; ++i) {\n    matrix[i] = i % (n + 1) ? 0 : 1;\n  }\n\n  return matrix;\n}\n/**\n * @memberof Matrix\n */\n\nfunction createScaleMatrix(scale, n) {\n  var m = createIdentityMatrix(n);\n  var length = Math.min(scale.length, n - 1);\n\n  for (var i = 0; i < length; ++i) {\n    m[(n + 1) * i] = scale[i];\n  }\n\n  return m;\n}\n/**\n * @memberof Matrix\n */\n\nfunction createOriginMatrix(origin, n) {\n  var m = createIdentityMatrix(n);\n  var length = Math.min(origin.length, n - 1);\n\n  for (var i = 0; i < length; ++i) {\n    m[n * (n - 1) + i] = origin[i];\n  }\n\n  return m;\n}\n/**\n * @memberof Matrix\n */\n\nfunction createWarpMatrix(pos0, pos1, pos2, pos3, nextPos0, nextPos1, nextPos2, nextPos3) {\n  var x0 = pos0[0],\n      y0 = pos0[1];\n  var x1 = pos1[0],\n      y1 = pos1[1];\n  var x2 = pos2[0],\n      y2 = pos2[1];\n  var x3 = pos3[0],\n      y3 = pos3[1];\n  var u0 = nextPos0[0],\n      v0 = nextPos0[1];\n  var u1 = nextPos1[0],\n      v1 = nextPos1[1];\n  var u2 = nextPos2[0],\n      v2 = nextPos2[1];\n  var u3 = nextPos3[0],\n      v3 = nextPos3[1];\n  var matrix = [x0, 0, x1, 0, x2, 0, x3, 0, y0, 0, y1, 0, y2, 0, y3, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, x0, 0, x1, 0, x2, 0, x3, 0, y0, 0, y1, 0, y2, 0, y3, 0, 1, 0, 1, 0, 1, 0, 1, -u0 * x0, -v0 * x0, -u1 * x1, -v1 * x1, -u2 * x2, -v2 * x2, -u3 * x3, -v3 * x3, -u0 * y0, -v0 * y0, -u1 * y1, -v1 * y1, -u2 * y2, -v2 * y2, -u3 * y3, -v3 * y3];\n  var inverseMatrix = invert(matrix, 8);\n\n  if (!inverseMatrix.length) {\n    return [];\n  }\n\n  var h = multiply(inverseMatrix, [u0, v0, u1, v1, u2, v2, u3, v3], 8);\n  h[8] = 1;\n  return convertDimension(transpose(h), 3, 4);\n}\n/**\n * @memberof Matrix\n */\n\nfunction getCenter(points) {\n  return [0, 1].map(function (i) {\n    return average(points.map(function (pos) {\n      return pos[i];\n    }));\n  });\n}\n\nexport { calculate, convertCSStoMatrix, convertDimension, convertMatrixtoCSS, convertPositionMatrix, createIdentityMatrix, createOriginMatrix, createRotateMatrix, createScaleMatrix, createWarpMatrix, fromTranslation, getCenter, getOrigin, ignoreDimension, invert, matrix3d, minus, multiplies, multiply, plus, rotate, rotateX3d, rotateY3d, rotateZ3d, scale3d, translate3d, transpose };\n//# sourceMappingURL=matrix.esm.js.map\n","/*\nCopyright (c) 2019 Daybrush\nname: css-to-mat\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/css-to-mat.git\nversion: 1.1.0\n*/\nimport { isArray, splitSpace, splitBracket, isObject, splitComma, convertUnitSize, splitUnit } from '@daybrush/utils';\nimport { calculate, matrix3d, invert, translate3d, scale3d, rotateZ3d, rotateX3d, rotateY3d } from '@scena/matrix';\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nfunction createMatrix() {\n    return [\n        1, 0, 0, 0,\n        0, 1, 0, 0,\n        0, 0, 1, 0,\n        0, 0, 0, 1,\n    ];\n}\nfunction parseMat(transform, size) {\n    if (size === void 0) { size = 0; }\n    return toMat(parse(transform, size));\n}\nfunction getElementMatrix(el) {\n    return parseMat(getComputedStyle(el).transform);\n}\nfunction calculateMatrixDist(matrix, pos) {\n    var res = calculate(matrix, [pos[0], pos[1] || 0, pos[2] || 0, 1], 4);\n    var w = res[3] || 1;\n    return [\n        res[0] / w,\n        res[1] / w,\n        res[2] / w,\n    ];\n}\nfunction getDistElementMatrix(el, container) {\n    if (container === void 0) { container = document.body; }\n    var target = el;\n    var matrix = createMatrix();\n    while (target) {\n        var transform = getComputedStyle(target).transform;\n        matrix = matrix3d(parseMat(transform), matrix);\n        if (target === container) {\n            break;\n        }\n        target = target.parentElement;\n    }\n    matrix = invert(matrix, 4);\n    matrix[12] = 0;\n    matrix[13] = 0;\n    matrix[14] = 0;\n    return matrix;\n}\nfunction toMat(matrixInfos) {\n    var target = createMatrix();\n    matrixInfos.forEach(function (info) {\n        var matrixFunction = info.matrixFunction, functionValue = info.functionValue;\n        if (!matrixFunction) {\n            return;\n        }\n        target = matrixFunction(target, functionValue);\n    });\n    return target;\n}\nfunction parse(transform, size) {\n    if (size === void 0) { size = 0; }\n    var transforms = isArray(transform) ? transform : splitSpace(transform);\n    return transforms.map(function (t) {\n        var _a = splitBracket(t), name = _a.prefix, value = _a.value;\n        var matrixFunction = null;\n        var functionName = name;\n        var functionValue = \"\";\n        if (name === \"translate\" || name === \"translateX\" || name === \"translate3d\") {\n            var nextSize_1 = isObject(size) ? __assign(__assign({}, size), { \"o%\": size[\"%\"] }) : {\n                \"%\": size,\n                \"o%\": size,\n            };\n            var _b = splitComma(value).map(function (v, i) {\n                if (i === 0 && \"x%\" in nextSize_1) {\n                    nextSize_1[\"%\"] = size[\"x%\"];\n                }\n                else if (i === 1 && \"y%\" in nextSize_1) {\n                    nextSize_1[\"%\"] = size[\"y%\"];\n                }\n                else {\n                    nextSize_1[\"%\"] = size[\"o%\"];\n                }\n                return convertUnitSize(v, nextSize_1);\n            }), posX = _b[0], _c = _b[1], posY = _c === void 0 ? 0 : _c, _d = _b[2], posZ = _d === void 0 ? 0 : _d;\n            matrixFunction = translate3d;\n            functionValue = [posX, posY, posZ];\n        }\n        else if (name === \"translateY\") {\n            var nextSize = isObject(size) ? __assign({ \"%\": size[\"y%\"] }, size) : {\n                \"%\": size,\n            };\n            var posY = convertUnitSize(value, nextSize);\n            matrixFunction = translate3d;\n            functionValue = [0, posY, 0];\n        }\n        else if (name === \"translateZ\") {\n            var posZ = parseFloat(value);\n            matrixFunction = translate3d;\n            functionValue = [0, 0, posZ];\n        }\n        else if (name === \"scale\" || name === \"scale3d\") {\n            var _e = splitComma(value).map(function (v) { return parseFloat(v); }), sx = _e[0], _f = _e[1], sy = _f === void 0 ? sx : _f, _g = _e[2], sz = _g === void 0 ? 1 : _g;\n            matrixFunction = scale3d;\n            functionValue = [sx, sy, sz];\n        }\n        else if (name === \"scaleX\") {\n            var sx = parseFloat(value);\n            matrixFunction = scale3d;\n            functionValue = [sx, 1, 1];\n        }\n        else if (name === \"scaleY\") {\n            var sy = parseFloat(value);\n            matrixFunction = scale3d;\n            functionValue = [1, sy, 1];\n        }\n        else if (name === \"scaleZ\") {\n            var sz = parseFloat(value);\n            matrixFunction = scale3d;\n            functionValue = [1, 1, sz];\n        }\n        else if (name === \"rotate\" || name === \"rotateZ\" || name === \"rotateX\" || name === \"rotateY\") {\n            var _h = splitUnit(value), unit = _h.unit, unitValue = _h.value;\n            var rad = unit === \"rad\" ? unitValue : unitValue * Math.PI / 180;\n            if (name === \"rotate\" || name === \"rotateZ\") {\n                functionName = \"rotateZ\";\n                matrixFunction = rotateZ3d;\n            }\n            else if (name === \"rotateX\") {\n                matrixFunction = rotateX3d;\n            }\n            else if (name === \"rotateY\") {\n                matrixFunction = rotateY3d;\n            }\n            functionValue = rad;\n        }\n        else if (name === \"matrix3d\") {\n            matrixFunction = matrix3d;\n            functionValue = splitComma(value).map(function (v) { return parseFloat(v); });\n        }\n        else if (name === \"matrix\") {\n            var m = splitComma(value).map(function (v) { return parseFloat(v); });\n            matrixFunction = matrix3d;\n            functionValue = [\n                m[0], m[1], 0, 0,\n                m[2], m[3], 0, 0,\n                0, 0, 1, 0,\n                m[4], m[5], 0, 1,\n            ];\n        }\n        else {\n            functionName = \"\";\n        }\n        return {\n            name: name,\n            functionName: functionName,\n            value: value,\n            matrixFunction: matrixFunction,\n            functionValue: functionValue,\n        };\n    });\n}\n\nexport { calculateMatrixDist, createMatrix, getDistElementMatrix, getElementMatrix, parse, parseMat, toMat };\n//# sourceMappingURL=css-to-mat.esm.js.map\n","/*\nCopyright (c) 2019-present NAVER Corp.\nname: @egjs/list-differ\nlicense: MIT\nauthor: NAVER Corp.\nrepository: https://github.com/naver/egjs-list-differ\nversion: 1.0.1\n*/\n/*\negjs-list-differ\nCopyright (c) 2019-present NAVER Corp.\nMIT license\n*/\nvar PolyMap =\n/*#__PURE__*/\nfunction () {\n  function PolyMap() {\n    this.keys = [];\n    this.values = [];\n  }\n\n  var __proto = PolyMap.prototype;\n\n  __proto.get = function (key) {\n    return this.values[this.keys.indexOf(key)];\n  };\n\n  __proto.set = function (key, value) {\n    var keys = this.keys;\n    var values = this.values;\n    var prevIndex = keys.indexOf(key);\n    var index = prevIndex === -1 ? keys.length : prevIndex;\n    keys[index] = key;\n    values[index] = value;\n  };\n\n  return PolyMap;\n}();\n\n/*\negjs-list-differ\nCopyright (c) 2019-present NAVER Corp.\nMIT license\n*/\nvar HashMap =\n/*#__PURE__*/\nfunction () {\n  function HashMap() {\n    this.object = {};\n  }\n\n  var __proto = HashMap.prototype;\n\n  __proto.get = function (key) {\n    return this.object[key];\n  };\n\n  __proto.set = function (key, value) {\n    this.object[key] = value;\n  };\n\n  return HashMap;\n}();\n\n/*\negjs-list-differ\nCopyright (c) 2019-present NAVER Corp.\nMIT license\n*/\nvar SUPPORT_MAP = typeof Map === \"function\";\n\n/*\negjs-list-differ\nCopyright (c) 2019-present NAVER Corp.\nMIT license\n*/\nvar Link =\n/*#__PURE__*/\nfunction () {\n  function Link() {}\n\n  var __proto = Link.prototype;\n\n  __proto.connect = function (prevLink, nextLink) {\n    this.prev = prevLink;\n    this.next = nextLink;\n    prevLink && (prevLink.next = this);\n    nextLink && (nextLink.prev = this);\n  };\n\n  __proto.disconnect = function () {\n    // In double linked list, diconnect the interconnected relationship.\n    var prevLink = this.prev;\n    var nextLink = this.next;\n    prevLink && (prevLink.next = nextLink);\n    nextLink && (nextLink.prev = prevLink);\n  };\n\n  __proto.getIndex = function () {\n    var link = this;\n    var index = -1;\n\n    while (link) {\n      link = link.prev;\n      ++index;\n    }\n\n    return index;\n  };\n\n  return Link;\n}();\n\n/*\negjs-list-differ\nCopyright (c) 2019-present NAVER Corp.\nMIT license\n*/\n\nfunction orderChanged(changed, fixed) {\n  // It is roughly in the order of these examples.\n  // 4, 6, 0, 2, 1, 3, 5, 7\n  var fromLinks = []; // 0, 1, 2, 3, 4, 5, 6, 7\n\n  var toLinks = [];\n  changed.forEach(function (_a) {\n    var from = _a[0],\n        to = _a[1];\n    var link = new Link();\n    fromLinks[from] = link;\n    toLinks[to] = link;\n  }); // `fromLinks` are connected to each other by double linked list.\n\n  fromLinks.forEach(function (link, i) {\n    link.connect(fromLinks[i - 1]);\n  });\n  return changed.filter(function (_, i) {\n    return !fixed[i];\n  }).map(function (_a, i) {\n    var from = _a[0],\n        to = _a[1];\n\n    if (from === to) {\n      return [0, 0];\n    }\n\n    var fromLink = fromLinks[from];\n    var toLink = toLinks[to - 1];\n    var fromIndex = fromLink.getIndex(); // Disconnect the link connected to `fromLink`.\n\n    fromLink.disconnect(); // Connect `fromLink` to the right of `toLink`.\n\n    if (!toLink) {\n      fromLink.connect(undefined, fromLinks[0]);\n    } else {\n      fromLink.connect(toLink, toLink.next);\n    }\n\n    var toIndex = fromLink.getIndex();\n    return [fromIndex, toIndex];\n  });\n}\n\nvar Result =\n/*#__PURE__*/\nfunction () {\n  function Result(prevList, list, added, removed, changed, maintained, changedBeforeAdded, fixed) {\n    this.prevList = prevList;\n    this.list = list;\n    this.added = added;\n    this.removed = removed;\n    this.changed = changed;\n    this.maintained = maintained;\n    this.changedBeforeAdded = changedBeforeAdded;\n    this.fixed = fixed;\n  }\n\n  var __proto = Result.prototype;\n  Object.defineProperty(__proto, \"ordered\", {\n    get: function () {\n      if (!this.cacheOrdered) {\n        this.caculateOrdered();\n      }\n\n      return this.cacheOrdered;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(__proto, \"pureChanged\", {\n    get: function () {\n      if (!this.cachePureChanged) {\n        this.caculateOrdered();\n      }\n\n      return this.cachePureChanged;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  __proto.caculateOrdered = function () {\n    var ordered = orderChanged(this.changedBeforeAdded, this.fixed);\n    var changed = this.changed;\n    var pureChanged = [];\n    this.cacheOrdered = ordered.filter(function (_a, i) {\n      var from = _a[0],\n          to = _a[1];\n      var _b = changed[i],\n          fromBefore = _b[0],\n          toBefore = _b[1];\n\n      if (from !== to) {\n        pureChanged.push([fromBefore, toBefore]);\n        return true;\n      }\n    });\n    this.cachePureChanged = pureChanged;\n  };\n\n  return Result;\n}();\n\n/**\n *\n * @memberof eg.ListDiffer\n * @static\n * @function\n * @param - Previous List <ko>   </ko>\n * @param - List to Update <ko>    </ko>\n * @param - This callback function returns the key of the item. <ko>     .</ko>\n * @return - Returns the diff between `prevList` and `list` <ko> `prevList` `list`   .</ko>\n * @example\n * import { diff } from \"@egjs/list-differ\";\n * // script => eg.ListDiffer.diff\n * const result = diff([0, 1, 2, 3, 4, 5], [7, 8, 0, 4, 3, 6, 2, 1], e => e);\n * // List before update\n * // [1, 2, 3, 4, 5]\n * console.log(result.prevList);\n * // Updated list\n * // [4, 3, 6, 2, 1]\n * console.log(result.list);\n * // Index array of values added to `list`\n * // [0, 1, 5]\n * console.log(result.added);\n * // Index array of values removed in `prevList`\n * // [5]\n * console.log(result.removed);\n * // An array of index pairs of `prevList` and `list` with different indexes from `prevList` and `list`\n * // [[0, 2], [4, 3], [3, 4], [2, 6], [1, 7]]\n * console.log(result.changed);\n * // The subset of `changed` and an array of index pairs that moved data directly. Indicate an array of absolute index pairs of `ordered`.(Formatted by: Array<[index of prevList, index of list]>)\n * // [[4, 3], [3, 4], [2, 6]]\n * console.log(result.pureChanged);\n * // An array of index pairs to be `ordered` that can synchronize `list` before adding data. (Formatted by: Array<[prevIndex, nextIndex]>)\n * // [[4, 1], [4, 2], [4, 3]]\n * console.log(result.ordered);\n * // An array of index pairs of `prevList` and `list` that have not been added/removed so data is preserved\n * // [[0, 2], [4, 3], [3, 4], [2, 6], [1, 7]]\n * console.log(result.maintained);\n */\n\nfunction diff(prevList, list, findKeyCallback) {\n  var mapClass = SUPPORT_MAP ? Map : findKeyCallback ? HashMap : PolyMap;\n\n  var callback = findKeyCallback || function (e) {\n    return e;\n  };\n\n  var added = [];\n  var removed = [];\n  var maintained = [];\n  var prevKeys = prevList.map(callback);\n  var keys = list.map(callback);\n  var prevKeyMap = new mapClass();\n  var keyMap = new mapClass();\n  var changedBeforeAdded = [];\n  var fixed = [];\n  var removedMap = {};\n  var changed = [];\n  var addedCount = 0;\n  var removedCount = 0; // Add prevKeys and keys to the hashmap.\n\n  prevKeys.forEach(function (key, prevListIndex) {\n    prevKeyMap.set(key, prevListIndex);\n  });\n  keys.forEach(function (key, listIndex) {\n    keyMap.set(key, listIndex);\n  }); // Compare `prevKeys` and `keys` and add them to `removed` if they are not in `keys`.\n\n  prevKeys.forEach(function (key, prevListIndex) {\n    var listIndex = keyMap.get(key); // In prevList, but not in list, it is removed.\n\n    if (typeof listIndex === \"undefined\") {\n      ++removedCount;\n      removed.push(prevListIndex);\n    } else {\n      removedMap[listIndex] = removedCount;\n    }\n  }); // Compare `prevKeys` and `keys` and add them to `added` if they are not in `prevKeys`.\n\n  keys.forEach(function (key, listIndex) {\n    var prevListIndex = prevKeyMap.get(key); // In list, but not in prevList, it is added.\n\n    if (typeof prevListIndex === \"undefined\") {\n      added.push(listIndex);\n      ++addedCount;\n    } else {\n      maintained.push([prevListIndex, listIndex]);\n      removedCount = removedMap[listIndex] || 0;\n      changedBeforeAdded.push([prevListIndex - removedCount, listIndex - addedCount]);\n      fixed.push(listIndex === prevListIndex);\n\n      if (prevListIndex !== listIndex) {\n        changed.push([prevListIndex, listIndex]);\n      }\n    }\n  }); // Sort by ascending order of 'to(list's index).\n\n  removed.reverse();\n  return new Result(prevList, list, added, removed, changed, maintained, changedBeforeAdded, fixed);\n}\n\n/**\n * A module that checks diff when values are added, removed, or changed in an array.\n * @ko          .\n * @memberof eg\n */\n\nvar ListDiffer =\n/*#__PURE__*/\nfunction () {\n  /**\n   * @param - Initializing Data Array. <ko>    .</ko>\n   * @param - This callback function returns the key of the item. <ko>     .</ko>\n   * @example\n   * import ListDiffer from \"@egjs/list-differ\";\n   * // script => eg.ListDiffer\n   * const differ = new ListDiffer([0, 1, 2, 3, 4, 5], e => e);\n   * const result = differ.update([7, 8, 0, 4, 3, 6, 2, 1]);\n   * // List before update\n   * // [1, 2, 3, 4, 5]\n   * console.log(result.prevList);\n   * // Updated list\n   * // [4, 3, 6, 2, 1]\n   * console.log(result.list);\n   * // Index array of values added to `list`.\n   * // [0, 1, 5]\n   * console.log(result.added);\n   * // Index array of values removed in `prevList`.\n   * // [5]\n   * console.log(result.removed);\n   * // An array of index pairs of `prevList` and `list` with different indexes from `prevList` and `list`.\n   * // [[0, 2], [4, 3], [3, 4], [2, 6], [1, 7]]\n   * console.log(result.changed);\n   * // The subset of `changed` and an array of index pairs that moved data directly. Indicate an array of absolute index pairs of `ordered`.(Formatted by: Array<[index of prevList, index of list]>)\n   * // [[4, 3], [3, 4], [2, 6]]\n   * console.log(result.pureChanged);\n   * // An array of index pairs to be `ordered` that can synchronize `list` before adding data. (Formatted by: Array<[prevIndex, nextIndex]>)\n   * // [[4, 1], [4, 2], [4, 3]]\n   * console.log(result.ordered);\n   * // An array of index pairs of `prevList` and `list` that have not been added/removed so data is preserved.\n   * // [[0, 2], [4, 3], [3, 4], [2, 6], [1, 7]]\n   * console.log(result.maintained);\n   */\n  function ListDiffer(list, findKeyCallback) {\n    if (list === void 0) {\n      list = [];\n    }\n\n    this.findKeyCallback = findKeyCallback;\n    this.list = [].slice.call(list);\n  }\n  /**\n   * Update list.\n   * @ko   .\n   * @param - List to update <ko>   </ko>\n   * @return - Returns the results of an update from `prevList` to `list`.<ko> `prevList` `list`   . </ko>\n   */\n\n\n  var __proto = ListDiffer.prototype;\n\n  __proto.update = function (list) {\n    var newData = [].slice.call(list);\n    var result = diff(this.list, newData, this.findKeyCallback);\n    this.list = newData;\n    return result;\n  };\n\n  return ListDiffer;\n}();\n\n/*\negjs-list-differ\nCopyright (c) 2019-present NAVER Corp.\nMIT license\n*/\n\nexport default ListDiffer;\nexport { diff };\n//# sourceMappingURL=list-differ.esm.js.map\n","/*\nCopyright (c) 2019-present NAVER Corp.\nname: @egjs/children-differ\nlicense: MIT\nauthor: NAVER Corp.\nrepository: https://github.com/naver/egjs-children-differ\nversion: 1.0.1\n*/\nimport ListDiffer, { diff as diff$1 } from '@egjs/list-differ';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n\n  return extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\n/*\negjs-children-differ\nCopyright (c) 2019-present NAVER Corp.\nMIT license\n*/\nvar findKeyCallback = typeof Map === \"function\" ? undefined : function () {\n  var childrenCount = 0;\n  return function (el) {\n    return el.__DIFF_KEY__ || (el.__DIFF_KEY__ = ++childrenCount);\n  };\n}();\n\n/**\n * A module that checks diff when child are added, removed, or changed .\n * @ko           .\n * @memberof eg\n * @extends eg.ListDiffer\n */\n\nvar ChildrenDiffer =\n/*#__PURE__*/\nfunction (_super) {\n  __extends(ChildrenDiffer, _super);\n  /**\n   * @param - Initializing Children <ko>    </ko>\n   */\n\n\n  function ChildrenDiffer(list) {\n    if (list === void 0) {\n      list = [];\n    }\n\n    return _super.call(this, list, findKeyCallback) || this;\n  }\n\n  return ChildrenDiffer;\n}(ListDiffer);\n\n/*\negjs-children-differ\nCopyright (c) 2019-present NAVER Corp.\nMIT license\n*/\n/**\n *\n * @memberof eg.ChildrenDiffer\n * @static\n * @function\n * @param - Previous List <ko>   </ko>\n * @param - List to Update <ko>    </ko>\n * @return - Returns the diff between `prevList` and `list` <ko> `prevList` `list`   .</ko>\n * @example\n * import { diff } from \"@egjs/children-differ\";\n * // script => eg.ChildrenDiffer.diff\n * const result = diff([0, 1, 2, 3, 4, 5], [7, 8, 0, 4, 3, 6, 2, 1]);\n * // List before update\n * // [1, 2, 3, 4, 5]\n * console.log(result.prevList);\n * // Updated list\n * // [4, 3, 6, 2, 1]\n * console.log(result.list);\n * // Index array of values added to `list`\n * // [0, 1, 5]\n * console.log(result.added);\n * // Index array of values removed in `prevList`\n * // [5]\n * console.log(result.removed);\n * // An array of index pairs of `prevList` and `list` with different indexes from `prevList` and `list`\n * // [[0, 2], [4, 3], [3, 4], [2, 6], [1, 7]]\n * console.log(result.changed);\n * // The subset of `changed` and an array of index pairs that moved data directly. Indicate an array of absolute index pairs of `ordered`.(Formatted by: Array<[index of prevList, index of list]>)\n * // [[4, 3], [3, 4], [2, 6]]\n * console.log(result.pureChanged);\n * // An array of index pairs to be `ordered` that can synchronize `list` before adding data. (Formatted by: Array<[prevIndex, nextIndex]>)\n * // [[4, 1], [4, 2], [4, 3]]\n * console.log(result.ordered);\n * // An array of index pairs of `prevList` and `list` that have not been added/removed so data is preserved\n * // [[0, 2], [4, 3], [3, 4], [2, 6], [1, 7]]\n * console.log(result.maintained);\n */\n\nfunction diff(prevList, list) {\n  return diff$1(prevList, list, findKeyCallback);\n}\n\n/*\negjs-children-differ\nCopyright (c) 2019-present NAVER Corp.\nMIT license\n*/\n\nexport default ChildrenDiffer;\nexport { diff };\n//# sourceMappingURL=children-differ.esm.js.map\n","/*\nCopyright (c) 2019 Daybrush\nname: @scena/event-emitter\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/gesture.git\nversion: 1.0.5\n*/\nimport { isObject, findIndex } from '@daybrush/utils';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\nfunction __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n\n  return r;\n}\n\n/**\n * Implement EventEmitter on object or component.\n */\n\nvar EventEmitter =\n/*#__PURE__*/\nfunction () {\n  function EventEmitter() {\n    this._events = {};\n  }\n  /**\n   * Add a listener to the registered event.\n   * @param - Name of the event to be added\n   * @param - listener function of the event to be added\n   * @example\n   * import EventEmitter from \"@scena/event-emitter\";\n   * cosnt emitter = new EventEmitter();\n   *\n   * // Add listener in \"a\" event\n   * emitter.on(\"a\", () => {\n   * });\n   * // Add listeners\n   * emitter.on({\n   *  a: () => {},\n   *  b: () => {},\n   * });\n   */\n\n\n  var __proto = EventEmitter.prototype;\n\n  __proto.on = function (eventName, listener) {\n    if (isObject(eventName)) {\n      for (var name in eventName) {\n        this.on(name, eventName[name]);\n      }\n    } else {\n      this._addEvent(eventName, listener, {});\n    }\n\n    return this;\n  };\n  /**\n   * Remove listeners registered in the event target.\n   * @param - Name of the event to be removed\n   * @param - listener function of the event to be removed\n   * @example\n   * import EventEmitter from \"@scena/event-emitter\";\n   * cosnt emitter = new EventEmitter();\n   *\n   * // Remove all listeners.\n   * emitter.off();\n   *\n   * // Remove all listeners in \"A\" event.\n   * emitter.off(\"a\");\n   *\n   *\n   * // Remove \"listener\" listener in \"a\" event.\n   * emitter.off(\"a\", listener);\n   */\n\n\n  __proto.off = function (eventName, listener) {\n    if (!eventName) {\n      this._events = {};\n    } else if (isObject(eventName)) {\n      for (var name in eventName) {\n        this.off(name);\n      }\n    } else if (!listener) {\n      this._events[eventName] = [];\n    } else {\n      var events = this._events[eventName];\n\n      if (events) {\n        var index = findIndex(events, function (e) {\n          return e.listener === listener;\n        });\n\n        if (index > -1) {\n          events.splice(index, 1);\n        }\n      }\n    }\n\n    return this;\n  };\n  /**\n   * Add a disposable listener and Use promise to the registered event.\n   * @param - Name of the event to be added\n   * @param - disposable listener function of the event to be added\n   * @example\n   * import EventEmitter from \"@scena/event-emitter\";\n   * cosnt emitter = new EventEmitter();\n   *\n   * // Add a disposable listener in \"a\" event\n   * emitter.once(\"a\", () => {\n   * });\n   *\n   * // Use Promise\n   * emitter.once(\"a\").then(e => {\n   * });\n   */\n\n\n  __proto.once = function (eventName, listener) {\n    var _this = this;\n\n    if (listener) {\n      this._addEvent(eventName, listener, {\n        once: true\n      });\n    }\n\n    return new Promise(function (resolve) {\n      _this._addEvent(eventName, resolve, {\n        once: true\n      });\n    });\n  };\n  /**\n   * Fires an event to call listeners.\n   * @param - Event name\n   * @param - Event parameter\n   * @return If false, stop the event.\n   * @example\n   *\n   * import EventEmitter from \"@scena/event-emitter\";\n   *\n   *\n   * const emitter = new EventEmitter();\n   *\n   * emitter.on(\"a\", e => {\n   * });\n   *\n   *\n   * emitter.emit(\"a\", {\n   *   a: 1,\n   * });\n   */\n\n\n  __proto.emit = function (eventName, param) {\n    var _this = this;\n\n    if (param === void 0) {\n      param = {};\n    }\n\n    var events = this._events[eventName];\n\n    if (!eventName || !events) {\n      return true;\n    }\n\n    var isStop = false;\n    param.eventType = eventName;\n\n    param.stop = function () {\n      isStop = true;\n    };\n\n    param.currentTarget = this;\n\n    __spreadArrays(events).forEach(function (info) {\n      info.listener(param);\n\n      if (info.once) {\n        _this.off(eventName, info.listener);\n      }\n    });\n\n    return !isStop;\n  };\n  /**\n   * Fires an event to call listeners.\n   * @param - Event name\n   * @param - Event parameter\n   * @return If false, stop the event.\n   * @example\n   *\n   * import EventEmitter from \"@scena/event-emitter\";\n   *\n   *\n   * const emitter = new EventEmitter();\n   *\n   * emitter.on(\"a\", e => {\n   * });\n   *\n   *\n   * emitter.emit(\"a\", {\n   *   a: 1,\n   * });\n   */\n\n  /**\n  * Fires an event to call listeners.\n  * @param - Event name\n  * @param - Event parameter\n  * @return If false, stop the event.\n  * @example\n  *\n  * import EventEmitter from \"@scena/event-emitter\";\n  *\n  *\n  * const emitter = new EventEmitter();\n  *\n  * emitter.on(\"a\", e => {\n  * });\n  *\n  * // emit\n  * emitter.trigger(\"a\", {\n  *   a: 1,\n  * });\n  */\n\n\n  __proto.trigger = function (eventName, param) {\n    if (param === void 0) {\n      param = {};\n    }\n\n    return this.emit(eventName, param);\n  };\n\n  __proto._addEvent = function (eventName, listener, options) {\n    var events = this._events;\n    events[eventName] = events[eventName] || [];\n    var listeners = events[eventName];\n    listeners.push(__assign({\n      listener: listener\n    }, options));\n  };\n\n  return EventEmitter;\n}();\n\nexport default EventEmitter;\n//# sourceMappingURL=event-emitter.esm.js.map\n","/*\nCopyright (c) 2019 Daybrush\nname: @scena/dragscroll\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/dragscroll.git\nversion: 1.4.0\n*/\nimport EventEmitter from '@scena/event-emitter';\nimport { now, isString, isFunction } from '@daybrush/utils';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n/* global Reflect, Promise */\n\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n  return extendStatics(d, b);\n};\nfunction __extends(d, b) {\n  extendStatics(d, b);\n  function __() {\n    this.constructor = d;\n  }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\n\nfunction getDefaultScrollPosition(e) {\n  var container = e.container;\n  if (container === document.body) {\n    return [container.scrollLeft || document.documentElement.scrollLeft, container.scrollTop || document.documentElement.scrollTop];\n  }\n  return [container.scrollLeft, container.scrollTop];\n}\nfunction checkDefaultScrollEvent(container, callback) {\n  container.addEventListener(\"scroll\", callback);\n  return function () {\n    container.removeEventListener(\"scroll\", callback);\n  };\n}\nfunction getContainerElement(container) {\n  if (!container) {\n    return null;\n  } else if (isString(container)) {\n    return document.querySelector(container);\n  }\n  if (isFunction(container)) {\n    return container();\n  } else if (container instanceof Element) {\n    return container;\n  } else if (\"current\" in container) {\n    return container.current;\n  } else if (\"value\" in container) {\n    return container.value;\n  }\n}\n/**\n * @sort 1\n */\nvar DragScroll = /*#__PURE__*/function (_super) {\n  __extends(DragScroll, _super);\n  function DragScroll() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this._startRect = null;\n    _this._startPos = [];\n    _this._prevTime = 0;\n    _this._timer = 0;\n    _this._prevScrollPos = [0, 0];\n    _this._isWait = false;\n    _this._flag = false;\n    _this._currentOptions = null;\n    _this._lock = false;\n    _this._unregister = null;\n    _this._onScroll = function () {\n      var options = _this._currentOptions;\n      if (_this._lock || !options) {\n        return;\n      }\n      _this.emit(\"scrollDrag\", {\n        next: function (inputEvent) {\n          _this.checkScroll({\n            container: options.container,\n            inputEvent: inputEvent\n          });\n        }\n      });\n    };\n    return _this;\n  }\n  /**\n   */\n  var __proto = DragScroll.prototype;\n  __proto.dragStart = function (e, options) {\n    var container = getContainerElement(options.container);\n    if (!container) {\n      this._flag = false;\n      return;\n    }\n    var top = 0;\n    var left = 0;\n    var width = 0;\n    var height = 0;\n    if (container === document.body) {\n      width = window.innerWidth;\n      height = window.innerHeight;\n    } else {\n      var rect = container.getBoundingClientRect();\n      top = rect.top;\n      left = rect.left;\n      width = rect.width;\n      height = rect.height;\n    }\n    this._flag = true;\n    this._startPos = [e.clientX, e.clientY];\n    this._startRect = {\n      top: top,\n      left: left,\n      width: width,\n      height: height\n    };\n    this._prevScrollPos = this._getScrollPosition([0, 0], options);\n    this._currentOptions = options;\n    this._registerScrollEvent(options);\n  };\n  __proto.drag = function (e, options) {\n    clearTimeout(this._timer);\n    if (!this._flag) {\n      return;\n    }\n    var clientX = e.clientX,\n      clientY = e.clientY;\n    var _a = options.threshold,\n      threshold = _a === void 0 ? 0 : _a;\n    var _b = this,\n      _startRect = _b._startRect,\n      _startPos = _b._startPos;\n    this._currentOptions = options;\n    var direction = [0, 0];\n    if (_startRect.top > clientY - threshold) {\n      if (_startPos[1] > _startRect.top || clientY < _startPos[1]) {\n        direction[1] = -1;\n      }\n    } else if (_startRect.top + _startRect.height < clientY + threshold) {\n      if (_startPos[1] < _startRect.top + _startRect.height || clientY > _startPos[1]) {\n        direction[1] = 1;\n      }\n    }\n    if (_startRect.left > clientX - threshold) {\n      if (_startPos[0] > _startRect.left || clientX < _startPos[0]) {\n        direction[0] = -1;\n      }\n    } else if (_startRect.left + _startRect.width < clientX + threshold) {\n      if (_startPos[0] < _startRect.left + _startRect.width || clientX > _startPos[0]) {\n        direction[0] = 1;\n      }\n    }\n    if (!direction[0] && !direction[1]) {\n      return false;\n    }\n    return this._continueDrag(__assign(__assign({}, options), {\n      direction: direction,\n      inputEvent: e,\n      isDrag: true\n    }));\n  };\n  /**\n   */\n  __proto.checkScroll = function (options) {\n    var _this = this;\n    if (this._isWait) {\n      return false;\n    }\n    var _a = options.prevScrollPos,\n      prevScrollPos = _a === void 0 ? this._prevScrollPos : _a,\n      direction = options.direction,\n      _b = options.throttleTime,\n      throttleTime = _b === void 0 ? 0 : _b,\n      inputEvent = options.inputEvent,\n      isDrag = options.isDrag;\n    var nextScrollPos = this._getScrollPosition(direction || [0, 0], options);\n    var offsetX = nextScrollPos[0] - prevScrollPos[0];\n    var offsetY = nextScrollPos[1] - prevScrollPos[1];\n    var nextDirection = direction || [offsetX ? Math.abs(offsetX) / offsetX : 0, offsetY ? Math.abs(offsetY) / offsetY : 0];\n    this._prevScrollPos = nextScrollPos;\n    this._lock = false;\n    if (!offsetX && !offsetY) {\n      return false;\n    }\n    /**\n     * @event DragScroll#move\n     */\n    this.emit(\"move\", {\n      offsetX: nextDirection[0] ? offsetX : 0,\n      offsetY: nextDirection[1] ? offsetY : 0,\n      inputEvent: inputEvent\n    });\n    if (throttleTime && isDrag) {\n      clearTimeout(this._timer);\n      this._timer = window.setTimeout(function () {\n        _this._continueDrag(options);\n      }, throttleTime);\n    }\n    return true;\n  };\n  /**\n   *\n   */\n  __proto.dragEnd = function () {\n    this._flag = false;\n    this._lock = false;\n    clearTimeout(this._timer);\n    this._unregisterScrollEvent();\n  };\n  __proto._getScrollPosition = function (direction, options) {\n    var container = options.container,\n      _a = options.getScrollPosition,\n      getScrollPosition = _a === void 0 ? getDefaultScrollPosition : _a;\n    return getScrollPosition({\n      container: getContainerElement(container),\n      direction: direction\n    });\n  };\n  __proto._continueDrag = function (options) {\n    var _this = this;\n    var _a;\n    var container = options.container,\n      direction = options.direction,\n      throttleTime = options.throttleTime,\n      useScroll = options.useScroll,\n      isDrag = options.isDrag,\n      inputEvent = options.inputEvent;\n    if (!this._flag || isDrag && this._isWait) {\n      return;\n    }\n    var nowTime = now();\n    var distTime = Math.max(throttleTime + this._prevTime - nowTime, 0);\n    if (distTime > 0) {\n      clearTimeout(this._timer);\n      this._timer = window.setTimeout(function () {\n        _this._continueDrag(options);\n      }, distTime);\n      return false;\n    }\n    this._prevTime = nowTime;\n    var prevScrollPos = this._getScrollPosition(direction, options);\n    this._prevScrollPos = prevScrollPos;\n    if (isDrag) {\n      this._isWait = true;\n    }\n    // unregister native scroll event\n    if (!useScroll) {\n      this._lock = true;\n    }\n    var param = {\n      container: getContainerElement(container),\n      direction: direction,\n      inputEvent: inputEvent\n    };\n    (_a = options.requestScroll) === null || _a === void 0 ? void 0 : _a.call(options, param);\n    /**\n     * @event DragScroll#scroll\n     */\n    this.emit(\"scroll\", param);\n    this._isWait = false;\n    return useScroll || this.checkScroll(__assign(__assign({}, options), {\n      prevScrollPos: prevScrollPos,\n      direction: direction,\n      inputEvent: inputEvent\n    }));\n  };\n  __proto._registerScrollEvent = function (options) {\n    this._unregisterScrollEvent();\n    var checkScrollEvent = options.checkScrollEvent;\n    if (!checkScrollEvent) {\n      return;\n    }\n    var callback = checkScrollEvent === true ? checkDefaultScrollEvent : checkScrollEvent;\n    var container = getContainerElement(options.container);\n    if (checkScrollEvent === true && (container === document.body || container === document.documentElement)) {\n      this._unregister = checkDefaultScrollEvent(window, this._onScroll);\n    } else {\n      this._unregister = callback(container, this._onScroll);\n    }\n  };\n  __proto._unregisterScrollEvent = function () {\n    var _a;\n    (_a = this._unregister) === null || _a === void 0 ? void 0 : _a.call(this);\n    this._unregister = null;\n  };\n  return DragScroll;\n}(EventEmitter);\n\nexport default DragScroll;\n//# sourceMappingURL=dragscroll.esm.js.map\n","/*\nCopyright (c) 2020 Daybrush\nname: overlap-area\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/overlap-area.git\nversion: 1.1.0\n*/\nimport { throttle, TINY_NUM, sum, find, getDist, getShapeDirection, findIndex } from '@daybrush/utils';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\nfunction __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n\n  return r;\n}\n\nfunction tinyThrottle(num) {\n  return throttle(num, TINY_NUM);\n}\nfunction isSameConstants(linearConstants1, linearConstants2) {\n  return linearConstants1.every(function (v, i) {\n    return tinyThrottle(v - linearConstants2[i]) === 0;\n  });\n}\nfunction isSamePoint(point1, point2) {\n  return !tinyThrottle(point1[0] - point2[0]) && !tinyThrottle(point1[1] - point2[1]);\n}\nfunction flat(arr) {\n  return arr.reduce(function (prev, current) {\n    prev.push.apply(prev, current);\n    return prev;\n  }, []);\n}\n\n/**\n * @namespace OverlapArea\n */\n\n/**\n * Gets the size of a shape (polygon) made of points.\n * @memberof OverlapArea\n */\n\nfunction getAreaSize(points) {\n  if (points.length < 3) {\n    return 0;\n  }\n\n  return Math.abs(sum(points.map(function (point, i) {\n    var nextPoint = points[i + 1] || points[0];\n    return point[0] * nextPoint[1] - nextPoint[0] * point[1];\n  }))) / 2;\n}\n/**\n * Get points that fit the rect,\n * @memberof OverlapArea\n */\n\nfunction fitPoints(points, rect) {\n  var width = rect.width,\n      height = rect.height,\n      left = rect.left,\n      top = rect.top;\n\n  var _a = getMinMaxs(points),\n      minX = _a.minX,\n      minY = _a.minY,\n      maxX = _a.maxX,\n      maxY = _a.maxY;\n\n  var ratioX = width / (maxX - minX);\n  var ratioY = height / (maxY - minY);\n  return points.map(function (point) {\n    return [left + (point[0] - minX) * ratioX, top + (point[1] - minY) * ratioY];\n  });\n}\n/**\n * Get the minimum and maximum points of the points.\n * @memberof OverlapArea\n */\n\nfunction getMinMaxs(points) {\n  var xs = points.map(function (point) {\n    return point[0];\n  });\n  var ys = points.map(function (point) {\n    return point[1];\n  });\n  return {\n    minX: Math.min.apply(Math, xs),\n    minY: Math.min.apply(Math, ys),\n    maxX: Math.max.apply(Math, xs),\n    maxY: Math.max.apply(Math, ys)\n  };\n}\n/**\n * Whether the point is in shape\n * @param - point pos\n * @param - shape points\n * @param - whether to check except line\n * @memberof OverlapArea\n */\n\nfunction isInside(pos, points, excludeLine) {\n  var x = pos[0],\n      y = pos[1];\n\n  var _a = getMinMaxs(points),\n      minX = _a.minX,\n      maxX = _a.maxX;\n\n  var xLine = [[minX, y], [maxX, y]];\n  var xLinearConstants = getLinearConstants(xLine[0], xLine[1]);\n  var lines = convertLines(points);\n  var intersectionPosInfos = [];\n  lines.forEach(function (line) {\n    var linearConstants = getLinearConstants(line[0], line[1]);\n    var standardPoint = line[0];\n\n    if (isSameConstants(xLinearConstants, linearConstants)) {\n      intersectionPosInfos.push({\n        pos: pos,\n        line: line,\n        type: \"line\"\n      });\n    } else {\n      var xPoints = getPointsOnLines(getIntersectionPointsByConstants(xLinearConstants, linearConstants), [xLine, line]);\n      xPoints.forEach(function (point) {\n        if (line.some(function (linePoint) {\n          return isSamePoint(linePoint, point);\n        })) {\n          intersectionPosInfos.push({\n            pos: point,\n            line: line,\n            type: \"point\"\n          });\n        } else if (tinyThrottle(standardPoint[1] - y) !== 0) {\n          intersectionPosInfos.push({\n            pos: point,\n            line: line,\n            type: \"intersection\"\n          });\n        }\n      });\n    }\n  });\n\n  if (!excludeLine) {\n    // on line\n    if (find(intersectionPosInfos, function (p) {\n      return p[0] === x;\n    })) {\n      return true;\n    }\n  }\n\n  var intersectionCount = 0;\n  var xMap = {};\n  intersectionPosInfos.forEach(function (_a) {\n    var pos = _a.pos,\n        type = _a.type,\n        line = _a.line;\n\n    if (pos[0] > x) {\n      return;\n    }\n\n    if (type === \"intersection\") {\n      ++intersectionCount;\n    } else if (type === \"line\") {\n      return;\n    } else if (type === \"point\") {\n      var point = find(line, function (linePoint) {\n        return linePoint[1] !== y;\n      });\n      var prevValue = xMap[pos[0]];\n      var nextValue = point[1] > y ? 1 : -1;\n\n      if (!prevValue) {\n        xMap[pos[0]] = nextValue;\n      } else if (prevValue !== nextValue) {\n        ++intersectionCount;\n      }\n    }\n  });\n  return intersectionCount % 2 === 1;\n}\n/**\n * Get distance from point to constants. [a, b, c] (ax + by + c = 0)\n * @return [a, b, c]\n * @memberof OverlapArea\n */\n\nfunction getDistanceFromPointToConstants(_a, pos) {\n  var a = _a[0],\n      b = _a[1],\n      c = _a[2];\n  return (a * pos[0] + b * pos[1] + c) / (a * a + b * b);\n}\n/**\n * Get the coefficient of the linear function. [a, b, c] (ax + by + c = 0)\n * @return [a, b, c]\n * @memberof OverlapArea\n */\n\nfunction getLinearConstants(point1, point2) {\n  var x1 = point1[0],\n      y1 = point1[1];\n  var x2 = point2[0],\n      y2 = point2[1]; // ax + by + c = 0\n  // [a, b, c]\n\n  var dx = x2 - x1;\n  var dy = y2 - y1;\n\n  if (Math.abs(dx) < TINY_NUM) {\n    dx = 0;\n  }\n\n  if (Math.abs(dy) < TINY_NUM) {\n    dy = 0;\n  } // b > 0\n  // ax + by + c = 0\n\n\n  var a = 0;\n  var b = 0;\n  var c = 0;\n\n  if (!dx) {\n    if (dy) {\n      // -x + 1 = 0\n      a = -1;\n      c = x1;\n    }\n  } else if (!dy) {\n    // y - 1 = 0\n    b = 1;\n    c = -y1;\n  } else {\n    // y = -a(x - x1) + y1\n    // ax + y + a * x1 - y1 = 0\n    a = -dy / dx;\n    b = 1;\n    c = -a * x1 - y1;\n  }\n\n  return [a, b, c];\n}\n/**\n * Get intersection points with linear functions.\n * @memberof OverlapArea\n */\n\nfunction getIntersectionPointsByConstants(linearConstants1, linearConstants2) {\n  var a1 = linearConstants1[0],\n      b1 = linearConstants1[1],\n      c1 = linearConstants1[2];\n  var a2 = linearConstants2[0],\n      b2 = linearConstants2[1],\n      c2 = linearConstants2[2];\n  var isZeroA = a1 === 0 && a2 === 0;\n  var isZeroB = b1 === 0 && b2 === 0;\n  var results = [];\n\n  if (isZeroA && isZeroB) {\n    return [];\n  } else if (isZeroA) {\n    // b1 * y + c1 = 0\n    // b2 * y + c2 = 0\n    var y1 = -c1 / b1;\n    var y2 = -c2 / b2;\n\n    if (y1 !== y2) {\n      return [];\n    } else {\n      return [[-Infinity, y1], [Infinity, y1]];\n    }\n  } else if (isZeroB) {\n    // a1 * x + c1 = 0\n    // a2 * x + c2 = 0\n    var x1 = -c1 / a1;\n    var x2 = -c2 / a2;\n\n    if (x1 !== x2) {\n      return [];\n    } else {\n      return [[x1, -Infinity], [x1, Infinity]];\n    }\n  } else if (a1 === 0) {\n    // b1 * y + c1 = 0\n    // y = - c1 / b1;\n    // a2 * x + b2 * y + c2 = 0\n    var y = -c1 / b1;\n    var x = -(b2 * y + c2) / a2;\n    results = [[x, y]];\n  } else if (a2 === 0) {\n    // b2 * y + c2 = 0\n    // y = - c2 / b2;\n    // a1 * x + b1 * y + c1 = 0\n    var y = -c2 / b2;\n    var x = -(b1 * y + c1) / a1;\n    results = [[x, y]];\n  } else if (b1 === 0) {\n    // a1 * x + c1 = 0\n    // x = - c1 / a1;\n    // a2 * x + b2 * y + c2 = 0\n    var x = -c1 / a1;\n    var y = -(a2 * x + c2) / b2;\n    results = [[x, y]];\n  } else if (b2 === 0) {\n    // a2 * x + c2 = 0\n    // x = - c2 / a2;\n    // a1 * x + b1 * y + c1 = 0\n    var x = -c2 / a2;\n    var y = -(a1 * x + c1) / b1;\n    results = [[x, y]];\n  } else {\n    // a1 * x + b1 * y + c1 = 0\n    // a2 * x + b2 * y + c2 = 0\n    // b2 * a1 * x + b2 * b1 * y + b2 * c1 = 0\n    // b1 * a2 * x + b1 * b2 * y + b1 * c2 = 0\n    // (b2 * a1 - b1 * a2)  * x = (b1 * c2 - b2 * c1)\n    var x = (b1 * c2 - b2 * c1) / (b2 * a1 - b1 * a2);\n    var y = -(a1 * x + c1) / b1;\n    results = [[x, y]];\n  }\n\n  return results.map(function (result) {\n    return [result[0], result[1]];\n  });\n}\n/**\n * Get intersection points to the two lines.\n * @memberof OverlapArea\n */\n\nfunction getIntersectionPoints(line1, line2, isLimit) {\n  var points = getIntersectionPointsByConstants(getLinearConstants(line1[0], line1[1]), getLinearConstants(line2[0], line2[1]));\n\n  if (isLimit) {\n    return getPointsOnLines(points, [line1, line2]);\n  }\n\n  return points;\n}\nfunction isPointOnLine(pos, line) {\n  var linearConstants = getLinearConstants(line[0], line[1]);\n  return tinyThrottle(getDistanceFromPointToConstants(linearConstants, pos)) === 0;\n}\n/**\n * Get the points on the lines (between two points).\n * @memberof OverlapArea\n */\n\nfunction getPointsOnLines(points, lines) {\n  var minMaxs = lines.map(function (line) {\n    return [0, 1].map(function (order) {\n      return [Math.min(line[0][order], line[1][order]), Math.max(line[0][order], line[1][order])];\n    });\n  });\n  var results = [];\n\n  if (points.length === 2) {\n    var _a = points[0],\n        x = _a[0],\n        y = _a[1];\n\n    if (!tinyThrottle(x - points[1][0])) {\n      /// Math.max(minY1, minY2)\n      var top = Math.max.apply(Math, minMaxs.map(function (minMax) {\n        return minMax[1][0];\n      })); /// Math.min(maxY1, miax2)\n\n      var bottom = Math.min.apply(Math, minMaxs.map(function (minMax) {\n        return minMax[1][1];\n      }));\n\n      if (tinyThrottle(top - bottom) > 0) {\n        return [];\n      }\n\n      results = [[x, top], [x, bottom]];\n    } else if (!tinyThrottle(y - points[1][1])) {\n      /// Math.max(minY1, minY2)\n      var left = Math.max.apply(Math, minMaxs.map(function (minMax) {\n        return minMax[0][0];\n      })); /// Math.min(maxY1, miax2)\n\n      var right = Math.min.apply(Math, minMaxs.map(function (minMax) {\n        return minMax[0][1];\n      }));\n\n      if (tinyThrottle(left - right) > 0) {\n        return [];\n      }\n\n      results = [[left, y], [right, y]];\n    }\n  }\n\n  if (!results.length) {\n    results = points.filter(function (point) {\n      var pointX = point[0],\n          pointY = point[1];\n      return minMaxs.every(function (minMax) {\n        return 0 <= tinyThrottle(pointX - minMax[0][0]) && 0 <= tinyThrottle(minMax[0][1] - pointX) && 0 <= tinyThrottle(pointY - minMax[1][0]) && 0 <= tinyThrottle(minMax[1][1] - pointY);\n      });\n    });\n  }\n\n  return results.map(function (result) {\n    return [tinyThrottle(result[0]), tinyThrottle(result[1])];\n  });\n}\n/**\n* Convert two points into lines.\n* @function\n* @memberof OverlapArea\n*/\n\nfunction convertLines(points) {\n  return __spreadArrays(points.slice(1), [points[0]]).map(function (point, i) {\n    return [points[i], point];\n  });\n}\n\nfunction getOverlapPointInfos(points1, points2) {\n  var targetPoints1 = points1.slice();\n  var targetPoints2 = points2.slice();\n\n  if (getShapeDirection(targetPoints1) === -1) {\n    targetPoints1.reverse();\n  }\n\n  if (getShapeDirection(targetPoints2) === -1) {\n    targetPoints2.reverse();\n  }\n\n  var lines1 = convertLines(targetPoints1);\n  var lines2 = convertLines(targetPoints2);\n  var linearConstantsList1 = lines1.map(function (line1) {\n    return getLinearConstants(line1[0], line1[1]);\n  });\n  var linearConstantsList2 = lines2.map(function (line2) {\n    return getLinearConstants(line2[0], line2[1]);\n  });\n  var overlapInfos = [];\n  linearConstantsList1.forEach(function (linearConstants1, i) {\n    var line1 = lines1[i];\n    var linePointInfos = [];\n    linearConstantsList2.forEach(function (linearConstants2, j) {\n      var intersectionPoints = getIntersectionPointsByConstants(linearConstants1, linearConstants2);\n      var points = getPointsOnLines(intersectionPoints, [line1, lines2[j]]);\n      linePointInfos.push.apply(linePointInfos, points.map(function (pos) {\n        return {\n          index1: i,\n          index2: j,\n          pos: pos,\n          type: \"intersection\"\n        };\n      }));\n    });\n    linePointInfos.sort(function (a, b) {\n      return getDist(line1[0], a.pos) - getDist(line1[0], b.pos);\n    });\n    overlapInfos.push.apply(overlapInfos, linePointInfos);\n\n    if (isInside(line1[1], targetPoints2)) {\n      overlapInfos.push({\n        index1: i,\n        index2: -1,\n        pos: line1[1],\n        type: \"inside\"\n      });\n    }\n  });\n  lines2.forEach(function (line2, i) {\n    if (!isInside(line2[1], targetPoints1)) {\n      return;\n    }\n\n    var isNext = false;\n    var index = findIndex(overlapInfos, function (_a) {\n      var index2 = _a.index2;\n\n      if (index2 === i) {\n        isNext = true;\n        return false;\n      }\n\n      if (isNext) {\n        return true;\n      }\n\n      return false;\n    });\n\n    if (index === -1) {\n      isNext = false;\n      index = findIndex(overlapInfos, function (_a) {\n        var index1 = _a.index1,\n            index2 = _a.index2;\n\n        if (index1 === -1 && index2 + 1 === i) {\n          isNext = true;\n          return false;\n        }\n\n        if (isNext) {\n          return true;\n        }\n\n        return false;\n      });\n    }\n\n    if (index === -1) {\n      overlapInfos.push({\n        index1: -1,\n        index2: i,\n        pos: line2[1],\n        type: \"inside\"\n      });\n    } else {\n      overlapInfos.splice(index, 0, {\n        index1: -1,\n        index2: i,\n        pos: line2[1],\n        type: \"inside\"\n      });\n    }\n  });\n  var pointMap = {};\n  return overlapInfos.filter(function (_a) {\n    var pos = _a.pos;\n    var key = pos[0] + \"x\" + pos[1];\n\n    if (pointMap[key]) {\n      return false;\n    }\n\n    pointMap[key] = true;\n    return true;\n  });\n}\n/**\n* Get the points of the overlapped part of two shapes.\n* @function\n* @memberof OverlapArea\n*/\n\n\nfunction getOverlapPoints(points1, points2) {\n  var infos = getOverlapPointInfos(points1, points2);\n  return infos.map(function (_a) {\n    var pos = _a.pos;\n    return pos;\n  });\n}\n\nfunction isConnectedLine(line) {\n  var _a = line[0],\n      prevIndex1 = _a.index1,\n      prevIndex2 = _a.index2,\n      _b = line[1],\n      nextIndex1 = _b.index1,\n      nextIndex2 = _b.index2;\n\n  if (prevIndex1 !== -1) {\n    // same line\n    if (prevIndex1 === nextIndex1) {\n      return true;\n    }\n\n    if (prevIndex1 + 1 === nextIndex1) {\n      return true;\n    }\n  }\n\n  if (prevIndex2 !== -1) {\n    // same line\n    if (prevIndex2 === nextIndex2) {\n      return true;\n    }\n\n    if (prevIndex2 + 1 === nextIndex2) {\n      return true;\n    }\n  }\n\n  return false;\n}\n/**\n* Get the areas of the overlapped part of two shapes.\n* @function\n* @memberof OverlapArea\n*/\n\n\nfunction getOverlapAreas(points1, points2) {\n  var infos = getOverlapPointInfos(points1, points2);\n  var areas = [];\n  var area;\n  getOverlapPointInfos(points1, points2).forEach(function (info, i, arr) {\n    if (i === 0 || !isConnectedLine([arr[i - 1], info])) {\n      area = [info];\n      areas.push(area);\n    } else {\n      area.push(info);\n    }\n  });\n  return areas.map(function (area) {\n    return area.map(function (_a) {\n      var pos = _a.pos;\n      return pos;\n    });\n  });\n}\n\nfunction findReversedAreas(points1, points2, index, areas) {\n  if (index === void 0) {\n    index = 0;\n  }\n\n  if (areas === void 0) {\n    areas = [];\n  }\n\n  var isFirst = areas.length === 0;\n  var length = points1.length;\n  var nextIndex = points1[index] ? index : 0;\n\n  var nextPoints1 = __spreadArrays(points1.slice(nextIndex), points1.slice(0, nextIndex));\n\n  var _loop_1 = function (i) {\n    var point1 = nextPoints1[i];\n\n    if (find(points2, function (point2) {\n      return point2[0] === point1[0] && point2[1] === point1[1];\n    })) {\n      return \"continue\";\n    }\n\n    if (areas.some(function (nextArea) {\n      return find(nextArea, function (areaPoint) {\n        return areaPoint[0] === point1[0] && areaPoint[1] === point1[1];\n      });\n    })) {\n      if (isFirst) {\n        return \"continue\";\n      } else {\n        return \"break\";\n      }\n    }\n\n    var nextArea = void 0;\n\n    if (isFirst) {\n      nextArea = [];\n      areas.push(nextArea);\n    } else {\n      nextArea = areas[areas.length - 1];\n    }\n\n    nextArea.push(point1);\n    var line = [point1, points1[index + 1] || points1[0]];\n    var nextPoint2 = points2.filter(function (point2) {\n      return isPointOnLine(point2, line);\n    }).sort(function (a, b) {\n      return getDist(point1, a) - getDist(point1, b);\n    })[0];\n\n    if (!nextPoint2) {\n      findReversedAreas(nextPoints1, points2, i + 1, areas);\n      return \"break\";\n    } else {\n      var point2Index = points2.indexOf(nextPoint2);\n      findReversedAreas(points2, points1, point2Index, areas);\n\n      if (!isFirst) {\n        return \"break\";\n      }\n    }\n  };\n\n  for (var i = 0; i < length; ++i) {\n    var state_1 = _loop_1(i);\n\n    if (state_1 === \"break\") break;\n  }\n\n  return areas;\n}\n\nfunction findConnectedAreas(points1, points2) {\n  return findReversedAreas(points1, __spreadArrays(points2).reverse());\n}\n/**\n* Get non-overlapping areas of two shapes based on points1.\n* @memberof OverlapArea\n*/\n\nfunction getUnoverlapAreas(points1, points2) {\n  if (!points2.length) {\n    return [__spreadArrays(points1)];\n  }\n\n  var overlapAreas = getOverlapAreas(points1, points2);\n  var unoverlapAreas = [points1];\n  overlapAreas.forEach(function (overlapArea) {\n    var nextOverlapArea = __spreadArrays(overlapArea).reverse();\n\n    unoverlapAreas = flat(unoverlapAreas.map(function (area) {\n      var connectedAreas = findReversedAreas(area, nextOverlapArea);\n      var firstConnectedArea = connectedAreas[0];\n\n      if (connectedAreas.length === 1 && nextOverlapArea.every(function (point) {\n        return firstConnectedArea.indexOf(point) === -1;\n      })) {\n        var lastPoint_1 = firstConnectedArea[firstConnectedArea.length - 1];\n\n        var firstPoint = __spreadArrays(nextOverlapArea).sort(function (a, b) {\n          return getDist(lastPoint_1, a) - getDist(lastPoint_1, b);\n        })[0];\n\n        var firstIndex = nextOverlapArea.indexOf(firstPoint);\n        firstConnectedArea.push.apply(firstConnectedArea, __spreadArrays(nextOverlapArea.slice(firstIndex), nextOverlapArea.slice(0, firstIndex), [nextOverlapArea[firstIndex], lastPoint_1]));\n      }\n\n      return connectedAreas;\n    }));\n  });\n  return unoverlapAreas;\n}\n/**\n* Gets the size of the overlapped part of two shapes.\n* @function\n* @memberof OverlapArea\n*/\n\nfunction getOverlapSize(points1, points2) {\n  var points = getOverlapPoints(points1, points2);\n  return getAreaSize(points);\n}\n\nexport { convertLines, findConnectedAreas, fitPoints, getAreaSize, getDistanceFromPointToConstants, getIntersectionPoints, getIntersectionPointsByConstants, getLinearConstants, getMinMaxs, getOverlapAreas, getOverlapPoints, getOverlapSize, getPointsOnLines, getUnoverlapAreas, isInside, isPointOnLine };\n//# sourceMappingURL=overlap-area.esm.js.map\n","/*\nCopyright (c) 2019 Daybrush\nname: gesto\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/gesto.git\nversion: 1.19.4\n*/\nimport EventEmitter from '@scena/event-emitter';\nimport { removeEvent, addEvent, now, isWindow, getWindow } from '@daybrush/utils';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nfunction getRad(pos1, pos2) {\n    var distX = pos2[0] - pos1[0];\n    var distY = pos2[1] - pos1[1];\n    var rad = Math.atan2(distY, distX);\n    return rad >= 0 ? rad : rad + Math.PI * 2;\n}\nfunction getRotatiion(touches) {\n    return getRad([\n        touches[0].clientX,\n        touches[0].clientY,\n    ], [\n        touches[1].clientX,\n        touches[1].clientY,\n    ]) / Math.PI * 180;\n}\nfunction isMultiTouch(e) {\n    return e.touches && e.touches.length >= 2;\n}\nfunction getEventClients(e) {\n    if (!e) {\n        return [];\n    }\n    if (e.touches) {\n        return getClients(e.touches);\n    }\n    else {\n        return [getClient(e)];\n    }\n}\nfunction isMouseEvent(e) {\n    return e && (e.type.indexOf(\"mouse\") > -1 || \"button\" in e);\n}\nfunction getPosition(clients, prevClients, startClients) {\n    var length = startClients.length;\n    var _a = getAverageClient(clients, length), clientX = _a.clientX, clientY = _a.clientY, originalClientX = _a.originalClientX, originalClientY = _a.originalClientY;\n    var _b = getAverageClient(prevClients, length), prevX = _b.clientX, prevY = _b.clientY;\n    var _c = getAverageClient(startClients, length), startX = _c.clientX, startY = _c.clientY;\n    var deltaX = clientX - prevX;\n    var deltaY = clientY - prevY;\n    var distX = clientX - startX;\n    var distY = clientY - startY;\n    return {\n        clientX: originalClientX,\n        clientY: originalClientY,\n        deltaX: deltaX,\n        deltaY: deltaY,\n        distX: distX,\n        distY: distY,\n    };\n}\nfunction getDist(clients) {\n    return Math.sqrt(Math.pow(clients[0].clientX - clients[1].clientX, 2)\n        + Math.pow(clients[0].clientY - clients[1].clientY, 2));\n}\nfunction getClients(touches) {\n    var length = Math.min(touches.length, 2);\n    var clients = [];\n    for (var i = 0; i < length; ++i) {\n        clients.push(getClient(touches[i]));\n    }\n    return clients;\n}\nfunction getClient(e) {\n    return {\n        clientX: e.clientX,\n        clientY: e.clientY,\n    };\n}\nfunction getAverageClient(clients, length) {\n    if (length === void 0) { length = clients.length; }\n    var sumClient = {\n        clientX: 0,\n        clientY: 0,\n        originalClientX: 0,\n        originalClientY: 0,\n    };\n    var minLength = Math.min(clients.length, length);\n    for (var i = 0; i < minLength; ++i) {\n        var client = clients[i];\n        sumClient.originalClientX += \"originalClientX\" in client ? client.originalClientX : client.clientX;\n        sumClient.originalClientY += \"originalClientY\" in client ? client.originalClientY : client.clientY;\n        sumClient.clientX += client.clientX;\n        sumClient.clientY += client.clientY;\n    }\n    if (!length) {\n        return sumClient;\n    }\n    return {\n        clientX: sumClient.clientX / length,\n        clientY: sumClient.clientY / length,\n        originalClientX: sumClient.originalClientX / length,\n        originalClientY: sumClient.originalClientY / length,\n    };\n}\n\nvar ClientStore = /*#__PURE__*/ (function () {\n    function ClientStore(clients) {\n        this.prevClients = [];\n        this.startClients = [];\n        this.movement = 0;\n        this.length = 0;\n        this.startClients = clients;\n        this.prevClients = clients;\n        this.length = clients.length;\n    }\n    ClientStore.prototype.getAngle = function (clients) {\n        if (clients === void 0) { clients = this.prevClients; }\n        return getRotatiion(clients);\n    };\n    ClientStore.prototype.getRotation = function (clients) {\n        if (clients === void 0) { clients = this.prevClients; }\n        return getRotatiion(clients) - getRotatiion(this.startClients);\n    };\n    ClientStore.prototype.getPosition = function (clients, isAdd) {\n        if (clients === void 0) { clients = this.prevClients; }\n        var position = getPosition(clients || this.prevClients, this.prevClients, this.startClients);\n        var deltaX = position.deltaX, deltaY = position.deltaY;\n        this.movement += Math.sqrt(deltaX * deltaX + deltaY * deltaY);\n        this.prevClients = clients;\n        return position;\n    };\n    ClientStore.prototype.getPositions = function (clients) {\n        if (clients === void 0) { clients = this.prevClients; }\n        var prevClients = this.prevClients;\n        var startClients = this.startClients;\n        var minLength = Math.min(this.length, prevClients.length);\n        var positions = [];\n        for (var i = 0; i < minLength; ++i) {\n            positions[i] = getPosition([clients[i]], [prevClients[i]], [startClients[i]]);\n        }\n        return positions;\n    };\n    ClientStore.prototype.getMovement = function (clients) {\n        var movement = this.movement;\n        if (!clients) {\n            return movement;\n        }\n        var currentClient = getAverageClient(clients, this.length);\n        var prevClient = getAverageClient(this.prevClients, this.length);\n        var deltaX = currentClient.clientX - prevClient.clientX;\n        var deltaY = currentClient.clientY - prevClient.clientY;\n        return Math.sqrt(deltaX * deltaX + deltaY * deltaY) + movement;\n    };\n    ClientStore.prototype.getDistance = function (clients) {\n        if (clients === void 0) { clients = this.prevClients; }\n        return getDist(clients);\n    };\n    ClientStore.prototype.getScale = function (clients) {\n        if (clients === void 0) { clients = this.prevClients; }\n        return getDist(clients) / getDist(this.startClients);\n    };\n    ClientStore.prototype.move = function (deltaX, deltaY) {\n        this.startClients.forEach(function (client) {\n            client.clientX -= deltaX;\n            client.clientY -= deltaY;\n        });\n        this.prevClients.forEach(function (client) {\n            client.clientX -= deltaX;\n            client.clientY -= deltaY;\n        });\n    };\n    return ClientStore;\n}());\n\nvar INPUT_TAGNAMES = [\"textarea\", \"input\"];\n/**\n * You can set up drag, pinch events in any browser.\n */\nvar Gesto = /*#__PURE__*/ (function (_super) {\n    __extends(Gesto, _super);\n    /**\n     *\n     */\n    function Gesto(targets, options) {\n        if (options === void 0) { options = {}; }\n        var _this = _super.call(this) || this;\n        _this.options = {};\n        _this.flag = false;\n        _this.pinchFlag = false;\n        _this.data = {};\n        _this.isDrag = false;\n        _this.isPinch = false;\n        _this.clientStores = [];\n        _this.targets = [];\n        _this.prevTime = 0;\n        _this.doubleFlag = false;\n        _this._useMouse = false;\n        _this._useTouch = false;\n        _this._useDrag = false;\n        _this._dragFlag = false;\n        _this._isTrusted = false;\n        _this._isMouseEvent = false;\n        _this._isSecondaryButton = false;\n        _this._preventMouseEvent = false;\n        _this._prevInputEvent = null;\n        _this._isDragAPI = false;\n        _this._isIdle = true;\n        _this._preventMouseEventId = 0;\n        _this._window = window;\n        _this.onDragStart = function (e, isTrusted) {\n            if (isTrusted === void 0) { isTrusted = true; }\n            if (!_this.flag && e.cancelable === false) {\n                return;\n            }\n            var isDragAPI = e.type.indexOf(\"drag\") >= -1;\n            if (_this.flag && isDragAPI) {\n                return;\n            }\n            _this._isDragAPI = true;\n            var _a = _this.options, container = _a.container, pinchOutside = _a.pinchOutside, preventWheelClick = _a.preventWheelClick, preventRightClick = _a.preventRightClick, preventDefault = _a.preventDefault, checkInput = _a.checkInput, dragFocusedInput = _a.dragFocusedInput, preventClickEventOnDragStart = _a.preventClickEventOnDragStart, preventClickEventOnDrag = _a.preventClickEventOnDrag, preventClickEventByCondition = _a.preventClickEventByCondition;\n            var useTouch = _this._useTouch;\n            var isDragStart = !_this.flag;\n            _this._isSecondaryButton = e.which === 3 || e.button === 2;\n            if ((preventWheelClick && (e.which === 2 || e.button === 1))\n                || (preventRightClick && (e.which === 3 || e.button === 2))) {\n                _this.stop();\n                return false;\n            }\n            if (isDragStart) {\n                var activeElement = _this._window.document.activeElement;\n                var target = e.target;\n                if (target) {\n                    var tagName = target.tagName.toLowerCase();\n                    var hasInput = INPUT_TAGNAMES.indexOf(tagName) > -1;\n                    var hasContentEditable = target.isContentEditable;\n                    if (hasInput || hasContentEditable) {\n                        if (checkInput || (!dragFocusedInput && activeElement === target)) {\n                            // force false or already focused.\n                            return false;\n                        }\n                        // no focus\n                        if (activeElement && (activeElement === target\n                            || (hasContentEditable && activeElement.isContentEditable && activeElement.contains(target)))) {\n                            if (dragFocusedInput) {\n                                target.blur();\n                            }\n                            else {\n                                return false;\n                            }\n                        }\n                    }\n                    else if ((preventDefault || e.type === \"touchstart\") && activeElement) {\n                        var activeTagName = activeElement.tagName.toLowerCase();\n                        if (activeElement.isContentEditable || INPUT_TAGNAMES.indexOf(activeTagName) > -1) {\n                            activeElement.blur();\n                        }\n                    }\n                    if (preventClickEventOnDragStart || preventClickEventOnDrag || preventClickEventByCondition) {\n                        addEvent(_this._window, \"click\", _this._onClick, true);\n                    }\n                }\n                _this.clientStores = [new ClientStore(getEventClients(e))];\n                _this._isIdle = false;\n                _this.flag = true;\n                _this.isDrag = false;\n                _this._isTrusted = isTrusted;\n                _this._dragFlag = true;\n                _this._prevInputEvent = e;\n                _this.data = {};\n                _this.doubleFlag = now() - _this.prevTime < 200;\n                _this._isMouseEvent = isMouseEvent(e);\n                if (!_this._isMouseEvent && _this._preventMouseEvent) {\n                    _this._allowMouseEvent();\n                }\n                var result = _this._preventMouseEvent || _this.emit(\"dragStart\", __assign(__assign({ data: _this.data, datas: _this.data, inputEvent: e, isMouseEvent: _this._isMouseEvent, isSecondaryButton: _this._isSecondaryButton, isTrusted: isTrusted, isDouble: _this.doubleFlag }, _this.getCurrentStore().getPosition()), { preventDefault: function () {\n                        e.preventDefault();\n                    }, preventDrag: function () {\n                        _this._dragFlag = false;\n                    } }));\n                if (result === false) {\n                    _this.stop();\n                }\n                if (_this._isMouseEvent && _this.flag && preventDefault) {\n                    e.preventDefault();\n                }\n            }\n            if (!_this.flag) {\n                return false;\n            }\n            var timer = 0;\n            if (isDragStart) {\n                _this._attchDragEvent();\n                // wait pinch\n                if (useTouch && pinchOutside) {\n                    timer = setTimeout(function () {\n                        addEvent(container, \"touchstart\", _this.onDragStart, {\n                            passive: false\n                        });\n                    });\n                }\n            }\n            else if (useTouch && pinchOutside) {\n                // pinch is occured\n                removeEvent(container, \"touchstart\", _this.onDragStart);\n            }\n            if (_this.flag && isMultiTouch(e)) {\n                clearTimeout(timer);\n                if (isDragStart && (e.touches.length !== e.changedTouches.length)) {\n                    return;\n                }\n                if (!_this.pinchFlag) {\n                    _this.onPinchStart(e);\n                }\n            }\n        };\n        _this.onDrag = function (e, isScroll) {\n            if (!_this.flag) {\n                return;\n            }\n            var preventDefault = _this.options.preventDefault;\n            if (!_this._isMouseEvent && preventDefault) {\n                e.preventDefault();\n            }\n            _this._prevInputEvent = e;\n            var clients = getEventClients(e);\n            var result = _this.moveClients(clients, e, false);\n            if (_this._dragFlag) {\n                if (_this.pinchFlag || result.deltaX || result.deltaY) {\n                    var dragResult = _this._preventMouseEvent || _this.emit(\"drag\", __assign(__assign({}, result), { isScroll: !!isScroll, inputEvent: e }));\n                    if (dragResult === false) {\n                        _this.stop();\n                        return;\n                    }\n                }\n                if (_this.pinchFlag) {\n                    _this.onPinch(e, clients);\n                }\n            }\n            _this.getCurrentStore().getPosition(clients, true);\n        };\n        _this.onDragEnd = function (e) {\n            if (!_this.flag) {\n                return;\n            }\n            var _a = _this.options, pinchOutside = _a.pinchOutside, container = _a.container, preventClickEventOnDrag = _a.preventClickEventOnDrag, preventClickEventOnDragStart = _a.preventClickEventOnDragStart, preventClickEventByCondition = _a.preventClickEventByCondition;\n            var isDrag = _this.isDrag;\n            if (preventClickEventOnDrag || preventClickEventOnDragStart || preventClickEventByCondition) {\n                requestAnimationFrame(function () {\n                    _this._allowClickEvent();\n                });\n            }\n            if (!preventClickEventByCondition && !preventClickEventOnDragStart && preventClickEventOnDrag && !isDrag) {\n                _this._allowClickEvent();\n            }\n            if (_this._useTouch && pinchOutside) {\n                removeEvent(container, \"touchstart\", _this.onDragStart);\n            }\n            if (_this.pinchFlag) {\n                _this.onPinchEnd(e);\n            }\n            var clients = (e === null || e === void 0 ? void 0 : e.touches) ? getEventClients(e) : [];\n            var clientsLength = clients.length;\n            if (clientsLength === 0 || !_this.options.keepDragging) {\n                _this.flag = false;\n            }\n            else {\n                _this._addStore(new ClientStore(clients));\n            }\n            var position = _this._getPosition();\n            var currentTime = now();\n            var isDouble = !isDrag && _this.doubleFlag;\n            _this._prevInputEvent = null;\n            _this.prevTime = isDrag || isDouble ? 0 : currentTime;\n            if (!_this.flag) {\n                _this._dettachDragEvent();\n                _this._preventMouseEvent || _this.emit(\"dragEnd\", __assign({ data: _this.data, datas: _this.data, isDouble: isDouble, isDrag: isDrag, isClick: !isDrag, isMouseEvent: _this._isMouseEvent, isSecondaryButton: _this._isSecondaryButton, inputEvent: e, isTrusted: _this._isTrusted }, position));\n                _this.clientStores = [];\n                if (!_this._isMouseEvent) {\n                    _this._preventMouseEvent = true;\n                    // Prevent the problem of touch event and mouse event occurring simultaneously\n                    clearTimeout(_this._preventMouseEventId);\n                    _this._preventMouseEventId = setTimeout(function () {\n                        _this._preventMouseEvent = false;\n                    }, 200);\n                }\n                _this._isIdle = true;\n            }\n        };\n        _this.onBlur = function () {\n            _this.onDragEnd();\n        };\n        _this._allowClickEvent = function () {\n            removeEvent(_this._window, \"click\", _this._onClick, true);\n        };\n        _this._onClick = function (e) {\n            _this._allowClickEvent();\n            _this._allowMouseEvent();\n            var preventClickEventByCondition = _this.options.preventClickEventByCondition;\n            if (preventClickEventByCondition === null || preventClickEventByCondition === void 0 ? void 0 : preventClickEventByCondition(e)) {\n                return;\n            }\n            e.stopPropagation();\n            e.preventDefault();\n        };\n        _this._onContextMenu = function (e) {\n            var options = _this.options;\n            if (!options.preventRightClick) {\n                e.preventDefault();\n            }\n            else {\n                _this.onDragEnd(e);\n            }\n        };\n        _this._passCallback = function () { };\n        var elements = [].concat(targets);\n        var firstTarget = elements[0];\n        _this._window = isWindow(firstTarget) ? firstTarget : getWindow(firstTarget);\n        _this.options = __assign({ checkInput: false, container: firstTarget && !(\"document\" in firstTarget) ? getWindow(firstTarget) : firstTarget, preventRightClick: true, preventWheelClick: true, preventClickEventOnDragStart: false, preventClickEventOnDrag: false, preventClickEventByCondition: null, preventDefault: true, checkWindowBlur: false, keepDragging: false, pinchThreshold: 0, events: [\"touch\", \"mouse\"] }, options);\n        var _a = _this.options, container = _a.container, events = _a.events, checkWindowBlur = _a.checkWindowBlur;\n        _this._useDrag = events.indexOf(\"drag\") > -1;\n        _this._useTouch = events.indexOf(\"touch\") > -1;\n        _this._useMouse = events.indexOf(\"mouse\") > -1;\n        _this.targets = elements;\n        if (_this._useDrag) {\n            elements.forEach(function (el) {\n                addEvent(el, \"dragstart\", _this.onDragStart);\n            });\n        }\n        if (_this._useMouse) {\n            elements.forEach(function (el) {\n                addEvent(el, \"mousedown\", _this.onDragStart);\n                addEvent(el, \"mousemove\", _this._passCallback);\n            });\n            addEvent(container, \"contextmenu\", _this._onContextMenu);\n        }\n        if (checkWindowBlur) {\n            addEvent(getWindow(), \"blur\", _this.onBlur);\n        }\n        if (_this._useTouch) {\n            var passive_1 = {\n                passive: false,\n            };\n            elements.forEach(function (el) {\n                addEvent(el, \"touchstart\", _this.onDragStart, passive_1);\n                addEvent(el, \"touchmove\", _this._passCallback, passive_1);\n            });\n        }\n        return _this;\n    }\n    /**\n     * Stop Gesto's drag events.\n     */\n    Gesto.prototype.stop = function () {\n        this.isDrag = false;\n        this.data = {};\n        this.clientStores = [];\n        this.pinchFlag = false;\n        this.doubleFlag = false;\n        this.prevTime = 0;\n        this.flag = false;\n        this._isIdle = true;\n        this._allowClickEvent();\n        this._dettachDragEvent();\n        this._isDragAPI = false;\n    };\n    /**\n     * The total moved distance\n     */\n    Gesto.prototype.getMovement = function (clients) {\n        return this.getCurrentStore().getMovement(clients) + this.clientStores.slice(1).reduce(function (prev, cur) {\n            return prev + cur.movement;\n        }, 0);\n    };\n    /**\n     * Whether to drag\n     */\n    Gesto.prototype.isDragging = function () {\n        return this.isDrag;\n    };\n    /**\n     * Whether the operation of gesto is finished and is in idle state\n     */\n    Gesto.prototype.isIdle = function () {\n        return this._isIdle;\n    };\n    /**\n     * Whether to start drag\n     */\n    Gesto.prototype.isFlag = function () {\n        return this.flag;\n    };\n    /**\n     * Whether to start pinch\n     */\n    Gesto.prototype.isPinchFlag = function () {\n        return this.pinchFlag;\n    };\n    /**\n     * Whether to start double click\n     */\n    Gesto.prototype.isDoubleFlag = function () {\n        return this.doubleFlag;\n    };\n    /**\n     * Whether to pinch\n     */\n    Gesto.prototype.isPinching = function () {\n        return this.isPinch;\n    };\n    /**\n     * If a scroll event occurs, it is corrected by the scroll distance.\n     */\n    Gesto.prototype.scrollBy = function (deltaX, deltaY, e, isCallDrag) {\n        if (isCallDrag === void 0) { isCallDrag = true; }\n        if (!this.flag) {\n            return;\n        }\n        this.clientStores[0].move(deltaX, deltaY);\n        isCallDrag && this.onDrag(e, true);\n    };\n    /**\n     * Create a virtual drag event.\n     */\n    Gesto.prototype.move = function (_a, inputEvent) {\n        var deltaX = _a[0], deltaY = _a[1];\n        var store = this.getCurrentStore();\n        var nextClients = store.prevClients;\n        return this.moveClients(nextClients.map(function (_a) {\n            var clientX = _a.clientX, clientY = _a.clientY;\n            return {\n                clientX: clientX + deltaX,\n                clientY: clientY + deltaY,\n                originalClientX: clientX,\n                originalClientY: clientY,\n            };\n        }), inputEvent, true);\n    };\n    /**\n     * The dragStart event is triggered by an external event.\n     */\n    Gesto.prototype.triggerDragStart = function (e) {\n        this.onDragStart(e, false);\n    };\n    /**\n     * Set the event data while dragging.\n     */\n    Gesto.prototype.setEventData = function (data) {\n        var currentData = this.data;\n        for (var name_1 in data) {\n            currentData[name_1] = data[name_1];\n        }\n        return this;\n    };\n    /**\n     * Set the event data while dragging.\n     * Use `setEventData`\n     * @deprecated\n     */\n    Gesto.prototype.setEventDatas = function (data) {\n        return this.setEventData(data);\n    };\n    /**\n     * Get the current event state while dragging.\n     */\n    Gesto.prototype.getCurrentEvent = function (inputEvent) {\n        if (inputEvent === void 0) { inputEvent = this._prevInputEvent; }\n        return __assign(__assign({ data: this.data, datas: this.data }, this._getPosition()), { movement: this.getMovement(), isDrag: this.isDrag, isPinch: this.isPinch, isScroll: false, inputEvent: inputEvent });\n    };\n    /**\n     * Get & Set the event data while dragging.\n     */\n    Gesto.prototype.getEventData = function () {\n        return this.data;\n    };\n    /**\n     * Get & Set the event data while dragging.\n     * Use getEventData method\n     * @depreacated\n     */\n    Gesto.prototype.getEventDatas = function () {\n        return this.data;\n    };\n    /**\n     * Unset Gesto\n     */\n    Gesto.prototype.unset = function () {\n        var _this = this;\n        var targets = this.targets;\n        var container = this.options.container;\n        this.off();\n        removeEvent(this._window, \"blur\", this.onBlur);\n        if (this._useDrag) {\n            targets.forEach(function (el) {\n                removeEvent(el, \"dragstart\", _this.onDragStart);\n            });\n        }\n        if (this._useMouse) {\n            targets.forEach(function (target) {\n                removeEvent(target, \"mousedown\", _this.onDragStart);\n            });\n            removeEvent(container, \"contextmenu\", this._onContextMenu);\n        }\n        if (this._useTouch) {\n            targets.forEach(function (target) {\n                removeEvent(target, \"touchstart\", _this.onDragStart);\n            });\n            removeEvent(container, \"touchstart\", this.onDragStart);\n        }\n        this._prevInputEvent = null;\n        this._allowClickEvent();\n        this._dettachDragEvent();\n    };\n    Gesto.prototype.onPinchStart = function (e) {\n        var _this = this;\n        var pinchThreshold = this.options.pinchThreshold;\n        if (this.isDrag && this.getMovement() > pinchThreshold) {\n            return;\n        }\n        var store = new ClientStore(getEventClients(e));\n        this.pinchFlag = true;\n        this._addStore(store);\n        var result = this.emit(\"pinchStart\", __assign(__assign({ data: this.data, datas: this.data, angle: store.getAngle(), touches: this.getCurrentStore().getPositions() }, store.getPosition()), { inputEvent: e, isTrusted: this._isTrusted, preventDefault: function () {\n                e.preventDefault();\n            }, preventDrag: function () {\n                _this._dragFlag = false;\n            } }));\n        if (result === false) {\n            this.pinchFlag = false;\n        }\n    };\n    Gesto.prototype.onPinch = function (e, clients) {\n        if (!this.flag || !this.pinchFlag || clients.length < 2) {\n            return;\n        }\n        var store = this.getCurrentStore();\n        this.isPinch = true;\n        this.emit(\"pinch\", __assign(__assign({ data: this.data, datas: this.data, movement: this.getMovement(clients), angle: store.getAngle(clients), rotation: store.getRotation(clients), touches: store.getPositions(clients), scale: store.getScale(clients), distance: store.getDistance(clients) }, store.getPosition(clients)), { inputEvent: e, isTrusted: this._isTrusted }));\n    };\n    Gesto.prototype.onPinchEnd = function (e) {\n        if (!this.pinchFlag) {\n            return;\n        }\n        var isPinch = this.isPinch;\n        this.isPinch = false;\n        this.pinchFlag = false;\n        var store = this.getCurrentStore();\n        this.emit(\"pinchEnd\", __assign(__assign({ data: this.data, datas: this.data, isPinch: isPinch, touches: store.getPositions() }, store.getPosition()), { inputEvent: e }));\n    };\n    Gesto.prototype.getCurrentStore = function () {\n        return this.clientStores[0];\n    };\n    Gesto.prototype.moveClients = function (clients, inputEvent, isAdd) {\n        var position = this._getPosition(clients, isAdd);\n        var isPrevDrag = this.isDrag;\n        if (position.deltaX || position.deltaY) {\n            this.isDrag = true;\n        }\n        var isFirstDrag = false;\n        if (!isPrevDrag && this.isDrag) {\n            isFirstDrag = true;\n        }\n        return __assign(__assign({ data: this.data, datas: this.data }, position), { movement: this.getMovement(clients), isDrag: this.isDrag, isPinch: this.isPinch, isScroll: false, isMouseEvent: this._isMouseEvent, isSecondaryButton: this._isSecondaryButton, inputEvent: inputEvent, isTrusted: this._isTrusted, isFirstDrag: isFirstDrag });\n    };\n    Gesto.prototype._addStore = function (store) {\n        this.clientStores.splice(0, 0, store);\n    };\n    Gesto.prototype._getPosition = function (clients, isAdd) {\n        var store = this.getCurrentStore();\n        var position = store.getPosition(clients, isAdd);\n        var _a = this.clientStores.slice(1).reduce(function (prev, cur) {\n            var storePosition = cur.getPosition();\n            prev.distX += storePosition.distX;\n            prev.distY += storePosition.distY;\n            return prev;\n        }, position), distX = _a.distX, distY = _a.distY;\n        return __assign(__assign({}, position), { distX: distX, distY: distY });\n    };\n    Gesto.prototype._attchDragEvent = function () {\n        var win = this._window;\n        var container = this.options.container;\n        var passive = {\n            passive: false\n        };\n        if (this._isDragAPI) {\n            addEvent(container, \"dragover\", this.onDrag, passive);\n            addEvent(win, \"dragend\", this.onDragEnd);\n        }\n        if (this._useMouse) {\n            addEvent(container, \"mousemove\", this.onDrag);\n            addEvent(win, \"mouseup\", this.onDragEnd);\n        }\n        if (this._useTouch) {\n            addEvent(container, \"touchmove\", this.onDrag, passive);\n            addEvent(win, \"touchend\", this.onDragEnd, passive);\n            addEvent(win, \"touchcancel\", this.onDragEnd, passive);\n        }\n    };\n    Gesto.prototype._dettachDragEvent = function () {\n        var win = this._window;\n        var container = this.options.container;\n        if (this._isDragAPI) {\n            removeEvent(container, \"dragover\", this.onDrag);\n            removeEvent(win, \"dragend\", this.onDragEnd);\n        }\n        if (this._useMouse) {\n            removeEvent(container, \"mousemove\", this.onDrag);\n            removeEvent(win, \"mouseup\", this.onDragEnd);\n        }\n        if (this._useTouch) {\n            removeEvent(container, \"touchstart\", this.onDragStart);\n            removeEvent(container, \"touchmove\", this.onDrag);\n            removeEvent(win, \"touchend\", this.onDragEnd);\n            removeEvent(win, \"touchcancel\", this.onDragEnd);\n        }\n    };\n    Gesto.prototype._allowMouseEvent = function () {\n        this._preventMouseEvent = false;\n        clearTimeout(this._preventMouseEventId);\n    };\n    return Gesto;\n}(EventEmitter));\n\nexport { Gesto as default };\n//# sourceMappingURL=gesto.esm.js.map\n","/*\nCopyright (c) Daybrush\nname: css-styled\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/css-styled.git\nversion: 1.0.8\n*/\nimport { getDocument, splitComma } from '@daybrush/utils';\n\nfunction hash(str) {\n  var hash = 5381,\n      i    = str.length;\n\n  while(i) {\n    hash = (hash * 33) ^ str.charCodeAt(--i);\n  }\n\n  /* JavaScript does bitwise operations (like XOR, above) on 32-bit signed\n   * integers. Since we want the results to be always positive, convert the\n   * signed int to an unsigned by doing an unsigned bitshift. */\n  return hash >>> 0;\n}\n\nvar stringHash = hash;\n\nfunction getHash(str) {\n  return stringHash(str).toString(36);\n}\nfunction getShadowRoot(parentElement) {\n  if (parentElement && parentElement.getRootNode) {\n    var rootNode = parentElement.getRootNode();\n    if (rootNode.nodeType === 11) {\n      return rootNode;\n    }\n  }\n  return;\n}\nfunction replaceStyle(className, css, options) {\n  if (options.original) {\n    return css;\n  }\n  return css.replace(/([^};{\\s}][^};{]*|^\\s*){/mg, function (_, selector) {\n    var trimmedSelector = selector.trim();\n    return (trimmedSelector ? splitComma(trimmedSelector) : [\"\"]).map(function (subSelector) {\n      var trimmedSubSelector = subSelector.trim();\n      if (trimmedSubSelector.indexOf(\"@\") === 0) {\n        return trimmedSubSelector;\n      } else if (trimmedSubSelector.indexOf(\":global\") > -1) {\n        return trimmedSubSelector.replace(/\\:global/g, \"\");\n      } else if (trimmedSubSelector.indexOf(\":host\") > -1) {\n        return \"\".concat(trimmedSubSelector.replace(/\\:host/g, \".\".concat(className)));\n      } else if (trimmedSubSelector) {\n        return \".\".concat(className, \" \").concat(trimmedSubSelector);\n      } else {\n        return \".\".concat(className);\n      }\n    }).join(\", \") + \" {\";\n  });\n}\nfunction injectStyle(className, css, options, el, shadowRoot) {\n  var doc = getDocument(el);\n  var style = doc.createElement(\"style\");\n  style.setAttribute(\"type\", \"text/css\");\n  style.setAttribute(\"data-styled-id\", className);\n  style.setAttribute(\"data-styled-count\", \"1\");\n  if (options.nonce) {\n    style.setAttribute(\"nonce\", options.nonce);\n  }\n  style.innerHTML = replaceStyle(className, css, options);\n  (shadowRoot || doc.head || doc.body).appendChild(style);\n  return style;\n}\n\n/**\n * Create an styled object that can be defined and inserted into the css.\n * @param - css styles\n */\nfunction styled(css) {\n  var injectClassName = \"rCS\" + getHash(css);\n  return {\n    className: injectClassName,\n    inject: function (el, options) {\n      if (options === void 0) {\n        options = {};\n      }\n      var shadowRoot = getShadowRoot(el);\n      var styleElement = (shadowRoot || el.ownerDocument || document).querySelector(\"style[data-styled-id=\\\"\".concat(injectClassName, \"\\\"]\"));\n      if (!styleElement) {\n        styleElement = injectStyle(injectClassName, css, options, el, shadowRoot);\n      } else {\n        var count = parseFloat(styleElement.getAttribute(\"data-styled-count\")) || 0;\n        styleElement.setAttribute(\"data-styled-count\", \"\".concat(count + 1));\n      }\n      return {\n        destroy: function () {\n          var _a;\n          var injectCount = parseFloat(styleElement.getAttribute(\"data-styled-count\")) || 0;\n          if (injectCount <= 1) {\n            if (styleElement.remove) {\n              styleElement.remove();\n            } else {\n              (_a = styleElement.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(styleElement);\n            }\n            styleElement = null;\n          } else {\n            styleElement.setAttribute(\"data-styled-count\", \"\".concat(injectCount - 1));\n          }\n        }\n      };\n    }\n  };\n}\n\nexport default styled;\n//# sourceMappingURL=styled.esm.js.map\n","/*\nCopyright (c) 2019 Daybrush\nname: react-css-styled\nlicense: MIT\nauthor: Daybrush\nrepository: https://github.com/daybrush/css-styled/tree/master/packages/react-css-styled\nversion: 1.1.9\n*/\nimport cssStyled from 'css-styled';\nimport { version, createElement, Component, forwardRef, useRef, useImperativeHandle, useEffect } from 'react';\nimport { ref } from 'framework-utils';\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n/* global Reflect, Promise */\n\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n  };\n  return extendStatics(d, b);\n};\nfunction __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() {\n    this.constructor = d;\n  }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nfunction __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\n\nvar StyledElement = /*#__PURE__*/function (_super) {\n  __extends(StyledElement, _super);\n  function StyledElement() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.injectResult = null;\n    _this.tag = \"div\";\n    return _this;\n  }\n  var __proto = StyledElement.prototype;\n  __proto.render = function () {\n    var _a = this.props,\n      _b = _a.className,\n      className = _b === void 0 ? \"\" : _b,\n      cspNonce = _a.cspNonce,\n      portalContainer = _a.portalContainer,\n      attributes = __rest(_a, [\"className\", \"cspNonce\", \"portalContainer\"]);\n    var cssId = this.injector.className;\n    var Tag = this.tag;\n    var portalAttributes = {};\n    if ((version || \"\").indexOf(\"simple\") > -1 && portalContainer) {\n      portalAttributes = {\n        portalContainer: portalContainer\n      };\n    }\n    return createElement(Tag, __assign(__assign({\n      \"ref\": ref(this, \"element\"),\n      \"data-styled-id\": cssId,\n      \"className\": \"\".concat(className, \" \").concat(cssId)\n    }, portalAttributes), attributes));\n  };\n  __proto.componentDidMount = function () {\n    this.injectResult = this.injector.inject(this.element, {\n      nonce: this.props.cspNonce\n    });\n  };\n  __proto.componentWillUnmount = function () {\n    this.injectResult.destroy();\n    this.injectResult = null;\n  };\n  __proto.getElement = function () {\n    return this.element;\n  };\n  return StyledElement;\n}(Component);\n\nfunction defaultStyled(tag, css) {\n  var injector = cssStyled(css);\n  return (/*#__PURE__*/function (_super) {\n      __extends(Styled, _super);\n      function Styled() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.injector = injector;\n        _this.tag = tag;\n        return _this;\n      }\n      return Styled;\n    }(StyledElement)\n  );\n}\nfunction styled(Tag, css) {\n  var injector = cssStyled(css);\n  var cssId = injector.className;\n  return forwardRef(function (props, ref) {\n    var _a = props.className,\n      className = _a === void 0 ? \"\" : _a,\n      cspNonce = props.cspNonce,\n      attributes = __rest(props, [\"className\", \"cspNonce\"]);\n    var targetRef = useRef();\n    useImperativeHandle(ref, function () {\n      return targetRef.current;\n    }, []);\n    useEffect(function () {\n      var injectResult = injector.inject(targetRef.current, {\n        nonce: props.cspNonce\n      });\n      return function () {\n        injectResult.destroy();\n      };\n    }, []);\n    return createElement(Tag, __assign({\n      \"ref\": targetRef,\n      \"data-styled-id\": cssId,\n      \"className\": \"\".concat(className, \" \").concat(cssId)\n    }, attributes));\n  });\n}\n\nexport default defaultStyled;\nexport { StyledElement, styled };\n//# sourceMappingURL=styled.esm.js.map\n","/*\nCopyright (c) 2019 Daybrush\nname: react-moveable\nlicense: MIT\nauthor: Daybrush\nrepository: https://github.com/daybrush/moveable/blob/master/packages/react-moveable\nversion: 0.56.0\n*/\nimport getAgent from '@egjs/agent';\nimport { prefixNames, ref, refs, prefixCSS, withMethods } from 'framework-utils';\nimport { findIndex, find, isArray, splitSpace, splitUnit, dot, isString, getDocumentElement, getDocumentBody, getWindow, throttle, getKeys, getRad, TINY_NUM as TINY_NUM$1, average, getDist as getDist$1, throttleArray, calculateBoundSize, convertUnitSize, isNumber, hasClass, isObject, flat as flat$1, decamelize, isNode, isFunction, isWindow, counter, isUndefined, between, addClass, requestAnimationFrame, removeClass, splitBracket, splitComma, cancelAnimationFrame, pushSet } from '@daybrush/utils';\nimport { minus, invert, convertPositionMatrix, plus, calculate, fromTranslation, multiply, convertDimension, createScaleMatrix, convertCSStoMatrix, createIdentityMatrix, createOriginMatrix, createRotateMatrix, rotate, getOrigin, multiplies, convertMatrixtoCSS, ignoreDimension, createWarpMatrix } from '@scena/matrix';\nimport { parse, parseMat, toMat, calculateMatrixDist } from 'css-to-mat';\nimport ChildrenDiffer, { diff } from '@egjs/children-differ';\nimport DragScroll from '@scena/dragscroll';\nimport { getMinMaxs, fitPoints, getOverlapSize, getAreaSize, isInside, getIntersectionPointsByConstants } from 'overlap-area';\nimport * as React from 'react';\nimport { createElement } from 'react';\nimport Gesto from 'gesto';\nimport { styled } from 'react-css-styled';\nimport EventEmitter from '@scena/event-emitter';\nimport { diff as diff$1 } from '@egjs/list-differ';\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nfunction __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nfunction __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nfunction __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\n\nfunction makeAble(name, able) {\r\n    return __assign({ events: [], props: [], name: name }, able);\r\n}\n\nvar DIRECTIONS4 = [\"n\", \"w\", \"s\", \"e\"];\r\nvar DIRECTIONS = [\"n\", \"w\", \"s\", \"e\", \"nw\", \"ne\", \"sw\", \"se\"];\r\nfunction getSVGCursor(scale, degree) {\r\n    return \"data:image/svg+xml;utf8,<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"\".concat(32 * scale, \"px\\\" height=\\\"\").concat(32 * scale, \"px\\\" viewBox=\\\"0 0 32 32\\\" ><path d=\\\"M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z\\\" stroke-linejoin=\\\"round\\\" stroke-width=\\\"1.2\\\" fill=\\\"black\\\" stroke=\\\"white\\\" style=\\\"transform:rotate(\").concat(degree, \"deg);transform-origin: 16px 16px\\\"></path></svg>\");\r\n}\r\nfunction getCursorCSS(degree) {\r\n    var x1 = getSVGCursor(1, degree);\r\n    // const x2 = getSVGCursor(2, degree);\r\n    var degree45 = (Math.round(degree / 45) * 45) % 180;\r\n    var defaultCursor = \"ns-resize\";\r\n    if (degree45 === 135) {\r\n        defaultCursor = \"nwse-resize\";\r\n    }\r\n    else if (degree45 === 45) {\r\n        defaultCursor = \"nesw-resize\";\r\n    }\r\n    else if (degree45 === 90) {\r\n        defaultCursor = \"ew-resize\";\r\n    }\r\n    // tslint:disable-next-line: max-line-length\r\n    return \"cursor:\".concat(defaultCursor, \";cursor: url('\").concat(x1, \"') 16 16, \").concat(defaultCursor, \";\");\r\n}\r\nvar agent = getAgent();\r\nvar IS_WEBKIT = agent.browser.webkit;\r\nvar IS_WEBKIT605 = IS_WEBKIT && (function () {\r\n    var navi = typeof window === \"undefined\" ? { userAgent: \"\" } : window.navigator;\r\n    var res = /applewebkit\\/([^\\s]+)/g.exec(navi.userAgent.toLowerCase());\r\n    return res ? parseFloat(res[1]) < 605 : false;\r\n})();\r\nvar browserName = agent.browser.name;\r\nvar browserVersion = parseInt(agent.browser.version, 10);\r\nvar IS_CHROME = browserName === \"chrome\";\r\nvar IS_CHROMIUM = agent.browser.chromium;\r\nvar chromiumVersion = parseInt(agent.browser.chromiumVersion, 10) || 0;\r\nvar IS_CHROMIUM109 = (IS_CHROME && browserVersion >= 109)\r\n    || (IS_CHROMIUM && chromiumVersion >= 109);\r\nvar IS_FIREFOX = browserName === \"firefox\";\r\nvar IS_SAFARI_ABOVE15 = parseInt(agent.browser.webkitVersion, 10) >= 612\r\n    || browserVersion >= 15;\r\nvar PREFIX = \"moveable-\";\r\nvar directionCSS = DIRECTIONS.map(function (dir) {\r\n    var top = \"\";\r\n    var left = \"\";\r\n    var originX = \"center\";\r\n    var originY = \"center\";\r\n    var offset = \"calc(var(--moveable-control-padding, 20) * -1px)\";\r\n    if (dir.indexOf(\"n\") > -1) {\r\n        top = \"top: \".concat(offset, \";\");\r\n        originY = \"bottom\";\r\n    }\r\n    if (dir.indexOf(\"s\") > -1) {\r\n        top = \"top: 0px;\";\r\n        originY = \"top\";\r\n    }\r\n    if (dir.indexOf(\"w\") > -1) {\r\n        left = \"left: \".concat(offset, \";\");\r\n        originX = \"right\";\r\n    }\r\n    if (dir.indexOf(\"e\") > -1) {\r\n        left = \"left: 0px;\";\r\n        originX = \"left\";\r\n    }\r\n    return \".around-control[data-direction*=\\\"\".concat(dir, \"\\\"] {\\n        \").concat(left).concat(top, \"\\n        transform-origin: \").concat(originX, \" \").concat(originY, \";\\n    }\");\r\n}).join(\"\\n\");\r\nvar MOVEABLE_CSS = \"\\n{\\nposition: absolute;\\nwidth: 1px;\\nheight: 1px;\\nleft: 0;\\ntop: 0;\\nz-index: 3000;\\n--moveable-color: #4af;\\n--zoom: 1;\\n--zoompx: 1px;\\n--moveable-line-padding: 0;\\n--moveable-control-padding: 0;\\nwill-change: transform;\\noutline: 1px solid transparent;\\n}\\n.control-box {\\nz-index: 0;\\n}\\n.line, .control {\\nposition: absolute;\\nleft: 0;\\ntop: 0;\\nwill-change: transform;\\n}\\n.control {\\nwidth: 14px;\\nheight: 14px;\\nborder-radius: 50%;\\nborder: 2px solid #fff;\\nbox-sizing: border-box;\\nbackground: #4af;\\nbackground: var(--moveable-color);\\nmargin-top: -7px;\\nmargin-left: -7px;\\nborder: 2px solid #fff;\\nz-index: 10;\\n}\\n.around-control {\\nposition: absolute;\\nwill-change: transform;\\nwidth: calc(var(--moveable-control-padding, 20) * 1px);\\nheight: calc(var(--moveable-control-padding, 20) * 1px);\\nleft: calc(var(--moveable-control-padding, 20) * -0.5px);\\ntop: calc(var(--moveable-control-padding, 20) * -0.5px);\\nbox-sizing: border-box;\\nbackground: transparent;\\nz-index: 8;\\ncursor: alias;\\ntransform-origin: center center;\\n}\\n\".concat(directionCSS, \"\\n.padding {\\nposition: absolute;\\ntop: 0px;\\nleft: 0px;\\nwidth: 100px;\\nheight: 100px;\\ntransform-origin: 0 0;\\n}\\n.line {\\nwidth: 1px;\\nheight: 1px;\\nbackground: #4af;\\nbackground: var(--moveable-color);\\ntransform-origin: 0px 50%;\\n}\\n.line.edge {\\nz-index: 1;\\nbackground: transparent;\\n}\\n.line.dashed {\\nbox-sizing: border-box;\\nbackground: transparent;\\n}\\n.line.dashed.horizontal {\\nborder-top: 1px dashed #4af;\\nborder-top-color: #4af;\\nborder-top-color: var(--moveable-color);\\n}\\n.line.dashed.vertical {\\nborder-left: 1px dashed #4af;\\nborder-left-color: #4af;\\nborder-left-color: var(--moveable-color);\\n}\\n.line.vertical {\\ntransform: translateX(-50%);\\n}\\n.line.horizontal {\\ntransform: translateY(-50%);\\n}\\n.line.vertical.bold {\\nwidth: 2px;\\n}\\n.line.horizontal.bold {\\nheight: 2px;\\n}\\n\\n.control.origin {\\nborder-color: #f55;\\nbackground: #fff;\\nwidth: 12px;\\nheight: 12px;\\nmargin-top: -6px;\\nmargin-left: -6px;\\npointer-events: none;\\n}\\n\").concat([0, 15, 30, 45, 60, 75, 90, 105, 120, 135, 150, 165].map(function (degree) { return \"\\n.direction[data-rotation=\\\"\".concat(degree, \"\\\"], :global .view-control-rotation\").concat(degree, \" {\\n\").concat(getCursorCSS(degree), \"\\n}\\n\"); }).join(\"\\n\"), \"\\n\\n.line.direction:before {\\ncontent: \\\"\\\";\\nposition: absolute;\\nwidth: 100%;\\nheight: calc(var(--moveable-line-padding, 0) * 1px);\\nbottom: 0;\\nleft: 0;\\n}\\n.group {\\nz-index: -1;\\n}\\n.area {\\nposition: absolute;\\n}\\n.area-pieces {\\nposition: absolute;\\ntop: 0;\\nleft: 0;\\ndisplay: none;\\n}\\n.area.avoid, .area.pass {\\npointer-events: none;\\n}\\n.area.avoid+.area-pieces {\\ndisplay: block;\\n}\\n.area-piece {\\nposition: absolute;\\n}\\n\\n\").concat(IS_WEBKIT605 ? \":global svg *:before {\\ncontent:\\\"\\\";\\ntransform-origin: inherit;\\n}\" : \"\", \"\\n\");\r\nvar NEARBY_POS = [\r\n    [0, 1, 2],\r\n    [1, 0, 3],\r\n    [2, 0, 3],\r\n    [3, 1, 2],\r\n];\r\nvar FLOAT_POINT_NUM = 0.0001;\r\nvar TINY_NUM = 0.0000001;\r\nvar MIN_SCALE = 0.000000001;\r\nvar MAX_NUM = Math.pow(10, 10);\r\nvar MIN_NUM = -MAX_NUM;\r\nvar DIRECTION_REGION_TO_DIRECTION = {\r\n    n: [0, -1],\r\n    e: [1, 0],\r\n    s: [0, 1],\r\n    w: [-1, 0],\r\n    nw: [-1, -1],\r\n    ne: [1, -1],\r\n    sw: [-1, 1],\r\n    se: [1, 1],\r\n};\r\nvar DIRECTION_INDEXES = {\r\n    n: [0, 1],\r\n    e: [1, 3],\r\n    s: [3, 2],\r\n    w: [2, 0],\r\n    nw: [0],\r\n    ne: [1],\r\n    sw: [2],\r\n    se: [3],\r\n};\r\nvar DIRECTION_ROTATIONS = {\r\n    n: 0,\r\n    s: 180,\r\n    w: 270,\r\n    e: 90,\r\n    nw: 315,\r\n    ne: 45,\r\n    sw: 225,\r\n    se: 135,\r\n};\r\nvar MOVEABLE_METHODS = [\r\n    \"isMoveableElement\",\r\n    \"updateRect\",\r\n    \"updateTarget\",\r\n    \"destroy\",\r\n    \"dragStart\",\r\n    \"isInside\",\r\n    \"hitTest\",\r\n    \"setState\",\r\n    \"getRect\",\r\n    \"request\",\r\n    \"isDragging\",\r\n    \"getManager\",\r\n    \"forceUpdate\",\r\n    \"waitToChangeTarget\",\r\n    \"updateSelectors\",\r\n    \"getTargets\",\r\n    \"stopDrag\",\r\n    \"getControlBoxElement\",\r\n    \"getMoveables\",\r\n    \"getDragElement\",\r\n];\n\nfunction setCustomDrag(e, state, delta, isPinch, isConvert, ableName) {\r\n    var _a, _b;\r\n    if (ableName === void 0) { ableName = \"draggable\"; }\r\n    var result = (_b = (_a = state.gestos[ableName]) === null || _a === void 0 ? void 0 : _a.move(delta, e.inputEvent)) !== null && _b !== void 0 ? _b : {};\r\n    var datas = result.originalDatas || result.datas;\r\n    var ableDatas = datas[ableName] || (datas[ableName] = {});\r\n    return __assign(__assign({}, (isConvert ? convertDragDist(state, result) : result)), { isPinch: !!isPinch, parentEvent: true, datas: ableDatas, originalDatas: e.originalDatas });\r\n}\r\nvar CustomGesto = /*#__PURE__*/ (function () {\r\n    function CustomGesto(ableName) {\r\n        var _a;\r\n        if (ableName === void 0) { ableName = \"draggable\"; }\r\n        this.ableName = ableName;\r\n        this.prevX = 0;\r\n        this.prevY = 0;\r\n        this.startX = 0;\r\n        this.startY = 0;\r\n        this.isDrag = false;\r\n        this.isFlag = false;\r\n        this.datas = {\r\n            draggable: {},\r\n        };\r\n        this.datas = (_a = {},\r\n            _a[ableName] = {},\r\n            _a);\r\n    }\r\n    CustomGesto.prototype.dragStart = function (client, e) {\r\n        this.isDrag = false;\r\n        this.isFlag = false;\r\n        var originalDatas = e.originalDatas;\r\n        this.datas = originalDatas;\r\n        if (!originalDatas[this.ableName]) {\r\n            originalDatas[this.ableName] = {};\r\n        }\r\n        return __assign(__assign({}, this.move(client, e.inputEvent)), { type: \"dragstart\" });\r\n    };\r\n    CustomGesto.prototype.drag = function (client, inputEvent) {\r\n        return this.move([\r\n            client[0] - this.prevX,\r\n            client[1] - this.prevY,\r\n        ], inputEvent);\r\n    };\r\n    CustomGesto.prototype.move = function (delta, inputEvent) {\r\n        var clientX;\r\n        var clientY;\r\n        var isFirstDrag = false;\r\n        if (!this.isFlag) {\r\n            this.prevX = delta[0];\r\n            this.prevY = delta[1];\r\n            this.startX = delta[0];\r\n            this.startY = delta[1];\r\n            clientX = delta[0];\r\n            clientY = delta[1];\r\n            this.isFlag = true;\r\n        }\r\n        else {\r\n            var isPrevDrag = this.isDrag;\r\n            clientX = this.prevX + delta[0];\r\n            clientY = this.prevY + delta[1];\r\n            if (delta[0] || delta[1]) {\r\n                this.isDrag = true;\r\n            }\r\n            if (!isPrevDrag && this.isDrag) {\r\n                isFirstDrag = true;\r\n            }\r\n        }\r\n        this.prevX = clientX;\r\n        this.prevY = clientY;\r\n        return {\r\n            type: \"drag\",\r\n            clientX: clientX,\r\n            clientY: clientY,\r\n            inputEvent: inputEvent,\r\n            isFirstDrag: isFirstDrag,\r\n            isDrag: this.isDrag,\r\n            distX: clientX - this.startX,\r\n            distY: clientY - this.startY,\r\n            deltaX: delta[0],\r\n            deltaY: delta[1],\r\n            datas: this.datas[this.ableName],\r\n            originalDatas: this.datas,\r\n            parentEvent: true,\r\n            parentGesto: this,\r\n        };\r\n    };\r\n    return CustomGesto;\r\n}());\n\nfunction calculateElementPosition(matrix, origin, width, height) {\r\n    var is3d = matrix.length === 16;\r\n    var n = is3d ? 4 : 3;\r\n    var poses = calculatePoses(matrix, width, height, n);\r\n    var _a = __read(poses, 4), _b = __read(_a[0], 2), x1 = _b[0], y1 = _b[1], _c = __read(_a[1], 2), x2 = _c[0], y2 = _c[1], _d = __read(_a[2], 2), x3 = _d[0], y3 = _d[1], _e = __read(_a[3], 2), x4 = _e[0], y4 = _e[1];\r\n    var _f = __read(calculatePosition(matrix, origin, n), 2), originX = _f[0], originY = _f[1];\r\n    var left = Math.min(x1, x2, x3, x4);\r\n    var top = Math.min(y1, y2, y3, y4);\r\n    var right = Math.max(x1, x2, x3, x4);\r\n    var bottom = Math.max(y1, y2, y3, y4);\r\n    x1 = (x1 - left) || 0;\r\n    x2 = (x2 - left) || 0;\r\n    x3 = (x3 - left) || 0;\r\n    x4 = (x4 - left) || 0;\r\n    y1 = (y1 - top) || 0;\r\n    y2 = (y2 - top) || 0;\r\n    y3 = (y3 - top) || 0;\r\n    y4 = (y4 - top) || 0;\r\n    originX = (originX - left) || 0;\r\n    originY = (originY - top) || 0;\r\n    var sx = matrix[0];\r\n    var sy = matrix[n + 1];\r\n    var direction = sign(sx * sy);\r\n    return {\r\n        left: left,\r\n        top: top,\r\n        right: right,\r\n        bottom: bottom,\r\n        origin: [originX, originY],\r\n        pos1: [x1, y1],\r\n        pos2: [x2, y2],\r\n        pos3: [x3, y3],\r\n        pos4: [x4, y4],\r\n        direction: direction,\r\n    };\r\n}\n\nfunction calculatePointerDist(moveable, e) {\r\n    var clientX = e.clientX, clientY = e.clientY, datas = e.datas;\r\n    var _a = moveable.state, moveableClientRect = _a.moveableClientRect, rootMatrix = _a.rootMatrix, is3d = _a.is3d, pos1 = _a.pos1;\r\n    var left = moveableClientRect.left, top = moveableClientRect.top;\r\n    var n = is3d ? 4 : 3;\r\n    var _b = __read(minus(calculateInversePosition(rootMatrix, [clientX - left, clientY - top], n), pos1), 2), posX = _b[0], posY = _b[1];\r\n    var _c = __read(getDragDist({ datas: datas, distX: posX, distY: posY }), 2), distX = _c[0], distY = _c[1];\r\n    return [distX, distY];\r\n}\r\nfunction setDragStart(moveable, _a) {\r\n    var datas = _a.datas;\r\n    var _b = moveable.state, allMatrix = _b.allMatrix, beforeMatrix = _b.beforeMatrix, is3d = _b.is3d, left = _b.left, top = _b.top, origin = _b.origin, offsetMatrix = _b.offsetMatrix, targetMatrix = _b.targetMatrix, transformOrigin = _b.transformOrigin;\r\n    var n = is3d ? 4 : 3;\r\n    datas.is3d = is3d;\r\n    datas.matrix = allMatrix;\r\n    datas.targetMatrix = targetMatrix;\r\n    datas.beforeMatrix = beforeMatrix;\r\n    datas.offsetMatrix = offsetMatrix;\r\n    datas.transformOrigin = transformOrigin;\r\n    datas.inverseMatrix = invert(allMatrix, n);\r\n    datas.inverseBeforeMatrix = invert(beforeMatrix, n);\r\n    datas.absoluteOrigin = convertPositionMatrix(plus([left, top], origin), n);\r\n    datas.startDragBeforeDist = calculate(datas.inverseBeforeMatrix, datas.absoluteOrigin, n);\r\n    datas.startDragDist = calculate(datas.inverseMatrix, datas.absoluteOrigin, n);\r\n}\r\nfunction getTransformDirection(e) {\r\n    return calculateElementPosition(e.datas.beforeTransform, [50, 50], 100, 100).direction;\r\n}\r\nfunction resolveTransformEvent(moveable, event, functionName) {\r\n    var datas = event.datas, originalDatas = event.originalDatas.beforeRenderable;\r\n    var index = datas.transformIndex;\r\n    var nextTransforms = originalDatas.nextTransforms;\r\n    var length = nextTransforms.length;\r\n    var nextTransformAppendedIndexes = originalDatas.nextTransformAppendedIndexes;\r\n    var nextIndex = -1;\r\n    if (index === -1) {\r\n        // translate => rotate => scale\r\n        if (functionName === \"translate\") {\r\n            nextIndex = 0;\r\n        }\r\n        else if (functionName === \"rotate\") {\r\n            nextIndex = findIndex(nextTransforms, function (text) { return text.match(/scale\\(/g); });\r\n        }\r\n        if (nextIndex === -1) {\r\n            nextIndex = nextTransforms.length;\r\n        }\r\n        datas.transformIndex = nextIndex;\r\n    }\r\n    else if (find(nextTransformAppendedIndexes, function (info) { return info.index === index && info.functionName === functionName; })) {\r\n        nextIndex = index;\r\n    }\r\n    else {\r\n        nextIndex = index + nextTransformAppendedIndexes.filter(function (info) { return info.index < index; }).length;\r\n    }\r\n    var result = convertTransformInfo(nextTransforms, moveable.state, nextIndex);\r\n    var targetFunction = result.targetFunction;\r\n    var matFunctionName = functionName === \"rotate\" ? \"rotateZ\" : functionName;\r\n    datas.beforeFunctionTexts = result.beforeFunctionTexts;\r\n    datas.afterFunctionTexts = result.afterFunctionTexts;\r\n    datas.beforeTransform = result.beforeFunctionMatrix;\r\n    datas.beforeTransform2 = result.beforeFunctionMatrix2;\r\n    datas.targetTansform = result.targetFunctionMatrix;\r\n    datas.afterTransform = result.afterFunctionMatrix;\r\n    datas.afterTransform2 = result.afterFunctionMatrix2;\r\n    datas.targetAllTransform = result.allFunctionMatrix;\r\n    if (targetFunction.functionName === matFunctionName) {\r\n        datas.afterFunctionTexts.splice(0, 1);\r\n        datas.isAppendTransform = false;\r\n    }\r\n    else if (length > nextIndex) {\r\n        datas.isAppendTransform = true;\r\n        originalDatas.nextTransformAppendedIndexes = __spreadArray(__spreadArray([], __read(nextTransformAppendedIndexes), false), [{\r\n                functionName: functionName,\r\n                index: nextIndex,\r\n                isAppend: true,\r\n            }], false);\r\n    }\r\n}\r\nfunction convertTransformFormat(datas, value, dist) {\r\n    return \"\".concat(datas.beforeFunctionTexts.join(\" \"), \" \").concat(datas.isAppendTransform ? dist : value, \" \").concat(datas.afterFunctionTexts.join(\" \"));\r\n}\r\nfunction getTransformDist(_a) {\r\n    var datas = _a.datas, distX = _a.distX, distY = _a.distY;\r\n    var _b = __read(getBeforeDragDist({ datas: datas, distX: distX, distY: distY }), 2), bx = _b[0], by = _b[1];\r\n    // B * [tx, ty] * A = [bx, by] * targetMatrix;\r\n    // [tx, ty] = B-1 * [bx, by] * targetMatrix * A-1 * [0, 0];\r\n    var res = getTransfromMatrix(datas, fromTranslation([bx, by], 4));\r\n    return calculate(res, convertPositionMatrix([0, 0, 0], 4), 4);\r\n}\r\nfunction getTransfromMatrix(datas, targetMatrix, isAfter) {\r\n    var beforeTransform = datas.beforeTransform, afterTransform = datas.afterTransform, beforeTransform2 = datas.beforeTransform2, afterTransform2 = datas.afterTransform2, targetAllTransform = datas.targetAllTransform;\r\n    // B * afterTargetMatrix * A = (targetMatrix * targetAllTransform)\r\n    // afterTargetMatrix = B-1 * targetMatrix * targetAllTransform * A-1\r\n    // nextTargetMatrix = (targetMatrix * targetAllTransform)\r\n    var nextTargetMatrix = isAfter\r\n        ? multiply(targetAllTransform, targetMatrix, 4)\r\n        : multiply(targetMatrix, targetAllTransform, 4);\r\n    // res1 = B-1 * nextTargetMatrix\r\n    var res1 = multiply(invert(isAfter ? beforeTransform2 : beforeTransform, 4), nextTargetMatrix, 4);\r\n    // res3 = res2 * A-1\r\n    var afterTargetMatrix = multiply(res1, invert(isAfter ? afterTransform2 : afterTransform, 4), 4);\r\n    return afterTargetMatrix;\r\n}\r\nfunction getBeforeDragDist(_a) {\r\n    var datas = _a.datas, distX = _a.distX, distY = _a.distY;\r\n    // TT = BT\r\n    var inverseBeforeMatrix = datas.inverseBeforeMatrix, is3d = datas.is3d, startDragBeforeDist = datas.startDragBeforeDist, absoluteOrigin = datas.absoluteOrigin;\r\n    var n = is3d ? 4 : 3;\r\n    // ABS_ORIGIN * [distX, distY] = BM * (ORIGIN + [tx, ty])\r\n    // BM -1 * ABS_ORIGIN * [distX, distY] - ORIGIN = [tx, ty]\r\n    return minus(calculate(inverseBeforeMatrix, plus(absoluteOrigin, [distX, distY]), n), startDragBeforeDist);\r\n}\r\nfunction getDragDist(_a, isBefore) {\r\n    var datas = _a.datas, distX = _a.distX, distY = _a.distY;\r\n    var inverseBeforeMatrix = datas.inverseBeforeMatrix, inverseMatrix = datas.inverseMatrix, is3d = datas.is3d, startDragBeforeDist = datas.startDragBeforeDist, startDragDist = datas.startDragDist, absoluteOrigin = datas.absoluteOrigin;\r\n    var n = is3d ? 4 : 3;\r\n    return minus(calculate(isBefore ? inverseBeforeMatrix : inverseMatrix, plus(absoluteOrigin, [distX, distY]), n), isBefore ? startDragBeforeDist : startDragDist);\r\n}\r\nfunction getInverseDragDist(_a, isBefore) {\r\n    var datas = _a.datas, distX = _a.distX, distY = _a.distY;\r\n    var beforeMatrix = datas.beforeMatrix, matrix = datas.matrix, is3d = datas.is3d, startDragBeforeDist = datas.startDragBeforeDist, startDragDist = datas.startDragDist, absoluteOrigin = datas.absoluteOrigin;\r\n    var n = is3d ? 4 : 3;\r\n    return minus(calculate(isBefore ? beforeMatrix : matrix, plus(isBefore ? startDragBeforeDist : startDragDist, [distX, distY]), n), absoluteOrigin);\r\n}\r\nfunction calculateTransformOrigin(transformOrigin, width, height, prevWidth, prevHeight, prevOrigin) {\r\n    if (prevWidth === void 0) { prevWidth = width; }\r\n    if (prevHeight === void 0) { prevHeight = height; }\r\n    if (prevOrigin === void 0) { prevOrigin = [0, 0]; }\r\n    if (!transformOrigin) {\r\n        return prevOrigin;\r\n    }\r\n    return transformOrigin.map(function (pos, i) {\r\n        var _a = splitUnit(pos), value = _a.value, unit = _a.unit;\r\n        var prevSize = (i ? prevHeight : prevWidth);\r\n        var size = (i ? height : width);\r\n        if (pos === \"%\" || isNaN(value)) {\r\n            // no value but %\r\n            var measureRatio = prevSize ? prevOrigin[i] / prevSize : 0;\r\n            return size * measureRatio;\r\n        }\r\n        else if (unit !== \"%\") {\r\n            return value;\r\n        }\r\n        return size * value / 100;\r\n    });\r\n}\r\nfunction getPosIndexesByDirection(direction) {\r\n    var indexes = [];\r\n    if (direction[1] >= 0) {\r\n        if (direction[0] >= 0) {\r\n            indexes.push(3);\r\n        }\r\n        if (direction[0] <= 0) {\r\n            indexes.push(2);\r\n        }\r\n    }\r\n    if (direction[1] <= 0) {\r\n        if (direction[0] >= 0) {\r\n            indexes.push(1);\r\n        }\r\n        if (direction[0] <= 0) {\r\n            indexes.push(0);\r\n        }\r\n    }\r\n    return indexes;\r\n}\r\nfunction getPosesByDirection(poses, direction) {\r\n    /*\r\n    [-1, -1](pos1)       [0, -1](pos1,pos2)       [1, -1](pos2)\r\n    [-1, 0](pos1, pos3)                           [1, 0](pos2, pos4)\r\n    [-1, 1](pos3)        [0, 1](pos3, pos4)       [1, 1](pos4)\r\n    */\r\n    return getPosIndexesByDirection(direction).map(function (index) { return poses[index]; });\r\n}\r\nfunction getPosBySingleDirection(poses, direction) {\r\n    var ratio = (direction + 1) / 2;\r\n    return [\r\n        dot(poses[0][0], poses[1][0], ratio, 1 - ratio),\r\n        dot(poses[0][1], poses[1][1], ratio, 1 - ratio),\r\n    ];\r\n}\r\nfunction getPosByDirection(poses, direction) {\r\n    var top = getPosBySingleDirection([poses[0], poses[1]], direction[0]);\r\n    var bottom = getPosBySingleDirection([poses[2], poses[3]], direction[0]);\r\n    return getPosBySingleDirection([top, bottom], direction[1]);\r\n}\r\nfunction getDist(startPos, matrix, width, height, n, fixedDirection) {\r\n    var poses = calculatePoses(matrix, width, height, n);\r\n    var fixedPos = getPosByDirection(poses, fixedDirection);\r\n    var distX = startPos[0] - fixedPos[0];\r\n    var distY = startPos[1] - fixedPos[1];\r\n    return [distX, distY];\r\n}\r\nfunction getNextMatrix(offsetMatrix, targetMatrix, origin, n) {\r\n    return multiply(offsetMatrix, getAbsoluteMatrix(targetMatrix, n, origin), n);\r\n}\r\nfunction getNextTransformMatrix(state, datas, transform, isAllTransform) {\r\n    var transformOrigin = state.transformOrigin, offsetMatrix = state.offsetMatrix, is3d = state.is3d;\r\n    var n = is3d ? 4 : 3;\r\n    var targetTransform;\r\n    if (isString(transform)) {\r\n        var beforeTransform = datas.beforeTransform, afterTransform = datas.afterTransform;\r\n        if (isAllTransform) {\r\n            targetTransform = convertDimension(parseMat(transform), 4, n);\r\n        }\r\n        else {\r\n            targetTransform = convertDimension(multiply(multiply(beforeTransform, parseMat([transform]), 4), afterTransform, 4), 4, n);\r\n        }\r\n    }\r\n    else {\r\n        targetTransform = transform;\r\n    }\r\n    return getNextMatrix(offsetMatrix, targetTransform, transformOrigin, n);\r\n}\r\nfunction scaleMatrix(state, scale) {\r\n    var transformOrigin = state.transformOrigin, offsetMatrix = state.offsetMatrix, is3d = state.is3d, targetMatrix = state.targetMatrix, targetAllTransform = state.targetAllTransform;\r\n    var n = is3d ? 4 : 3;\r\n    return getNextMatrix(offsetMatrix, multiply(targetAllTransform || targetMatrix, createScaleMatrix(scale, n), n), transformOrigin, n);\r\n}\r\nfunction fillTransformStartEvent(moveable, e) {\r\n    var originalDatas = getBeforeRenderableDatas(e);\r\n    return {\r\n        setTransform: function (transform, index) {\r\n            if (index === void 0) { index = -1; }\r\n            originalDatas.startTransforms = isArray(transform) ? transform : splitSpace(transform);\r\n            setTransformIndex(moveable, e, index);\r\n        },\r\n        setTransformIndex: function (index) {\r\n            setTransformIndex(moveable, e, index);\r\n        },\r\n    };\r\n}\r\nfunction setDefaultTransformIndex(moveable, e, property) {\r\n    var originalDatas = getBeforeRenderableDatas(e);\r\n    var startTransforms = originalDatas.startTransforms;\r\n    setTransformIndex(moveable, e, findIndex(startTransforms, function (func) { return func.indexOf(\"\".concat(property, \"(\")) === 0; }));\r\n}\r\nfunction setTransformIndex(moveable, e, index) {\r\n    var originalDatas = getBeforeRenderableDatas(e);\r\n    var datas = e.datas;\r\n    datas.transformIndex = index;\r\n    if (index === -1) {\r\n        return;\r\n    }\r\n    var transform = originalDatas.startTransforms[index];\r\n    if (!transform) {\r\n        return;\r\n    }\r\n    var state = moveable.state;\r\n    var info = parse([transform], {\r\n        \"x%\": function (v) { return v / 100 * state.offsetWidth; },\r\n        \"y%\": function (v) { return v / 100 * state.offsetHeight; },\r\n    });\r\n    datas.startValue = info[0].functionValue;\r\n}\r\nfunction fillOriginalTransform(e, transform) {\r\n    var originalDatas = getBeforeRenderableDatas(e);\r\n    originalDatas.nextTransforms = splitSpace(transform);\r\n    // originalDatas.nextTargetMatrix = parseMat(transform);\r\n}\r\nfunction getBeforeRenderableDatas(e) {\r\n    return e.originalDatas.beforeRenderable;\r\n}\r\nfunction getNextTransforms(e) {\r\n    var originalDatas = e.originalDatas.beforeRenderable;\r\n    return originalDatas.nextTransforms;\r\n}\r\nfunction getNextTransformText(e) {\r\n    return (getNextTransforms(e) || []).join(\" \");\r\n}\r\nfunction getNextStyle(e) {\r\n    return getBeforeRenderableDatas(e).nextStyle;\r\n}\r\nfunction fillTransformEvent(moveable, nextTransform, delta, isPinch, e) {\r\n    fillOriginalTransform(e, nextTransform);\r\n    var drag = Draggable.drag(moveable, setCustomDrag(e, moveable.state, delta, isPinch, false));\r\n    var afterTransform = drag ? drag.transform : nextTransform;\r\n    return __assign(__assign({ transform: nextTransform, drag: drag }, fillCSSObject({\r\n        transform: afterTransform,\r\n    }, e)), { afterTransform: afterTransform });\r\n}\r\nfunction getTranslateFixedPosition(moveable, transform, fixedDirection, fixedOffset, datas, isAllTransform) {\r\n    var nextMatrix = getNextTransformMatrix(moveable.state, datas, transform, isAllTransform);\r\n    var nextFixedPosition = getDirectionOffset(moveable, fixedDirection, fixedOffset, nextMatrix);\r\n    return nextFixedPosition;\r\n}\r\nfunction getTranslateDist(moveable, transform, fixedDirection, fixedPosition, fixedOffset, datas, isAllTransform) {\r\n    var nextFixedPosition = getTranslateFixedPosition(moveable, transform, fixedDirection, fixedOffset, datas, isAllTransform);\r\n    var state = moveable.state;\r\n    var left = state.left, top = state.top;\r\n    var groupable = moveable.props.groupable;\r\n    var groupLeft = groupable ? left : 0;\r\n    var groupTop = groupable ? top : 0;\r\n    var dist = minus(fixedPosition, nextFixedPosition);\r\n    return minus(dist, [groupLeft, groupTop]);\r\n}\r\nfunction getScaleDist(moveable, transform, fixedDirection, fixedPosition, fixedOffset, datas, isAllTransform) {\r\n    var dist = getTranslateDist(moveable, transform, fixedDirection, fixedPosition, fixedOffset, datas, isAllTransform);\r\n    return dist;\r\n}\r\nfunction getDirectionByPos(pos, width, height) {\r\n    return [\r\n        width ? -1 + pos[0] / (width / 2) : 0,\r\n        height ? -1 + pos[1] / (height / 2) : 0,\r\n    ];\r\n}\r\nfunction getDirectionOffset(moveable, fixedDirection, fixedOffset, nextMatrix) {\r\n    if (nextMatrix === void 0) { nextMatrix = moveable.state.allMatrix; }\r\n    var _a = moveable.state, width = _a.width, height = _a.height, is3d = _a.is3d;\r\n    var n = is3d ? 4 : 3;\r\n    var fixedOffsetPosition = [\r\n        width / 2 * (1 + fixedDirection[0]) + fixedOffset[0],\r\n        height / 2 * (1 + fixedDirection[1]) + fixedOffset[1],\r\n    ];\r\n    return calculatePosition(nextMatrix, fixedOffsetPosition, n);\r\n}\r\nfunction getRotateDist(moveable, rotateDist, datas) {\r\n    var fixedDirection = datas.fixedDirection;\r\n    var fixedPosition = datas.fixedPosition;\r\n    var fixedOffset = datas.fixedOffset;\r\n    return getTranslateDist(moveable, \"rotate(\".concat(rotateDist, \"deg)\"), fixedDirection, fixedPosition, fixedOffset, datas);\r\n}\r\nfunction getResizeDist(moveable, width, height, fixedPosition, transformOrigin, datas) {\r\n    var groupable = moveable.props.groupable;\r\n    var state = moveable.state;\r\n    var prevOrigin = state.transformOrigin, offsetMatrix = state.offsetMatrix, is3d = state.is3d, prevWidth = state.width, prevHeight = state.height, left = state.left, top = state.top;\r\n    var fixedDirection = datas.fixedDirection;\r\n    var targetMatrix = datas.nextTargetMatrix || state.targetMatrix;\r\n    var n = is3d ? 4 : 3;\r\n    var nextOrigin = calculateTransformOrigin(transformOrigin, width, height, prevWidth, prevHeight, prevOrigin);\r\n    var groupLeft = groupable ? left : 0;\r\n    var groupTop = groupable ? top : 0;\r\n    var nextMatrix = getNextMatrix(offsetMatrix, targetMatrix, nextOrigin, n);\r\n    var dist = getDist(fixedPosition, nextMatrix, width, height, n, fixedDirection);\r\n    return minus(dist, [groupLeft, groupTop]);\r\n}\r\nfunction getAbsolutePosition(moveable, direction) {\r\n    return getPosByDirection(getAbsolutePosesByState(moveable.state), direction);\r\n}\n\nfunction getGestoData(moveable, ableName) {\r\n    var targetGesto = moveable.targetGesto;\r\n    var controlGesto = moveable.controlGesto;\r\n    var data;\r\n    if (targetGesto === null || targetGesto === void 0 ? void 0 : targetGesto.isFlag()) {\r\n        data = targetGesto.getEventData()[ableName];\r\n    }\r\n    if (!data && (controlGesto === null || controlGesto === void 0 ? void 0 : controlGesto.isFlag())) {\r\n        data = controlGesto.getEventData()[ableName];\r\n    }\r\n    return data || {};\r\n}\n\nfunction getShadowRoot(parentElement) {\r\n    if (parentElement && parentElement.getRootNode) {\r\n        var rootNode = parentElement.getRootNode();\r\n        if (rootNode.nodeType === 11) {\r\n            return rootNode;\r\n        }\r\n    }\r\n    return;\r\n}\r\nfunction getIndividualTransforms(getStyle) {\r\n    var scale = getStyle(\"scale\");\r\n    var rotate = getStyle(\"rotate\");\r\n    var translate = getStyle(\"translate\");\r\n    var individualTransforms = [];\r\n    if (translate && translate !== \"0px\" && translate !== \"none\") {\r\n        individualTransforms.push(\"translate(\".concat(translate.split(/\\s+/).join(\",\"), \")\"));\r\n    }\r\n    if (rotate && rotate !== \"1\" && rotate !== \"none\") {\r\n        individualTransforms.push(\"rotate(\".concat(rotate, \")\"));\r\n    }\r\n    if (scale && scale !== \"1\" && scale !== \"none\") {\r\n        individualTransforms.push(\"scale(\".concat(scale.split(/\\s+/).join(\",\"), \")\"));\r\n    }\r\n    return individualTransforms;\r\n}\r\nfunction getMatrixStackInfo(target, container, checkContainer) {\r\n    var el = target;\r\n    var matrixes = [];\r\n    var documentElement = getDocumentElement(target) || getDocumentBody(target);\r\n    var requestEnd = !checkContainer && target === container || target === documentElement;\r\n    var isEnd = requestEnd;\r\n    var is3d = false;\r\n    var n = 3;\r\n    var transformOrigin;\r\n    var targetTransformOrigin;\r\n    var targetMatrix;\r\n    var hasFixed = false;\r\n    var offsetContainer = getOffsetInfo(container, container, true).offsetParent;\r\n    var zoom = 1;\r\n    while (el && !isEnd) {\r\n        isEnd = requestEnd;\r\n        var getStyle = getCachedStyle(el);\r\n        var position = getStyle(\"position\");\r\n        var transform = getElementTransform(el);\r\n        var isFixed = position === \"fixed\";\r\n        var individualTransforms = getIndividualTransforms(getStyle);\r\n        var matrix = convertCSStoMatrix(getTransformMatrix(transform));\r\n        var offsetParent = void 0;\r\n        var isOffsetEnd = false;\r\n        var isStatic = false;\r\n        var parentClientLeft = 0;\r\n        var parentClientTop = 0;\r\n        var fixedClientLeft = 0;\r\n        var fixedClientTop = 0;\r\n        var fixedInfo = {\r\n            hasTransform: false,\r\n            fixedContainer: null,\r\n        };\r\n        if (isFixed) {\r\n            hasFixed = true;\r\n            fixedInfo = getPositionFixedInfo(el);\r\n            offsetContainer = fixedInfo.fixedContainer;\r\n        }\r\n        // convert 3 to 4\r\n        var length_1 = matrix.length;\r\n        if (!is3d && (length_1 === 16 || individualTransforms.length)) {\r\n            is3d = true;\r\n            n = 4;\r\n            convert3DMatrixes(matrixes);\r\n            if (targetMatrix) {\r\n                targetMatrix = convertDimension(targetMatrix, 3, 4);\r\n            }\r\n        }\r\n        if (is3d && length_1 === 9) {\r\n            matrix = convertDimension(matrix, 3, 4);\r\n        }\r\n        var _a = getOffsetPosInfo(el, target), tagName = _a.tagName, hasOffset = _a.hasOffset, isSVG = _a.isSVG, origin_1 = _a.origin, targetOrigin = _a.targetOrigin, offsetPos = _a.offset;\r\n        var _b = __read(offsetPos, 2), offsetLeft = _b[0], offsetTop = _b[1];\r\n        // no target with svg\r\n        if (tagName === \"svg\" && !el.ownerSVGElement && targetMatrix) {\r\n            // scale matrix for svg's SVGElements.\r\n            matrixes.push({\r\n                type: \"target\",\r\n                target: el,\r\n                matrix: getSVGMatrix(el, n),\r\n            });\r\n            matrixes.push({\r\n                type: \"offset\",\r\n                target: el,\r\n                matrix: createIdentityMatrix(n),\r\n            });\r\n        }\r\n        var targetZoom = parseFloat(getStyle(\"zoom\")) || 1;\r\n        if (isFixed) {\r\n            offsetParent = fixedInfo.fixedContainer;\r\n            isOffsetEnd = true;\r\n        }\r\n        else {\r\n            var offsetInfo = getOffsetInfo(el, container, false, true, getStyle);\r\n            var offsetZoom = offsetInfo.offsetZoom;\r\n            offsetParent = offsetInfo.offsetParent;\r\n            isOffsetEnd = offsetInfo.isEnd;\r\n            isStatic = offsetInfo.isStatic;\r\n            zoom *= offsetZoom;\r\n            if ((offsetInfo.isCustomElement || offsetZoom !== 1) && isStatic) {\r\n                offsetLeft -= offsetParent.offsetLeft;\r\n                offsetTop -= offsetParent.offsetTop;\r\n            }\r\n            else if (IS_FIREFOX || IS_CHROMIUM109) {\r\n                var parentSlotElement = offsetInfo.parentSlotElement;\r\n                if (parentSlotElement) {\r\n                    var customOffsetParent = offsetParent;\r\n                    var customOffsetLeft = 0;\r\n                    var customOffsetTop = 0;\r\n                    while (customOffsetParent) {\r\n                        if (!getShadowRoot(customOffsetParent)) {\r\n                            break;\r\n                        }\r\n                        customOffsetLeft += customOffsetParent.offsetLeft;\r\n                        customOffsetTop += customOffsetParent.offsetTop;\r\n                        customOffsetParent = customOffsetParent.offsetParent;\r\n                    }\r\n                    offsetLeft -= customOffsetLeft;\r\n                    offsetTop -= customOffsetTop;\r\n                }\r\n            }\r\n        }\r\n        if (IS_WEBKIT && !IS_SAFARI_ABOVE15\r\n            && hasOffset && !isSVG && isStatic\r\n            && (position === \"relative\" || position === \"static\")) {\r\n            offsetLeft -= offsetParent.offsetLeft;\r\n            offsetTop -= offsetParent.offsetTop;\r\n            requestEnd = requestEnd || isOffsetEnd;\r\n        }\r\n        if (isFixed) {\r\n            if (hasOffset && fixedInfo.hasTransform) {\r\n                // border\r\n                fixedClientLeft = offsetParent.clientLeft;\r\n                fixedClientTop = offsetParent.clientTop;\r\n            }\r\n        }\r\n        else {\r\n            if (hasOffset && offsetContainer !== offsetParent) {\r\n                // border\r\n                parentClientLeft = offsetParent.clientLeft;\r\n                parentClientTop = offsetParent.clientTop;\r\n            }\r\n            if (hasOffset && offsetParent === documentElement) {\r\n                var margin = getBodyOffset(el, false);\r\n                offsetLeft += margin[0];\r\n                offsetTop += margin[1];\r\n            }\r\n        }\r\n        matrixes.push({\r\n            type: \"target\",\r\n            target: el,\r\n            matrix: getAbsoluteMatrix(matrix, n, origin_1),\r\n        });\r\n        if (individualTransforms.length) {\r\n            matrixes.push({\r\n                type: \"offset\",\r\n                target: el,\r\n                matrix: createIdentityMatrix(n),\r\n            });\r\n            matrixes.push({\r\n                type: \"target\",\r\n                target: el,\r\n                matrix: getAbsoluteMatrix(parseMat(individualTransforms), n, origin_1),\r\n            });\r\n        }\r\n        if (hasOffset) {\r\n            var isElementTarget = el === target;\r\n            var scrollLeft = isElementTarget ? 0 : el.scrollLeft;\r\n            var scrollTop = isElementTarget ? 0 : el.scrollTop;\r\n            matrixes.push({\r\n                type: \"offset\",\r\n                target: el,\r\n                matrix: createOriginMatrix([\r\n                    offsetLeft - scrollLeft + parentClientLeft - fixedClientLeft,\r\n                    offsetTop - scrollTop + parentClientTop - fixedClientTop,\r\n                ], n),\r\n            });\r\n        }\r\n        else {\r\n            // svg\r\n            matrixes.push({\r\n                type: \"offset\",\r\n                target: el,\r\n                origin: origin_1,\r\n            });\r\n        }\r\n        // transform   zoom  (0, 0)   matrix .\r\n        if (targetZoom !== 1) {\r\n            matrixes.push({\r\n                type: \"zoom\",\r\n                target: el,\r\n                matrix: getAbsoluteMatrix(createScaleMatrix([targetZoom, targetZoom], n), n, [0, 0]),\r\n            });\r\n        }\r\n        if (!targetMatrix) {\r\n            targetMatrix = matrix;\r\n        }\r\n        if (!transformOrigin) {\r\n            transformOrigin = origin_1;\r\n        }\r\n        if (!targetTransformOrigin) {\r\n            targetTransformOrigin = targetOrigin;\r\n        }\r\n        if (isEnd || isFixed) {\r\n            break;\r\n        }\r\n        else {\r\n            el = offsetParent;\r\n            requestEnd = isOffsetEnd;\r\n        }\r\n        if (!checkContainer || el === documentElement) {\r\n            isEnd = requestEnd;\r\n        }\r\n    }\r\n    if (!targetMatrix) {\r\n        targetMatrix = createIdentityMatrix(n);\r\n    }\r\n    if (!transformOrigin) {\r\n        transformOrigin = [0, 0];\r\n    }\r\n    if (!targetTransformOrigin) {\r\n        targetTransformOrigin = [0, 0];\r\n    }\r\n    return {\r\n        zoom: zoom,\r\n        offsetContainer: offsetContainer,\r\n        matrixes: matrixes,\r\n        targetMatrix: targetMatrix,\r\n        transformOrigin: transformOrigin,\r\n        targetOrigin: targetTransformOrigin,\r\n        is3d: is3d,\r\n        hasFixed: hasFixed,\r\n    };\r\n}\n\nvar cacheStyleMap = null;\r\nvar clientRectStyleMap = null;\r\nvar matrixContainerInfos = null;\r\nfunction setStoreCache(useCache) {\r\n    if (useCache) {\r\n        if (window.Map) {\r\n            cacheStyleMap = new Map();\r\n            clientRectStyleMap = new Map();\r\n        }\r\n        matrixContainerInfos = [];\r\n    }\r\n    else {\r\n        cacheStyleMap = null;\r\n        matrixContainerInfos = null;\r\n        clientRectStyleMap = null;\r\n    }\r\n}\r\nfunction getCachedClientRect(el) {\r\n    var clientRect = clientRectStyleMap === null || clientRectStyleMap === void 0 ? void 0 : clientRectStyleMap.get(el);\r\n    if (clientRect) {\r\n        return clientRect;\r\n    }\r\n    var nextClientRect = getClientRect(el, true);\r\n    if (clientRectStyleMap) {\r\n        clientRectStyleMap.set(el, nextClientRect);\r\n    }\r\n    return nextClientRect;\r\n}\r\nfunction getCachedMatrixContainerInfo(target, container) {\r\n    if (matrixContainerInfos) {\r\n        var result_1 = find(matrixContainerInfos, function (info) { return info[0][0] == target && info[0][1] == container; });\r\n        if (result_1) {\r\n            return result_1[1];\r\n        }\r\n    }\r\n    var result = getMatrixStackInfo(target, container, true);\r\n    if (matrixContainerInfos) {\r\n        matrixContainerInfos.push([[target, container], result]);\r\n    }\r\n    return result;\r\n}\r\nfunction getCachedStyle(element) {\r\n    var cache = cacheStyleMap === null || cacheStyleMap === void 0 ? void 0 : cacheStyleMap.get(element);\r\n    if (!cache) {\r\n        var nextStyle_1 = getWindow(element).getComputedStyle(element);\r\n        if (!cacheStyleMap) {\r\n            return function (property) {\r\n                return nextStyle_1[property];\r\n            };\r\n        }\r\n        cache = {\r\n            style: nextStyle_1,\r\n            cached: {},\r\n        };\r\n        cacheStyleMap.set(element, cache);\r\n    }\r\n    var cached = cache.cached;\r\n    var style = cache.style;\r\n    return function (property) {\r\n        if (!(property in cached)) {\r\n            cached[property] = style[property];\r\n        }\r\n        return cached[property];\r\n    };\r\n}\n\nfunction fillChildEvents(moveable, name, e) {\r\n    var datas = e.originalDatas;\r\n    datas.groupable = datas.groupable || {};\r\n    var groupableDatas = datas.groupable;\r\n    groupableDatas.childDatas = groupableDatas.childDatas || [];\r\n    var childDatas = groupableDatas.childDatas;\r\n    return moveable.moveables.map(function (_, i) {\r\n        childDatas[i] = childDatas[i] || {};\r\n        childDatas[i][name] = childDatas[i][name] || {};\r\n        return __assign(__assign({}, e), { isRequestChild: true, datas: childDatas[i][name], originalDatas: childDatas[i] });\r\n    });\r\n}\r\nfunction triggerChildGesto(moveable, able, type, delta, e, isConvert, ableName) {\r\n    var isStart = !!type.match(/Start$/g);\r\n    var isEnd = !!type.match(/End$/g);\r\n    var isPinch = e.isPinch;\r\n    var datas = e.datas;\r\n    var events = fillChildEvents(moveable, able.name, e);\r\n    var moveables = moveable.moveables;\r\n    var childEvents = [];\r\n    var eventParams = events.map(function (ev, i) {\r\n        var childMoveable = moveables[i];\r\n        var state = childMoveable.state;\r\n        var gestos = state.gestos;\r\n        var childEvent = ev;\r\n        if (isStart) {\r\n            childEvent = new CustomGesto(ableName).dragStart(delta, ev);\r\n            childEvents.push(childEvent);\r\n        }\r\n        else {\r\n            if (!gestos[ableName]) {\r\n                gestos[ableName] = datas.childGestos[i];\r\n            }\r\n            if (!gestos[ableName]) {\r\n                return;\r\n            }\r\n            childEvent = setCustomDrag(ev, state, delta, isPinch, isConvert, ableName);\r\n            childEvents.push(childEvent);\r\n        }\r\n        var result = able[type](childMoveable, __assign(__assign({}, childEvent), { parentFlag: true }));\r\n        if (isEnd) {\r\n            gestos[ableName] = null;\r\n        }\r\n        return result;\r\n    });\r\n    if (isStart) {\r\n        datas.childGestos = moveables.map(function (child) { return child.state.gestos[ableName]; });\r\n    }\r\n    return {\r\n        eventParams: eventParams,\r\n        childEvents: childEvents,\r\n    };\r\n}\r\nfunction triggerChildAbles(moveable, able, type, e, eachEvent, callback) {\r\n    if (eachEvent === void 0) { eachEvent = function (_, ev) { return ev; }; }\r\n    var isEnd = !!type.match(/End$/g);\r\n    var events = fillChildEvents(moveable, able.name, e);\r\n    var moveables = moveable.moveables;\r\n    var childs = events.map(function (ev, i) {\r\n        var childMoveable = moveables[i];\r\n        var childEvent = ev;\r\n        childEvent = eachEvent(childMoveable, ev);\r\n        var result = able[type](childMoveable, __assign(__assign({}, childEvent), { parentFlag: true }));\r\n        result && callback && callback(childMoveable, ev, result, i);\r\n        if (isEnd) {\r\n            childMoveable.state.gestos = {};\r\n        }\r\n        return result;\r\n    });\r\n    return childs;\r\n}\r\nfunction startChildDist(moveable, child, parentDatas, childEvent) {\r\n    var fixedDirection = parentDatas.fixedDirection;\r\n    var fixedPosition = parentDatas.fixedPosition;\r\n    var startPositions = childEvent.datas.startPositions || getAbsolutePosesByState(child.state);\r\n    var pos = getPosByDirection(startPositions, fixedDirection);\r\n    var _a = __read(calculate(createRotateMatrix(-moveable.rotation / 180 * Math.PI, 3), [pos[0] - fixedPosition[0], pos[1] - fixedPosition[1], 1], 3), 2), originalX = _a[0], originalY = _a[1];\r\n    childEvent.datas.originalX = originalX;\r\n    childEvent.datas.originalY = originalY;\r\n    return childEvent;\r\n}\n\nfunction renderDirectionControlsByInfos(moveable, ableName, renderDirections, React) {\r\n    var _a = moveable.getState(), renderPoses = _a.renderPoses, rotationRad = _a.rotation, direction = _a.direction;\r\n    var zoom = getProps(moveable.props, ableName).zoom;\r\n    var degRotation = absDegree(rotationRad / Math.PI * 180);\r\n    var directionMap = {};\r\n    var renderState = moveable.renderState;\r\n    if (!renderState.renderDirectionMap) {\r\n        renderState.renderDirectionMap = {};\r\n    }\r\n    var renderDirectionMap = renderState.renderDirectionMap;\r\n    renderDirections.forEach(function (_a) {\r\n        var dir = _a.dir;\r\n        directionMap[dir] = true;\r\n    });\r\n    var directionSign = sign(direction);\r\n    return renderDirections.map(function (_a) {\r\n        var data = _a.data, classNames = _a.classNames, dir = _a.dir;\r\n        var indexes = DIRECTION_INDEXES[dir];\r\n        if (!indexes || !directionMap[dir]) {\r\n            return null;\r\n        }\r\n        renderDirectionMap[dir] = true;\r\n        var directionRotation = (throttle(degRotation, 15) + directionSign * DIRECTION_ROTATIONS[dir] + 720) % 180;\r\n        var dataAttrs = {};\r\n        getKeys(data).forEach(function (name) {\r\n            dataAttrs[\"data-\".concat(name)] = data[name];\r\n        });\r\n        return (React.createElement(\"div\", __assign({ className: prefix.apply(void 0, __spreadArray([\"control\", \"direction\", dir, ableName], __read(classNames), false)), \"data-rotation\": directionRotation, \"data-direction\": dir }, dataAttrs, { key: \"direction-\".concat(dir), style: getControlTransform.apply(void 0, __spreadArray([rotationRad, zoom], __read(indexes.map(function (index) { return renderPoses[index]; })), false)) })));\r\n    });\r\n}\r\nfunction renderDirectionControls(moveable, defaultDirections, ableName, React) {\r\n    var _a = getProps(moveable.props, ableName), _b = _a.renderDirections, directions = _b === void 0 ? defaultDirections : _b, displayAroundControls = _a.displayAroundControls;\r\n    if (!directions) {\r\n        return [];\r\n    }\r\n    var renderDirections = directions === true ? DIRECTIONS : directions;\r\n    return __spreadArray(__spreadArray([], __read((displayAroundControls ? renderAroundControls(moveable, React, ableName, renderDirections) : [])), false), __read(renderDirectionControlsByInfos(moveable, ableName, renderDirections.map(function (dir) {\r\n        return {\r\n            data: {},\r\n            classNames: [],\r\n            dir: dir,\r\n        };\r\n    }), React)), false);\r\n}\r\nfunction renderLine(React, direction, pos1, pos2, zoom, key) {\r\n    var classNames = [];\r\n    for (var _i = 6; _i < arguments.length; _i++) {\r\n        classNames[_i - 6] = arguments[_i];\r\n    }\r\n    var rad = getRad(pos1, pos2);\r\n    var rotation = direction ? (throttle(rad / Math.PI * 180, 15)) % 180 : -1;\r\n    return React.createElement(\"div\", { key: \"line-\".concat(key), className: prefix.apply(void 0, __spreadArray([\"line\", \"direction\", direction ? \"edge\" : \"\", direction], __read(classNames), false)), \"data-rotation\": rotation, \"data-line-key\": key, \"data-direction\": direction, style: getLineStyle(pos1, pos2, zoom, rad) });\r\n}\r\nfunction renderEdgeLines(React, ableName, edge, poses, zoom) {\r\n    var directions = edge === true ? DIRECTIONS4 : edge;\r\n    return directions.map(function (direction, i) {\r\n        var _a = __read(DIRECTION_INDEXES[direction], 2), index1 = _a[0], index2 = _a[1];\r\n        if (index2 == null) {\r\n            return;\r\n        }\r\n        return renderLine(React, direction, poses[index1], poses[index2], zoom, \"\".concat(ableName, \"Edge\").concat(i), ableName);\r\n    }).filter(Boolean);\r\n}\r\nfunction getRenderDirections(ableName) {\r\n    return function (moveable, React) {\r\n        var edge = getProps(moveable.props, ableName).edge;\r\n        if (edge && (edge === true || edge.length)) {\r\n            return __spreadArray(__spreadArray([], __read(renderEdgeLines(React, ableName, edge, moveable.getState().renderPoses, moveable.props.zoom)), false), __read(renderDiagonalDirections(moveable, ableName, React)), false);\r\n        }\r\n        return renderAllDirections(moveable, ableName, React);\r\n    };\r\n}\r\nfunction renderAllDirections(moveable, ableName, React) {\r\n    return renderDirectionControls(moveable, DIRECTIONS, ableName, React);\r\n}\r\nfunction renderDiagonalDirections(moveable, ableName, React) {\r\n    return renderDirectionControls(moveable, [\"nw\", \"ne\", \"sw\", \"se\"], ableName, React);\r\n}\r\nfunction renderAroundControls(moveable, React, ableName, renderDirections) {\r\n    var renderState = moveable.renderState;\r\n    if (!renderState.renderDirectionMap) {\r\n        renderState.renderDirectionMap = {};\r\n    }\r\n    var _a = moveable.getState(), renderPoses = _a.renderPoses, rotationRad = _a.rotation, direction = _a.direction;\r\n    var renderDirectionMap = renderState.renderDirectionMap;\r\n    var zoom = moveable.props.zoom;\r\n    var directionSign = sign(direction);\r\n    var degRotation = rotationRad / Math.PI * 180;\r\n    return (renderDirections || getKeys(renderDirectionMap)).map(function (dir) {\r\n        var indexes = DIRECTION_INDEXES[dir];\r\n        if (!indexes) {\r\n            return null;\r\n        }\r\n        var directionRotation = (throttle(degRotation, 15) + directionSign * DIRECTION_ROTATIONS[dir] + 720) % 180;\r\n        var classNames = [\"around-control\"];\r\n        if (ableName) {\r\n            classNames.push(\"direction\", ableName);\r\n        }\r\n        return (React.createElement(\"div\", { className: prefix.apply(void 0, __spreadArray([], __read(classNames), false)), \"data-rotation\": directionRotation, \"data-direction\": dir, key: \"direction-around-\".concat(dir), style: getControlTransform.apply(void 0, __spreadArray([rotationRad, zoom], __read(indexes.map(function (index) { return renderPoses[index]; })), false)) }));\r\n    });\r\n}\n\nfunction checkBoundPoses(bounds, verticalPoses, horizontalPoses) {\r\n    var _a = bounds || {}, _b = _a.position, position = _b === void 0 ? \"client\" : _b, _c = _a.left, left = _c === void 0 ? -Infinity : _c, _d = _a.top, top = _d === void 0 ? -Infinity : _d, _e = _a.right, right = _e === void 0 ? Infinity : _e, _f = _a.bottom, bottom = _f === void 0 ? Infinity : _f;\r\n    var nextBounds = {\r\n        position: position,\r\n        left: left,\r\n        top: top,\r\n        right: right,\r\n        bottom: bottom,\r\n    };\r\n    return {\r\n        vertical: checkBounds(nextBounds, verticalPoses, true),\r\n        horizontal: checkBounds(nextBounds, horizontalPoses, false),\r\n    };\r\n}\r\nfunction getBounds(moveable, externalBounds) {\r\n    var _a = moveable.state, _b = _a.containerClientRect, containerHeight = _b.clientHeight, containerWidth = _b.clientWidth, clientLeft = _b.clientLeft, clientTop = _b.clientTop, _c = _a.snapOffset, snapOffsetLeft = _c.left, snapOffsetTop = _c.top, snapOffsetRight = _c.right, snapOffsetBottom = _c.bottom;\r\n    var bounds = externalBounds || moveable.props.bounds || {};\r\n    var position = bounds.position || \"client\";\r\n    var isCSS = position === \"css\";\r\n    var _d = bounds.left, left = _d === void 0 ? -Infinity : _d, _e = bounds.top, top = _e === void 0 ? -Infinity : _e;\r\n    var _f = bounds.right, right = _f === void 0 ? isCSS ? -Infinity : Infinity : _f, _g = bounds.bottom, bottom = _g === void 0 ? isCSS ? -Infinity : Infinity : _g;\r\n    if (isCSS) {\r\n        right = containerWidth + snapOffsetRight - snapOffsetLeft - right;\r\n        bottom = containerHeight + snapOffsetBottom - snapOffsetTop - bottom;\r\n    }\r\n    return {\r\n        left: left + snapOffsetLeft - clientLeft,\r\n        right: right + snapOffsetLeft - clientLeft,\r\n        top: top + snapOffsetTop - clientTop,\r\n        bottom: bottom + snapOffsetTop - clientTop,\r\n    };\r\n}\r\nfunction checkBoundKeepRatio(moveable, startPos, endPos) {\r\n    var _a = getBounds(moveable), left = _a.left, top = _a.top, right = _a.right, bottom = _a.bottom;\r\n    var _b = __read(endPos, 2), endX = _b[0], endY = _b[1];\r\n    var _c = __read(minus(endPos, startPos), 2), dx = _c[0], dy = _c[1];\r\n    if (abs(dx) < TINY_NUM) {\r\n        dx = 0;\r\n    }\r\n    if (abs(dy) < TINY_NUM) {\r\n        dy = 0;\r\n    }\r\n    var isBottom = dy > 0;\r\n    var isRight = dx > 0;\r\n    var verticalInfo = {\r\n        isBound: false,\r\n        offset: 0,\r\n        pos: 0,\r\n    };\r\n    var horizontalInfo = {\r\n        isBound: false,\r\n        offset: 0,\r\n        pos: 0,\r\n    };\r\n    if (dx === 0 && dy === 0) {\r\n        return {\r\n            vertical: verticalInfo,\r\n            horizontal: horizontalInfo,\r\n        };\r\n    }\r\n    else if (dx === 0) {\r\n        if (isBottom) {\r\n            if (bottom < endY) {\r\n                horizontalInfo.pos = bottom;\r\n                horizontalInfo.offset = endY - bottom;\r\n            }\r\n        }\r\n        else {\r\n            if (top > endY) {\r\n                horizontalInfo.pos = top;\r\n                horizontalInfo.offset = endY - top;\r\n            }\r\n        }\r\n    }\r\n    else if (dy === 0) {\r\n        if (isRight) {\r\n            if (right < endX) {\r\n                verticalInfo.pos = right;\r\n                verticalInfo.offset = endX - right;\r\n            }\r\n        }\r\n        else {\r\n            if (left > endX) {\r\n                verticalInfo.pos = left;\r\n                verticalInfo.offset = endX - left;\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        // y - y1 = a * (x - x1)\r\n        var a = dy / dx;\r\n        var b = endPos[1] - a * endX;\r\n        var y = 0;\r\n        var x = 0;\r\n        var isBound = false;\r\n        if (isRight && right <= endX) {\r\n            y = a * right + b;\r\n            x = right;\r\n            isBound = true;\r\n        }\r\n        else if (!isRight && endX <= left) {\r\n            y = a * left + b;\r\n            x = left;\r\n            isBound = true;\r\n        }\r\n        if (isBound) {\r\n            if (y < top || y > bottom) {\r\n                isBound = false;\r\n            }\r\n        }\r\n        if (!isBound) {\r\n            if (isBottom && bottom <= endY) {\r\n                y = bottom;\r\n                x = (y - b) / a;\r\n                isBound = true;\r\n            }\r\n            else if (!isBottom && endY <= top) {\r\n                y = top;\r\n                x = (y - b) / a;\r\n                isBound = true;\r\n            }\r\n        }\r\n        if (isBound) {\r\n            verticalInfo.isBound = true;\r\n            verticalInfo.pos = x;\r\n            verticalInfo.offset = endX - x;\r\n            horizontalInfo.isBound = true;\r\n            horizontalInfo.pos = y;\r\n            horizontalInfo.offset = endY - y;\r\n        }\r\n    }\r\n    return {\r\n        vertical: verticalInfo,\r\n        horizontal: horizontalInfo,\r\n    };\r\n}\r\nfunction checkBounds(bounds, poses, isVertical) {\r\n    // 0   [100 - 200]  300\r\n    var startBoundPos = bounds[isVertical ? \"left\" : \"top\"];\r\n    var endBoundPos = bounds[isVertical ? \"right\" : \"bottom\"];\r\n    // 450\r\n    var minPos = Math.min.apply(Math, __spreadArray([], __read(poses), false));\r\n    var maxPos = Math.max.apply(Math, __spreadArray([], __read(poses), false));\r\n    var boundInfos = [];\r\n    if (startBoundPos + 1 > minPos) {\r\n        boundInfos.push({\r\n            direction: \"start\",\r\n            isBound: true,\r\n            offset: minPos - startBoundPos,\r\n            pos: startBoundPos,\r\n        });\r\n    }\r\n    if (endBoundPos - 1 < maxPos) {\r\n        boundInfos.push({\r\n            direction: \"end\",\r\n            isBound: true,\r\n            offset: maxPos - endBoundPos,\r\n            pos: endBoundPos,\r\n        });\r\n    }\r\n    if (!boundInfos.length) {\r\n        boundInfos.push({\r\n            isBound: false,\r\n            offset: 0,\r\n            pos: 0,\r\n        });\r\n    }\r\n    return boundInfos.sort(function (a, b) { return abs(b.offset) - abs(a.offset); });\r\n}\r\nfunction isBoundRotate$1(relativePoses, boundRect, rad) {\r\n    var nextPoses = rad ? relativePoses.map(function (pos) { return rotate(pos, rad); }) : relativePoses;\r\n    return nextPoses.some(function (pos) {\r\n        return (pos[0] < boundRect.left && abs(pos[0] - boundRect.left) > 0.1)\r\n            || (pos[0] > boundRect.right && abs(pos[0] - boundRect.right) > 0.1)\r\n            || (pos[1] < boundRect.top && abs(pos[1] - boundRect.top) > 0.1)\r\n            || (pos[1] > boundRect.bottom && abs(pos[1] - boundRect.bottom) > 0.1);\r\n    });\r\n}\r\nfunction boundRotate(vec, boundPos, index) {\r\n    var r = getDistSize(vec);\r\n    var nextPos = Math.sqrt(r * r - boundPos * boundPos) || 0;\r\n    return [nextPos, -nextPos].sort(function (a, b) {\r\n        return abs(a - vec[index ? 0 : 1]) - abs(b - vec[index ? 0 : 1]);\r\n    }).map(function (pos) {\r\n        return getRad([0, 0], index ? [pos, boundPos] : [boundPos, pos]);\r\n    });\r\n}\r\nfunction checkRotateBounds(moveable, prevPoses, nextPoses, origin, rotation) {\r\n    if (!moveable.props.bounds) {\r\n        return [];\r\n    }\r\n    var rad = rotation * Math.PI / 180;\r\n    var _a = getBounds(moveable), left = _a.left, top = _a.top, right = _a.right, bottom = _a.bottom;\r\n    var relativeLeft = left - origin[0];\r\n    var relativeRight = right - origin[0];\r\n    var relativeTop = top - origin[1];\r\n    var relativeBottom = bottom - origin[1];\r\n    var boundRect = {\r\n        left: relativeLeft,\r\n        top: relativeTop,\r\n        right: relativeRight,\r\n        bottom: relativeBottom,\r\n    };\r\n    if (!isBoundRotate$1(nextPoses, boundRect, 0)) {\r\n        return [];\r\n    }\r\n    var result = [];\r\n    [\r\n        [relativeLeft, 0],\r\n        [relativeRight, 0],\r\n        [relativeTop, 1],\r\n        [relativeBottom, 1],\r\n    ].forEach(function (_a) {\r\n        var _b = __read(_a, 2), boundPos = _b[0], index = _b[1];\r\n        nextPoses.forEach(function (nextPos) {\r\n            var relativeRad1 = getRad([0, 0], nextPos);\r\n            result.push.apply(result, __spreadArray([], __read(boundRotate(nextPos, boundPos, index)\r\n                .map(function (relativeRad2) { return rad + relativeRad2 - relativeRad1; })\r\n                .filter(function (nextRad) { return !isBoundRotate$1(prevPoses, boundRect, nextRad); })\r\n                .map(function (nextRad) { return throttle(nextRad * 180 / Math.PI, TINY_NUM); })), false));\r\n        });\r\n    });\r\n    return result;\r\n}\n\nvar VERTICAL_NAMES = [\"left\", \"right\", \"center\"];\r\nvar HORIZONTAL_NAMES = [\"top\", \"bottom\", \"middle\"];\r\nvar SNAP_SKIP_NAMES_MAP = {\r\n    \"left\": \"start\",\r\n    \"right\": \"end\",\r\n    \"center\": \"center\",\r\n    \"top\": \"start\",\r\n    \"bottom\": \"end\",\r\n    \"middle\": \"center\",\r\n};\r\nvar VERTICAL_NAMES_MAP = {\r\n    start: \"left\",\r\n    end: \"right\",\r\n    center: \"center\",\r\n};\r\nvar HORIZONTAL_NAMES_MAP = {\r\n    start: \"top\",\r\n    end: \"bottom\",\r\n    center: \"middle\",\r\n};\r\nfunction getInitialBounds() {\r\n    return {\r\n        left: false,\r\n        top: false,\r\n        right: false,\r\n        bottom: false,\r\n    };\r\n}\r\nfunction hasGuidelines(moveable, ableName) {\r\n    var _a = moveable.props, snappable = _a.snappable, bounds = _a.bounds, innerBounds = _a.innerBounds, verticalGuidelines = _a.verticalGuidelines, horizontalGuidelines = _a.horizontalGuidelines, snapGridWidth = _a.snapGridWidth, snapGridHeight = _a.snapGridHeight, _b = moveable.state, guidelines = _b.guidelines, enableSnap = _b.enableSnap;\r\n    if (!snappable ||\r\n        !enableSnap ||\r\n        (ableName && snappable !== true && snappable.indexOf(ableName) < 0)) {\r\n        return false;\r\n    }\r\n    if (snapGridWidth ||\r\n        snapGridHeight ||\r\n        bounds ||\r\n        innerBounds ||\r\n        (guidelines && guidelines.length) ||\r\n        (verticalGuidelines && verticalGuidelines.length) ||\r\n        (horizontalGuidelines && horizontalGuidelines.length)) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction getSnapDirections(snapDirections) {\r\n    if (snapDirections === false) {\r\n        return {};\r\n    }\r\n    else if (snapDirections === true || !snapDirections) {\r\n        return { left: true, right: true, top: true, bottom: true };\r\n    }\r\n    return snapDirections;\r\n}\r\nfunction mapSnapDirectionPoses(snapDirections, snapPoses) {\r\n    var nextSnapDirections = getSnapDirections(snapDirections);\r\n    var nextSnapPoses = {};\r\n    for (var name_1 in nextSnapDirections) {\r\n        if (name_1 in snapPoses && nextSnapDirections[name_1]) {\r\n            nextSnapPoses[name_1] = snapPoses[name_1];\r\n        }\r\n    }\r\n    return nextSnapPoses;\r\n}\r\nfunction splitSnapDirectionPoses(snapDirections, snapPoses) {\r\n    var nextSnapPoses = mapSnapDirectionPoses(snapDirections, snapPoses);\r\n    var horizontalNames = HORIZONTAL_NAMES.filter(function (name) { return name in nextSnapPoses; });\r\n    var verticalNames = VERTICAL_NAMES.filter(function (name) { return name in nextSnapPoses; });\r\n    return {\r\n        horizontalNames: horizontalNames,\r\n        verticalNames: verticalNames,\r\n        horizontal: horizontalNames.map(function (name) { return nextSnapPoses[name]; }),\r\n        vertical: verticalNames.map(function (name) { return nextSnapPoses[name]; }),\r\n    };\r\n}\r\nfunction calculateContainerPos(rootMatrix, containerRect, n) {\r\n    var clientPos = calculatePosition(rootMatrix, [containerRect.clientLeft, containerRect.clientTop], n);\r\n    return [\r\n        containerRect.left + clientPos[0],\r\n        containerRect.top + clientPos[1],\r\n    ];\r\n}\r\nfunction solveLineConstants(_a) {\r\n    var _b = __read(_a, 2), point1 = _b[0], point2 = _b[1];\r\n    var dx = point2[0] - point1[0];\r\n    var dy = point2[1] - point1[1];\r\n    if (Math.abs(dx) < TINY_NUM$1) {\r\n        dx = 0;\r\n    }\r\n    if (Math.abs(dy) < TINY_NUM$1) {\r\n        dy = 0;\r\n    }\r\n    // b > 0\r\n    // ax + by + c = 0\r\n    var a = 0;\r\n    var b = 0;\r\n    var c = 0;\r\n    if (!dx) {\r\n        // -x + 1 = 0\r\n        a = -1;\r\n        c = point1[0];\r\n    }\r\n    else if (!dy) {\r\n        // y - 1 = 0\r\n        b = 1;\r\n        c = -point1[1];\r\n    }\r\n    else {\r\n        // y = -a(x - x1) + y1\r\n        // ax + y + a * x1 - y1 = 0\r\n        a = -dy / dx;\r\n        b = 1;\r\n        c = a * point1[0] - point1[1];\r\n    }\r\n    return [a, b, c].map(function (v) { return throttle(v, TINY_NUM$1); });\r\n}\n\nvar NAME_snapRotationThreshold = \"snapRotationThreshold\";\r\nvar NAME_snapRotationDegrees = \"snapRotationDegrees\";\r\nvar NAME_snapHorizontalThreshold = \"snapHorizontalThreshold\";\r\nvar NAME_snapVerticalThreshold = \"snapVerticalThreshold\";\n\nfunction checkMoveableSnapPoses(moveable, posesX, posesY, dirXs, dirYs, customSnapVerticalThreshold, customSnapHorizontalThreshold) {\r\n    var _a;\r\n    if (dirXs === void 0) { dirXs = []; }\r\n    if (dirYs === void 0) { dirYs = []; }\r\n    var props = moveable.props;\r\n    var snapThresholdMultiples = ((_a = moveable.state.snapThresholdInfo) === null || _a === void 0 ? void 0 : _a.multiples) || [1, 1];\r\n    var snapHorizontalThreshold = selectValue(customSnapHorizontalThreshold, props[NAME_snapHorizontalThreshold], 5);\r\n    var snapVerticalThreshold = selectValue(customSnapVerticalThreshold, props[NAME_snapVerticalThreshold], 5);\r\n    return checkSnapPoses(moveable.state.guidelines, posesX, posesY, dirXs, dirYs, snapHorizontalThreshold, snapVerticalThreshold, snapThresholdMultiples);\r\n}\r\nfunction checkSnapPoses(guidelines, posesX, posesY, dirXs, dirYs, snapHorizontalThreshold, snapVerticalThreshold, multiples) {\r\n    return {\r\n        vertical: checkSnap(guidelines, \"vertical\", posesX, snapVerticalThreshold * multiples[0], dirXs),\r\n        horizontal: checkSnap(guidelines, \"horizontal\", posesY, snapHorizontalThreshold * multiples[1], dirYs),\r\n    };\r\n}\r\nfunction checkSnapKeepRatio(moveable, startPos, endPos) {\r\n    var _a = __read(endPos, 2), endX = _a[0], endY = _a[1];\r\n    var _b = __read(startPos, 2), startX = _b[0], startY = _b[1];\r\n    var _c = __read(minus(endPos, startPos), 2), dx = _c[0], dy = _c[1];\r\n    var isBottom = dy > 0;\r\n    var isRight = dx > 0;\r\n    dx = getTinyDist(dx);\r\n    dy = getTinyDist(dy);\r\n    var verticalInfo = {\r\n        isSnap: false,\r\n        offset: 0,\r\n        pos: 0,\r\n    };\r\n    var horizontalInfo = {\r\n        isSnap: false,\r\n        offset: 0,\r\n        pos: 0,\r\n    };\r\n    if (dx === 0 && dy === 0) {\r\n        return {\r\n            vertical: verticalInfo,\r\n            horizontal: horizontalInfo,\r\n        };\r\n    }\r\n    var _d = checkMoveableSnapPoses(moveable, dx ? [endX] : [], dy ? [endY] : [], [], [], undefined, undefined), verticalSnapInfo = _d.vertical, horizontalSnapInfo = _d.horizontal;\r\n    verticalSnapInfo.posInfos.filter(function (_a) {\r\n        var pos = _a.pos;\r\n        return isRight ? pos >= startX : pos <= startX;\r\n    });\r\n    horizontalSnapInfo.posInfos.filter(function (_a) {\r\n        var pos = _a.pos;\r\n        return isBottom ? pos >= startY : pos <= startY;\r\n    });\r\n    verticalSnapInfo.isSnap = verticalSnapInfo.posInfos.length > 0;\r\n    horizontalSnapInfo.isSnap = horizontalSnapInfo.posInfos.length > 0;\r\n    var _e = getNearestSnapGuidelineInfo(verticalSnapInfo), isVerticalSnap = _e.isSnap, verticalGuideline = _e.guideline;\r\n    var _f = getNearestSnapGuidelineInfo(horizontalSnapInfo), isHorizontalSnap = _f.isSnap, horizontalGuideline = _f.guideline;\r\n    var horizontalPos = isHorizontalSnap ? horizontalGuideline.pos[1] : 0;\r\n    var verticalPos = isVerticalSnap ? verticalGuideline.pos[0] : 0;\r\n    if (dx === 0) {\r\n        if (isHorizontalSnap) {\r\n            horizontalInfo.isSnap = true;\r\n            horizontalInfo.pos = horizontalGuideline.pos[1];\r\n            horizontalInfo.offset = endY - horizontalInfo.pos;\r\n        }\r\n    }\r\n    else if (dy === 0) {\r\n        if (isVerticalSnap) {\r\n            verticalInfo.isSnap = true;\r\n            verticalInfo.pos = verticalPos;\r\n            verticalInfo.offset = endX - verticalPos;\r\n        }\r\n    }\r\n    else {\r\n        // y - y1 = a * (x - x1)\r\n        var a = dy / dx;\r\n        var b = endPos[1] - a * endX;\r\n        var y = 0;\r\n        var x = 0;\r\n        var isSnap = false;\r\n        if (isVerticalSnap) {\r\n            x = verticalPos;\r\n            y = a * x + b;\r\n            isSnap = true;\r\n        }\r\n        else if (isHorizontalSnap) {\r\n            y = horizontalPos;\r\n            x = (y - b) / a;\r\n            isSnap = true;\r\n        }\r\n        if (isSnap) {\r\n            verticalInfo.isSnap = true;\r\n            verticalInfo.pos = x;\r\n            verticalInfo.offset = endX - x;\r\n            horizontalInfo.isSnap = true;\r\n            horizontalInfo.pos = y;\r\n            horizontalInfo.offset = endY - y;\r\n        }\r\n    }\r\n    return {\r\n        vertical: verticalInfo,\r\n        horizontal: horizontalInfo,\r\n    };\r\n}\r\nfunction getStringDirection(dir) {\r\n    var stringDirection = \"\";\r\n    if (dir === -1 || dir === \"top\" || dir === \"left\") {\r\n        stringDirection = \"start\";\r\n    }\r\n    else if (dir === 0 || dir === \"center\" || dir === \"middle\") {\r\n        stringDirection = \"center\";\r\n    }\r\n    else if (dir === 1 || dir === \"right\" || dir === \"bottom\") {\r\n        stringDirection = \"end\";\r\n    }\r\n    return stringDirection;\r\n}\r\nfunction checkSnaps(moveable, rect, customSnapVerticalThreshold, customSnapHorizontalThreshold) {\r\n    var poses = splitSnapDirectionPoses(moveable.props.snapDirections, rect);\r\n    var result = checkMoveableSnapPoses(moveable, poses.vertical, poses.horizontal, poses.verticalNames.map(function (name) { return getStringDirection(name); }), poses.horizontalNames.map(function (name) { return getStringDirection(name); }), customSnapVerticalThreshold, customSnapHorizontalThreshold);\r\n    var horizontalDirection = getStringDirection(poses.horizontalNames[result.horizontal.index]);\r\n    var verticalDirection = getStringDirection(poses.verticalNames[result.vertical.index]);\r\n    return {\r\n        vertical: __assign(__assign({}, result.vertical), { direction: verticalDirection }),\r\n        horizontal: __assign(__assign({}, result.horizontal), { direction: horizontalDirection }),\r\n    };\r\n}\r\nfunction getNearestSnapGuidelineInfo(snapInfo) {\r\n    var isSnap = snapInfo.isSnap;\r\n    if (!isSnap) {\r\n        return {\r\n            isSnap: false,\r\n            offset: 0,\r\n            dist: -1,\r\n            pos: 0,\r\n            guideline: null,\r\n        };\r\n    }\r\n    var posInfo = snapInfo.posInfos[0];\r\n    var guidelineInfo = posInfo.guidelineInfos[0];\r\n    var offset = guidelineInfo.offset;\r\n    var dist = guidelineInfo.dist;\r\n    var guideline = guidelineInfo.guideline;\r\n    return {\r\n        isSnap: isSnap,\r\n        offset: offset,\r\n        dist: dist,\r\n        pos: posInfo.pos,\r\n        guideline: guideline,\r\n    };\r\n}\r\nfunction checkSnap(guidelines, targetType, targetPoses, snapThreshold, dirs) {\r\n    var _a, _b;\r\n    if (dirs === void 0) { dirs = []; }\r\n    if (!guidelines || !guidelines.length) {\r\n        return {\r\n            isSnap: false,\r\n            index: -1,\r\n            direction: \"\",\r\n            posInfos: [],\r\n        };\r\n    }\r\n    var isVertical = targetType === \"vertical\";\r\n    var posType = isVertical ? 0 : 1;\r\n    var snapPosInfos = targetPoses.map(function (targetPos, index) {\r\n        var direction = dirs[index] || \"\";\r\n        var guidelineInfos = guidelines.map(function (guideline) {\r\n            var pos = guideline.pos;\r\n            var offset = targetPos - pos[posType];\r\n            return {\r\n                offset: offset,\r\n                dist: abs(offset),\r\n                guideline: guideline,\r\n                direction: direction,\r\n            };\r\n        }).filter(function (_a) {\r\n            var guideline = _a.guideline, dist = _a.dist;\r\n            var type = guideline.type;\r\n            if (type !== targetType\r\n                || dist > snapThreshold) {\r\n                return false;\r\n            }\r\n            return true;\r\n        }).sort(function (a, b) { return a.dist - b.dist; });\r\n        return {\r\n            pos: targetPos,\r\n            index: index,\r\n            guidelineInfos: guidelineInfos,\r\n            direction: direction,\r\n        };\r\n    }).filter(function (snapPosInfo) {\r\n        return snapPosInfo.guidelineInfos.length > 0;\r\n    }).sort(function (a, b) {\r\n        return a.guidelineInfos[0].dist - b.guidelineInfos[0].dist;\r\n    });\r\n    var isSnap = snapPosInfos.length > 0;\r\n    return {\r\n        isSnap: isSnap,\r\n        index: isSnap ? snapPosInfos[0].index : -1,\r\n        direction: (_b = (_a = snapPosInfos[0]) === null || _a === void 0 ? void 0 : _a.direction) !== null && _b !== void 0 ? _b : \"\",\r\n        posInfos: snapPosInfos,\r\n    };\r\n}\r\nfunction getSnapInfosByDirection(moveable, \r\n// pos1 pos2 pos3 pos4\r\nposes, snapDirection, customSnapVerticalThreshold, customSnapHorizontalThreshold) {\r\n    var dirs = [];\r\n    if (snapDirection[0] && snapDirection[1]) {\r\n        dirs = [\r\n            snapDirection,\r\n            [-snapDirection[0], snapDirection[1]],\r\n            [snapDirection[0], -snapDirection[1]],\r\n        ];\r\n    }\r\n    else if (!snapDirection[0] && !snapDirection[1]) {\r\n        [\r\n            [-1, -1],\r\n            [1, -1],\r\n            [1, 1],\r\n            [-1, 1],\r\n        ].forEach(function (dir, i, arr) {\r\n            var nextDir = (arr[i + 1] || arr[0]);\r\n            dirs.push(dir);\r\n            dirs.push([\r\n                (dir[0] + nextDir[0]) / 2,\r\n                (dir[1] + nextDir[1]) / 2,\r\n            ]);\r\n        });\r\n    }\r\n    else {\r\n        if (moveable.props.keepRatio) {\r\n            dirs.push([-1, -1], [-1, 1], [1, -1], [1, 1], snapDirection);\r\n        }\r\n        else {\r\n            dirs.push.apply(dirs, __spreadArray([], __read(getPosesByDirection([\r\n                [-1, -1],\r\n                [1, -1],\r\n                [-1, -1],\r\n                [1, 1],\r\n            ], snapDirection)), false));\r\n            if (dirs.length > 1) {\r\n                dirs.push([\r\n                    (dirs[0][0] + dirs[1][0]) / 2,\r\n                    (dirs[0][1] + dirs[1][1]) / 2,\r\n                ]);\r\n            }\r\n        }\r\n    }\r\n    var nextPoses = dirs.map(function (dir) { return getPosByDirection(poses, dir); });\r\n    var xs = nextPoses.map(function (pos) { return pos[0]; });\r\n    var ys = nextPoses.map(function (pos) { return pos[1]; });\r\n    var result = checkMoveableSnapPoses(moveable, xs, ys, dirs.map(function (dir) { return getStringDirection(dir[0]); }), dirs.map(function (dir) { return getStringDirection(dir[1]); }), customSnapVerticalThreshold, customSnapHorizontalThreshold);\r\n    var verticalDirection = getStringDirection(dirs.map(function (dir) { return dir[0]; })[result.vertical.index]);\r\n    var horizontalDirection = getStringDirection(dirs.map(function (dir) { return dir[1]; })[result.horizontal.index]);\r\n    return {\r\n        vertical: __assign(__assign({}, result.vertical), { direction: verticalDirection }),\r\n        horizontal: __assign(__assign({}, result.horizontal), { direction: horizontalDirection }),\r\n    };\r\n}\r\nfunction checkSnapBoundPriority(a, b) {\r\n    var aDist = abs(a.offset);\r\n    var bDist = abs(b.offset);\r\n    if (a.isBound && b.isBound) {\r\n        return bDist - aDist;\r\n    }\r\n    else if (a.isBound) {\r\n        return -1;\r\n    }\r\n    else if (b.isBound) {\r\n        return 1;\r\n    }\r\n    else if (a.isSnap && b.isSnap) {\r\n        return bDist - aDist;\r\n    }\r\n    else if (a.isSnap) {\r\n        return -1;\r\n    }\r\n    else if (b.isSnap) {\r\n        return 1;\r\n    }\r\n    else if (aDist < TINY_NUM) {\r\n        return 1;\r\n    }\r\n    else if (bDist < TINY_NUM) {\r\n        return -1;\r\n    }\r\n    return aDist - bDist;\r\n}\r\nfunction getNearOffsetInfo(offsets, index) {\r\n    return offsets.slice().sort(function (a, b) {\r\n        var aSign = a.sign[index];\r\n        var bSign = b.sign[index];\r\n        var aOffset = a.offset[index];\r\n        var bOffset = b.offset[index];\r\n        // -1 The positions of a and b do not change.\r\n        // 1 The positions of a and b are reversed.\r\n        if (!aSign) {\r\n            return 1;\r\n        }\r\n        else if (!bSign) {\r\n            return -1;\r\n        }\r\n        return checkSnapBoundPriority({ isBound: a.isBound, isSnap: a.isSnap, offset: aOffset }, { isBound: b.isBound, isSnap: b.isSnap, offset: bOffset });\r\n    })[0];\r\n}\r\nfunction getCheckSnapDirections(direction, fixedDirection, keepRatio) {\r\n    var directions = [];\r\n    // const fixedDirection = [-direction[0], -direction[1]];\r\n    if (keepRatio) {\r\n        if (abs(fixedDirection[0]) !== 1 || abs(fixedDirection[1]) !== 1) {\r\n            directions.push([fixedDirection, [-1, -1]], [fixedDirection, [-1, 1]], [fixedDirection, [1, -1]], [fixedDirection, [1, 1]]);\r\n        }\r\n        else {\r\n            directions.push([fixedDirection, [direction[0], -direction[1]]], [fixedDirection, [-direction[0], direction[1]]]);\r\n        }\r\n        directions.push([fixedDirection, direction]);\r\n    }\r\n    else {\r\n        if ((direction[0] && direction[1]) || (!direction[0] && !direction[1])) {\r\n            var endDirection_1 = direction[0] ? direction : [1, 1];\r\n            [1, -1].forEach(function (signX) {\r\n                [1, -1].forEach(function (signY) {\r\n                    var nextDirection = [signX * endDirection_1[0], signY * endDirection_1[1]];\r\n                    if (fixedDirection[0] === nextDirection[0]\r\n                        && fixedDirection[1] === nextDirection[1]) {\r\n                        return;\r\n                    }\r\n                    directions.push([fixedDirection, nextDirection]);\r\n                });\r\n            });\r\n        }\r\n        else if (direction[0]) {\r\n            var signs = abs(fixedDirection[0]) === 1 ? [1] : [1, -1];\r\n            signs.forEach(function (sign) {\r\n                directions.push([\r\n                    [fixedDirection[0], -1],\r\n                    [sign * direction[0], -1],\r\n                ], [\r\n                    [fixedDirection[0], 0],\r\n                    [sign * direction[0], 0],\r\n                ], [\r\n                    [fixedDirection[0], 1],\r\n                    [sign * direction[0], 1],\r\n                ]);\r\n            });\r\n        }\r\n        else if (direction[1]) {\r\n            var signs = abs(fixedDirection[1]) === 1 ? [1] : [1, -1];\r\n            signs.forEach(function (sign) {\r\n                directions.push([\r\n                    [-1, fixedDirection[1]],\r\n                    [-1, sign * direction[1]],\r\n                ], [\r\n                    [0, fixedDirection[1]],\r\n                    [0, sign * direction[1]],\r\n                ], [\r\n                    [1, fixedDirection[1]],\r\n                    [1, sign * direction[1]],\r\n                ]);\r\n            });\r\n        }\r\n    }\r\n    return directions;\r\n}\n\nfunction isStartLine(dot, line) {\r\n    // l    o     => true\r\n    // o    l    => false\r\n    var cx = average([line[0][0], line[1][0]]);\r\n    var cy = average([line[0][1], line[1][1]]);\r\n    return {\r\n        vertical: cx <= dot[0],\r\n        horizontal: cy <= dot[1],\r\n    };\r\n}\r\nfunction hitTestLine(dot, _a) {\r\n    var _b = __read(_a, 2), pos1 = _b[0], pos2 = _b[1];\r\n    var dx = pos2[0] - pos1[0];\r\n    var dy = pos2[1] - pos1[1];\r\n    if (abs(dx) < TINY_NUM) {\r\n        dx = 0;\r\n    }\r\n    if (abs(dy) < TINY_NUM) {\r\n        dy = 0;\r\n    }\r\n    var test1;\r\n    var test2;\r\n    if (!dx) {\r\n        test1 = pos1[0];\r\n        test2 = dot[0];\r\n    }\r\n    else if (!dy) {\r\n        test1 = pos1[1];\r\n        test2 = dot[1];\r\n    }\r\n    else {\r\n        var a = dy / dx;\r\n        // y = a * (x - pos1) + pos1\r\n        test1 = a * (dot[0] - pos1[0]) + pos1[1];\r\n        test2 = dot[1];\r\n    }\r\n    return test1 - test2;\r\n}\r\nfunction isSameStartLine(dots, line, centerSign, error) {\r\n    if (error === void 0) { error = TINY_NUM; }\r\n    return dots.every(function (dot) {\r\n        var value = hitTestLine(dot, line);\r\n        var sign = value <= 0;\r\n        return sign === centerSign || abs(value) <= error;\r\n    });\r\n}\r\nfunction checkInnerBoundDot(pos, start, end, isStart, threshold) {\r\n    if (threshold === void 0) { threshold = 0; }\r\n    if ((isStart && start - threshold <= pos)\r\n        || (!isStart && pos <= end + threshold)) {\r\n        // false 402 565 602 => 37 ([0, 37])\r\n        // true 400 524.9712603540036 600 => 124 ([124, 0])\r\n        // true 400 410 600 => 10 ([10, 0])\r\n        return {\r\n            isBound: true,\r\n            offset: isStart ? start - pos : end - pos,\r\n        };\r\n    }\r\n    return {\r\n        isBound: false,\r\n        offset: 0,\r\n    };\r\n}\r\nfunction checkInnerBound(moveable, _a) {\r\n    var line = _a.line, centerSign = _a.centerSign, verticalSign = _a.verticalSign, horizontalSign = _a.horizontalSign, lineConstants = _a.lineConstants;\r\n    var bounds = moveable.props.innerBounds;\r\n    if (!bounds) {\r\n        return {\r\n            isAllBound: false,\r\n            isBound: false,\r\n            isVerticalBound: false,\r\n            isHorizontalBound: false,\r\n            offset: [0, 0],\r\n        };\r\n    }\r\n    var left = bounds.left, top = bounds.top, width = bounds.width, height = bounds.height;\r\n    var leftLine = [[left, top], [left, top + height]];\r\n    var topLine = [[left, top], [left + width, top]];\r\n    var rightLine = [[left + width, top], [left + width, top + height]];\r\n    var bottomLine = [[left, top + height], [left + width, top + height]];\r\n    if (isSameStartLine([\r\n        [left, top],\r\n        [left + width, top],\r\n        [left, top + height],\r\n        [left + width, top + height],\r\n    ], line, centerSign)) {\r\n        return {\r\n            isAllBound: false,\r\n            isBound: false,\r\n            isVerticalBound: false,\r\n            isHorizontalBound: false,\r\n            offset: [0, 0],\r\n        };\r\n    }\r\n    // test vertical\r\n    var topBoundInfo = checkLineBoundCollision(line, lineConstants, topLine, verticalSign);\r\n    var bottomBoundInfo = checkLineBoundCollision(line, lineConstants, bottomLine, verticalSign);\r\n    // test horizontal\r\n    var leftBoundInfo = checkLineBoundCollision(line, lineConstants, leftLine, horizontalSign);\r\n    var rightBoundInfo = checkLineBoundCollision(line, lineConstants, rightLine, horizontalSign);\r\n    var isAllVerticalBound = topBoundInfo.isBound && bottomBoundInfo.isBound;\r\n    var isVerticalBound = topBoundInfo.isBound || bottomBoundInfo.isBound;\r\n    var isAllHorizontalBound = leftBoundInfo.isBound && rightBoundInfo.isBound;\r\n    var isHorizontalBound = leftBoundInfo.isBound || rightBoundInfo.isBound;\r\n    var verticalOffset = maxOffset(topBoundInfo.offset, bottomBoundInfo.offset);\r\n    var horizontalOffset = maxOffset(leftBoundInfo.offset, rightBoundInfo.offset);\r\n    var offset = [0, 0];\r\n    var isBound = false;\r\n    var isAllBound = false;\r\n    if (abs(horizontalOffset) < abs(verticalOffset)) {\r\n        offset = [verticalOffset, 0];\r\n        isBound = isVerticalBound;\r\n        isAllBound = isAllVerticalBound;\r\n    }\r\n    else {\r\n        offset = [0, horizontalOffset];\r\n        isBound = isHorizontalBound;\r\n        isAllBound = isAllHorizontalBound;\r\n    }\r\n    return {\r\n        isAllBound: isAllBound,\r\n        isVerticalBound: isVerticalBound,\r\n        isHorizontalBound: isHorizontalBound,\r\n        isBound: isBound,\r\n        offset: offset,\r\n    };\r\n}\r\nfunction checkLineBoundCollision(line, _a, boundLine, isStart, threshold, isRender) {\r\n    var _b = __read(_a, 2), a = _b[0], b = _b[1];\r\n    var dot1 = line[0];\r\n    // const dot2 = line[1];\r\n    var boundDot1 = boundLine[0];\r\n    var boundDot2 = boundLine[1];\r\n    // const dy1 = getTinyDist(dot2[1] - dot1[1]);\r\n    // const dx1 = getTinyDist(dot2[0] - dot1[0]);\r\n    var dy2 = getTinyDist(boundDot2[1] - boundDot1[1]);\r\n    var dx2 = getTinyDist(boundDot2[0] - boundDot1[0]);\r\n    var hasDx = b;\r\n    var hasDy = a;\r\n    var slope = -a / b;\r\n    // lineConstants\r\n    // ax + by + c = 0\r\n    // dx2 or dy2 is zero\r\n    if (!dx2) {\r\n        // vertical\r\n        // by + c = 0\r\n        if (isRender && !hasDy) {\r\n            // 90deg\r\n            return {\r\n                isBound: false,\r\n                offset: 0,\r\n            };\r\n        }\r\n        else if (hasDx) {\r\n            // ax + by + c = 0\r\n            // const y = dy1 ? dy1 / dx1 * (boundDot1[0] - dot1[0]) + dot1[1] : dot1[1];\r\n            var y = slope * (boundDot1[0] - dot1[0]) + dot1[1];\r\n            // boundDot1[1] <= y  <= boundDot2[1]\r\n            return checkInnerBoundDot(y, boundDot1[1], boundDot2[1], isStart, threshold);\r\n        }\r\n        else {\r\n            // ax + c = 0\r\n            var offset = boundDot1[0] - dot1[0];\r\n            var isBound = abs(offset) <= (threshold || 0);\r\n            return {\r\n                isBound: isBound,\r\n                offset: isBound ? offset : 0,\r\n            };\r\n        }\r\n    }\r\n    else if (!dy2) {\r\n        // horizontal\r\n        if (isRender && !hasDx) {\r\n            // 90deg\r\n            return {\r\n                isBound: false,\r\n                offset: 0,\r\n            };\r\n        }\r\n        else if (hasDy) {\r\n            // y = a * (x - x1) + y1\r\n            // x = (y - y1) / a + x1\r\n            // const a = dy1 / dx1;\r\n            // const x = dx1 ? (boundDot1[1] - dot1[1]) / a + dot1[0] : dot1[0];\r\n            var x = (boundDot1[1] - dot1[1]) / slope + dot1[0];\r\n            // boundDot1[0] <= x && x <= boundDot2[0]\r\n            return checkInnerBoundDot(x, boundDot1[0], boundDot2[0], isStart, threshold);\r\n        }\r\n        else {\r\n            var offset = boundDot1[1] - dot1[1];\r\n            var isBound = abs(offset) <= (threshold || 0);\r\n            return {\r\n                isBound: isBound,\r\n                offset: isBound ? offset : 0,\r\n            };\r\n        }\r\n    }\r\n    return {\r\n        isBound: false,\r\n        offset: 0,\r\n    };\r\n}\r\nfunction getInnerBoundInfo(moveable, lineInfos, datas) {\r\n    return lineInfos.map(function (info) {\r\n        var _a = checkInnerBound(moveable, info), isBound = _a.isBound, offset = _a.offset, isVerticalBound = _a.isVerticalBound, isHorizontalBound = _a.isHorizontalBound;\r\n        var multiple = info.multiple;\r\n        var sizeOffset = getDragDist({\r\n            datas: datas,\r\n            distX: offset[0],\r\n            distY: offset[1],\r\n        }).map(function (size, i) { return size * (multiple[i] ? 2 / multiple[i] : 0); });\r\n        return {\r\n            sign: multiple,\r\n            isBound: isBound,\r\n            isVerticalBound: isVerticalBound,\r\n            isHorizontalBound: isHorizontalBound,\r\n            isSnap: false,\r\n            offset: sizeOffset,\r\n        };\r\n    });\r\n}\r\nfunction getInnerBoundDragInfo(moveable, poses, datas) {\r\n    var _a;\r\n    var lines = getCheckInnerBoundLineInfos(moveable, poses, [0, 0], false).map(function (info) {\r\n        return __assign(__assign({}, info), { multiple: info.multiple.map(function (dir) { return abs(dir) * 2; }) });\r\n    });\r\n    var innerBoundInfo = getInnerBoundInfo(moveable, lines, datas);\r\n    var widthOffsetInfo = getNearOffsetInfo(innerBoundInfo, 0);\r\n    var heightOffsetInfo = getNearOffsetInfo(innerBoundInfo, 1);\r\n    var verticalOffset = 0;\r\n    var horizontalOffset = 0;\r\n    var isVerticalBound = widthOffsetInfo.isVerticalBound || heightOffsetInfo.isVerticalBound;\r\n    var isHorizontalBound = widthOffsetInfo.isHorizontalBound || heightOffsetInfo.isHorizontalBound;\r\n    if (isVerticalBound || isHorizontalBound) {\r\n        _a = __read(getInverseDragDist({\r\n            datas: datas,\r\n            distX: -widthOffsetInfo.offset[0],\r\n            distY: -heightOffsetInfo.offset[1],\r\n        }), 2), verticalOffset = _a[0], horizontalOffset = _a[1];\r\n    }\r\n    return {\r\n        vertical: {\r\n            isBound: isVerticalBound,\r\n            offset: verticalOffset,\r\n        },\r\n        horizontal: {\r\n            isBound: isHorizontalBound,\r\n            offset: horizontalOffset,\r\n        },\r\n    };\r\n}\r\nfunction getCheckSnapLineDirections(direction, keepRatio) {\r\n    var lineDirections = [];\r\n    var x = direction[0];\r\n    var y = direction[1];\r\n    if (x && y) {\r\n        lineDirections.push([[0, y * 2], direction, [-x, y]], [[x * 2, 0], direction, [x, -y]]);\r\n    }\r\n    else if (x) {\r\n        // vertcal\r\n        lineDirections.push([[x * 2, 0], [x, 1], [x, -1]]);\r\n        if (keepRatio) {\r\n            lineDirections.push([[0, -1], [x, -1], [-x, -1]], [[0, 1], [x, 1], [-x, 1]]);\r\n        }\r\n    }\r\n    else if (y) {\r\n        // horizontal\r\n        lineDirections.push([[0, y * 2], [1, y], [-1, y]]);\r\n        if (keepRatio) {\r\n            lineDirections.push([[-1, 0], [-1, y], [-1, -y]], [[1, 0], [1, y], [1, -y]]);\r\n        }\r\n    }\r\n    else {\r\n        // [0, 0] to all direction\r\n        lineDirections.push([[-1, 0], [-1, -1], [-1, 1]], [[1, 0], [1, -1], [1, 1]], [[0, -1], [-1, -1], [1, -1]], [[0, 1], [-1, 1], [1, 1]]);\r\n    }\r\n    return lineDirections;\r\n}\r\nfunction getCheckInnerBoundLineInfos(moveable, poses, direction, keepRatio) {\r\n    var _a = moveable.state, allMatrix = _a.allMatrix, is3d = _a.is3d;\r\n    var virtualPoses = calculatePoses(allMatrix, 100, 100, is3d ? 4 : 3);\r\n    var center = getPosByDirection(virtualPoses, [0, 0]);\r\n    return getCheckSnapLineDirections(direction, keepRatio).map(function (_a) {\r\n        var _b = __read(_a, 3), multiple = _b[0], dir1 = _b[1], dir2 = _b[2];\r\n        var virtualLine = [\r\n            getPosByDirection(virtualPoses, dir1),\r\n            getPosByDirection(virtualPoses, dir2),\r\n        ];\r\n        var lineConstants = solveLineConstants(virtualLine);\r\n        var _c = isStartLine(center, virtualLine), verticalSign = _c.vertical, horizontalSign = _c.horizontal;\r\n        var centerSign = hitTestLine(center, virtualLine) <= 0;\r\n        return {\r\n            multiple: multiple,\r\n            centerSign: centerSign,\r\n            verticalSign: verticalSign,\r\n            horizontalSign: horizontalSign,\r\n            lineConstants: lineConstants,\r\n            line: [\r\n                getPosByDirection(poses, dir1),\r\n                getPosByDirection(poses, dir2),\r\n            ],\r\n        };\r\n    });\r\n}\r\nfunction isBoundRotate(relativePoses, boundDots, center, rad) {\r\n    var nextPoses = rad ? relativePoses.map(function (pos) { return rotate(pos, rad); }) : relativePoses;\r\n    return [\r\n        [nextPoses[0], nextPoses[1]],\r\n        [nextPoses[1], nextPoses[3]],\r\n        [nextPoses[3], nextPoses[2]],\r\n        [nextPoses[2], nextPoses[0]],\r\n    ].some(function (line) {\r\n        var centerSign = hitTestLine(center, line) <= 0;\r\n        return !isSameStartLine(boundDots, line, centerSign);\r\n    });\r\n}\r\nfunction getDistPointLine(_a) {\r\n    // x = 0, y = 0\r\n    // d = (ax + by + c) / root(a2 + b2)\r\n    var _b = __read(_a, 2), pos1 = _b[0], pos2 = _b[1];\r\n    var dx = pos2[0] - pos1[0];\r\n    var dy = pos2[1] - pos1[1];\r\n    if (!dx) {\r\n        return abs(pos1[0]);\r\n    }\r\n    if (!dy) {\r\n        return abs(pos1[1]);\r\n    }\r\n    // y - y1 = a(x - x1)\r\n    // 0 = ax -y + -a * x1 + y1\r\n    var a = dy / dx;\r\n    return abs((-a * pos1[0] + pos1[1]) / Math.sqrt(Math.pow(a, 2) + 1));\r\n}\r\nfunction solveReverseLine(_a) {\r\n    var _b = __read(_a, 2), pos1 = _b[0], pos2 = _b[1];\r\n    var dx = pos2[0] - pos1[0];\r\n    var dy = pos2[1] - pos1[1];\r\n    if (!dx) {\r\n        return [pos1[0], 0];\r\n    }\r\n    if (!dy) {\r\n        return [0, pos1[1]];\r\n    }\r\n    var a = dy / dx;\r\n    // y - y1 = a (x  - x1)\r\n    // y = ax - a * x1 + y1\r\n    var b = -a * pos1[0] + pos1[1];\r\n    // y = ax + b = -1/a x\r\n    // x = -b / (a + 1 / a)\r\n    // y = b / (1 + 1 / a^2)\r\n    return [\r\n        -b / (a + 1 / a),\r\n        b / ((a * a) + 1),\r\n    ];\r\n}\r\nfunction checkRotateInnerBounds(moveable, prevPoses, nextPoses, origin, rotation) {\r\n    var bounds = moveable.props.innerBounds;\r\n    var rad = rotation * Math.PI / 180;\r\n    if (!bounds) {\r\n        return [];\r\n    }\r\n    var left = bounds.left, top = bounds.top, width = bounds.width, height = bounds.height;\r\n    var relativeLeft = left - origin[0];\r\n    var relativeRight = left + width - origin[0];\r\n    var relativeTop = top - origin[1];\r\n    var relativeBottom = top + height - origin[1];\r\n    var dots = [\r\n        [relativeLeft, relativeTop],\r\n        [relativeRight, relativeTop],\r\n        [relativeLeft, relativeBottom],\r\n        [relativeRight, relativeBottom],\r\n    ];\r\n    var center = getPosByDirection(nextPoses, [0, 0]);\r\n    if (!isBoundRotate(nextPoses, dots, center, 0)) {\r\n        return [];\r\n    }\r\n    var result = [];\r\n    var dotInfos = dots.map(function (dot) { return [\r\n        getDistSize(dot),\r\n        getRad([0, 0], dot),\r\n    ]; });\r\n    [\r\n        [nextPoses[0], nextPoses[1]],\r\n        [nextPoses[1], nextPoses[3]],\r\n        [nextPoses[3], nextPoses[2]],\r\n        [nextPoses[2], nextPoses[0]],\r\n    ].forEach(function (line) {\r\n        var lineRad = getRad([0, 0], solveReverseLine(line));\r\n        var lineDist = getDistPointLine(line);\r\n        result.push.apply(result, __spreadArray([], __read(dotInfos\r\n            .filter(function (_a) {\r\n            var _b = __read(_a, 1), dotDist = _b[0];\r\n            return dotDist && lineDist <= dotDist;\r\n        })\r\n            .map(function (_a) {\r\n            var _b = __read(_a, 2), dotDist = _b[0], dotRad = _b[1];\r\n            var distRad = Math.acos(dotDist ? lineDist / dotDist : 0);\r\n            var nextRad1 = dotRad + distRad;\r\n            var nextRad2 = dotRad - distRad;\r\n            return [\r\n                rad + nextRad1 - lineRad,\r\n                rad + nextRad2 - lineRad,\r\n            ];\r\n        })\r\n            .reduce(function (prev, cur) {\r\n            prev.push.apply(prev, __spreadArray([], __read(cur), false));\r\n            return prev;\r\n        }, [])\r\n            .filter(function (nextRad) { return !isBoundRotate(prevPoses, dots, center, nextRad); })\r\n            .map(function (nextRad) { return throttle(nextRad * 180 / Math.PI, TINY_NUM); })), false));\r\n    });\r\n    return result;\r\n}\r\nfunction checkInnerBoundPoses(moveable) {\r\n    var innerBounds = moveable.props.innerBounds;\r\n    var boundMap = getInitialBounds();\r\n    if (!innerBounds) {\r\n        return {\r\n            boundMap: boundMap,\r\n            vertical: [],\r\n            horizontal: [],\r\n        };\r\n    }\r\n    var _a = moveable.getRect(), pos1 = _a.pos1, pos2 = _a.pos2, pos3 = _a.pos3, pos4 = _a.pos4;\r\n    var poses = [pos1, pos2, pos3, pos4];\r\n    var center = getPosByDirection(poses, [0, 0]);\r\n    var left = innerBounds.left, top = innerBounds.top, width = innerBounds.width, height = innerBounds.height;\r\n    var leftLine = [[left, top], [left, top + height]];\r\n    var topLine = [[left, top], [left + width, top]];\r\n    var rightLine = [[left + width, top], [left + width, top + height]];\r\n    var bottomLine = [[left, top + height], [left + width, top + height]];\r\n    var lineInfos = getCheckInnerBoundLineInfos(moveable, poses, [0, 0], false);\r\n    var horizontalPoses = [];\r\n    var verticalPoses = [];\r\n    lineInfos.forEach(function (lineInfo) {\r\n        var line = lineInfo.line, lineConstants = lineInfo.lineConstants;\r\n        var _a = isStartLine(center, line), isHorizontalStart = _a.horizontal, isVerticalStart = _a.vertical;\r\n        // test vertical\r\n        var topBoundInfo = checkLineBoundCollision(line, lineConstants, topLine, isVerticalStart, 1, true);\r\n        var bottomBoundInfo = checkLineBoundCollision(line, lineConstants, bottomLine, isVerticalStart, 1, true);\r\n        // test horizontal\r\n        var leftBoundInfo = checkLineBoundCollision(line, lineConstants, leftLine, isHorizontalStart, 1, true);\r\n        var rightBoundInfo = checkLineBoundCollision(line, lineConstants, rightLine, isHorizontalStart, 1, true);\r\n        if (topBoundInfo.isBound && !boundMap.top) {\r\n            horizontalPoses.push(top);\r\n            boundMap.top = true;\r\n        }\r\n        if (bottomBoundInfo.isBound && !boundMap.bottom) {\r\n            horizontalPoses.push(top + height);\r\n            boundMap.bottom = true;\r\n        }\r\n        if (leftBoundInfo.isBound && !boundMap.left) {\r\n            verticalPoses.push(left);\r\n            boundMap.left = true;\r\n        }\r\n        if (rightBoundInfo.isBound && !boundMap.right) {\r\n            verticalPoses.push(left + width);\r\n            boundMap.right = true;\r\n        }\r\n    });\r\n    return {\r\n        boundMap: boundMap,\r\n        horizontal: horizontalPoses,\r\n        vertical: verticalPoses,\r\n    };\r\n}\n\nfunction solveEquation(pos1, pos2, snapOffset, isVertical) {\r\n    var dx = pos2[0] - pos1[0];\r\n    var dy = pos2[1] - pos1[1];\r\n    if (abs(dx) < TINY_NUM$1) {\r\n        dx = 0;\r\n    }\r\n    if (abs(dy) < TINY_NUM$1) {\r\n        dy = 0;\r\n    }\r\n    if (!dx) {\r\n        // y = 0 * x + b\r\n        // only horizontal\r\n        if (!isVertical) {\r\n            return [0, snapOffset];\r\n        }\r\n        return [0, 0];\r\n    }\r\n    if (!dy) {\r\n        // only vertical\r\n        if (isVertical) {\r\n            return [snapOffset, 0];\r\n        }\r\n        return [0, 0];\r\n    }\r\n    // y = ax + b\r\n    var a = dy / dx;\r\n    var b = pos1[1] - a * pos1[0];\r\n    if (isVertical) {\r\n        // y = a * x + b\r\n        var y = a * (pos2[0] + snapOffset) + b;\r\n        return [snapOffset, y - pos2[1]];\r\n    }\r\n    else {\r\n        // x = (y - b) / a\r\n        var x = (pos2[1] + snapOffset - b) / a;\r\n        return [x - pos2[0], snapOffset];\r\n    }\r\n}\r\nfunction solveNextOffset(pos1, pos2, offset, isVertical, datas) {\r\n    var sizeOffset = solveEquation(pos1, pos2, offset, isVertical);\r\n    if (!sizeOffset) {\r\n        return {\r\n            isOutside: false,\r\n            offset: [0, 0],\r\n        };\r\n    }\r\n    var size = getDist$1(pos1, pos2);\r\n    var dist1 = getDist$1(sizeOffset, pos1);\r\n    var dist2 = getDist$1(sizeOffset, pos2);\r\n    var isOutside = dist1 > size || dist2 > size;\r\n    var _a = __read(getDragDist({\r\n        datas: datas,\r\n        distX: sizeOffset[0],\r\n        distY: sizeOffset[1],\r\n    }), 2), widthOffset = _a[0], heightOffset = _a[1];\r\n    return {\r\n        offset: [widthOffset, heightOffset],\r\n        isOutside: isOutside,\r\n    };\r\n}\r\nfunction getSnapBound(boundInfo, snapInfo) {\r\n    if (boundInfo.isBound) {\r\n        return boundInfo.offset;\r\n    }\r\n    else if (snapInfo.isSnap) {\r\n        return getNearestSnapGuidelineInfo(snapInfo).offset;\r\n    }\r\n    return 0;\r\n}\r\nfunction checkThrottleDragRotate(throttleDragRotate, _a, _b, _c, _d) {\r\n    var _e = __read(_a, 2), distX = _e[0], distY = _e[1];\r\n    var _f = __read(_b, 2), isVerticalBound = _f[0], isHorizontalBound = _f[1];\r\n    var _g = __read(_c, 2), isVerticalSnap = _g[0], isHorizontalSnap = _g[1];\r\n    var _h = __read(_d, 2), verticalOffset = _h[0], horizontalOffset = _h[1];\r\n    var offsetX = -verticalOffset;\r\n    var offsetY = -horizontalOffset;\r\n    if (throttleDragRotate && distX && distY) {\r\n        offsetX = 0;\r\n        offsetY = 0;\r\n        var adjustPoses = [];\r\n        if (isVerticalBound && isHorizontalBound) {\r\n            adjustPoses.push([0, horizontalOffset], [verticalOffset, 0]);\r\n        }\r\n        else if (isVerticalBound) {\r\n            adjustPoses.push([verticalOffset, 0]);\r\n        }\r\n        else if (isHorizontalBound) {\r\n            adjustPoses.push([0, horizontalOffset]);\r\n        }\r\n        else if (isVerticalSnap && isHorizontalSnap) {\r\n            adjustPoses.push([0, horizontalOffset], [verticalOffset, 0]);\r\n        }\r\n        else if (isVerticalSnap) {\r\n            adjustPoses.push([verticalOffset, 0]);\r\n        }\r\n        else if (isHorizontalSnap) {\r\n            adjustPoses.push([0, horizontalOffset]);\r\n        }\r\n        if (adjustPoses.length) {\r\n            adjustPoses.sort(function (a, b) {\r\n                return (getDistSize(minus([distX, distY], a)) -\r\n                    getDistSize(minus([distX, distY], b)));\r\n            });\r\n            var adjustPos = adjustPoses[0];\r\n            if (adjustPos[0] && abs(distX) > TINY_NUM$1) {\r\n                offsetX = -adjustPos[0];\r\n                offsetY =\r\n                    (distY * abs(distX + offsetX)) / abs(distX) -\r\n                        distY;\r\n            }\r\n            else if (adjustPos[1] && abs(distY) > TINY_NUM$1) {\r\n                var prevDistY = distY;\r\n                offsetY = -adjustPos[1];\r\n                offsetX =\r\n                    (distX * abs(distY + offsetY)) / abs(prevDistY) -\r\n                        distX;\r\n            }\r\n            if (throttleDragRotate && isHorizontalBound && isVerticalBound) {\r\n                if (abs(offsetX) > TINY_NUM$1 &&\r\n                    abs(offsetX) < abs(verticalOffset)) {\r\n                    var scale = abs(verticalOffset) / abs(offsetX);\r\n                    offsetX *= scale;\r\n                    offsetY *= scale;\r\n                }\r\n                else if (abs(offsetY) > TINY_NUM$1 &&\r\n                    abs(offsetY) < abs(horizontalOffset)) {\r\n                    var scale = abs(horizontalOffset) / abs(offsetY);\r\n                    offsetX *= scale;\r\n                    offsetY *= scale;\r\n                }\r\n                else {\r\n                    offsetX = maxOffset(-verticalOffset, offsetX);\r\n                    offsetY = maxOffset(-horizontalOffset, offsetY);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        offsetX = distX || isVerticalBound ? -verticalOffset : 0;\r\n        offsetY = distY || isHorizontalBound ? -horizontalOffset : 0;\r\n    }\r\n    return [offsetX, offsetY];\r\n}\r\nfunction checkSnapBoundsDrag(moveable, distX, distY, throttleDragRotate, ignoreSnap, datas) {\r\n    if (!hasGuidelines(moveable, \"draggable\")) {\r\n        return [\r\n            {\r\n                isSnap: false,\r\n                isBound: false,\r\n                offset: 0,\r\n            },\r\n            {\r\n                isSnap: false,\r\n                isBound: false,\r\n                offset: 0,\r\n            },\r\n        ];\r\n    }\r\n    var poses = getAbsolutePoses(datas.absolutePoses, [distX, distY]);\r\n    var _a = getRect(poses), left = _a.left, right = _a.right, top = _a.top, bottom = _a.bottom;\r\n    var boundPoses = {\r\n        horizontal: poses.map(function (pos) { return pos[1]; }),\r\n        vertical: poses.map(function (pos) { return pos[0]; }),\r\n    };\r\n    var snapDirections = getSnapDirections(moveable.props.snapDirections);\r\n    var snapPoses = splitSnapDirectionPoses(snapDirections, {\r\n        left: left,\r\n        right: right,\r\n        top: top,\r\n        bottom: bottom,\r\n        center: (left + right) / 2,\r\n        middle: (top + bottom) / 2,\r\n    });\r\n    var _b = checkMoveableSnapBounds(moveable, ignoreSnap, snapPoses, boundPoses), verticalSnapBoundInfo = _b.vertical, horizontalSnapBoundInfo = _b.horizontal;\r\n    var _c = getInnerBoundDragInfo(moveable, poses, datas), verticalInnerBoundInfo = _c.vertical, horizontalInnerBoundInfo = _c.horizontal;\r\n    var isVerticalSnap = verticalSnapBoundInfo.isSnap;\r\n    var isHorizontalSnap = horizontalSnapBoundInfo.isSnap;\r\n    var isVerticalBound = verticalSnapBoundInfo.isBound || verticalInnerBoundInfo.isBound;\r\n    var isHorizontalBound = horizontalSnapBoundInfo.isBound || horizontalInnerBoundInfo.isBound;\r\n    var verticalOffset = maxOffset(verticalSnapBoundInfo.offset, verticalInnerBoundInfo.offset);\r\n    var horizontalOffset = maxOffset(horizontalSnapBoundInfo.offset, horizontalInnerBoundInfo.offset);\r\n    var _d = __read(checkThrottleDragRotate(throttleDragRotate, [distX, distY], [isVerticalBound, isHorizontalBound], [isVerticalSnap, isHorizontalSnap], [verticalOffset, horizontalOffset]), 2), offsetX = _d[0], offsetY = _d[1];\r\n    return [\r\n        {\r\n            isBound: isVerticalBound,\r\n            isSnap: isVerticalSnap,\r\n            offset: offsetX,\r\n        },\r\n        {\r\n            isBound: isHorizontalBound,\r\n            isSnap: isHorizontalSnap,\r\n            offset: offsetY,\r\n        },\r\n    ];\r\n}\r\nfunction checkMoveableSnapBounds(moveable, ignoreSnap, poses, boundPoses) {\r\n    if (boundPoses === void 0) { boundPoses = poses; }\r\n    var _a = checkBoundPoses(getBounds(moveable), boundPoses.vertical, boundPoses.horizontal), horizontalBoundInfos = _a.horizontal, verticalBoundInfos = _a.vertical;\r\n    var _b = ignoreSnap ? {\r\n        horizontal: { isSnap: false, index: -1 },\r\n        vertical: { isSnap: false, index: -1 },\r\n    } : checkMoveableSnapPoses(moveable, poses.vertical, poses.horizontal, undefined, undefined, undefined, undefined), horizontalSnapInfo = _b.horizontal, verticalSnapInfo = _b.vertical;\r\n    var horizontalOffset = getSnapBound(horizontalBoundInfos[0], horizontalSnapInfo);\r\n    var verticalOffset = getSnapBound(verticalBoundInfos[0], verticalSnapInfo);\r\n    var horizontalDist = abs(horizontalOffset);\r\n    var verticalDist = abs(verticalOffset);\r\n    return {\r\n        horizontal: {\r\n            isBound: horizontalBoundInfos[0].isBound,\r\n            isSnap: horizontalSnapInfo.isSnap,\r\n            snapIndex: horizontalSnapInfo.index,\r\n            offset: horizontalOffset,\r\n            dist: horizontalDist,\r\n            bounds: horizontalBoundInfos,\r\n            snap: horizontalSnapInfo,\r\n        },\r\n        vertical: {\r\n            isBound: verticalBoundInfos[0].isBound,\r\n            isSnap: verticalSnapInfo.isSnap,\r\n            snapIndex: verticalSnapInfo.index,\r\n            offset: verticalOffset,\r\n            dist: verticalDist,\r\n            bounds: verticalBoundInfos,\r\n            snap: verticalSnapInfo,\r\n        },\r\n    };\r\n}\r\nfunction checkSnapBounds(guideines, bounds, posesX, posesY, snapHorizontalThreshold, snapVerticalThreshold, multiples) {\r\n    if (multiples === void 0) { multiples = [1, 1]; }\r\n    var _a = checkBoundPoses(bounds, posesX, posesY), horizontalBoundInfos = _a.horizontal, verticalBoundInfos = _a.vertical;\r\n    // options.isRequest ? {\r\n    //     horizontal: { isSnap: false, index: -1 } as SnapInfo,\r\n    //     vertical: { isSnap: false, index: -1 } as SnapInfo,\r\n    // } :\r\n    var _b = checkSnapPoses(guideines, posesX, posesY, [], [], snapHorizontalThreshold, snapVerticalThreshold, multiples), horizontalSnapInfo = _b.horizontal, verticalSnapInfo = _b.vertical;\r\n    var horizontalOffset = getSnapBound(horizontalBoundInfos[0], horizontalSnapInfo);\r\n    var verticalOffset = getSnapBound(verticalBoundInfos[0], verticalSnapInfo);\r\n    var horizontalDist = abs(horizontalOffset);\r\n    var verticalDist = abs(verticalOffset);\r\n    return {\r\n        horizontal: {\r\n            isBound: horizontalBoundInfos[0].isBound,\r\n            isSnap: horizontalSnapInfo.isSnap,\r\n            snapIndex: horizontalSnapInfo.index,\r\n            offset: horizontalOffset,\r\n            dist: horizontalDist,\r\n            bounds: horizontalBoundInfos,\r\n            snap: horizontalSnapInfo,\r\n        },\r\n        vertical: {\r\n            isBound: verticalBoundInfos[0].isBound,\r\n            isSnap: verticalSnapInfo.isSnap,\r\n            snapIndex: verticalSnapInfo.index,\r\n            offset: verticalOffset,\r\n            dist: verticalDist,\r\n            bounds: verticalBoundInfos,\r\n            snap: verticalSnapInfo,\r\n        },\r\n    };\r\n}\r\nfunction checkSnapRightLine(startPos, endPos, snapBoundInfo, keepRatio) {\r\n    var rad = (getRad(startPos, endPos) / Math.PI) * 180;\r\n    var _a = snapBoundInfo.vertical, isVerticalBound = _a.isBound, isVerticalSnap = _a.isSnap, verticalDist = _a.dist, _b = snapBoundInfo.horizontal, isHorizontalBound = _b.isBound, isHorizontalSnap = _b.isSnap, horizontalDist = _b.dist;\r\n    var rad180 = rad % 180;\r\n    var isHorizontalLine = rad180 < 3 || rad180 > 177;\r\n    var isVerticalLine = rad180 > 87 && rad180 < 93;\r\n    if (horizontalDist < verticalDist) {\r\n        if (isVerticalBound ||\r\n            (isVerticalSnap &&\r\n                !isVerticalLine &&\r\n                (!keepRatio || !isHorizontalLine))) {\r\n            return \"vertical\";\r\n        }\r\n    }\r\n    if (isHorizontalBound ||\r\n        (isHorizontalSnap &&\r\n            !isHorizontalLine &&\r\n            (!keepRatio || !isVerticalLine))) {\r\n        return \"horizontal\";\r\n    }\r\n    return \"\";\r\n}\r\nfunction getSnapBoundInfo(moveable, poses, directions, keepRatio, isRequest, datas) {\r\n    return directions.map(function (_a) {\r\n        var _b = __read(_a, 2), startDirection = _b[0], endDirection = _b[1];\r\n        var otherStartPos = getPosByDirection(poses, startDirection);\r\n        var otherEndPos = getPosByDirection(poses, endDirection);\r\n        var snapBoundInfo = keepRatio\r\n            ? checkSnapBoundsKeepRatio(moveable, otherStartPos, otherEndPos, isRequest)\r\n            : checkMoveableSnapBounds(moveable, isRequest, {\r\n                vertical: [otherEndPos[0]],\r\n                horizontal: [otherEndPos[1]],\r\n            });\r\n        var _c = snapBoundInfo.horizontal, \r\n        // dist: otherHorizontalDist,\r\n        otherHorizontalOffset = _c.offset, isOtherHorizontalBound = _c.isBound, isOtherHorizontalSnap = _c.isSnap, _d = snapBoundInfo.vertical, \r\n        // dist: otherVerticalDist,\r\n        otherVerticalOffset = _d.offset, isOtherVerticalBound = _d.isBound, isOtherVerticalSnap = _d.isSnap;\r\n        var multiple = minus(endDirection, startDirection);\r\n        if (!otherVerticalOffset && !otherHorizontalOffset) {\r\n            return {\r\n                isBound: isOtherVerticalBound || isOtherHorizontalBound,\r\n                isSnap: isOtherVerticalSnap || isOtherHorizontalSnap,\r\n                sign: multiple,\r\n                offset: [0, 0],\r\n            };\r\n        }\r\n        var snapLine = checkSnapRightLine(otherStartPos, otherEndPos, snapBoundInfo, keepRatio);\r\n        if (!snapLine) {\r\n            return {\r\n                sign: multiple,\r\n                isBound: false,\r\n                isSnap: false,\r\n                offset: [0, 0],\r\n            };\r\n        }\r\n        var isVertical = snapLine === \"vertical\";\r\n        var sizeOffset = [0, 0];\r\n        if (!keepRatio\r\n            && abs(endDirection[0]) === 1\r\n            && abs(endDirection[1]) === 1\r\n            && startDirection[0] !== endDirection[0]\r\n            && startDirection[1] !== endDirection[1]) {\r\n            sizeOffset = getDragDist({\r\n                datas: datas,\r\n                distX: -otherVerticalOffset,\r\n                distY: -otherHorizontalOffset,\r\n            });\r\n        }\r\n        else {\r\n            sizeOffset = solveNextOffset(otherStartPos, otherEndPos, -(isVertical ? otherVerticalOffset : otherHorizontalOffset), isVertical, datas).offset;\r\n        }\r\n        sizeOffset = sizeOffset.map(function (size, i) { return size * (multiple[i] ? 2 / multiple[i] : 0); });\r\n        return {\r\n            sign: multiple,\r\n            isBound: isVertical ? isOtherVerticalBound : isOtherHorizontalBound,\r\n            isSnap: isVertical ? isOtherVerticalSnap : isOtherHorizontalSnap,\r\n            offset: sizeOffset,\r\n        };\r\n    });\r\n}\r\nfunction getSnapBoundOffset(boundInfo, snapInfo) {\r\n    if (boundInfo.isBound) {\r\n        return boundInfo.offset;\r\n    }\r\n    else if (snapInfo.isSnap) {\r\n        return snapInfo.offset;\r\n    }\r\n    return 0;\r\n}\r\nfunction checkSnapBoundsKeepRatio(moveable, startPos, endPos, isRequest) {\r\n    var _a = checkBoundKeepRatio(moveable, startPos, endPos), horizontalBoundInfo = _a.horizontal, verticalBoundInfo = _a.vertical;\r\n    var _b = isRequest ? {\r\n        horizontal: { isSnap: false },\r\n        vertical: { isSnap: false },\r\n    } : checkSnapKeepRatio(moveable, startPos, endPos), horizontalSnapInfo = _b.horizontal, verticalSnapInfo = _b.vertical;\r\n    var horizontalOffset = getSnapBoundOffset(horizontalBoundInfo, horizontalSnapInfo);\r\n    var verticalOffset = getSnapBoundOffset(verticalBoundInfo, verticalSnapInfo);\r\n    var horizontalDist = abs(horizontalOffset);\r\n    var verticalDist = abs(verticalOffset);\r\n    return {\r\n        horizontal: {\r\n            isBound: horizontalBoundInfo.isBound,\r\n            isSnap: horizontalSnapInfo.isSnap,\r\n            offset: horizontalOffset,\r\n            dist: horizontalDist,\r\n        },\r\n        vertical: {\r\n            isBound: verticalBoundInfo.isBound,\r\n            isSnap: verticalSnapInfo.isSnap,\r\n            offset: verticalOffset,\r\n            dist: verticalDist,\r\n        },\r\n    };\r\n}\r\nfunction checkMaxBounds(moveable, poses, direction, fixedPosition, datas) {\r\n    var fixedDirection = [-direction[0], -direction[1]];\r\n    var _a = moveable.state, width = _a.width, height = _a.height;\r\n    var bounds = moveable.props.bounds;\r\n    var maxWidth = Infinity;\r\n    var maxHeight = Infinity;\r\n    if (bounds) {\r\n        var directions = [\r\n            [direction[0], -direction[1]],\r\n            [-direction[0], direction[1]],\r\n        ];\r\n        var _b = bounds.left, left_1 = _b === void 0 ? -Infinity : _b, _c = bounds.top, top_1 = _c === void 0 ? -Infinity : _c, _d = bounds.right, right_1 = _d === void 0 ? Infinity : _d, _e = bounds.bottom, bottom_1 = _e === void 0 ? Infinity : _e;\r\n        directions.forEach(function (otherDirection) {\r\n            var isCheckVertical = otherDirection[0] !== fixedDirection[0];\r\n            var isCheckHorizontal = otherDirection[1] !== fixedDirection[1];\r\n            var otherPos = getPosByDirection(poses, otherDirection);\r\n            var deg = (getRad(fixedPosition, otherPos) * 360) / Math.PI;\r\n            if (isCheckHorizontal) {\r\n                var nextOtherPos = otherPos.slice();\r\n                if (abs(deg - 360) < 2 || abs(deg - 180) < 2) {\r\n                    nextOtherPos[1] = fixedPosition[1];\r\n                }\r\n                var _a = solveNextOffset(fixedPosition, nextOtherPos, (fixedPosition[1] < otherPos[1] ? bottom_1 : top_1) -\r\n                    otherPos[1], false, datas), _b = __read(_a.offset, 2), heightOffset = _b[1], isHeightOutside = _a.isOutside;\r\n                if (!isNaN(heightOffset)) {\r\n                    maxHeight = height + (isHeightOutside ? 1 : -1) * abs(heightOffset);\r\n                }\r\n            }\r\n            if (isCheckVertical) {\r\n                var nextOtherPos = otherPos.slice();\r\n                if (abs(deg - 90) < 2 || abs(deg - 270) < 2) {\r\n                    nextOtherPos[0] = fixedPosition[0];\r\n                }\r\n                var _c = solveNextOffset(fixedPosition, nextOtherPos, (fixedPosition[0] < otherPos[0] ? right_1 : left_1) - otherPos[0], true, datas), _d = __read(_c.offset, 1), widthOffset = _d[0], isWidthOutside = _c.isOutside;\r\n                if (!isNaN(widthOffset)) {\r\n                    maxWidth = width + (isWidthOutside ? 1 : -1) * abs(widthOffset);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    return {\r\n        maxWidth: maxWidth,\r\n        maxHeight: maxHeight,\r\n    };\r\n}\n\n/**\r\n * @namespace Draggable\r\n * @memberof Moveable\r\n * @description Draggable refers to the ability to drag and move targets.\r\n */\r\nvar Draggable = {\r\n    name: \"draggable\",\r\n    props: [\r\n        \"draggable\",\r\n        \"throttleDrag\",\r\n        \"throttleDragRotate\",\r\n        \"hideThrottleDragRotateLine\",\r\n        \"startDragRotate\",\r\n        \"edgeDraggable\",\r\n    ],\r\n    events: [\r\n        \"dragStart\",\r\n        \"drag\",\r\n        \"dragEnd\",\r\n        \"dragGroupStart\",\r\n        \"dragGroup\",\r\n        \"dragGroupEnd\",\r\n    ],\r\n    requestStyle: function () {\r\n        return [\"left\", \"top\", \"right\", \"bottom\"];\r\n    },\r\n    requestChildStyle: function () {\r\n        return [\"left\", \"top\", \"right\", \"bottom\"];\r\n    },\r\n    render: function (moveable, React) {\r\n        var _a = moveable.props, hideThrottleDragRotateLine = _a.hideThrottleDragRotateLine, throttleDragRotate = _a.throttleDragRotate, zoom = _a.zoom;\r\n        var _b = moveable.getState(), dragInfo = _b.dragInfo, beforeOrigin = _b.beforeOrigin;\r\n        if (hideThrottleDragRotateLine || !throttleDragRotate || !dragInfo) {\r\n            return [];\r\n        }\r\n        var dist = dragInfo.dist;\r\n        if (!dist[0] && !dist[1]) {\r\n            return [];\r\n        }\r\n        var width = getDistSize(dist);\r\n        var rad = getRad(dist, [0, 0]);\r\n        return [React.createElement(\"div\", { className: prefix(\"line\", \"horizontal\", \"dragline\", \"dashed\"), key: \"dragRotateGuideline\", style: {\r\n                    width: \"\".concat(width, \"px\"),\r\n                    transform: \"translate(\".concat(beforeOrigin[0], \"px, \").concat(beforeOrigin[1], \"px) rotate(\").concat(rad, \"rad) scaleY(\").concat(zoom, \")\"),\r\n                } })];\r\n    },\r\n    dragStart: function (moveable, e) {\r\n        var datas = e.datas, parentEvent = e.parentEvent, parentGesto = e.parentGesto;\r\n        var state = moveable.state;\r\n        var gestos = state.gestos, style = state.style;\r\n        if (gestos.draggable) {\r\n            return false;\r\n        }\r\n        gestos.draggable = parentGesto || moveable.targetGesto;\r\n        datas.datas = {};\r\n        datas.left = parseFloat(style.left || \"\") || 0;\r\n        datas.top = parseFloat(style.top || \"\") || 0;\r\n        datas.bottom = parseFloat(style.bottom || \"\") || 0;\r\n        datas.right = parseFloat(style.right || \"\") || 0;\r\n        datas.startValue = [0, 0];\r\n        setDragStart(moveable, e);\r\n        setDefaultTransformIndex(moveable, e, \"translate\");\r\n        startCheckSnapDrag(moveable, datas);\r\n        datas.prevDist = [0, 0];\r\n        datas.prevBeforeDist = [0, 0];\r\n        datas.isDrag = false;\r\n        datas.deltaOffset = [0, 0];\r\n        var params = fillParams(moveable, e, __assign({ set: function (translate) {\r\n                datas.startValue = translate;\r\n            } }, fillTransformStartEvent(moveable, e)));\r\n        var result = parentEvent || triggerEvent(moveable, \"onDragStart\", params);\r\n        if (result !== false) {\r\n            datas.isDrag = true;\r\n            moveable.state.dragInfo = {\r\n                startRect: moveable.getRect(),\r\n                dist: [0, 0],\r\n            };\r\n        }\r\n        else {\r\n            gestos.draggable = null;\r\n            datas.isPinch = false;\r\n        }\r\n        return datas.isDrag ? params : false;\r\n    },\r\n    drag: function (moveable, e) {\r\n        if (!e) {\r\n            return;\r\n        }\r\n        resolveTransformEvent(moveable, e, \"translate\");\r\n        var datas = e.datas, parentEvent = e.parentEvent, parentFlag = e.parentFlag, isPinch = e.isPinch, deltaOffset = e.deltaOffset, useSnap = e.useSnap, isRequest = e.isRequest, isGroup = e.isGroup, parentThrottleDrag = e.parentThrottleDrag;\r\n        var distX = e.distX, distY = e.distY;\r\n        var isDrag = datas.isDrag, prevDist = datas.prevDist, prevBeforeDist = datas.prevBeforeDist, startValue = datas.startValue;\r\n        if (!isDrag) {\r\n            return;\r\n        }\r\n        if (deltaOffset) {\r\n            distX += deltaOffset[0];\r\n            distY += deltaOffset[1];\r\n        }\r\n        var props = moveable.props;\r\n        var parentMoveable = props.parentMoveable;\r\n        var throttleDrag = isGroup ? 0 : (props.throttleDrag || parentThrottleDrag || 0);\r\n        var throttleDragRotate = parentEvent ? 0 : (props.throttleDragRotate || 0);\r\n        var dragRotateRad = 0;\r\n        var isVerticalSnap = false;\r\n        var isVerticalBound = false;\r\n        var isHorizontalSnap = false;\r\n        var isHorizontalBound = false;\r\n        if (!parentEvent && throttleDragRotate > 0 && (distX || distY)) {\r\n            var startDragRotate = props.startDragRotate || 0;\r\n            var deg = throttle(startDragRotate + getRad([0, 0], [distX, distY]) * 180 / Math.PI, throttleDragRotate)\r\n                - startDragRotate;\r\n            var ry = distY * Math.abs(Math.cos((deg - 90) / 180 * Math.PI));\r\n            var rx = distX * Math.abs(Math.cos(deg / 180 * Math.PI));\r\n            var r = getDistSize([rx, ry]);\r\n            dragRotateRad = deg * Math.PI / 180;\r\n            distX = r * Math.cos(dragRotateRad);\r\n            distY = r * Math.sin(dragRotateRad);\r\n        }\r\n        if (!isPinch && !parentEvent && !parentFlag) {\r\n            var _a = __read(checkSnapBoundsDrag(moveable, distX, distY, throttleDragRotate, (!useSnap && isRequest) || deltaOffset, datas), 2), verticalInfo = _a[0], horizontalInfo = _a[1];\r\n            isVerticalSnap = verticalInfo.isSnap;\r\n            isVerticalBound = verticalInfo.isBound;\r\n            isHorizontalSnap = horizontalInfo.isSnap;\r\n            isHorizontalBound = horizontalInfo.isBound;\r\n            var verticalOffset = verticalInfo.offset;\r\n            var horizontalOffset = horizontalInfo.offset;\r\n            distX += verticalOffset;\r\n            distY += horizontalOffset;\r\n        }\r\n        var beforeTranslate = plus(getBeforeDragDist({ datas: datas, distX: distX, distY: distY }), startValue);\r\n        var translate = plus(getTransformDist({ datas: datas, distX: distX, distY: distY }), startValue);\r\n        throttleArray(translate, TINY_NUM);\r\n        throttleArray(beforeTranslate, TINY_NUM);\r\n        if (!throttleDragRotate) {\r\n            if (!isVerticalSnap && !isVerticalBound) {\r\n                translate[0] = throttle(translate[0], throttleDrag);\r\n                beforeTranslate[0] = throttle(beforeTranslate[0], throttleDrag);\r\n            }\r\n            if (!isHorizontalSnap && !isHorizontalBound) {\r\n                translate[1] = throttle(translate[1], throttleDrag);\r\n                beforeTranslate[1] = throttle(beforeTranslate[1], throttleDrag);\r\n            }\r\n        }\r\n        var beforeDist = minus(beforeTranslate, startValue);\r\n        var dist = minus(translate, startValue);\r\n        var delta = minus(dist, prevDist);\r\n        var beforeDelta = minus(beforeDist, prevBeforeDist);\r\n        datas.prevDist = dist;\r\n        datas.prevBeforeDist = beforeDist;\r\n        datas.passDelta = delta; //distX - (datas.passDistX || 0);\r\n        // datas.passDeltaY = distY - (datas.passDistY || 0);\r\n        datas.passDist = dist; //distX;\r\n        // datas.passDistY = distY;\r\n        var left = datas.left + beforeDist[0];\r\n        var top = datas.top + beforeDist[1];\r\n        var right = datas.right - beforeDist[0];\r\n        var bottom = datas.bottom - beforeDist[1];\r\n        var nextTransform = convertTransformFormat(datas, \"translate(\".concat(translate[0], \"px, \").concat(translate[1], \"px)\"), \"translate(\".concat(dist[0], \"px, \").concat(dist[1], \"px)\"));\r\n        fillOriginalTransform(e, nextTransform);\r\n        moveable.state.dragInfo.dist = parentEvent ? [0, 0] : dist;\r\n        if (!parentEvent && !parentMoveable && delta.every(function (num) { return !num; }) && beforeDelta.some(function (num) { return !num; })) {\r\n            return;\r\n        }\r\n        var _b = moveable.state, width = _b.width, height = _b.height;\r\n        var params = fillParams(moveable, e, __assign({ transform: nextTransform, dist: dist, delta: delta, translate: translate, beforeDist: beforeDist, beforeDelta: beforeDelta, beforeTranslate: beforeTranslate, left: left, top: top, right: right, bottom: bottom, width: width, height: height, isPinch: isPinch }, fillCSSObject({\r\n            transform: nextTransform,\r\n        }, e)));\r\n        !parentEvent && triggerEvent(moveable, \"onDrag\", params);\r\n        return params;\r\n    },\r\n    dragAfter: function (moveable, e) {\r\n        var datas = e.datas;\r\n        var deltaOffset = datas.deltaOffset;\r\n        if (deltaOffset[0] || deltaOffset[1]) {\r\n            datas.deltaOffset = [0, 0];\r\n            return this.drag(moveable, __assign(__assign({}, e), { deltaOffset: deltaOffset }));\r\n        }\r\n        return false;\r\n    },\r\n    dragEnd: function (moveable, e) {\r\n        var parentEvent = e.parentEvent, datas = e.datas;\r\n        moveable.state.dragInfo = null;\r\n        if (!datas.isDrag) {\r\n            return;\r\n        }\r\n        datas.isDrag = false;\r\n        var param = fillEndParams(moveable, e, {});\r\n        !parentEvent && triggerEvent(moveable, \"onDragEnd\", param);\r\n        return param;\r\n    },\r\n    dragGroupStart: function (moveable, e) {\r\n        var _a, _b;\r\n        var datas = e.datas, clientX = e.clientX, clientY = e.clientY;\r\n        var params = this.dragStart(moveable, e);\r\n        if (!params) {\r\n            return false;\r\n        }\r\n        var _c = triggerChildGesto(moveable, this, \"dragStart\", [\r\n            clientX || 0,\r\n            clientY || 0,\r\n        ], e, false, \"draggable\"), childEvents = _c.childEvents, eventParams = _c.eventParams;\r\n        var nextParams = __assign(__assign({}, params), { targets: moveable.props.targets, events: eventParams });\r\n        var result = triggerEvent(moveable, \"onDragGroupStart\", nextParams);\r\n        datas.isDrag = result !== false;\r\n        // find data.startValue and based on first child moveable\r\n        var startValue = (_b = (_a = childEvents[0]) === null || _a === void 0 ? void 0 : _a.datas.startValue) !== null && _b !== void 0 ? _b : [0, 0];\r\n        datas.throttleOffset = [startValue[0] % 1, startValue[1] % 1];\r\n        return datas.isDrag ? params : false;\r\n    },\r\n    dragGroup: function (moveable, e) {\r\n        var datas = e.datas;\r\n        if (!datas.isDrag) {\r\n            return;\r\n        }\r\n        var params = this.drag(moveable, __assign(__assign({}, e), { parentThrottleDrag: moveable.props.throttleDrag }));\r\n        var passDelta = e.datas.passDelta;\r\n        var eventParams = triggerChildGesto(moveable, this, \"drag\", passDelta, e, false, \"draggable\").eventParams;\r\n        if (!params) {\r\n            return;\r\n        }\r\n        var nextParams = __assign({ targets: moveable.props.targets, events: eventParams }, params);\r\n        triggerEvent(moveable, \"onDragGroup\", nextParams);\r\n        return nextParams;\r\n    },\r\n    dragGroupEnd: function (moveable, e) {\r\n        var isDrag = e.isDrag, datas = e.datas;\r\n        if (!datas.isDrag) {\r\n            return;\r\n        }\r\n        this.dragEnd(moveable, e);\r\n        var eventParams = triggerChildGesto(moveable, this, \"dragEnd\", [0, 0], e, false, \"draggable\").eventParams;\r\n        triggerEvent(moveable, \"onDragGroupEnd\", fillEndParams(moveable, e, {\r\n            targets: moveable.props.targets,\r\n            events: eventParams,\r\n        }));\r\n        return isDrag;\r\n    },\r\n    /**\r\n     * @method Moveable.Draggable#request\r\n     * @param {object} [e] - the draggable's request parameter\r\n     * @param {number} [e.x] - x position\r\n     * @param {number} [e.y] - y position\r\n     * @param {number} [e.deltaX] - X number to move\r\n     * @param {number} [e.deltaY] - Y number to move\r\n     * @return {Moveable.Requester} Moveable Requester\r\n     * @example\r\n\n     * // Instantly Request (requestStart - request - requestEnd)\r\n     * // Use Relative Value\r\n     * moveable.request(\"draggable\", { deltaX: 10, deltaY: 10 }, true);\r\n     * // Use Absolute Value\r\n     * moveable.request(\"draggable\", { x: 200, y: 100 }, true);\r\n     *\r\n     * // requestStart\r\n     * const requester = moveable.request(\"draggable\");\r\n     *\r\n     * // request\r\n     * // Use Relative Value\r\n     * requester.request({ deltaX: 10, deltaY: 10 });\r\n     * requester.request({ deltaX: 10, deltaY: 10 });\r\n     * requester.request({ deltaX: 10, deltaY: 10 });\r\n     * // Use Absolute Value\r\n     * moveable.request(\"draggable\", { x: 200, y: 100 });\r\n     * moveable.request(\"draggable\", { x: 220, y: 100 });\r\n     * moveable.request(\"draggable\", { x: 240, y: 100 });\r\n     *\r\n     * // requestEnd\r\n     * requester.requestEnd();\r\n     */\r\n    request: function (moveable) {\r\n        var datas = {};\r\n        var rect = moveable.getRect();\r\n        var distX = 0;\r\n        var distY = 0;\r\n        var useSnap = false;\r\n        return {\r\n            isControl: false,\r\n            requestStart: function (e) {\r\n                useSnap = e.useSnap;\r\n                return { datas: datas, useSnap: useSnap };\r\n            },\r\n            request: function (e) {\r\n                if (\"x\" in e) {\r\n                    distX = e.x - rect.left;\r\n                }\r\n                else if (\"deltaX\" in e) {\r\n                    distX += e.deltaX;\r\n                }\r\n                if (\"y\" in e) {\r\n                    distY = e.y - rect.top;\r\n                }\r\n                else if (\"deltaY\" in e) {\r\n                    distY += e.deltaY;\r\n                }\r\n                return { datas: datas, distX: distX, distY: distY, useSnap: useSnap };\r\n            },\r\n            requestEnd: function () {\r\n                return { datas: datas, isDrag: true, useSnap: useSnap };\r\n            },\r\n        };\r\n    },\r\n    unset: function (moveable) {\r\n        moveable.state.gestos.draggable = null;\r\n        moveable.state.dragInfo = null;\r\n    },\r\n};\r\n/**\r\n * Whether or not target can be dragged. (default: false)\r\n * @name Moveable.Draggable#draggable\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.draggable = true;\r\n */\r\n/**\r\n * throttle of x, y when drag.\r\n * @name Moveable.Draggable#throttleDrag\r\n * @default 0\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.throttleDrag = 1;\r\n */\r\n/**\r\n* throttle of angle of x, y when drag.\r\n* @name Moveable.Draggable#throttleDragRotate\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body);\r\n*\r\n* moveable.throttleDragRotate = 45;\r\n*/\r\n/**\r\n* start angle of throttleDragRotate of x, y when drag.\r\n* @name Moveable.Draggable#startDragRotate\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body);\r\n*\r\n* // 45, 135, 225, 315\r\n* moveable.throttleDragRotate = 90;\r\n* moveable.startDragRotate = 45;\r\n*/\r\n/**\r\n * When the drag starts, the dragStart event is called.\r\n * @memberof Moveable.Draggable\r\n * @event dragStart\r\n * @param {Moveable.Draggable.OnDragStart} - Parameters for the dragStart event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { draggable: true });\r\n * moveable.on(\"dragStart\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n */\r\n/**\r\n * When dragging, the drag event is called.\r\n * @memberof Moveable.Draggable\r\n * @event drag\r\n * @param {Moveable.Draggable.OnDrag} - Parameters for the drag event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { draggable: true });\r\n * moveable.on(\"drag\", ({ target, transform }) => {\r\n *     target.style.transform = transform;\r\n * });\r\n */\r\n/**\r\n * When the drag finishes, the dragEnd event is called.\r\n * @memberof Moveable.Draggable\r\n * @event dragEnd\r\n * @param {Moveable.Draggable.OnDragEnd} - Parameters for the dragEnd event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { draggable: true });\r\n * moveable.on(\"dragEnd\", ({ target, isDrag }) => {\r\n *     console.log(target, isDrag);\r\n * });\r\n */\r\n/**\r\n* When the group drag starts, the `dragGroupStart` event is called.\r\n* @memberof Moveable.Draggable\r\n* @event dragGroupStart\r\n* @param {Moveable.Draggable.OnDragGroupStart} - Parameters for the `dragGroupStart` event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n*     draggable: true\r\n* });\r\n* moveable.on(\"dragGroupStart\", ({ targets }) => {\r\n*     console.log(\"onDragGroupStart\", targets);\r\n* });\r\n*/\r\n/**\r\n* When the group drag, the `dragGroup` event is called.\r\n* @memberof Moveable.Draggable\r\n* @event dragGroup\r\n* @param {Moveable.Draggable.OnDragGroup} - Parameters for the `dragGroup` event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n*     draggable: true\r\n* });\r\n* moveable.on(\"dragGroup\", ({ targets, events }) => {\r\n*     console.log(\"onDragGroup\", targets);\r\n*     events.forEach(ev => {\r\n*          // drag event\r\n*          console.log(\"onDrag left, top\", ev.left, ev.top);\r\n*          // ev.target!.style.left = `${ev.left}px`;\r\n*          // ev.target!.style.top = `${ev.top}px`;\r\n*          console.log(\"onDrag translate\", ev.dist);\r\n*          ev.target!.style.transform = ev.transform;)\r\n*     });\r\n* });\r\n*/\r\n/**\r\n * When the group drag finishes, the `dragGroupEnd` event is called.\r\n * @memberof Moveable.Draggable\r\n * @event dragGroupEnd\r\n * @param {Moveable.Draggable.OnDragGroupEnd} - Parameters for the `dragGroupEnd` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n *     draggable: true\r\n * });\r\n * moveable.on(\"dragGroupEnd\", ({ targets, isDrag }) => {\r\n *     console.log(\"onDragGroupEnd\", targets, isDrag);\r\n * });\r\n */\n\nfunction getFixedDirectionInfo(startPositions, fixedDirection) {\r\n    var fixedPosition = getPosByDirection(startPositions, fixedDirection);\r\n    var fixedOffset = [0, 0];\r\n    return {\r\n        fixedPosition: fixedPosition,\r\n        fixedDirection: fixedDirection,\r\n        fixedOffset: fixedOffset,\r\n    };\r\n}\r\nfunction getOffsetFixedDirectionInfo(state, fixedDirection) {\r\n    // for start\r\n    var allMatrix = state.allMatrix, is3d = state.is3d, width = state.width, height = state.height;\r\n    var n = is3d ? 4 : 3;\r\n    var nextFixedOffset = [\r\n        width / 2 * (1 + fixedDirection[0]),\r\n        height / 2 * (1 + fixedDirection[1]),\r\n    ];\r\n    var fixedPosition = calculatePosition(allMatrix, nextFixedOffset, n);\r\n    var fixedOffset = [0, 0];\r\n    return {\r\n        fixedPosition: fixedPosition,\r\n        fixedDirection: fixedDirection,\r\n        fixedOffset: fixedOffset,\r\n    };\r\n}\r\nfunction getOffsetFixedPositionInfo(state, offsetFixedPosition) {\r\n    // for start\r\n    var allMatrix = state.allMatrix, is3d = state.is3d, width = state.width, height = state.height;\r\n    var n = is3d ? 4 : 3;\r\n    var fixedDirection = getDirectionByPos(offsetFixedPosition, width, height);\r\n    var nextFixedPosition = calculatePosition(allMatrix, offsetFixedPosition, n);\r\n    var fixedOffset = [\r\n        width ? 0 : offsetFixedPosition[0],\r\n        height ? 0 : offsetFixedPosition[1],\r\n    ];\r\n    return {\r\n        fixedPosition: nextFixedPosition,\r\n        fixedDirection: fixedDirection,\r\n        fixedOffset: fixedOffset,\r\n    };\r\n}\n\n/**\r\n * @namespace Resizable\r\n * @memberof Moveable\r\n * @description Resizable indicates whether the target's width and height can be increased or decreased.\r\n */\r\nvar directionCondition$2 = getDirectionCondition(\"resizable\");\r\nvar Resizable = {\r\n    name: \"resizable\",\r\n    ableGroup: \"size\",\r\n    canPinch: true,\r\n    props: [\r\n        \"resizable\",\r\n        \"throttleResize\",\r\n        \"renderDirections\",\r\n        \"displayAroundControls\",\r\n        \"keepRatio\",\r\n        \"resizeFormat\",\r\n        \"keepRatioFinally\",\r\n        \"edge\",\r\n        \"checkResizableError\",\r\n    ],\r\n    events: [\r\n        \"resizeStart\",\r\n        \"beforeResize\",\r\n        \"resize\",\r\n        \"resizeEnd\",\r\n        \"resizeGroupStart\",\r\n        \"beforeResizeGroup\",\r\n        \"resizeGroup\",\r\n        \"resizeGroupEnd\",\r\n    ],\r\n    render: getRenderDirections(\"resizable\"),\r\n    dragControlCondition: directionCondition$2,\r\n    viewClassName: getDirectionViewClassName(\"resizable\"),\r\n    dragControlStart: function (moveable, e) {\r\n        var _a;\r\n        var inputEvent = e.inputEvent, isPinch = e.isPinch, isGroup = e.isGroup, parentDirection = e.parentDirection, parentGesto = e.parentGesto, datas = e.datas, parentFixedDirection = e.parentFixedDirection, parentEvent = e.parentEvent;\r\n        var direction = getTotalDirection(parentDirection, isPinch, inputEvent, datas);\r\n        var state = moveable.state;\r\n        var target = state.target, width = state.width, height = state.height, gestos = state.gestos;\r\n        if (!direction || !target) {\r\n            return false;\r\n        }\r\n        if (gestos.resizable) {\r\n            return false;\r\n        }\r\n        gestos.resizable = parentGesto || moveable.controlGesto;\r\n        !isPinch && setDragStart(moveable, e);\r\n        datas.datas = {};\r\n        datas.direction = direction;\r\n        datas.startOffsetWidth = width;\r\n        datas.startOffsetHeight = height;\r\n        datas.prevWidth = 0;\r\n        datas.prevHeight = 0;\r\n        datas.minSize = [0, 0];\r\n        datas.startWidth = state.inlineCSSWidth || state.cssWidth;\r\n        datas.startHeight = state.inlineCSSHeight || state.cssHeight;\r\n        datas.maxSize = [Infinity, Infinity];\r\n        if (!isGroup) {\r\n            datas.minSize = [\r\n                state.minOffsetWidth,\r\n                state.minOffsetHeight,\r\n            ];\r\n            datas.maxSize = [\r\n                state.maxOffsetWidth,\r\n                state.maxOffsetHeight,\r\n            ];\r\n        }\r\n        var transformOrigin = moveable.props.transformOrigin || \"% %\";\r\n        datas.transformOrigin = transformOrigin && isString(transformOrigin)\r\n            ? transformOrigin.split(\" \")\r\n            : transformOrigin;\r\n        datas.startOffsetMatrix = state.offsetMatrix;\r\n        datas.startTransformOrigin = state.transformOrigin;\r\n        datas.isWidth = (_a = e === null || e === void 0 ? void 0 : e.parentIsWidth) !== null && _a !== void 0 ? _a : ((!direction[0] && !direction[1]) || direction[0] || !direction[1]);\r\n        function setRatio(ratio) {\r\n            datas.ratio = ratio && isFinite(ratio) ? ratio : 0;\r\n        }\r\n        datas.startPositions = getAbsolutePosesByState(moveable.state);\r\n        function setFixedDirection(fixedDirection) {\r\n            var result = getFixedDirectionInfo(datas.startPositions, fixedDirection);\r\n            datas.fixedDirection = result.fixedDirection;\r\n            datas.fixedPosition = result.fixedPosition;\r\n            datas.fixedOffset = result.fixedOffset;\r\n        }\r\n        function setFixedPosition(fixedPosition) {\r\n            var result = getOffsetFixedPositionInfo(moveable.state, fixedPosition);\r\n            datas.fixedDirection = result.fixedDirection;\r\n            datas.fixedPosition = result.fixedPosition;\r\n            datas.fixedOffset = result.fixedOffset;\r\n        }\r\n        function setMin(minSize) {\r\n            datas.minSize = [\r\n                convertUnitSize(\"\".concat(minSize[0]), 0) || 0,\r\n                convertUnitSize(\"\".concat(minSize[1]), 0) || 0,\r\n            ];\r\n        }\r\n        function setMax(maxSize) {\r\n            var nextMaxSize = [\r\n                maxSize[0] || Infinity,\r\n                maxSize[1] || Infinity,\r\n            ];\r\n            if (!isNumber(nextMaxSize[0]) || isFinite(nextMaxSize[0])) {\r\n                nextMaxSize[0] = convertUnitSize(\"\".concat(nextMaxSize[0]), 0) || Infinity;\r\n            }\r\n            if (!isNumber(nextMaxSize[1]) || isFinite(nextMaxSize[1])) {\r\n                nextMaxSize[1] = convertUnitSize(\"\".concat(nextMaxSize[1]), 0) || Infinity;\r\n            }\r\n            datas.maxSize = nextMaxSize;\r\n        }\r\n        setRatio(width / height);\r\n        setFixedDirection(parentFixedDirection || [-direction[0], -direction[1]]);\r\n        datas.setFixedDirection = setFixedDirection;\r\n        datas.setFixedPosition = setFixedPosition;\r\n        datas.setMin = setMin;\r\n        datas.setMax = setMax;\r\n        var params = fillParams(moveable, e, {\r\n            direction: direction,\r\n            startRatio: datas.ratio,\r\n            set: function (_a) {\r\n                var _b = __read(_a, 2), startWidth = _b[0], startHeight = _b[1];\r\n                datas.startWidth = startWidth;\r\n                datas.startHeight = startHeight;\r\n            },\r\n            setMin: setMin,\r\n            setMax: setMax,\r\n            setRatio: setRatio,\r\n            setFixedDirection: setFixedDirection,\r\n            setFixedPosition: setFixedPosition,\r\n            setOrigin: function (origin) {\r\n                datas.transformOrigin = origin;\r\n            },\r\n            dragStart: Draggable.dragStart(moveable, new CustomGesto().dragStart([0, 0], e)),\r\n        });\r\n        var result = parentEvent || triggerEvent(moveable, \"onResizeStart\", params);\r\n        datas.startFixedDirection = datas.fixedDirection;\r\n        datas.startFixedPosition = datas.fixedPosition;\r\n        if (result !== false) {\r\n            datas.isResize = true;\r\n            moveable.state.snapRenderInfo = {\r\n                request: e.isRequest,\r\n                direction: direction,\r\n            };\r\n        }\r\n        return datas.isResize ? params : false;\r\n    },\r\n    dragControl: function (moveable, e) {\r\n        var _a;\r\n        var datas = e.datas, parentFlag = e.parentFlag, isPinch = e.isPinch, parentKeepRatio = e.parentKeepRatio, dragClient = e.dragClient, parentDist = e.parentDist, useSnap = e.useSnap, isRequest = e.isRequest, isGroup = e.isGroup, parentEvent = e.parentEvent, resolveMatrix = e.resolveMatrix;\r\n        var isResize = datas.isResize, transformOrigin = datas.transformOrigin, startWidth = datas.startWidth, startHeight = datas.startHeight, prevWidth = datas.prevWidth, prevHeight = datas.prevHeight, minSize = datas.minSize, maxSize = datas.maxSize, ratio = datas.ratio, startOffsetWidth = datas.startOffsetWidth, startOffsetHeight = datas.startOffsetHeight, isWidth = datas.isWidth;\r\n        if (!isResize) {\r\n            return;\r\n        }\r\n        if (resolveMatrix) {\r\n            var is3d = moveable.state.is3d;\r\n            var startOffsetMatrix = datas.startOffsetMatrix, startTransformOrigin = datas.startTransformOrigin;\r\n            var n = is3d ? 4 : 3;\r\n            var targetMatrix = parseMat(getNextTransforms(e));\r\n            var targetN = Math.sqrt(targetMatrix.length);\r\n            if (n !== targetN) {\r\n                targetMatrix = convertDimension(targetMatrix, targetN, n);\r\n            }\r\n            var nextAllMatrix = getNextMatrix(startOffsetMatrix, targetMatrix, startTransformOrigin, n);\r\n            var poses = calculatePoses(nextAllMatrix, startOffsetWidth, startOffsetHeight, n);\r\n            datas.startPositions = poses;\r\n            datas.nextTargetMatrix = targetMatrix;\r\n            datas.nextAllMatrix = nextAllMatrix;\r\n        }\r\n        var props = getProps(moveable.props, \"resizable\");\r\n        var resizeFormat = props.resizeFormat, _b = props.throttleResize, throttleResize = _b === void 0 ? parentFlag ? 0 : 1 : _b, parentMoveable = props.parentMoveable, keepRatioFinally = props.keepRatioFinally;\r\n        var direction = datas.direction;\r\n        var sizeDirection = direction;\r\n        var distWidth = 0;\r\n        var distHeight = 0;\r\n        if (!direction[0] && !direction[1]) {\r\n            sizeDirection = [1, 1];\r\n        }\r\n        var keepRatio = (ratio && (parentKeepRatio != null ? parentKeepRatio : props.keepRatio)) || false;\r\n        function getNextBoundingSize() {\r\n            var fixedDirection = datas.fixedDirection;\r\n            var nextSize = getOffsetSizeDist(sizeDirection, keepRatio, datas, e);\r\n            distWidth = nextSize.distWidth;\r\n            distHeight = nextSize.distHeight;\r\n            var nextWidth = (sizeDirection[0] - fixedDirection[0]) || keepRatio\r\n                ? Math.max(startOffsetWidth + distWidth, TINY_NUM) : startOffsetWidth;\r\n            var nextHeight = (sizeDirection[1] - fixedDirection[1]) || keepRatio\r\n                ? Math.max(startOffsetHeight + distHeight, TINY_NUM) : startOffsetHeight;\r\n            if (keepRatio && startOffsetWidth && startOffsetHeight) {\r\n                // startOffsetWidth : startOffsetHeight = nextWidth : nextHeight\r\n                if (isWidth) {\r\n                    nextHeight = nextWidth / ratio;\r\n                }\r\n                else {\r\n                    nextWidth = nextHeight * ratio;\r\n                }\r\n            }\r\n            return [nextWidth, nextHeight];\r\n        }\r\n        var _c = __read(getNextBoundingSize(), 2), boundingWidth = _c[0], boundingHeight = _c[1];\r\n        if (!parentEvent) {\r\n            datas.setFixedDirection(datas.fixedDirection);\r\n            triggerEvent(moveable, \"onBeforeResize\", fillParams(moveable, e, {\r\n                startFixedDirection: datas.startFixedDirection,\r\n                startFixedPosition: datas.startFixedPosition,\r\n                setFixedDirection: function (nextFixedDirection) {\r\n                    var _a;\r\n                    datas.setFixedDirection(nextFixedDirection);\r\n                    _a = __read(getNextBoundingSize(), 2), boundingWidth = _a[0], boundingHeight = _a[1];\r\n                    return [boundingWidth, boundingHeight];\r\n                },\r\n                setFixedPosition: function (nextFixedPosition) {\r\n                    var _a;\r\n                    datas.setFixedPosition(nextFixedPosition);\r\n                    _a = __read(getNextBoundingSize(), 2), boundingWidth = _a[0], boundingHeight = _a[1];\r\n                    return [boundingWidth, boundingHeight];\r\n                },\r\n                boundingWidth: boundingWidth,\r\n                boundingHeight: boundingHeight,\r\n                setSize: function (size) {\r\n                    var _a;\r\n                    _a = __read(size, 2), boundingWidth = _a[0], boundingHeight = _a[1];\r\n                },\r\n            }, true));\r\n        }\r\n        var fixedPosition = dragClient;\r\n        if (!dragClient) {\r\n            if (!parentFlag && isPinch) {\r\n                fixedPosition = getAbsolutePosition(moveable, [0, 0]);\r\n            }\r\n            else {\r\n                fixedPosition = datas.fixedPosition;\r\n            }\r\n        }\r\n        var snapDist = [0, 0];\r\n        if (!isPinch) {\r\n            snapDist = checkSnapResize(moveable, boundingWidth, boundingHeight, direction, fixedPosition, !useSnap && isRequest, datas);\r\n        }\r\n        if (parentDist) {\r\n            !parentDist[0] && (snapDist[0] = 0);\r\n            !parentDist[1] && (snapDist[1] = 0);\r\n        }\r\n        function computeSize() {\r\n            var _a;\r\n            if (resizeFormat) {\r\n                _a = __read(resizeFormat([boundingWidth, boundingHeight]), 2), boundingWidth = _a[0], boundingHeight = _a[1];\r\n            }\r\n            boundingWidth = throttle(boundingWidth, throttleResize);\r\n            boundingHeight = throttle(boundingHeight, throttleResize);\r\n        }\r\n        if (keepRatio) {\r\n            if (sizeDirection[0] && sizeDirection[1] && snapDist[0] && snapDist[1]) {\r\n                if (abs(snapDist[0]) > abs(snapDist[1])) {\r\n                    snapDist[1] = 0;\r\n                }\r\n                else {\r\n                    snapDist[0] = 0;\r\n                }\r\n            }\r\n            var isNoSnap = !snapDist[0] && !snapDist[1];\r\n            if (isNoSnap) {\r\n                // pre-compute before maintaining the ratio\r\n                computeSize();\r\n            }\r\n            if ((sizeDirection[0] && !sizeDirection[1])\r\n                || (snapDist[0] && !snapDist[1])\r\n                || (isNoSnap && isWidth)) {\r\n                boundingWidth += snapDist[0];\r\n                boundingHeight = boundingWidth / ratio;\r\n            }\r\n            else if ((!sizeDirection[0] && sizeDirection[1])\r\n                || (!snapDist[0] && snapDist[1])\r\n                || (isNoSnap && !isWidth)) {\r\n                boundingHeight += snapDist[1];\r\n                boundingWidth = boundingHeight * ratio;\r\n            }\r\n        }\r\n        else {\r\n            boundingWidth += snapDist[0];\r\n            boundingHeight += snapDist[1];\r\n            boundingWidth = Math.max(0, boundingWidth);\r\n            boundingHeight = Math.max(0, boundingHeight);\r\n        }\r\n        _a = __read(calculateBoundSize([boundingWidth, boundingHeight], minSize, maxSize, keepRatio ? ratio : false), 2), boundingWidth = _a[0], boundingHeight = _a[1];\r\n        computeSize();\r\n        if (keepRatio && (isGroup || keepRatioFinally)) {\r\n            if (isWidth) {\r\n                boundingHeight = boundingWidth / ratio;\r\n            }\r\n            else {\r\n                boundingWidth = boundingHeight * ratio;\r\n            }\r\n        }\r\n        distWidth = boundingWidth - startOffsetWidth;\r\n        distHeight = boundingHeight - startOffsetHeight;\r\n        var delta = [distWidth - prevWidth, distHeight - prevHeight];\r\n        datas.prevWidth = distWidth;\r\n        datas.prevHeight = distHeight;\r\n        var inverseDelta = getResizeDist(moveable, boundingWidth, boundingHeight, fixedPosition, transformOrigin, datas);\r\n        if (!parentMoveable && delta.every(function (num) { return !num; }) && inverseDelta.every(function (num) { return !num; })) {\r\n            return;\r\n        }\r\n        var drag = Draggable.drag(moveable, setCustomDrag(e, moveable.state, inverseDelta, !!isPinch, false, \"draggable\"));\r\n        var transform = drag.transform;\r\n        var nextWidth = startWidth + distWidth;\r\n        var nextHeight = startHeight + distHeight;\r\n        var params = fillParams(moveable, e, __assign({ width: nextWidth, height: nextHeight, offsetWidth: Math.round(boundingWidth), offsetHeight: Math.round(boundingHeight), startRatio: ratio, boundingWidth: boundingWidth, boundingHeight: boundingHeight, direction: direction, dist: [distWidth, distHeight], delta: delta, isPinch: !!isPinch, drag: drag }, fillAfterTransform({\r\n            style: {\r\n                width: \"\".concat(nextWidth, \"px\"),\r\n                height: \"\".concat(nextHeight, \"px\"),\r\n            },\r\n            transform: transform,\r\n        }, drag, e)));\r\n        !parentEvent && triggerEvent(moveable, \"onResize\", params);\r\n        return params;\r\n    },\r\n    dragControlAfter: function (moveable, e) {\r\n        var datas = e.datas;\r\n        var isResize = datas.isResize, startOffsetWidth = datas.startOffsetWidth, startOffsetHeight = datas.startOffsetHeight, prevWidth = datas.prevWidth, prevHeight = datas.prevHeight;\r\n        if (!isResize || moveable.props.checkResizableError === false) {\r\n            return;\r\n        }\r\n        var _a = moveable.state, width = _a.width, height = _a.height;\r\n        var errorWidth = width - (startOffsetWidth + prevWidth);\r\n        var errorHeight = height - (startOffsetHeight + prevHeight);\r\n        var isErrorWidth = abs(errorWidth) > 3;\r\n        var isErrorHeight = abs(errorHeight) > 3;\r\n        if (isErrorWidth) {\r\n            datas.startWidth += errorWidth;\r\n            datas.startOffsetWidth += errorWidth;\r\n            datas.prevWidth += errorWidth;\r\n        }\r\n        if (isErrorHeight) {\r\n            datas.startHeight += errorHeight;\r\n            datas.startOffsetHeight += errorHeight;\r\n            datas.prevHeight += errorHeight;\r\n        }\r\n        if (isErrorWidth || isErrorHeight) {\r\n            return this.dragControl(moveable, e);\r\n        }\r\n    },\r\n    dragControlEnd: function (moveable, e) {\r\n        var datas = e.datas, parentEvent = e.parentEvent;\r\n        if (!datas.isResize) {\r\n            return;\r\n        }\r\n        datas.isResize = false;\r\n        var params = fillEndParams(moveable, e, {});\r\n        !parentEvent && triggerEvent(moveable, \"onResizeEnd\", params);\r\n        return params;\r\n    },\r\n    dragGroupControlCondition: directionCondition$2,\r\n    dragGroupControlStart: function (moveable, e) {\r\n        var datas = e.datas;\r\n        var params = this.dragControlStart(moveable, __assign(__assign({}, e), { isGroup: true }));\r\n        if (!params) {\r\n            return false;\r\n        }\r\n        var originalEvents = fillChildEvents(moveable, \"resizable\", e);\r\n        var parentStartOffsetWidth = datas.startOffsetWidth, parentStartOffsetHeight = datas.startOffsetHeight;\r\n        function updateGroupMin() {\r\n            var originalMinSize = datas.minSize;\r\n            originalEvents.forEach(function (ev) {\r\n                var _a = ev.datas, childMinSize = _a.minSize, childStartOffsetWidth = _a.startOffsetWidth, childStartOffsetHeight = _a.startOffsetHeight;\r\n                var parentMinWidth = parentStartOffsetWidth\r\n                    * (childStartOffsetWidth ? childMinSize[0] / childStartOffsetWidth : 0);\r\n                var parentMinHeight = parentStartOffsetHeight\r\n                    * (childStartOffsetHeight ? childMinSize[1] / childStartOffsetHeight : 0);\r\n                originalMinSize[0] = Math.max(originalMinSize[0], parentMinWidth);\r\n                originalMinSize[1] = Math.max(originalMinSize[1], parentMinHeight);\r\n            });\r\n        }\r\n        function updateGroupMax() {\r\n            var originalMaxSize = datas.maxSize;\r\n            originalEvents.forEach(function (ev) {\r\n                var _a = ev.datas, childMaxSize = _a.maxSize, childStartOffsetWidth = _a.startOffsetWidth, childStartOffsetHeight = _a.startOffsetHeight;\r\n                var parentMaxWidth = parentStartOffsetWidth\r\n                    * (childStartOffsetWidth ? childMaxSize[0] / childStartOffsetWidth : 0);\r\n                var parentMaxHeight = parentStartOffsetHeight\r\n                    * (childStartOffsetHeight ? childMaxSize[1] / childStartOffsetHeight : 0);\r\n                originalMaxSize[0] = Math.min(originalMaxSize[0], parentMaxWidth);\r\n                originalMaxSize[1] = Math.min(originalMaxSize[1], parentMaxHeight);\r\n            });\r\n        }\r\n        var events = triggerChildAbles(moveable, this, \"dragControlStart\", e, function (child, ev) {\r\n            return startChildDist(moveable, child, datas, ev);\r\n        });\r\n        updateGroupMin();\r\n        updateGroupMax();\r\n        var setFixedDirection = function (fixedDirection) {\r\n            params.setFixedDirection(fixedDirection);\r\n            events.forEach(function (ev, i) {\r\n                ev.setFixedDirection(fixedDirection);\r\n                startChildDist(moveable, ev.moveable, datas, originalEvents[i]);\r\n            });\r\n        };\r\n        datas.setFixedDirection = setFixedDirection;\r\n        var nextParams = __assign(__assign({}, params), { targets: moveable.props.targets, events: events.map(function (ev) {\r\n                return __assign(__assign({}, ev), { setMin: function (minSize) {\r\n                        ev.setMin(minSize);\r\n                        updateGroupMin();\r\n                    }, setMax: function (maxSize) {\r\n                        ev.setMax(maxSize);\r\n                        updateGroupMax();\r\n                    } });\r\n            }), setFixedDirection: setFixedDirection, setMin: function (minSize) {\r\n                params.setMin(minSize);\r\n                updateGroupMin();\r\n            }, setMax: function (maxSize) {\r\n                params.setMax(maxSize);\r\n                updateGroupMax();\r\n            } });\r\n        var result = triggerEvent(moveable, \"onResizeGroupStart\", nextParams);\r\n        datas.isResize = result !== false;\r\n        return datas.isResize ? params : false;\r\n    },\r\n    dragGroupControl: function (moveable, e) {\r\n        var datas = e.datas;\r\n        if (!datas.isResize) {\r\n            return;\r\n        }\r\n        var props = getProps(moveable.props, \"resizable\");\r\n        catchEvent(moveable, \"onBeforeResize\", function (parentEvent) {\r\n            triggerEvent(moveable, \"onBeforeResizeGroup\", fillParams(moveable, e, __assign(__assign({}, parentEvent), { targets: props.targets }), true));\r\n        });\r\n        var params = this.dragControl(moveable, __assign(__assign({}, e), { isGroup: true }));\r\n        if (!params) {\r\n            return;\r\n        }\r\n        var boundingWidth = params.boundingWidth, boundingHeight = params.boundingHeight, dist = params.dist;\r\n        var keepRatio = props.keepRatio;\r\n        var parentScale = [\r\n            boundingWidth / (boundingWidth - dist[0]),\r\n            boundingHeight / (boundingHeight - dist[1]),\r\n        ];\r\n        var fixedPosition = datas.fixedPosition;\r\n        var events = triggerChildAbles(moveable, this, \"dragControl\", e, function (_, ev) {\r\n            var _a = __read(calculate(createRotateMatrix(moveable.rotation / 180 * Math.PI, 3), [\r\n                ev.datas.originalX * parentScale[0],\r\n                ev.datas.originalY * parentScale[1],\r\n                1,\r\n            ], 3), 2), clientX = _a[0], clientY = _a[1];\r\n            return __assign(__assign({}, ev), { parentDist: null, parentScale: parentScale, dragClient: plus(fixedPosition, [clientX, clientY]), parentKeepRatio: keepRatio });\r\n        });\r\n        var nextParams = __assign({ targets: props.targets, events: events }, params);\r\n        triggerEvent(moveable, \"onResizeGroup\", nextParams);\r\n        return nextParams;\r\n    },\r\n    dragGroupControlEnd: function (moveable, e) {\r\n        var isDrag = e.isDrag, datas = e.datas;\r\n        if (!datas.isResize) {\r\n            return;\r\n        }\r\n        this.dragControlEnd(moveable, e);\r\n        var events = triggerChildAbles(moveable, this, \"dragControlEnd\", e);\r\n        var nextParams = fillEndParams(moveable, e, {\r\n            targets: moveable.props.targets,\r\n            events: events,\r\n        });\r\n        triggerEvent(moveable, \"onResizeGroupEnd\", nextParams);\r\n        return isDrag;\r\n    },\r\n    /**\r\n     * @method Moveable.Resizable#request\r\n     * @param {Moveable.Resizable.ResizableRequestParam} e - the Resizable's request parameter\r\n     * @return {Moveable.Requester} Moveable Requester\r\n     * @example\r\n\n     * // Instantly Request (requestStart - request - requestEnd)\r\n     * // Use Relative Value\r\n     * moveable.request(\"resizable\", { deltaWidth: 10, deltaHeight: 10 }, true);\r\n     *\r\n     * // Use Absolute Value\r\n     * moveable.request(\"resizable\", { offsetWidth: 100, offsetHeight: 100 }, true);\r\n     *\r\n     * // requestStart\r\n     * const requester = moveable.request(\"resizable\");\r\n     *\r\n     * // request\r\n     * // Use Relative Value\r\n     * requester.request({ deltaWidth: 10, deltaHeight: 10 });\r\n     * requester.request({ deltaWidth: 10, deltaHeight: 10 });\r\n     * requester.request({ deltaWidth: 10, deltaHeight: 10 });\r\n     *\r\n     * // Use Absolute Value\r\n     * moveable.request(\"resizable\", { offsetWidth: 100, offsetHeight: 100 });\r\n     * moveable.request(\"resizable\", { offsetWidth: 110, offsetHeight: 100 });\r\n     * moveable.request(\"resizable\", { offsetWidth: 120, offsetHeight: 100 });\r\n     *\r\n     * // requestEnd\r\n     * requester.requestEnd();\r\n     */\r\n    request: function (moveable) {\r\n        var datas = {};\r\n        var distWidth = 0;\r\n        var distHeight = 0;\r\n        var useSnap = false;\r\n        var rect = moveable.getRect();\r\n        return {\r\n            isControl: true,\r\n            requestStart: function (e) {\r\n                var _a;\r\n                useSnap = e.useSnap;\r\n                return {\r\n                    datas: datas,\r\n                    parentDirection: e.direction || [1, 1],\r\n                    parentIsWidth: (_a = e === null || e === void 0 ? void 0 : e.horizontal) !== null && _a !== void 0 ? _a : true,\r\n                    useSnap: useSnap,\r\n                };\r\n            },\r\n            request: function (e) {\r\n                if (\"offsetWidth\" in e) {\r\n                    distWidth = e.offsetWidth - rect.offsetWidth;\r\n                }\r\n                else if (\"deltaWidth\" in e) {\r\n                    distWidth += e.deltaWidth;\r\n                }\r\n                if (\"offsetHeight\" in e) {\r\n                    distHeight = e.offsetHeight - rect.offsetHeight;\r\n                }\r\n                else if (\"deltaHeight\" in e) {\r\n                    distHeight += e.deltaHeight;\r\n                }\r\n                return {\r\n                    datas: datas,\r\n                    parentDist: [distWidth, distHeight],\r\n                    parentKeepRatio: e.keepRatio,\r\n                    useSnap: useSnap,\r\n                };\r\n            },\r\n            requestEnd: function () {\r\n                return { datas: datas, isDrag: true, useSnap: useSnap };\r\n            },\r\n        };\r\n    },\r\n    unset: function (moveable) {\r\n        moveable.state.gestos.resizable = null;\r\n    },\r\n};\r\n/**\r\n * Whether or not target can be resized.\r\n * @name Moveable.Resizable#resizable\r\n * @default false\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     resizable: false,\r\n * });\r\n *\r\n * moveable.resizable = true;\r\n */\r\n/**\r\n * throttle of width, height when resize. If throttleResize is set to less than 1, the target may shake.\r\n * @name Moveable.Resizable#throttleResize\r\n * @default 1\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *   resizable: true,\r\n *   throttleResize: 1,\r\n * });\r\n *\r\n * moveable.throttleResize = 0;\r\n */\r\n/**\r\n * When resize or scale, keeps a ratio of the width, height.\r\n * @name Moveable.Resizable#keepRatio\r\n * @default false\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *   resizable: true,\r\n * });\r\n *\r\n * moveable.keepRatio = true;\r\n */\r\n/**\r\n * Set directions to show the control box.\r\n * @name Moveable.Resizable#renderDirections\r\n * @default [\"n\", \"nw\", \"ne\", \"s\", \"se\", \"sw\", \"e\", \"w\"]\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *   resizable: true,\r\n *   renderDirections: [\"n\", \"nw\", \"ne\", \"s\", \"se\", \"sw\", \"e\", \"w\"],\r\n * });\r\n *\r\n * moveable.renderDirections = [\"nw\", \"ne\", \"sw\", \"se\"];\r\n */\r\n/**\r\n * Function to convert size for resize\r\n * @name Moveable.Resizable#resizeFormat\r\n * @default oneself\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *   resizable: true,\r\n *   resizeFormat: v => v,\r\n * });\r\n *\r\n * moveable.resizeFormat = (size: number[]) => ([Math.trunc(size[0]), Math.trunc(size[1])];\r\n */\r\n/**\r\n * When the resize starts, the resizeStart event is called.\r\n * @memberof Moveable.Resizable\r\n * @event resizeStart\r\n * @param {Moveable.Resizable.OnResizeStart} - Parameters for the resizeStart event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { resizable: true });\r\n * moveable.on(\"resizeStart\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n */\r\n/**\r\n * When resizing, `beforeResize` is called before `resize` occurs. In `beforeResize`, you can get and set the pre-value before resizing.\r\n * @memberof Moveable.Resizable\r\n * @event beforeResize\r\n * @param {Moveable.Resizable.OnBeforeResize} - Parameters for the `beforeResize` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { resizable: true });\r\n * moveable.on(\"beforeResize\", ({ setFixedDirection }) => {\r\n *     if (shiftKey) {\r\n *        setFixedDirection([0, 0]);\r\n *     }\r\n * });\r\n * moveable.on(\"resize\", ({ target, width, height, drag }) => {\r\n *     target.style.width = `${width}px`;\r\n *     target.style.height = `${height}px`;\r\n *     target.style.transform = drag.transform;\r\n * });\r\n */\r\n/**\r\n * When resizing, the resize event is called.\r\n * @memberof Moveable.Resizable\r\n * @event resize\r\n * @param {Moveable.Resizable.OnResize} - Parameters for the resize event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { resizable: true });\r\n * moveable.on(\"resize\", ({ target, width, height }) => {\r\n *     target.style.width = `${e.width}px`;\r\n *     target.style.height = `${e.height}px`;\r\n * });\r\n */\r\n/**\r\n * When the resize finishes, the resizeEnd event is called.\r\n * @memberof Moveable.Resizable\r\n * @event resizeEnd\r\n * @param {Moveable.Resizable.OnResizeEnd} - Parameters for the resizeEnd event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { resizable: true });\r\n * moveable.on(\"resizeEnd\", ({ target, isDrag }) => {\r\n *     console.log(target, isDrag);\r\n * });\r\n */\r\n/**\r\n* When the group resize starts, the `resizeGroupStart` event is called.\r\n* @memberof Moveable.Resizable\r\n* @event resizeGroupStart\r\n* @param {Moveable.Resizable.OnResizeGroupStart} - Parameters for the `resizeGroupStart` event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n*     resizable: true\r\n* });\r\n* moveable.on(\"resizeGroupStart\", ({ targets }) => {\r\n*     console.log(\"onResizeGroupStart\", targets);\r\n* });\r\n*/\r\n/**\r\n* When the group resize, the `resizeGroup` event is called.\r\n* @memberof Moveable.Resizable\r\n* @event resizeGroup\r\n* @param {Moveable.Resizable.onResizeGroup} - Parameters for the `resizeGroup` event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n*     resizable: true\r\n* });\r\n* moveable.on(\"resizeGroup\", ({ targets, events }) => {\r\n*     console.log(\"onResizeGroup\", targets);\r\n*     events.forEach(ev => {\r\n*         const offset = [\r\n*             direction[0] < 0 ? -ev.delta[0] : 0,\r\n*             direction[1] < 0 ? -ev.delta[1] : 0,\r\n*         ];\r\n*         // ev.drag is a drag event that occurs when the group resize.\r\n*         const left = offset[0] + ev.drag.beforeDist[0];\r\n*         const top = offset[1] + ev.drag.beforeDist[1];\r\n*         const width = ev.width;\r\n*         const top = ev.top;\r\n*     });\r\n* });\r\n*/\r\n/**\r\n * When the group resize finishes, the `resizeGroupEnd` event is called.\r\n * @memberof Moveable.Resizable\r\n * @event resizeGroupEnd\r\n * @param {Moveable.Resizable.OnResizeGroupEnd} - Parameters for the `resizeGroupEnd` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n *     resizable: true\r\n * });\r\n * moveable.on(\"resizeGroupEnd\", ({ targets, isDrag }) => {\r\n *     console.log(\"onResizeGroupEnd\", targets, isDrag);\r\n * });\r\n */\n\n/**\r\n * @namespace Rotatable\r\n * @memberof Moveable\r\n * @description Rotatable indicates whether the target can be rotated.\r\n */\r\nfunction setRotateStartInfo(moveable, datas, clientX, clientY, rect) {\r\n    var groupable = moveable.props.groupable;\r\n    var state = moveable.state;\r\n    var n = state.is3d ? 4 : 3;\r\n    var origin = datas.origin;\r\n    var nextOrigin = calculatePosition(moveable.state.rootMatrix, \r\n    // TO-DO #710\r\n    minus([origin[0], origin[1]], groupable ? [0, 0] : [state.left, state.top]), n);\r\n    var startAbsoluteOrigin = plus([rect.left, rect.top], nextOrigin);\r\n    datas.startAbsoluteOrigin = startAbsoluteOrigin;\r\n    datas.prevDeg = getRad(startAbsoluteOrigin, [clientX, clientY]) / Math.PI * 180;\r\n    datas.defaultDeg = datas.prevDeg;\r\n    datas.prevSnapDeg = 0;\r\n    datas.loop = 0;\r\n    datas.startDist = getDist$1(startAbsoluteOrigin, [clientX, clientY]);\r\n}\r\nfunction getAbsoluteDist(deg, direction, datas) {\r\n    var defaultDeg = datas.defaultDeg, prevDeg = datas.prevDeg;\r\n    var normalizedPrevDeg = prevDeg % 360;\r\n    var loop = Math.floor(prevDeg / 360);\r\n    if (normalizedPrevDeg < 0) {\r\n        normalizedPrevDeg += 360;\r\n    }\r\n    if (normalizedPrevDeg > deg && normalizedPrevDeg > 270 && deg < 90) {\r\n        // 360 => 0\r\n        ++loop;\r\n    }\r\n    else if (normalizedPrevDeg < deg && normalizedPrevDeg < 90 && deg > 270) {\r\n        // 0 => 360\r\n        --loop;\r\n    }\r\n    var dist = direction * (loop * 360 + deg - defaultDeg);\r\n    datas.prevDeg = defaultDeg + dist;\r\n    return dist;\r\n}\r\nfunction getAbsoluteDistByClient(clientX, clientY, direction, datas) {\r\n    return getAbsoluteDist(getRad(datas.startAbsoluteOrigin, [clientX, clientY]) / Math.PI * 180, direction, datas);\r\n}\r\nfunction getRotateInfo(moveable, moveableRect, datas, dist, startValue, checkSnap) {\r\n    var _a = moveable.props.throttleRotate, throttleRotate = _a === void 0 ? 0 : _a;\r\n    var prevSnapDeg = datas.prevSnapDeg;\r\n    var snapRotation = 0;\r\n    var isSnap = false;\r\n    if (checkSnap) {\r\n        var result = checkSnapRotate(moveable, moveableRect, dist, startValue + dist);\r\n        isSnap = result.isSnap;\r\n        snapRotation = startValue + result.dist;\r\n    }\r\n    if (!isSnap) {\r\n        snapRotation = throttle(startValue + dist, throttleRotate);\r\n    }\r\n    var snapDeg = snapRotation - startValue;\r\n    datas.prevSnapDeg = snapDeg;\r\n    return [snapDeg - prevSnapDeg, snapDeg, snapRotation];\r\n}\r\nfunction getRotationPositions(rotationPosition, _a, direction) {\r\n    var _b = __read(_a, 4), pos1 = _b[0], pos2 = _b[1], pos3 = _b[2], pos4 = _b[3];\r\n    if (rotationPosition === \"none\") {\r\n        return [];\r\n    }\r\n    if (isArray(rotationPosition)) {\r\n        return rotationPosition.map(function (child) { return getRotationPositions(child, [pos1, pos2, pos3, pos4], direction)[0]; });\r\n    }\r\n    var _c = __read((rotationPosition || \"top\").split(\"-\"), 2), dir1 = _c[0], dir2 = _c[1];\r\n    var radPoses = [pos1, pos2];\r\n    if (dir1 === \"left\") {\r\n        radPoses = [pos3, pos1];\r\n    }\r\n    else if (dir1 === \"right\") {\r\n        radPoses = [pos2, pos4];\r\n    }\r\n    else if (dir1 === \"bottom\") {\r\n        radPoses = [pos4, pos3];\r\n    }\r\n    var pos = [\r\n        (radPoses[0][0] + radPoses[1][0]) / 2,\r\n        (radPoses[0][1] + radPoses[1][1]) / 2,\r\n    ];\r\n    var rad = getRotationRad(radPoses, direction);\r\n    if (dir2) {\r\n        var isStart = dir2 === \"top\" || dir2 === \"left\";\r\n        var isReverse = dir1 === \"bottom\" || dir1 === \"left\";\r\n        pos = radPoses[(isStart && !isReverse) || (!isStart && isReverse) ? 0 : 1];\r\n    }\r\n    return [[pos, rad]];\r\n}\r\nfunction dragControlCondition(moveable, e) {\r\n    if (e.isRequest) {\r\n        return e.requestAble === \"rotatable\";\r\n    }\r\n    var target = e.inputEvent.target;\r\n    if (hasClass(target, prefix(\"rotation-control\"))\r\n        || (moveable.props.rotateAroundControls && hasClass(target, prefix(\"around-control\")))\r\n        || (hasClass(target, prefix(\"control\")) && hasClass(target, prefix(\"rotatable\")))) {\r\n        return true;\r\n    }\r\n    var rotationTarget = moveable.props.rotationTarget;\r\n    if (rotationTarget) {\r\n        return getRefTargets(rotationTarget, true).some(function (element) {\r\n            if (!element) {\r\n                return false;\r\n            }\r\n            return target === element || target.contains(element);\r\n        });\r\n    }\r\n    return false;\r\n}\r\nvar css = \".rotation {\\nposition: absolute;\\nheight: 40px;\\nwidth: 1px;\\ntransform-origin: 50% 100%;\\nheight: calc(40px * var(--zoom));\\ntop: auto;\\nleft: 0;\\nbottom: 100%;\\nwill-change: transform;\\n}\\n.rotation .rotation-line {\\ndisplay: block;\\nwidth: 100%;\\nheight: 100%;\\ntransform-origin: 50% 50%;\\n}\\n.rotation .rotation-control {\\nborder-color: #4af;\\nborder-color: var(--moveable-color);\\nbackground:#fff;\\ncursor: alias;\\n}\\n:global .view-rotation-dragging, .rotatable.direction.control {\\ncursor: alias;\\n}\\n.rotatable.direction.control.move {\\ncursor: move;\\n}\\n\";\r\nvar Rotatable = {\r\n    name: \"rotatable\",\r\n    canPinch: true,\r\n    props: [\r\n        \"rotatable\",\r\n        \"rotationPosition\",\r\n        \"throttleRotate\",\r\n        \"renderDirections\",\r\n        \"rotationTarget\",\r\n        \"rotateAroundControls\",\r\n        \"edge\",\r\n        \"resolveAblesWithRotatable\",\r\n        \"displayAroundControls\",\r\n    ],\r\n    events: [\r\n        \"rotateStart\",\r\n        \"beforeRotate\",\r\n        \"rotate\",\r\n        \"rotateEnd\",\r\n        \"rotateGroupStart\",\r\n        \"beforeRotateGroup\",\r\n        \"rotateGroup\",\r\n        \"rotateGroupEnd\",\r\n    ],\r\n    css: [css],\r\n    viewClassName: function (moveable) {\r\n        if (!moveable.isDragging(\"rotatable\")) {\r\n            return \"\";\r\n        }\r\n        return prefix(\"view-rotation-dragging\");\r\n    },\r\n    render: function (moveable, React) {\r\n        var _a = getProps(moveable.props, \"rotatable\"), rotatable = _a.rotatable, rotationPosition = _a.rotationPosition, zoom = _a.zoom, renderDirections = _a.renderDirections, rotateAroundControls = _a.rotateAroundControls, resolveAblesWithRotatable = _a.resolveAblesWithRotatable;\r\n        var _b = moveable.getState(), renderPoses = _b.renderPoses, direction = _b.direction;\r\n        if (!rotatable) {\r\n            return null;\r\n        }\r\n        var positions = getRotationPositions(rotationPosition, renderPoses, direction);\r\n        var jsxs = [];\r\n        positions.forEach(function (_a, i) {\r\n            var _b = __read(_a, 2), pos = _b[0], rad = _b[1];\r\n            jsxs.push(React.createElement(\"div\", { key: \"rotation\".concat(i), className: prefix(\"rotation\"), style: {\r\n                    // tslint:disable-next-line: max-line-length\r\n                    transform: \"translate(-50%) translate(\".concat(pos[0], \"px, \").concat(pos[1], \"px) rotate(\").concat(rad, \"rad)\"),\r\n                } },\r\n                React.createElement(\"div\", { className: prefix(\"line rotation-line\"), style: {\r\n                        transform: \"scaleX(\".concat(zoom, \")\"),\r\n                    } }),\r\n                React.createElement(\"div\", { className: prefix(\"control rotation-control\"), style: {\r\n                        transform: \"translate(0.5px) scale(\".concat(zoom, \")\"),\r\n                    } })));\r\n        });\r\n        if (renderDirections) {\r\n            var ables = getKeys(resolveAblesWithRotatable || {});\r\n            var resolveMap_1 = {};\r\n            ables.forEach(function (name) {\r\n                resolveAblesWithRotatable[name].forEach(function (direction) {\r\n                    resolveMap_1[direction] = name;\r\n                });\r\n            });\r\n            var directionControlInfos = [];\r\n            if (isArray(renderDirections)) {\r\n                directionControlInfos = renderDirections.map(function (dir) {\r\n                    var able = resolveMap_1[dir];\r\n                    return {\r\n                        data: able ? { resolve: able } : {},\r\n                        classNames: able ? [\"move\"] : [],\r\n                        dir: dir,\r\n                    };\r\n                });\r\n            }\r\n            jsxs.push.apply(jsxs, __spreadArray([], __read(renderDirectionControlsByInfos(moveable, \"rotatable\", directionControlInfos, React)), false));\r\n        }\r\n        if (rotateAroundControls) {\r\n            jsxs.push.apply(jsxs, __spreadArray([], __read(renderAroundControls(moveable, React)), false));\r\n        }\r\n        return jsxs;\r\n    },\r\n    dragControlCondition: dragControlCondition,\r\n    dragControlStart: function (moveable, e) {\r\n        var _a;\r\n        var _b;\r\n        var datas = e.datas, clientX = e.clientX, clientY = e.clientY, parentRotate = e.parentRotate, parentFlag = e.parentFlag, isPinch = e.isPinch, isRequest = e.isRequest;\r\n        var state = moveable.state;\r\n        var target = state.target, left = state.left, top = state.top, direction = state.direction, beforeDirection = state.beforeDirection, targetTransform = state.targetTransform, moveableClientRect = state.moveableClientRect, offsetMatrix = state.offsetMatrix, targetMatrix = state.targetMatrix, allMatrix = state.allMatrix, width = state.width, height = state.height;\r\n        if (!isRequest && !target) {\r\n            return false;\r\n        }\r\n        var rect = moveable.getRect();\r\n        datas.rect = rect;\r\n        datas.transform = targetTransform;\r\n        datas.left = left;\r\n        datas.top = top;\r\n        var setFixedPosition = function (fixedPosition) {\r\n            var result = getOffsetFixedPositionInfo(moveable.state, fixedPosition);\r\n            datas.fixedDirection = result.fixedDirection;\r\n            datas.fixedOffset = result.fixedOffset;\r\n            datas.fixedPosition = result.fixedPosition;\r\n            if (resizeStart) {\r\n                resizeStart.setFixedPosition(fixedPosition);\r\n            }\r\n        };\r\n        var setFixedDirection = function (fixedDirection) {\r\n            var result = getOffsetFixedDirectionInfo(moveable.state, fixedDirection);\r\n            datas.fixedDirection = result.fixedDirection;\r\n            datas.fixedOffset = result.fixedOffset;\r\n            datas.fixedPosition = result.fixedPosition;\r\n            if (resizeStart) {\r\n                resizeStart.setFixedDirection(fixedDirection);\r\n            }\r\n        };\r\n        var startClientX = clientX;\r\n        var startClientY = clientY;\r\n        if (isRequest || isPinch || parentFlag) {\r\n            var externalRotate = parentRotate || 0;\r\n            datas.beforeInfo = {\r\n                origin: rect.beforeOrigin,\r\n                prevDeg: externalRotate,\r\n                defaultDeg: externalRotate,\r\n                prevSnapDeg: 0,\r\n                startDist: 0,\r\n            };\r\n            datas.afterInfo = __assign(__assign({}, datas.beforeInfo), { origin: rect.origin });\r\n            datas.absoluteInfo = __assign(__assign({}, datas.beforeInfo), { origin: rect.origin, startValue: externalRotate });\r\n        }\r\n        else {\r\n            var inputTarget = (_b = e.inputEvent) === null || _b === void 0 ? void 0 : _b.target;\r\n            if (inputTarget) {\r\n                var regionDirection = inputTarget.getAttribute(\"data-direction\") || \"\";\r\n                var controlDirection = DIRECTION_REGION_TO_DIRECTION[regionDirection];\r\n                if (controlDirection) {\r\n                    datas.isControl = true;\r\n                    datas.isAroundControl = hasClass(inputTarget, prefix(\"around-control\"));\r\n                    datas.controlDirection = controlDirection;\r\n                    var resolve = inputTarget.getAttribute(\"data-resolve\");\r\n                    if (resolve) {\r\n                        datas.resolveAble = resolve;\r\n                    }\r\n                    var clientPoses = calculateMoveableClientPositions(state.rootMatrix, state.renderPoses, moveableClientRect);\r\n                    _a = __read(getPosByDirection(clientPoses, controlDirection), 2), startClientX = _a[0], startClientY = _a[1];\r\n                }\r\n            }\r\n            datas.beforeInfo = { origin: rect.beforeOrigin };\r\n            datas.afterInfo = { origin: rect.origin };\r\n            datas.absoluteInfo = {\r\n                origin: rect.origin,\r\n                startValue: rect.rotation,\r\n            };\r\n            var originalFixedPosition_1 = setFixedPosition;\r\n            setFixedPosition = function (fixedPosition) {\r\n                var n = state.is3d ? 4 : 3;\r\n                var _a = __read(plus(getOrigin(targetMatrix, n), fixedPosition), 2), originX = _a[0], originY = _a[1];\r\n                var fixedBeforeOrigin = calculate(offsetMatrix, convertPositionMatrix([originX, originY], n));\r\n                var fixedAfterOrigin = calculate(allMatrix, convertPositionMatrix([fixedPosition[0], fixedPosition[1]], n));\r\n                originalFixedPosition_1(fixedPosition);\r\n                var posDelta = state.posDelta;\r\n                datas.beforeInfo.origin = minus(fixedBeforeOrigin, posDelta);\r\n                datas.afterInfo.origin = minus(fixedAfterOrigin, posDelta);\r\n                datas.absoluteInfo.origin = minus(fixedAfterOrigin, posDelta);\r\n                setRotateStartInfo(moveable, datas.beforeInfo, startClientX, startClientY, moveableClientRect);\r\n                setRotateStartInfo(moveable, datas.afterInfo, startClientX, startClientY, moveableClientRect);\r\n                setRotateStartInfo(moveable, datas.absoluteInfo, startClientX, startClientY, moveableClientRect);\r\n            };\r\n            setFixedDirection = function (fixedDirection) {\r\n                var fixedPosition = getPosByDirection([\r\n                    [0, 0],\r\n                    [width, 0],\r\n                    [0, height],\r\n                    [width, height],\r\n                ], fixedDirection);\r\n                setFixedPosition(fixedPosition);\r\n            };\r\n        }\r\n        datas.startClientX = startClientX;\r\n        datas.startClientY = startClientY;\r\n        datas.direction = direction;\r\n        datas.beforeDirection = beforeDirection;\r\n        datas.startValue = 0;\r\n        datas.datas = {};\r\n        setDefaultTransformIndex(moveable, e, \"rotate\");\r\n        var dragStart = false;\r\n        var resizeStart = false;\r\n        if (datas.isControl && datas.resolveAble) {\r\n            var resolveAble = datas.resolveAble;\r\n            if (resolveAble === \"resizable\") {\r\n                resizeStart = Resizable.dragControlStart(moveable, __assign(__assign({}, (new CustomGesto(\"resizable\").dragStart([0, 0], e))), { parentPosition: datas.controlPosition, parentFixedPosition: datas.fixedPosition }));\r\n            }\r\n        }\r\n        if (!resizeStart) {\r\n            dragStart = Draggable.dragStart(moveable, new CustomGesto().dragStart([0, 0], e));\r\n        }\r\n        setFixedPosition(getTotalOrigin(moveable));\r\n        var params = fillParams(moveable, e, __assign(__assign({ set: function (rotatation) {\r\n                datas.startValue = rotatation * Math.PI / 180;\r\n            }, setFixedDirection: setFixedDirection, setFixedPosition: setFixedPosition }, fillTransformStartEvent(moveable, e)), { dragStart: dragStart, resizeStart: resizeStart }));\r\n        var result = triggerEvent(moveable, \"onRotateStart\", params);\r\n        datas.isRotate = result !== false;\r\n        state.snapRenderInfo = {\r\n            request: e.isRequest,\r\n        };\r\n        return datas.isRotate ? params : false;\r\n    },\r\n    dragControl: function (moveable, e) {\r\n        var _a, _b, _c;\r\n        var datas = e.datas, clientDistX = e.clientDistX, clientDistY = e.clientDistY, parentRotate = e.parentRotate, parentFlag = e.parentFlag, isPinch = e.isPinch, groupDelta = e.groupDelta, resolveMatrix = e.resolveMatrix;\r\n        var beforeDirection = datas.beforeDirection, beforeInfo = datas.beforeInfo, afterInfo = datas.afterInfo, absoluteInfo = datas.absoluteInfo, isRotate = datas.isRotate, startValue = datas.startValue, rect = datas.rect, startClientX = datas.startClientX, startClientY = datas.startClientY;\r\n        if (!isRotate) {\r\n            return;\r\n        }\r\n        resolveTransformEvent(moveable, e, \"rotate\");\r\n        var targetDirection = getTransformDirection(e);\r\n        var direction = beforeDirection * targetDirection;\r\n        var parentMoveable = moveable.props.parentMoveable;\r\n        var beforeDelta = 0;\r\n        var beforeDist;\r\n        var beforeRotation;\r\n        var delta = 0;\r\n        var dist;\r\n        var rotation;\r\n        var absoluteDelta = 0;\r\n        var absoluteDist;\r\n        var absoluteRotation;\r\n        var startRotation = 180 / Math.PI * startValue;\r\n        var absoluteStartRotation = absoluteInfo.startValue;\r\n        var isSnap = false;\r\n        var nextClientX = startClientX + clientDistX;\r\n        var nextClientY = startClientY + clientDistY;\r\n        if (!parentFlag && \"parentDist\" in e) {\r\n            var parentDist = e.parentDist;\r\n            beforeDist = parentDist;\r\n            dist = parentDist;\r\n            absoluteDist = parentDist;\r\n        }\r\n        else if (isPinch || parentFlag) {\r\n            beforeDist = getAbsoluteDist(parentRotate, beforeDirection, beforeInfo);\r\n            dist = getAbsoluteDist(parentRotate, direction, afterInfo);\r\n            absoluteDist = getAbsoluteDist(parentRotate, direction, absoluteInfo);\r\n        }\r\n        else {\r\n            beforeDist = getAbsoluteDistByClient(nextClientX, nextClientY, beforeDirection, beforeInfo);\r\n            dist = getAbsoluteDistByClient(nextClientX, nextClientY, direction, afterInfo);\r\n            absoluteDist = getAbsoluteDistByClient(nextClientX, nextClientY, direction, absoluteInfo);\r\n            isSnap = true;\r\n        }\r\n        beforeRotation = startRotation + beforeDist;\r\n        rotation = startRotation + dist;\r\n        absoluteRotation = absoluteStartRotation + absoluteDist;\r\n        triggerEvent(moveable, \"onBeforeRotate\", fillParams(moveable, e, {\r\n            beforeRotation: beforeRotation,\r\n            rotation: rotation,\r\n            absoluteRotation: absoluteRotation,\r\n            setRotation: function (nextRotation) {\r\n                dist = nextRotation - startRotation;\r\n                beforeDist = dist;\r\n                absoluteDist = dist;\r\n            },\r\n        }, true));\r\n        _a = __read(getRotateInfo(moveable, rect, beforeInfo, beforeDist, startRotation, isSnap), 3), beforeDelta = _a[0], beforeDist = _a[1], beforeRotation = _a[2];\r\n        _b = __read(getRotateInfo(moveable, rect, afterInfo, dist, startRotation, isSnap), 3), delta = _b[0], dist = _b[1], rotation = _b[2];\r\n        _c = __read(getRotateInfo(moveable, rect, absoluteInfo, absoluteDist, absoluteStartRotation, isSnap), 3), absoluteDelta = _c[0], absoluteDist = _c[1], absoluteRotation = _c[2];\r\n        if (!absoluteDelta && !delta && !beforeDelta && !parentMoveable && !resolveMatrix) {\r\n            return;\r\n        }\r\n        var nextTransform = convertTransformFormat(datas, \"rotate(\".concat(rotation, \"deg)\"), \"rotate(\".concat(dist, \"deg)\"));\r\n        if (resolveMatrix) {\r\n            datas.fixedPosition = getTranslateFixedPosition(moveable, datas.targetAllTransform, datas.fixedDirection, datas.fixedOffset, datas);\r\n        }\r\n        var inverseDist = getRotateDist(moveable, dist, datas);\r\n        var inverseDelta = minus(plus(groupDelta || [0, 0], inverseDist), datas.prevInverseDist || [0, 0]);\r\n        datas.prevInverseDist = inverseDist;\r\n        datas.requestValue = null;\r\n        var dragEvent = fillTransformEvent(moveable, nextTransform, inverseDelta, isPinch, e);\r\n        var transformEvent = dragEvent;\r\n        var parentDistance = getDist$1([nextClientX, nextClientY], absoluteInfo.startAbsoluteOrigin) - absoluteInfo.startDist;\r\n        var resize = undefined;\r\n        if (datas.resolveAble === \"resizable\") {\r\n            var resizeEvent = Resizable.dragControl(moveable, __assign(__assign({}, setCustomDrag(e, moveable.state, [e.deltaX, e.deltaY], !!isPinch, false, \"resizable\")), { resolveMatrix: true, parentDistance: parentDistance }));\r\n            if (resizeEvent) {\r\n                resize = resizeEvent;\r\n                transformEvent = fillAfterTransform(transformEvent, resizeEvent, e);\r\n            }\r\n        }\r\n        var params = fillParams(moveable, e, __assign(__assign({ delta: delta, dist: dist, rotate: rotation, rotation: rotation, beforeDist: beforeDist, beforeDelta: beforeDelta, beforeRotate: beforeRotation, beforeRotation: beforeRotation, absoluteDist: absoluteDist, absoluteDelta: absoluteDelta, absoluteRotate: absoluteRotation, absoluteRotation: absoluteRotation, isPinch: !!isPinch, resize: resize }, dragEvent), transformEvent));\r\n        triggerEvent(moveable, \"onRotate\", params);\r\n        return params;\r\n    },\r\n    dragControlEnd: function (moveable, e) {\r\n        var datas = e.datas;\r\n        if (!datas.isRotate) {\r\n            return;\r\n        }\r\n        datas.isRotate = false;\r\n        var params = fillEndParams(moveable, e, {});\r\n        triggerEvent(moveable, \"onRotateEnd\", params);\r\n        return params;\r\n    },\r\n    dragGroupControlCondition: dragControlCondition,\r\n    dragGroupControlStart: function (moveable, e) {\r\n        var datas = e.datas;\r\n        var _a = moveable.state, parentLeft = _a.left, parentTop = _a.top, parentBeforeOrigin = _a.beforeOrigin;\r\n        var params = this.dragControlStart(moveable, e);\r\n        if (!params) {\r\n            return false;\r\n        }\r\n        params.set(datas.beforeDirection * moveable.rotation);\r\n        var events = triggerChildAbles(moveable, this, \"dragControlStart\", e, function (child, ev) {\r\n            var _a = child.state, left = _a.left, top = _a.top, beforeOrigin = _a.beforeOrigin;\r\n            var childClient = plus(minus([left, top], [parentLeft, parentTop]), minus(beforeOrigin, parentBeforeOrigin));\r\n            ev.datas.startGroupClient = childClient;\r\n            ev.datas.groupClient = childClient;\r\n            return __assign(__assign({}, ev), { parentRotate: 0 });\r\n        });\r\n        var nextParams = __assign(__assign({}, params), { targets: moveable.props.targets, events: events });\r\n        var result = triggerEvent(moveable, \"onRotateGroupStart\", nextParams);\r\n        datas.isRotate = result !== false;\r\n        return datas.isRotate ? params : false;\r\n    },\r\n    dragGroupControl: function (moveable, e) {\r\n        var datas = e.datas;\r\n        if (!datas.isRotate) {\r\n            return;\r\n        }\r\n        catchEvent(moveable, \"onBeforeRotate\", function (parentEvent) {\r\n            triggerEvent(moveable, \"onBeforeRotateGroup\", fillParams(moveable, e, __assign(__assign({}, parentEvent), { targets: moveable.props.targets }), true));\r\n        });\r\n        var params = this.dragControl(moveable, e);\r\n        if (!params) {\r\n            return;\r\n        }\r\n        var direction = datas.beforeDirection;\r\n        var parentRotate = params.beforeDist;\r\n        var rad = parentRotate / 180 * Math.PI;\r\n        var events = triggerChildAbles(moveable, this, \"dragControl\", e, function (_, ev) {\r\n            var startGroupClient = ev.datas.startGroupClient;\r\n            var _a = __read(ev.datas.groupClient, 2), prevClientX = _a[0], prevClientY = _a[1];\r\n            var _b = __read(rotate(startGroupClient, rad * direction), 2), clientX = _b[0], clientY = _b[1];\r\n            var delta = [clientX - prevClientX, clientY - prevClientY];\r\n            ev.datas.groupClient = [clientX, clientY];\r\n            return __assign(__assign({}, ev), { parentRotate: parentRotate, groupDelta: delta });\r\n        });\r\n        moveable.rotation = direction * params.beforeRotation;\r\n        var nextParams = __assign({ targets: moveable.props.targets, events: events, set: function (rotation) {\r\n                moveable.rotation = rotation;\r\n            }, setGroupRotation: function (rotation) {\r\n                moveable.rotation = rotation;\r\n            } }, params);\r\n        triggerEvent(moveable, \"onRotateGroup\", nextParams);\r\n        return nextParams;\r\n    },\r\n    dragGroupControlEnd: function (moveable, e) {\r\n        var isDrag = e.isDrag, datas = e.datas;\r\n        if (!datas.isRotate) {\r\n            return;\r\n        }\r\n        this.dragControlEnd(moveable, e);\r\n        var events = triggerChildAbles(moveable, this, \"dragControlEnd\", e);\r\n        var nextParams = fillEndParams(moveable, e, {\r\n            targets: moveable.props.targets,\r\n            events: events,\r\n        });\r\n        triggerEvent(moveable, \"onRotateGroupEnd\", nextParams);\r\n        return isDrag;\r\n    },\r\n    /**\r\n     * @method Moveable.Rotatable#request\r\n     * @param {object} [e] - the Resizable's request parameter\r\n     * @param {number} [e.deltaRotate=0] -  delta number of rotation\r\n     * @param {number} [e.rotate=0] - absolute number of moveable's rotation\r\n     * @return {Moveable.Requester} Moveable Requester\r\n     * @example\r\n\n     * // Instantly Request (requestStart - request - requestEnd)\r\n     * moveable.request(\"rotatable\", { deltaRotate: 10 }, true);\r\n     *\r\n     * * moveable.request(\"rotatable\", { rotate: 10 }, true);\r\n     *\r\n     * // requestStart\r\n     * const requester = moveable.request(\"rotatable\");\r\n     *\r\n     * // request\r\n     * requester.request({ deltaRotate: 10 });\r\n     * requester.request({ deltaRotate: 10 });\r\n     * requester.request({ deltaRotate: 10 });\r\n     *\r\n     * requester.request({ rotate: 10 });\r\n     * requester.request({ rotate: 20 });\r\n     * requester.request({ rotate: 30 });\r\n     *\r\n     * // requestEnd\r\n     * requester.requestEnd();\r\n     */\r\n    request: function (moveable) {\r\n        var datas = {};\r\n        var distRotate = 0;\r\n        var startRotation = moveable.getRotation();\r\n        return {\r\n            isControl: true,\r\n            requestStart: function () {\r\n                return { datas: datas };\r\n            },\r\n            request: function (e) {\r\n                if (\"deltaRotate\" in e) {\r\n                    distRotate += e.deltaRotate;\r\n                }\r\n                else if (\"rotate\" in e) {\r\n                    distRotate = e.rotate - startRotation;\r\n                }\r\n                return { datas: datas, parentDist: distRotate };\r\n            },\r\n            requestEnd: function () {\r\n                return { datas: datas, isDrag: true };\r\n            },\r\n        };\r\n    },\r\n};\r\n/**\r\n * Whether or not target can be rotated. (default: false)\r\n * @name Moveable.Rotatable#rotatable\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.rotatable = true;\r\n */\r\n/**\r\n * You can specify the position of the rotation. (default: \"top\")\r\n * @name Moveable.Rotatable#rotationPosition\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *   rotationPosition: \"top\",\r\n * });\r\n *\r\n * moveable.rotationPosition = \"bottom\"\r\n */\r\n/**\r\n * throttle of angle(degree) when rotate.\r\n * @name Moveable.Rotatable#throttleRotate\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.throttleRotate = 1;\r\n */\r\n/**\r\n * When the rotate starts, the rotateStart event is called.\r\n * @memberof Moveable.Rotatable\r\n * @event rotateStart\r\n * @param {Moveable.Rotatable.OnRotateStart} - Parameters for the rotateStart event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { rotatable: true });\r\n * moveable.on(\"rotateStart\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n */\r\n/**\r\n* When rotating, the rotate event is called.\r\n* @memberof Moveable.Rotatable\r\n* @event rotate\r\n* @param {Moveable.Rotatable.OnRotate} - Parameters for the rotate event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, { rotatable: true });\r\n* moveable.on(\"rotate\", ({ target, transform, dist }) => {\r\n*     target.style.transform = transform;\r\n* });\r\n*/\r\n/**\r\n * When the rotate finishes, the rotateEnd event is called.\r\n * @memberof Moveable.Rotatable\r\n * @event rotateEnd\r\n * @param {Moveable.Rotatable.OnRotateEnd} - Parameters for the rotateEnd event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { rotatable: true });\r\n * moveable.on(\"rotateEnd\", ({ target, isDrag }) => {\r\n *     console.log(target, isDrag);\r\n * });\r\n */\r\n/**\r\n * When the group rotate starts, the `rotateGroupStart` event is called.\r\n * @memberof Moveable.Rotatable\r\n * @event rotateGroupStart\r\n * @param {Moveable.Rotatable.OnRotateGroupStart} - Parameters for the `rotateGroupStart` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n *     rotatable: true\r\n * });\r\n * moveable.on(\"rotateGroupStart\", ({ targets }) => {\r\n *     console.log(\"onRotateGroupStart\", targets);\r\n * });\r\n */\r\n/**\r\n* When the group rotate, the `rotateGroup` event is called.\r\n* @memberof Moveable.Rotatable\r\n* @event rotateGroup\r\n* @param {Moveable.Rotatable.OnRotateGroup} - Parameters for the `rotateGroup` event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n*     rotatable: true\r\n* });\r\n* moveable.on(\"rotateGroup\", ({ targets, events }) => {\r\n*     console.log(\"onRotateGroup\", targets);\r\n*     events.forEach(ev => {\r\n*         const target = ev.target;\r\n*         // ev.drag is a drag event that occurs when the group rotate.\r\n*         const left = ev.drag.beforeDist[0];\r\n*         const top = ev.drag.beforeDist[1];\r\n*         const deg = ev.beforeDist;\r\n*     });\r\n* });\r\n*/\r\n/**\r\n * When the group rotate finishes, the `rotateGroupEnd` event is called.\r\n * @memberof Moveable.Rotatable\r\n * @event rotateGroupEnd\r\n * @param {Moveable.Rotatable.OnRotateGroupEnd} - Parameters for the `rotateGroupEnd` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n *     rotatable: true\r\n * });\r\n * moveable.on(\"rotateGroupEnd\", ({ targets, isDrag }) => {\r\n *     console.log(\"onRotateGroupEnd\", targets, isDrag);\r\n * });\r\n */\n\nfunction renderGuideline(info, React) {\r\n    var _a;\r\n    var direction = info.direction, classNames = info.classNames, size = info.size, pos = info.pos, zoom = info.zoom, key = info.key;\r\n    var isHorizontal = direction === \"horizontal\";\r\n    var scaleType = isHorizontal ? \"Y\" : \"X\";\r\n    // const scaleType2 = isHorizontal ? \"Y\" : \"X\";\r\n    return React.createElement(\"div\", {\r\n        key: key,\r\n        className: classNames.join(\" \"),\r\n        style: (_a = {},\r\n            _a[isHorizontal ? \"width\" : \"height\"] = \"\".concat(size),\r\n            _a.transform = \"translate(\".concat(pos[0], \", \").concat(pos[1], \") translate\").concat(scaleType, \"(-50%) scale\").concat(scaleType, \"(\").concat(zoom, \")\"),\r\n            _a),\r\n    });\r\n}\r\nfunction renderInnerGuideline(info, React) {\r\n    return renderGuideline(__assign(__assign({}, info), { classNames: __spreadArray([\r\n            prefix(\"line\", \"guideline\", info.direction)\r\n        ], __read(info.classNames), false).filter(function (className) { return className; }), size: info.size || \"\".concat(info.sizeValue, \"px\"), pos: info.pos || info.posValue.map(function (v) { return \"\".concat(throttle(v, 0.1), \"px\"); }) }), React);\r\n}\r\nfunction renderSnapPoses(moveable, direction, snapPoses, minPos, targetPos, size, index, React) {\r\n    var zoom = moveable.props.zoom;\r\n    return snapPoses.map(function (_a, i) {\r\n        var type = _a.type, pos = _a.pos;\r\n        var renderPos = [0, 0];\r\n        renderPos[index] = minPos;\r\n        renderPos[index ? 0 : 1] = -targetPos + pos;\r\n        return renderInnerGuideline({\r\n            key: \"\".concat(direction, \"TargetGuideline\").concat(i),\r\n            classNames: [prefix(\"target\", \"bold\", type)],\r\n            posValue: renderPos,\r\n            sizeValue: size,\r\n            zoom: zoom,\r\n            direction: direction,\r\n        }, React);\r\n    });\r\n}\r\nfunction renderGuidelines(moveable, type, guidelines, targetPos, targetRect, React) {\r\n    var _a = moveable.props, zoom = _a.zoom, isDisplayInnerSnapDigit = _a.isDisplayInnerSnapDigit;\r\n    var mainNames = type === \"horizontal\" ? VERTICAL_NAMES_MAP : HORIZONTAL_NAMES_MAP;\r\n    var targetStart = targetRect[mainNames.start];\r\n    var targetEnd = targetRect[mainNames.end];\r\n    return guidelines.filter(function (_a) {\r\n        var hide = _a.hide, elementRect = _a.elementRect;\r\n        if (hide) {\r\n            return false;\r\n        }\r\n        if (isDisplayInnerSnapDigit && elementRect) {\r\n            // inner\r\n            var rect = elementRect.rect;\r\n            if (rect[mainNames.start] <= targetStart && targetEnd <= rect[mainNames.end]) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }).map(function (guideline, i) {\r\n        var pos = guideline.pos, size = guideline.size, element = guideline.element, className = guideline.className;\r\n        var renderPos = [\r\n            -targetPos[0] + pos[0],\r\n            -targetPos[1] + pos[1],\r\n        ];\r\n        return renderInnerGuideline({\r\n            key: \"\".concat(type, \"-default-guideline-\").concat(i),\r\n            classNames: element ? [prefix(\"bold\"), className] : [prefix(\"normal\"), className],\r\n            direction: type,\r\n            posValue: renderPos,\r\n            sizeValue: size,\r\n            zoom: zoom,\r\n        }, React);\r\n    });\r\n}\r\nfunction renderDigitLine(moveable, type, lineType, index, gap, renderPos, className, React) {\r\n    var _a;\r\n    var _b = moveable.props, _c = _b.snapDigit, snapDigit = _c === void 0 ? 0 : _c, _d = _b.isDisplaySnapDigit, isDisplaySnapDigit = _d === void 0 ? true : _d, _e = _b.snapDistFormat, snapDistFormat = _e === void 0 ? function (v, type) {\r\n        // Type can be used render different values.\r\n        if (type === 'vertical') {\r\n            return v;\r\n        }\r\n        return v;\r\n    } : _e, zoom = _b.zoom;\r\n    var scaleType = type === \"horizontal\" ? \"X\" : \"Y\";\r\n    var sizeName = type === \"vertical\" ? \"height\" : \"width\";\r\n    var absGap = Math.abs(gap);\r\n    var snapSize = isDisplaySnapDigit\r\n        ? parseFloat(absGap.toFixed(snapDigit))\r\n        : 0;\r\n    return React.createElement(\"div\", { key: \"\".concat(type, \"-\").concat(lineType, \"-guideline-\").concat(index), className: prefix(\"guideline-group\", type), style: (_a = {\r\n                left: \"\".concat(renderPos[0], \"px\"),\r\n                top: \"\".concat(renderPos[1], \"px\")\r\n            },\r\n            _a[sizeName] = \"\".concat(absGap, \"px\"),\r\n            _a) },\r\n        renderInnerGuideline({\r\n            direction: type,\r\n            classNames: [prefix(lineType), className],\r\n            size: \"100%\",\r\n            posValue: [0, 0],\r\n            sizeValue: absGap,\r\n            zoom: zoom,\r\n        }, React),\r\n        React.createElement(\"div\", { className: prefix(\"size-value\", \"gap\"), style: {\r\n                transform: \"translate\".concat(scaleType, \"(-50%) scale(\").concat(zoom, \")\"),\r\n            } }, snapSize > 0 ? snapDistFormat(snapSize, type) : \"\"));\r\n}\r\nfunction groupByElementGuidelines(type, guidelines, targetRect, isDisplayInnerSnapDigit) {\r\n    var index = type === \"vertical\" ? 0 : 1;\r\n    var otherIndex = type === \"vertical\" ? 1 : 0;\r\n    var names = index ? VERTICAL_NAMES_MAP : HORIZONTAL_NAMES_MAP;\r\n    var targetStart = targetRect[names.start];\r\n    var targetEnd = targetRect[names.end];\r\n    return groupBy(guidelines, function (guideline) {\r\n        return guideline.pos[index];\r\n    }).map(function (nextGuidelines) {\r\n        var start = [];\r\n        var end = [];\r\n        var inner = [];\r\n        nextGuidelines.forEach(function (guideline) {\r\n            var _a, _b;\r\n            var element = guideline.element;\r\n            var rect = guideline.elementRect.rect;\r\n            if (rect[names.end] < targetStart) {\r\n                start.push(guideline);\r\n            }\r\n            else if (targetEnd < rect[names.start]) {\r\n                end.push(guideline);\r\n            }\r\n            else if (rect[names.start] <= targetStart && targetEnd <= rect[names.end] && isDisplayInnerSnapDigit) {\r\n                var pos = guideline.pos;\r\n                var elementRect1 = { element: element, rect: __assign(__assign({}, rect), (_a = {}, _a[names.end] = rect[names.start], _a)) };\r\n                var elementRect2 = { element: element, rect: __assign(__assign({}, rect), (_b = {}, _b[names.start] = rect[names.end], _b)) };\r\n                var nextPos1 = [0, 0];\r\n                var nextPos2 = [0, 0];\r\n                nextPos1[index] = pos[index];\r\n                nextPos1[otherIndex] = pos[otherIndex];\r\n                nextPos2[index] = pos[index];\r\n                nextPos2[otherIndex] = pos[otherIndex] + guideline.size;\r\n                start.push({\r\n                    type: type,\r\n                    pos: nextPos1,\r\n                    size: 0,\r\n                    elementRect: elementRect1,\r\n                    direction: \"\",\r\n                    elementDirection: \"end\",\r\n                });\r\n                end.push({\r\n                    type: type,\r\n                    pos: nextPos2,\r\n                    size: 0,\r\n                    elementRect: elementRect2,\r\n                    direction: \"\",\r\n                    elementDirection: \"start\",\r\n                });\r\n                // inner.push(guideline);\r\n            }\r\n        });\r\n        start.sort(function (a, b) {\r\n            return b.pos[otherIndex] - a.pos[otherIndex];\r\n        });\r\n        end.sort(function (a, b) {\r\n            return a.pos[otherIndex] - b.pos[otherIndex];\r\n        });\r\n        return {\r\n            total: nextGuidelines,\r\n            start: start,\r\n            end: end,\r\n            inner: inner,\r\n        };\r\n    });\r\n}\r\nfunction renderDashedGuidelines(moveable, guidelines, targetPos, targetRect, React) {\r\n    var isDisplayInnerSnapDigit = moveable.props.isDisplayInnerSnapDigit;\r\n    var rendered = [];\r\n    [\"vertical\", \"horizontal\"].forEach(function (type) {\r\n        var nextGuidelines = guidelines.filter(function (guideline) { return guideline.type === type; });\r\n        var index = type === \"vertical\" ? 1 : 0;\r\n        var otherIndex = index ? 0 : 1;\r\n        var groups = groupByElementGuidelines(type, nextGuidelines, targetRect, isDisplayInnerSnapDigit);\r\n        var mainNames = index ? HORIZONTAL_NAMES_MAP : VERTICAL_NAMES_MAP;\r\n        var sideNames = index ? VERTICAL_NAMES_MAP : HORIZONTAL_NAMES_MAP;\r\n        var targetStart = targetRect[mainNames.start];\r\n        var targetEnd = targetRect[mainNames.end];\r\n        groups.forEach(function (_a) {\r\n            var total = _a.total, start = _a.start, end = _a.end, inner = _a.inner;\r\n            var sidePos = targetPos[otherIndex] + total[0].pos[otherIndex] - targetRect[sideNames.start];\r\n            var prevRect = targetRect;\r\n            start.forEach(function (guideline) {\r\n                var nextRect = guideline.elementRect.rect;\r\n                var size = prevRect[mainNames.start] - nextRect[mainNames.end];\r\n                if (size > 0) {\r\n                    var renderPos = [0, 0];\r\n                    renderPos[index] = targetPos[index] + prevRect[mainNames.start] - targetStart - size;\r\n                    renderPos[otherIndex] = sidePos;\r\n                    rendered.push(renderDigitLine(moveable, type, \"dashed\", rendered.length, size, renderPos, guideline.className, React));\r\n                }\r\n                prevRect = nextRect;\r\n            });\r\n            prevRect = targetRect;\r\n            end.forEach(function (guideline) {\r\n                var nextRect = guideline.elementRect.rect;\r\n                var size = nextRect[mainNames.start] - prevRect[mainNames.end];\r\n                if (size > 0) {\r\n                    var renderPos = [0, 0];\r\n                    renderPos[index] = targetPos[index] + prevRect[mainNames.end] - targetStart;\r\n                    renderPos[otherIndex] = sidePos;\r\n                    rendered.push(renderDigitLine(moveable, type, \"dashed\", rendered.length, size, renderPos, guideline.className, React));\r\n                }\r\n                prevRect = nextRect;\r\n            });\r\n            inner.forEach(function (guideline) {\r\n                var nextRect = guideline.elementRect.rect;\r\n                var size1 = targetStart - nextRect[mainNames.start];\r\n                var size2 = nextRect[mainNames.end] - targetEnd;\r\n                var renderPos1 = [0, 0];\r\n                var renderPos2 = [0, 0];\r\n                renderPos1[index] = targetPos[index] - size1;\r\n                renderPos1[otherIndex] = sidePos;\r\n                renderPos2[index] = targetPos[index] + targetEnd - targetStart;\r\n                renderPos2[otherIndex] = sidePos;\r\n                rendered.push(renderDigitLine(moveable, type, \"dashed\", rendered.length, size1, renderPos1, guideline.className, React));\r\n                rendered.push(renderDigitLine(moveable, type, \"dashed\", rendered.length, size2, renderPos2, guideline.className, React));\r\n            });\r\n        });\r\n    });\r\n    return rendered;\r\n}\r\nfunction renderGapGuidelines(moveable, guidelines, targetPos, targetRect, React) {\r\n    var rendered = [];\r\n    [\"horizontal\", \"vertical\"].forEach(function (type) {\r\n        var nextGuidelines = guidelines.filter(function (guideline) { return guideline.type === type; }).slice(0, 1);\r\n        var index = type === \"vertical\" ? 0 : 1;\r\n        var otherIndex = index ? 0 : 1;\r\n        var mainNames = index ? HORIZONTAL_NAMES_MAP : VERTICAL_NAMES_MAP;\r\n        var sideNames = index ? VERTICAL_NAMES_MAP : HORIZONTAL_NAMES_MAP;\r\n        var targetStart = targetRect[mainNames.start];\r\n        var targetEnd = targetRect[mainNames.end];\r\n        var targetSideStart = targetRect[sideNames.start];\r\n        var targetSideEnd = targetRect[sideNames.end];\r\n        nextGuidelines.forEach(function (_a) {\r\n            var gap = _a.gap, gapRects = _a.gapRects;\r\n            var sideStartPos = Math.max.apply(Math, __spreadArray([targetSideStart], __read(gapRects.map(function (_a) {\r\n                var rect = _a.rect;\r\n                return rect[sideNames.start];\r\n            })), false));\r\n            var sideEndPos = Math.min.apply(Math, __spreadArray([targetSideEnd], __read(gapRects.map(function (_a) {\r\n                var rect = _a.rect;\r\n                return rect[sideNames.end];\r\n            })), false));\r\n            var sideCenterPos = (sideStartPos + sideEndPos) / 2;\r\n            if (sideStartPos === sideEndPos || sideCenterPos === (targetSideStart + targetSideEnd) / 2) {\r\n                return;\r\n            }\r\n            gapRects.forEach(function (_a) {\r\n                var rect = _a.rect, className = _a.className;\r\n                var renderPos = [targetPos[0], targetPos[1]];\r\n                if (rect[mainNames.end] < targetStart) {\r\n                    renderPos[index] += rect[mainNames.end] - targetStart;\r\n                }\r\n                else if (targetEnd < rect[mainNames.start]) {\r\n                    renderPos[index] += rect[mainNames.start] - targetStart - gap;\r\n                }\r\n                else {\r\n                    return;\r\n                }\r\n                renderPos[otherIndex] += sideCenterPos - targetSideStart;\r\n                rendered.push(renderDigitLine(moveable, index ? \"vertical\" : \"horizontal\", \"gap\", rendered.length, gap, renderPos, className, React));\r\n            });\r\n        });\r\n    });\r\n    return rendered;\r\n}\n\nfunction getTotalGuidelines(moveable) {\r\n    var _a, _b;\r\n    var state = moveable.state;\r\n    var containerClientRect = state.containerClientRect, hasFixed = state.hasFixed;\r\n    var overflow = containerClientRect.overflow, containerHeight = containerClientRect.scrollHeight, containerWidth = containerClientRect.scrollWidth, containerClientHeight = containerClientRect.clientHeight, containerClientWidth = containerClientRect.clientWidth, clientLeft = containerClientRect.clientLeft, clientTop = containerClientRect.clientTop;\r\n    var _c = moveable.props, _d = _c.snapGap, snapGap = _d === void 0 ? true : _d, verticalGuidelines = _c.verticalGuidelines, horizontalGuidelines = _c.horizontalGuidelines, _e = _c.snapThreshold, snapThreshold = _e === void 0 ? 5 : _e, _f = _c.maxSnapElementGuidelineDistance, maxSnapElementGuidelineDistance = _f === void 0 ? Infinity : _f, isDisplayGridGuidelines = _c.isDisplayGridGuidelines;\r\n    var _g = getRect(getAbsolutePosesByState(moveable.state)), top = _g.top, left = _g.left, bottom = _g.bottom, right = _g.right;\r\n    var targetRect = { top: top, left: left, bottom: bottom, right: right, center: (left + right) / 2, middle: (top + bottom) / 2 };\r\n    var elementGuidelines = getElementGuidelines(moveable);\r\n    var totalGuidelines = __spreadArray([], __read(elementGuidelines), false);\r\n    var snapThresholdMultiples = ((_b = (_a = state.snapThresholdInfo) === null || _a === void 0 ? void 0 : _a.multiples) !== null && _b !== void 0 ? _b : [1, 1]).map(function (n) { return n * snapThreshold; });\r\n    if (snapGap) {\r\n        totalGuidelines.push.apply(totalGuidelines, __spreadArray([], __read(getGapGuidelines(moveable, targetRect, snapThresholdMultiples)), false));\r\n    }\r\n    var snapOffset = __assign({}, (state.snapOffset || {\r\n        left: 0,\r\n        top: 0,\r\n        bottom: 0,\r\n        right: 0,\r\n    }));\r\n    totalGuidelines.push.apply(totalGuidelines, __spreadArray([], __read(getGridGuidelines(moveable, overflow ? containerWidth : containerClientWidth, overflow ? containerHeight : containerClientHeight, clientLeft, clientTop, snapOffset, isDisplayGridGuidelines)), false));\r\n    if (hasFixed) {\r\n        var left_1 = containerClientRect.left, top_1 = containerClientRect.top;\r\n        snapOffset.left += left_1;\r\n        snapOffset.top += top_1;\r\n        snapOffset.right += left_1;\r\n        snapOffset.bottom += top_1;\r\n    }\r\n    totalGuidelines.push.apply(totalGuidelines, __spreadArray([], __read(getDefaultGuidelines(horizontalGuidelines || false, verticalGuidelines || false, overflow ? containerWidth : containerClientWidth, overflow ? containerHeight : containerClientHeight, clientLeft, clientTop, snapOffset)), false));\r\n    totalGuidelines = totalGuidelines.filter(function (_a) {\r\n        var element = _a.element, elementRect = _a.elementRect, type = _a.type;\r\n        if (!element || !elementRect) {\r\n            return true;\r\n        }\r\n        var rect = elementRect.rect;\r\n        return checkBetweenRects(targetRect, rect, type, maxSnapElementGuidelineDistance);\r\n    });\r\n    return totalGuidelines;\r\n}\r\nfunction getGapGuidelines(moveable, targetRect, snapThresholds) {\r\n    var _a = moveable.props, _b = _a.maxSnapElementGuidelineDistance, maxSnapElementGuidelineDistance = _b === void 0 ? Infinity : _b, _c = _a.maxSnapElementGapDistance, maxSnapElementGapDistance = _c === void 0 ? Infinity : _c;\r\n    var elementRects = moveable.state.elementRects;\r\n    var gapGuidelines = [];\r\n    [\r\n        [\"vertical\", VERTICAL_NAMES_MAP, HORIZONTAL_NAMES_MAP],\r\n        [\"horizontal\", HORIZONTAL_NAMES_MAP, VERTICAL_NAMES_MAP],\r\n    ].forEach(function (_a) {\r\n        var _b = __read(_a, 3), type = _b[0], mainNames = _b[1], sideNames = _b[2];\r\n        var targetStart = targetRect[mainNames.start];\r\n        var targetEnd = targetRect[mainNames.end];\r\n        var targetCenter = targetRect[mainNames.center];\r\n        var targetStart2 = targetRect[sideNames.start];\r\n        var targetEnd2 = targetRect[sideNames.end];\r\n        // element : moveable\r\n        var snapThresholdMap = {\r\n            left: snapThresholds[0],\r\n            top: snapThresholds[1],\r\n        };\r\n        function getDist(elementRect) {\r\n            var rect = elementRect.rect;\r\n            var snapThreshold = snapThresholdMap[mainNames.start];\r\n            if (rect[mainNames.end] < targetStart + snapThreshold) {\r\n                return targetStart - rect[mainNames.end];\r\n            }\r\n            else if (targetEnd - snapThreshold < rect[mainNames.start]) {\r\n                return rect[mainNames.start] - targetEnd;\r\n            }\r\n            else {\r\n                return -1;\r\n            }\r\n        }\r\n        var nextElementRects = elementRects.filter(function (elementRect) {\r\n            var rect = elementRect.rect;\r\n            if (rect[sideNames.start] > targetEnd2 || rect[sideNames.end] < targetStart2) {\r\n                return false;\r\n            }\r\n            return getDist(elementRect) > 0;\r\n        }).sort(function (a, b) {\r\n            return getDist(a) - getDist(b);\r\n        });\r\n        var groups = [];\r\n        nextElementRects.forEach(function (snapRect1) {\r\n            nextElementRects.forEach(function (snapRect2) {\r\n                if (snapRect1 === snapRect2) {\r\n                    return;\r\n                }\r\n                var rect1 = snapRect1.rect;\r\n                var rect2 = snapRect2.rect;\r\n                var rect1Start = rect1[sideNames.start];\r\n                var rect1End = rect1[sideNames.end];\r\n                var rect2Start = rect2[sideNames.start];\r\n                var rect2End = rect2[sideNames.end];\r\n                if (rect1Start > rect2End || rect2Start > rect1End) {\r\n                    return;\r\n                }\r\n                groups.push([snapRect1, snapRect2]);\r\n            });\r\n        });\r\n        groups.forEach(function (_a) {\r\n            var _b = __read(_a, 2), snapRect1 = _b[0], snapRect2 = _b[1];\r\n            var rect1 = snapRect1.rect;\r\n            var rect2 = snapRect2.rect;\r\n            var rect1Start = rect1[mainNames.start];\r\n            var rect1End = rect1[mainNames.end];\r\n            var rect2Start = rect2[mainNames.start];\r\n            var rect2End = rect2[mainNames.end];\r\n            var snapThreshold = snapThresholdMap[mainNames.start];\r\n            var gap = 0;\r\n            var pos = 0;\r\n            var isStart = false;\r\n            var isCenter = false;\r\n            var isEnd = false;\r\n            if (rect1End <= targetStart && targetEnd <= rect2Start) {\r\n                // (l)element1(r) : (l)target(r) : (l)element2(r)\r\n                isCenter = true;\r\n                gap = ((rect2Start - rect1End) - (targetEnd - targetStart)) / 2;\r\n                pos = rect1End + gap + (targetEnd - targetStart) / 2;\r\n                if (abs(pos - targetCenter) > snapThreshold) {\r\n                    return;\r\n                }\r\n            }\r\n            else if (rect1End < rect2Start && rect2End < targetStart + snapThreshold) {\r\n                // (l)element1(r) : (l)element2(r) : (l)target\r\n                isStart = true;\r\n                gap = rect2Start - rect1End;\r\n                pos = rect2End + gap;\r\n                if (abs(pos - targetStart) > snapThreshold) {\r\n                    return;\r\n                }\r\n            }\r\n            else if (rect1End < rect2Start && targetEnd - snapThreshold < rect1Start) {\r\n                // target(r) : (l)element1(r) : (l)element2(r)\r\n                isEnd = true;\r\n                gap = rect2Start - rect1End;\r\n                pos = rect1Start - gap;\r\n                if (abs(pos - targetEnd) > snapThreshold) {\r\n                    return;\r\n                }\r\n            }\r\n            else {\r\n                return;\r\n            }\r\n            if (!gap) {\r\n                return;\r\n            }\r\n            if (!checkBetweenRects(targetRect, rect2, type, maxSnapElementGuidelineDistance)) {\r\n                return;\r\n            }\r\n            if (gap > maxSnapElementGapDistance) {\r\n                return;\r\n            }\r\n            gapGuidelines.push({\r\n                type: type,\r\n                pos: type === \"vertical\" ? [pos, 0] : [0, pos],\r\n                element: snapRect2.element,\r\n                size: 0,\r\n                className: snapRect2.className,\r\n                isStart: isStart,\r\n                isCenter: isCenter,\r\n                isEnd: isEnd,\r\n                gap: gap,\r\n                hide: true,\r\n                gapRects: [snapRect1, snapRect2],\r\n                direction: \"\",\r\n                elementDirection: \"\",\r\n            });\r\n        });\r\n    });\r\n    return gapGuidelines;\r\n}\r\nfunction startGridGroupGuidelines(moveable, clientLeft, clientTop, snapOffset) {\r\n    var _a, _b;\r\n    var props = moveable.props;\r\n    var state = moveable.state;\r\n    var snapGridAll = props.snapGridAll;\r\n    var _c = props.snapGridWidth, snapGridWidth = _c === void 0 ? 0 : _c, _d = props.snapGridHeight, snapGridHeight = _d === void 0 ? 0 : _d;\r\n    var snapRenderInfo = state.snapRenderInfo;\r\n    var hasDirection = snapRenderInfo && (((_a = snapRenderInfo.direction) === null || _a === void 0 ? void 0 : _a[0]) || ((_b = snapRenderInfo.direction) === null || _b === void 0 ? void 0 : _b[1]));\r\n    var moveables = moveable.moveables;\r\n    // snap group's all child to grid.\r\n    if (snapGridAll\r\n        && moveables\r\n        && hasDirection\r\n        && (snapGridWidth || snapGridHeight)) {\r\n        if (state.snapThresholdInfo) {\r\n            return;\r\n        }\r\n        state.snapThresholdInfo = {\r\n            multiples: [1, 1],\r\n            offset: [0, 0],\r\n        };\r\n        var rect_1 = moveable.getRect();\r\n        var children_1 = rect_1.children;\r\n        var direction = snapRenderInfo.direction;\r\n        if (children_1) {\r\n            var result = direction.map(function (dir, i) {\r\n                var _a = i === 0 ? {\r\n                    snapSize: snapGridWidth,\r\n                    posName: \"left\",\r\n                    sizeName: \"width\",\r\n                    clientOffset: snapOffset.left - clientLeft,\r\n                } : {\r\n                    snapSize: snapGridHeight,\r\n                    posName: \"top\",\r\n                    sizeName: \"height\",\r\n                    clientOffset: snapOffset.top - clientTop,\r\n                }, snapSize = _a.snapSize, posName = _a.posName, sizeName = _a.sizeName, clientOffset = _a.clientOffset;\r\n                if (!snapSize) {\r\n                    return {\r\n                        dir: dir,\r\n                        multiple: 1,\r\n                        snapSize: snapSize,\r\n                        snapOffset: 0,\r\n                    };\r\n                }\r\n                var rectSize = rect_1[sizeName];\r\n                var rectPos = rect_1[posName];\r\n                //     ?\r\n                var childSizes = flat$1(children_1.map(function (child) {\r\n                    return [\r\n                        (child[posName] - rectPos),\r\n                        (child[sizeName]),\r\n                        (rectSize - child[sizeName] - child[posName] + rectPos),\r\n                    ];\r\n                })).filter(function (v) { return v; }).sort(function (a, b) {\r\n                    return a - b;\r\n                });\r\n                var firstChildSize = childSizes[0];\r\n                var childSnapSizes = childSizes.map(function (size) { return throttle(size / firstChildSize, 0.1) * snapSize; });\r\n                var n = 1;\r\n                var rectRatio = throttle(rectSize / firstChildSize, 0.1);\r\n                for (n = 1; n <= 10; ++n) {\r\n                    if (childSnapSizes.every(function (childSize) {\r\n                        return childSize * n % 1 === 0;\r\n                    })) {\r\n                        break;\r\n                    }\r\n                }\r\n                // dir 1 (fixed -1)\r\n                // dir 0 (fixed 0)\r\n                // dir -1 (fixed 1)\r\n                var ratio = (-dir + 1) / 2;\r\n                var offsetPos = dot(rectPos - clientOffset, rectPos - clientOffset + rectSize, ratio, 1 - ratio);\r\n                return {\r\n                    multiple: rectRatio * n,\r\n                    dir: dir,\r\n                    snapSize: snapSize,\r\n                    snapOffset: Math.round(offsetPos / snapSize),\r\n                };\r\n            });\r\n            var multiples = result.map(function (r) { return r.multiple || 1; });\r\n            state.snapThresholdInfo.multiples = multiples;\r\n            state.snapThresholdInfo.offset = result.map(function (r) { return r.snapOffset; });\r\n            result.forEach(function (r, i) {\r\n                if (r.snapSize) ;\r\n            });\r\n        }\r\n    }\r\n    else {\r\n        state.snapThresholdInfo = null;\r\n    }\r\n}\r\nfunction getGridGuidelines(moveable, containerWidth, containerHeight, clientLeft, clientTop, snapOffset, isDisplayGridGuidelines) {\r\n    if (clientLeft === void 0) { clientLeft = 0; }\r\n    if (clientTop === void 0) { clientTop = 0; }\r\n    var props = moveable.props;\r\n    var state = moveable.state;\r\n    var _a = props.snapGridWidth, snapGridWidth = _a === void 0 ? 0 : _a, _b = props.snapGridHeight, snapGridHeight = _b === void 0 ? 0 : _b;\r\n    var guidelines = [];\r\n    var snapOffsetLeft = snapOffset.left, snapOffsetTop = snapOffset.top;\r\n    var startOffset = [0, 0];\r\n    startGridGroupGuidelines(moveable, clientLeft, clientTop, snapOffset);\r\n    var snapThresholdInfo = state.snapThresholdInfo;\r\n    var defaultSnapGridWidth = snapGridWidth;\r\n    var defaultSnapGridHeight = snapGridHeight;\r\n    if (snapThresholdInfo) {\r\n        snapGridWidth *= snapThresholdInfo.multiples[0] || 1;\r\n        snapGridHeight *= snapThresholdInfo.multiples[1] || 1;\r\n        startOffset = snapThresholdInfo.offset;\r\n    }\r\n    if (snapGridHeight) {\r\n        var pushGuideline = function (pos) {\r\n            guidelines.push({\r\n                type: \"horizontal\",\r\n                pos: [\r\n                    snapOffsetLeft,\r\n                    throttle(startOffset[1] * defaultSnapGridHeight + pos - clientTop + snapOffsetTop, 0.1),\r\n                ],\r\n                className: prefix(\"grid-guideline\"),\r\n                size: containerWidth,\r\n                hide: !isDisplayGridGuidelines,\r\n                direction: \"\",\r\n                grid: true,\r\n            });\r\n        };\r\n        for (var pos = 0; pos <= containerHeight * 2; pos += snapGridHeight) {\r\n            pushGuideline(pos);\r\n        }\r\n        for (var pos = -snapGridHeight; pos >= -containerHeight; pos -= snapGridHeight) {\r\n            pushGuideline(pos);\r\n        }\r\n    }\r\n    if (snapGridWidth) {\r\n        var pushGuideline = function (pos) {\r\n            guidelines.push({\r\n                type: \"vertical\",\r\n                pos: [\r\n                    throttle(startOffset[0] * defaultSnapGridWidth + pos - clientLeft + snapOffsetLeft, 0.1),\r\n                    snapOffsetTop,\r\n                ],\r\n                className: prefix(\"grid-guideline\"),\r\n                size: containerHeight,\r\n                hide: !isDisplayGridGuidelines,\r\n                direction: \"\",\r\n                grid: true,\r\n            });\r\n        };\r\n        for (var pos = 0; pos <= containerWidth * 2; pos += snapGridWidth) {\r\n            pushGuideline(pos);\r\n        }\r\n        for (var pos = -snapGridWidth; pos >= -containerWidth; pos -= snapGridWidth) {\r\n            pushGuideline(pos);\r\n        }\r\n    }\r\n    return guidelines;\r\n}\r\nfunction checkBetweenRects(rect1, rect2, type, distance) {\r\n    if (type === \"horizontal\") {\r\n        return abs(rect1.right - rect2.left) <= distance\r\n            || abs(rect1.left - rect2.right) <= distance\r\n            || rect1.left <= rect2.right && rect2.left <= rect1.right;\r\n    }\r\n    else if (type === \"vertical\") {\r\n        return abs(rect1.bottom - rect2.top) <= distance\r\n            || abs(rect1.top - rect2.bottom) <= distance\r\n            || rect1.top <= rect2.bottom && rect2.top <= rect1.bottom;\r\n    }\r\n    return true;\r\n}\r\nfunction getElementGuidelines(moveable) {\r\n    var state = moveable.state;\r\n    var _a = moveable.props.elementGuidelines, elementGuidelines = _a === void 0 ? [] : _a;\r\n    if (!elementGuidelines.length) {\r\n        state.elementRects = [];\r\n        return [];\r\n    }\r\n    var prevValues = (state.elementRects || []).filter(function (snapRect) { return !snapRect.refresh; });\r\n    var nextElementGuidelines = elementGuidelines.map(function (el) {\r\n        if (isObject(el) && \"element\" in el) {\r\n            return __assign(__assign({}, el), { element: getRefTarget(el.element, true) });\r\n        }\r\n        return {\r\n            element: getRefTarget(el, true),\r\n        };\r\n    }).filter(function (value) {\r\n        return value.element;\r\n    });\r\n    var _b = diff(prevValues.map(function (v) { return v.element; }), nextElementGuidelines.map(function (v) { return v.element; })), maintained = _b.maintained, added = _b.added;\r\n    var nextValues = [];\r\n    maintained.forEach(function (_a) {\r\n        var _b = __read(_a, 2), prevIndex = _b[0], nextIndex = _b[1];\r\n        nextValues[nextIndex] = prevValues[prevIndex];\r\n    });\r\n    getSnapElementRects(moveable, added.map(function (index) { return nextElementGuidelines[index]; })).map(function (rect, i) {\r\n        nextValues[added[i]] = rect;\r\n    });\r\n    state.elementRects = nextValues;\r\n    var elementSnapDirections = getSnapDirections(moveable.props.elementSnapDirections);\r\n    var nextGuidelines = [];\r\n    nextValues.forEach(function (snapRect) {\r\n        var element = snapRect.element, _a = snapRect.top, topValue = _a === void 0 ? elementSnapDirections.top : _a, _b = snapRect.left, leftValue = _b === void 0 ? elementSnapDirections.left : _b, _c = snapRect.right, rightValue = _c === void 0 ? elementSnapDirections.right : _c, _d = snapRect.bottom, bottomValue = _d === void 0 ? elementSnapDirections.bottom : _d, _e = snapRect.center, centerValue = _e === void 0 ? elementSnapDirections.center : _e, _f = snapRect.middle, middleValue = _f === void 0 ? elementSnapDirections.middle : _f, className = snapRect.className, rect = snapRect.rect;\r\n        var _g = splitSnapDirectionPoses({\r\n            top: topValue,\r\n            right: rightValue,\r\n            left: leftValue,\r\n            bottom: bottomValue,\r\n            center: centerValue,\r\n            middle: middleValue,\r\n        }, rect), horizontal = _g.horizontal, vertical = _g.vertical, horizontalNames = _g.horizontalNames, verticalNames = _g.verticalNames;\r\n        var rectTop = rect.top;\r\n        var rectLeft = rect.left;\r\n        var width = rect.right - rectLeft;\r\n        var height = rect.bottom - rectTop;\r\n        var sizes = [width, height];\r\n        vertical.forEach(function (pos, i) {\r\n            nextGuidelines.push({\r\n                type: \"vertical\",\r\n                element: element,\r\n                pos: [\r\n                    throttle(pos, 0.1),\r\n                    rectTop,\r\n                ], size: height,\r\n                sizes: sizes,\r\n                className: className,\r\n                elementRect: snapRect,\r\n                elementDirection: SNAP_SKIP_NAMES_MAP[verticalNames[i]] || verticalNames[i],\r\n                direction: \"\",\r\n            });\r\n        });\r\n        horizontal.forEach(function (pos, i) {\r\n            nextGuidelines.push({\r\n                type: \"horizontal\",\r\n                element: element,\r\n                pos: [\r\n                    rectLeft,\r\n                    throttle(pos, 0.1),\r\n                ],\r\n                size: width,\r\n                sizes: sizes,\r\n                className: className,\r\n                elementRect: snapRect,\r\n                elementDirection: SNAP_SKIP_NAMES_MAP[horizontalNames[i]] || horizontalNames[i],\r\n                direction: \"\",\r\n            });\r\n        });\r\n    });\r\n    return nextGuidelines;\r\n}\r\nfunction getObjectGuidelines(guidelines, containerSize) {\r\n    return guidelines ? guidelines.map(function (info) {\r\n        var posGuideline = isObject(info) ? info : { pos: info };\r\n        var pos = posGuideline.pos;\r\n        if (isNumber(pos)) {\r\n            return posGuideline;\r\n        }\r\n        else {\r\n            return __assign(__assign({}, posGuideline), { pos: convertUnitSize(pos, containerSize) });\r\n        }\r\n    }) : [];\r\n}\r\nfunction getDefaultGuidelines(horizontalGuidelines, verticalGuidelines, width, height, clientLeft, clientTop, snapOffset) {\r\n    if (clientLeft === void 0) { clientLeft = 0; }\r\n    if (clientTop === void 0) { clientTop = 0; }\r\n    if (snapOffset === void 0) { snapOffset = { left: 0, top: 0, right: 0, bottom: 0 }; }\r\n    var guidelines = [];\r\n    var snapOffsetLeft = snapOffset.left, snapOffsetTop = snapOffset.top, snapOffsetBottom = snapOffset.bottom, snapOffsetRight = snapOffset.right;\r\n    var snapWidth = width + snapOffsetRight - snapOffsetLeft;\r\n    var snapHeight = height + snapOffsetBottom - snapOffsetTop;\r\n    getObjectGuidelines(horizontalGuidelines, snapHeight).forEach(function (posInfo) {\r\n        guidelines.push({\r\n            type: \"horizontal\",\r\n            pos: [\r\n                snapOffsetLeft,\r\n                throttle(posInfo.pos - clientTop + snapOffsetTop, 0.1),\r\n            ],\r\n            size: snapWidth,\r\n            className: posInfo.className,\r\n            direction: \"\",\r\n        });\r\n    });\r\n    getObjectGuidelines(verticalGuidelines, snapWidth).forEach(function (posInfo) {\r\n        guidelines.push({\r\n            type: \"vertical\",\r\n            pos: [\r\n                throttle(posInfo.pos - clientLeft + snapOffsetLeft, 0.1),\r\n                snapOffsetTop,\r\n            ],\r\n            size: snapHeight,\r\n            className: posInfo.className,\r\n            direction: \"\",\r\n        });\r\n    });\r\n    return guidelines;\r\n}\r\nfunction getSnapElementRects(moveable, values) {\r\n    if (!values.length) {\r\n        return [];\r\n    }\r\n    var groupable = moveable.props.groupable;\r\n    var state = moveable.state;\r\n    var containerClientRect = state.containerClientRect, \r\n    // targetClientRect: {\r\n    //     top: clientTop,\r\n    //     left: clientLeft,\r\n    // },\r\n    rootMatrix = state.rootMatrix, is3d = state.is3d, offsetDelta = state.offsetDelta;\r\n    var n = is3d ? 4 : 3;\r\n    var _a = __read(calculateContainerPos(rootMatrix, containerClientRect, n), 2), containerLeft = _a[0], containerTop = _a[1];\r\n    // const poses = getAbsolutePosesByState(state);\r\n    // const {\r\n    //     minX: targetLeft,\r\n    //     minY: targetTop,\r\n    // } = getMinMaxs(poses);\r\n    // const [distLeft, distTop] = minus([targetLeft, targetTop], calculateInversePosition(rootMatrix, [\r\n    //     clientLeft - containerLeft,\r\n    //     clientTop - containerTop,\r\n    // ], n)).map(pos => roundSign(pos));\r\n    var offsetLeft = groupable ? 0 : offsetDelta[0];\r\n    var offsetTop = groupable ? 0 : offsetDelta[1];\r\n    return values.map(function (value) {\r\n        var rect = value.element.getBoundingClientRect();\r\n        var left = rect.left - containerLeft - offsetLeft;\r\n        var top = rect.top - containerTop - offsetTop;\r\n        var bottom = top + rect.height;\r\n        var right = left + rect.width;\r\n        var _a = __read(calculateInversePosition(rootMatrix, [left, top], n), 2), elementLeft = _a[0], elementTop = _a[1];\r\n        var _b = __read(calculateInversePosition(rootMatrix, [right, bottom], n), 2), elementRight = _b[0], elementBottom = _b[1];\r\n        return __assign(__assign({}, value), { rect: {\r\n                left: elementLeft,\r\n                right: elementRight,\r\n                top: elementTop,\r\n                bottom: elementBottom,\r\n                center: (elementLeft + elementRight) / 2,\r\n                middle: (elementTop + elementBottom) / 2,\r\n            } });\r\n    });\r\n}\n\nfunction checkSnapInfo(moveable) {\r\n    var state = moveable.state;\r\n    var container = state.container;\r\n    var snapContainer = moveable.props.snapContainer || container;\r\n    if (state.snapContainer === snapContainer && state.guidelines && state.guidelines.length) {\r\n        return false;\r\n    }\r\n    var containerClientRect = state.containerClientRect;\r\n    var snapOffset = {\r\n        left: 0,\r\n        top: 0,\r\n        bottom: 0,\r\n        right: 0,\r\n    };\r\n    if (container !== snapContainer) {\r\n        var snapContainerTarget = getRefTarget(snapContainer, true);\r\n        if (snapContainerTarget) {\r\n            var snapContainerRect = getClientRect(snapContainerTarget);\r\n            var offset1 = getDragDistByState(state, [\r\n                snapContainerRect.left - containerClientRect.left,\r\n                snapContainerRect.top - containerClientRect.top,\r\n            ]);\r\n            var offset2 = getDragDistByState(state, [\r\n                snapContainerRect.right - containerClientRect.right,\r\n                snapContainerRect.bottom - containerClientRect.bottom,\r\n            ]);\r\n            snapOffset.left = throttle(offset1[0], 0.00001);\r\n            snapOffset.top = throttle(offset1[1], 0.00001);\r\n            snapOffset.right = throttle(offset2[0], 0.00001);\r\n            snapOffset.bottom = throttle(offset2[1], 0.00001);\r\n        }\r\n    }\r\n    state.snapContainer = snapContainer;\r\n    state.snapOffset = snapOffset;\r\n    state.guidelines = getTotalGuidelines(moveable);\r\n    state.enableSnap = true;\r\n    return true;\r\n}\r\nfunction getNextFixedPoses(matrix, width, height, fixedDirection, fixedPos, is3d) {\r\n    var nextPoses = calculatePoses(matrix, width, height, is3d ? 4 : 3);\r\n    var nextFixedPos = getPosByDirection(nextPoses, fixedDirection);\r\n    return getAbsolutePoses(nextPoses, minus(fixedPos, nextFixedPos));\r\n}\r\nfunction normalized(value) {\r\n    return value ? value / abs(value) : 0;\r\n}\r\nfunction getSizeOffsetInfo(moveable, poses, direction, keepRatio, isRequest, datas) {\r\n    var fixedDirection = datas.fixedDirection;\r\n    var directions = getCheckSnapDirections(direction, fixedDirection, keepRatio);\r\n    var innerBoundLineInfos = getCheckInnerBoundLineInfos(moveable, poses, direction, keepRatio);\r\n    var offsets = __spreadArray(__spreadArray([], __read(getSnapBoundInfo(moveable, poses, directions, keepRatio, isRequest, datas)), false), __read(getInnerBoundInfo(moveable, innerBoundLineInfos, datas)), false);\r\n    var widthOffsetInfo = getNearOffsetInfo(offsets, 0);\r\n    var heightOffsetInfo = getNearOffsetInfo(offsets, 1);\r\n    return {\r\n        width: {\r\n            isBound: widthOffsetInfo.isBound,\r\n            offset: widthOffsetInfo.offset[0],\r\n        },\r\n        height: {\r\n            isBound: heightOffsetInfo.isBound,\r\n            offset: heightOffsetInfo.offset[1],\r\n        },\r\n    };\r\n}\r\nfunction recheckSizeByTwoDirection(moveable, poses, width, height, maxWidth, maxHeight, direction, isRequest, datas) {\r\n    var snapPos = getPosByDirection(poses, direction);\r\n    var _a = checkMoveableSnapBounds(moveable, isRequest, {\r\n        vertical: [snapPos[0]],\r\n        horizontal: [snapPos[1]],\r\n    }), horizontalOffset = _a.horizontal.offset, verticalOffset = _a.vertical.offset;\r\n    if (throttle(verticalOffset, FLOAT_POINT_NUM) || throttle(horizontalOffset, FLOAT_POINT_NUM)) {\r\n        var _b = __read(getDragDist({\r\n            datas: datas,\r\n            distX: -verticalOffset,\r\n            distY: -horizontalOffset,\r\n        }), 2), nextWidthOffset = _b[0], nextHeightOffset = _b[1];\r\n        var nextWidth = Math.min(maxWidth || Infinity, width + direction[0] * nextWidthOffset);\r\n        var nextHeight = Math.min(maxHeight || Infinity, height + direction[1] * nextHeightOffset);\r\n        return [nextWidth - width, nextHeight - height];\r\n    }\r\n    return [0, 0];\r\n}\r\nfunction checkSizeDist(moveable, getNextPoses, width, height, direction, fixedPosition, isRequest, datas) {\r\n    var poses = getAbsolutePosesByState(moveable.state);\r\n    var keepRatio = moveable.props.keepRatio;\r\n    var widthOffset = 0;\r\n    var heightOffset = 0;\r\n    for (var i = 0; i < 2; ++i) {\r\n        var nextPoses = getNextPoses(widthOffset, heightOffset);\r\n        var _a = getSizeOffsetInfo(moveable, nextPoses, direction, keepRatio, isRequest, datas), widthOffsetInfo = _a.width, heightOffsetInfo = _a.height;\r\n        var isWidthBound = widthOffsetInfo.isBound;\r\n        var isHeightBound = heightOffsetInfo.isBound;\r\n        var nextWidthOffset = widthOffsetInfo.offset;\r\n        var nextHeightOffset = heightOffsetInfo.offset;\r\n        if (i === 1) {\r\n            if (!isWidthBound) {\r\n                nextWidthOffset = 0;\r\n            }\r\n            if (!isHeightBound) {\r\n                nextHeightOffset = 0;\r\n            }\r\n        }\r\n        if (i === 0 && isRequest && !isWidthBound && !isHeightBound) {\r\n            return [0, 0];\r\n        }\r\n        if (keepRatio) {\r\n            var widthDist = abs(nextWidthOffset) * (width ? 1 / width : 1);\r\n            var heightDist = abs(nextHeightOffset) * (height ? 1 / height : 1);\r\n            var isGetWidthOffset = isWidthBound && isHeightBound\r\n                ? widthDist < heightDist\r\n                : isHeightBound ||\r\n                    (!isWidthBound && widthDist < heightDist);\r\n            if (isGetWidthOffset) {\r\n                // width : height = ? : heightOffset\r\n                nextWidthOffset = (width * nextHeightOffset) / height;\r\n            }\r\n            else {\r\n                // width : height = widthOffset : ?\r\n                nextHeightOffset = (height * nextWidthOffset) / width;\r\n            }\r\n        }\r\n        widthOffset += nextWidthOffset;\r\n        heightOffset += nextHeightOffset;\r\n    }\r\n    if (!keepRatio && direction[0] && direction[1]) {\r\n        var _b = checkMaxBounds(moveable, poses, direction, fixedPosition, datas), maxWidth = _b.maxWidth, maxHeight = _b.maxHeight;\r\n        var _c = __read(recheckSizeByTwoDirection(moveable, getNextPoses(widthOffset, heightOffset).map(function (pos) { return pos.map(function (p) { return throttle(p, FLOAT_POINT_NUM); }); }), width + widthOffset, height + heightOffset, maxWidth, maxHeight, direction, isRequest, datas), 2), nextWidthOffset = _c[0], nextHeightOffset = _c[1];\r\n        widthOffset += nextWidthOffset;\r\n        heightOffset += nextHeightOffset;\r\n    }\r\n    return [widthOffset, heightOffset];\r\n}\r\nfunction absDegree(deg) {\r\n    if (deg < 0) {\r\n        deg = deg % 360 + 360;\r\n    }\r\n    deg %= 360;\r\n    return deg;\r\n}\r\nfunction bumpDegree(baseDeg, snapDeg) {\r\n    // baseDeg -80\r\n    // snapDeg 270\r\n    // return -90\r\n    snapDeg = absDegree(snapDeg);\r\n    var count = Math.floor(baseDeg / 360);\r\n    var deg1 = count * 360 + 360 - snapDeg;\r\n    var deg2 = count * 360 + snapDeg;\r\n    return abs(baseDeg - deg1) < abs(baseDeg - deg2) ? deg1 : deg2;\r\n}\r\nfunction getMinDegreeDistance(deg1, deg2) {\r\n    deg1 = absDegree(deg1);\r\n    deg2 = absDegree(deg2);\r\n    var deg3 = absDegree(deg1 - deg2);\r\n    return Math.min(deg3, 360 - deg3);\r\n}\r\nfunction checkSnapRotate(moveable, rect, dist, rotation) {\r\n    var _a;\r\n    var props = moveable.props;\r\n    var snapRotationThreshold = (_a = props[NAME_snapRotationThreshold]) !== null && _a !== void 0 ? _a : 5;\r\n    var snapRotationDegrees = props[NAME_snapRotationDegrees];\r\n    if (hasGuidelines(moveable, \"rotatable\")) {\r\n        var pos1 = rect.pos1, pos2 = rect.pos2, pos3 = rect.pos3, pos4 = rect.pos4, origin2_1 = rect.origin;\r\n        var rad_1 = (dist * Math.PI) / 180;\r\n        var prevPoses = [pos1, pos2, pos3, pos4].map(function (pos) { return minus(pos, origin2_1); });\r\n        var nextPoses = prevPoses.map(function (pos) { return rotate(pos, rad_1); });\r\n        // console.log(moveable.state.left, moveable.state.top, moveable.state.origin);\r\n        // console.log(pos1, pos2, pos3, pos4, origin, rad, prevPoses, nextPoses);\r\n        var result = __spreadArray(__spreadArray([], __read(checkRotateBounds(moveable, prevPoses, nextPoses, origin2_1, dist)), false), __read(checkRotateInnerBounds(moveable, prevPoses, nextPoses, origin2_1, dist)), false);\r\n        result.sort(function (a, b) { return abs(a - dist) - abs(b - dist); });\r\n        var isSnap = result.length > 0;\r\n        if (isSnap) {\r\n            return {\r\n                isSnap: isSnap,\r\n                dist: isSnap ? result[0] : dist,\r\n            };\r\n        }\r\n    }\r\n    if ((snapRotationDegrees === null || snapRotationDegrees === void 0 ? void 0 : snapRotationDegrees.length) && snapRotationThreshold) {\r\n        var sorted = snapRotationDegrees.slice().sort(function (a, b) {\r\n            return getMinDegreeDistance(a, rotation) - getMinDegreeDistance(b, rotation);\r\n        });\r\n        var firstDegree = sorted[0];\r\n        if (getMinDegreeDistance(firstDegree, rotation) <= snapRotationThreshold) {\r\n            return {\r\n                isSnap: true,\r\n                dist: dist + bumpDegree(rotation, firstDegree) - rotation,\r\n            };\r\n        }\r\n    }\r\n    return {\r\n        isSnap: false,\r\n        dist: dist,\r\n    };\r\n}\r\nfunction checkSnapResize(moveable, width, height, direction, fixedPosition, isRequest, datas) {\r\n    if (!hasGuidelines(moveable, \"resizable\")) {\r\n        return [0, 0];\r\n    }\r\n    var fixedDirection = datas.fixedDirection, nextAllMatrix = datas.nextAllMatrix;\r\n    var _a = moveable.state, allMatrix = _a.allMatrix, is3d = _a.is3d;\r\n    return checkSizeDist(moveable, function (widthOffset, heightOffset) {\r\n        return getNextFixedPoses(nextAllMatrix || allMatrix, width + widthOffset, height + heightOffset, fixedDirection, fixedPosition, is3d);\r\n    }, width, height, direction, fixedPosition, isRequest, datas);\r\n}\r\nfunction checkSnapScale(moveable, scale, direction, isRequest, datas) {\r\n    if (!hasGuidelines(moveable, \"scalable\")) {\r\n        return [0, 0];\r\n    }\r\n    var startOffsetWidth = datas.startOffsetWidth, startOffsetHeight = datas.startOffsetHeight, fixedPosition = datas.fixedPosition, fixedDirection = datas.fixedDirection, is3d = datas.is3d;\r\n    var sizeDist = checkSizeDist(moveable, function (widthOffset, heightOffset) {\r\n        return getNextFixedPoses(scaleMatrix(datas, plus(scale, [widthOffset / startOffsetWidth, heightOffset / startOffsetHeight])), startOffsetWidth, startOffsetHeight, fixedDirection, fixedPosition, is3d);\r\n    }, startOffsetWidth, startOffsetHeight, direction, fixedPosition, isRequest, datas);\r\n    return [sizeDist[0] / startOffsetWidth, sizeDist[1] / startOffsetHeight];\r\n}\r\nfunction startCheckSnapDrag(moveable, datas) {\r\n    datas.absolutePoses = getAbsolutePosesByState(moveable.state);\r\n}\r\nfunction getSnapGuidelines(posInfos) {\r\n    var guidelines = [];\r\n    posInfos.forEach(function (posInfo) {\r\n        posInfo.guidelineInfos.forEach(function (_a) {\r\n            var guideline = _a.guideline;\r\n            if (find(guidelines, function (info) { return info.guideline === guideline; })) {\r\n                return;\r\n            }\r\n            guideline.direction = \"\";\r\n            guidelines.push({ guideline: guideline, posInfo: posInfo });\r\n        });\r\n    });\r\n    return guidelines.map(function (_a) {\r\n        var guideline = _a.guideline, posInfo = _a.posInfo;\r\n        return __assign(__assign({}, guideline), { direction: posInfo.direction });\r\n    });\r\n}\r\nfunction addBoundGuidelines(moveable, verticalPoses, horizontalPoses, verticalSnapPoses, horizontalSnapPoses, externalBounds) {\r\n    var _a = checkBoundPoses(getBounds(moveable, externalBounds), verticalPoses, horizontalPoses), verticalBoundInfos = _a.vertical, horizontalBoundInfos = _a.horizontal;\r\n    var boundMap = getInitialBounds();\r\n    verticalBoundInfos.forEach(function (info) {\r\n        if (info.isBound) {\r\n            if (info.direction === \"start\") {\r\n                boundMap.left = true;\r\n            }\r\n            if (info.direction === \"end\") {\r\n                boundMap.right = true;\r\n            }\r\n            verticalSnapPoses.push({\r\n                type: \"bounds\",\r\n                pos: info.pos,\r\n            });\r\n        }\r\n    });\r\n    horizontalBoundInfos.forEach(function (info) {\r\n        if (info.isBound) {\r\n            if (info.direction === \"start\") {\r\n                boundMap.top = true;\r\n            }\r\n            if (info.direction === \"end\") {\r\n                boundMap.bottom = true;\r\n            }\r\n            horizontalSnapPoses.push({\r\n                type: \"bounds\",\r\n                pos: info.pos,\r\n            });\r\n        }\r\n    });\r\n    var _b = checkInnerBoundPoses(moveable), innerBoundMap = _b.boundMap, verticalInnerBoundPoses = _b.vertical, horizontalInnerBoundPoses = _b.horizontal;\r\n    verticalInnerBoundPoses.forEach(function (innerPos) {\r\n        if (findIndex(verticalSnapPoses, function (_a) {\r\n            var type = _a.type, pos = _a.pos;\r\n            return type === \"bounds\" && pos === innerPos;\r\n        }) >= 0) {\r\n            return;\r\n        }\r\n        verticalSnapPoses.push({\r\n            type: \"bounds\",\r\n            pos: innerPos,\r\n        });\r\n    });\r\n    horizontalInnerBoundPoses.forEach(function (innerPos) {\r\n        if (findIndex(horizontalSnapPoses, function (_a) {\r\n            var type = _a.type, pos = _a.pos;\r\n            return type === \"bounds\" && pos === innerPos;\r\n        }) >= 0) {\r\n            return;\r\n        }\r\n        horizontalSnapPoses.push({\r\n            type: \"bounds\",\r\n            pos: innerPos,\r\n        });\r\n    });\r\n    return {\r\n        boundMap: boundMap,\r\n        innerBoundMap: innerBoundMap,\r\n    };\r\n}\r\nvar directionCondition$1 = getDirectionCondition(\"\", [\"resizable\", \"scalable\"]);\r\n/**\r\n * @namespace Moveable.Snappable\r\n * @description Whether or not target can be snapped to the guideline. (default: false)\r\n * @sort 2\r\n */\r\nvar Snappable = {\r\n    name: \"snappable\",\r\n    dragRelation: \"strong\",\r\n    props: [\r\n        \"snappable\",\r\n        \"snapContainer\",\r\n        \"snapDirections\",\r\n        \"elementSnapDirections\",\r\n        \"snapGap\",\r\n        \"snapGridWidth\",\r\n        \"snapGridHeight\",\r\n        \"isDisplaySnapDigit\",\r\n        \"isDisplayInnerSnapDigit\",\r\n        \"isDisplayGridGuidelines\",\r\n        \"snapDigit\",\r\n        \"snapThreshold\",\r\n        \"snapRenderThreshold\",\r\n        \"snapGridAll\",\r\n        NAME_snapRotationThreshold,\r\n        NAME_snapRotationDegrees,\r\n        NAME_snapHorizontalThreshold,\r\n        NAME_snapVerticalThreshold,\r\n        \"horizontalGuidelines\",\r\n        \"verticalGuidelines\",\r\n        \"elementGuidelines\",\r\n        \"bounds\",\r\n        \"innerBounds\",\r\n        \"snapDistFormat\",\r\n        \"maxSnapElementGuidelineDistance\",\r\n        \"maxSnapElementGapDistance\",\r\n    ],\r\n    events: [\"snap\", \"bound\"],\r\n    css: [\r\n        \":host {\\n--bounds-color: #d66;\\n}\\n.guideline {\\npointer-events: none;\\nz-index: 2;\\n}\\n.guideline.bounds {\\nbackground: #d66;\\nbackground: var(--bounds-color);\\n}\\n.guideline-group {\\nposition: absolute;\\ntop: 0;\\nleft: 0;\\n}\\n.guideline-group .size-value {\\nposition: absolute;\\ncolor: #f55;\\nfont-size: 12px;\\nfont-size: calc(12px * var(--zoom));\\nfont-weight: bold;\\n}\\n.guideline-group.horizontal .size-value {\\ntransform-origin: 50% 100%;\\ntransform: translateX(-50%);\\nleft: 50%;\\nbottom: 5px;\\nbottom: calc(2px + 3px * var(--zoom));\\n}\\n.guideline-group.vertical .size-value {\\ntransform-origin: 0% 50%;\\ntop: 50%;\\ntransform: translateY(-50%);\\nleft: 5px;\\nleft: calc(2px + 3px * var(--zoom));\\n}\\n.guideline.gap {\\nbackground: #f55;\\n}\\n.size-value.gap {\\ncolor: #f55;\\n}\\n\",\r\n    ],\r\n    render: function (moveable, React) {\r\n        var state = moveable.state;\r\n        var targetTop = state.top, targetLeft = state.left, pos1 = state.pos1, pos2 = state.pos2, pos3 = state.pos3, pos4 = state.pos4, snapRenderInfo = state.snapRenderInfo;\r\n        var _a = moveable.props.snapRenderThreshold, snapRenderThreshold = _a === void 0 ? 1 : _a;\r\n        if (!snapRenderInfo || !snapRenderInfo.render || !hasGuidelines(moveable, \"\")) {\r\n            // reset store\r\n            watchValue(moveable, \"boundMap\", getInitialBounds(), function (v) { return JSON.stringify(v); });\r\n            watchValue(moveable, \"innerBoundMap\", getInitialBounds(), function (v) { return JSON.stringify(v); });\r\n            return [];\r\n        }\r\n        state.guidelines = getTotalGuidelines(moveable);\r\n        var minLeft = Math.min(pos1[0], pos2[0], pos3[0], pos4[0]);\r\n        var minTop = Math.min(pos1[1], pos2[1], pos3[1], pos4[1]);\r\n        var externalPoses = snapRenderInfo.externalPoses || [];\r\n        var poses = getAbsolutePosesByState(moveable.state);\r\n        var verticalSnapPoses = [];\r\n        var horizontalSnapPoses = [];\r\n        var verticalGuidelines = [];\r\n        var horizontalGuidelines = [];\r\n        var snapInfos = [];\r\n        var _b = getRect(poses), width = _b.width, height = _b.height, top = _b.top, left = _b.left, bottom = _b.bottom, right = _b.right;\r\n        var targetRect = { left: left, right: right, top: top, bottom: bottom, center: (left + right) / 2, middle: (top + bottom) / 2 };\r\n        var hasExternalPoses = externalPoses.length > 0;\r\n        var externalRect = hasExternalPoses\r\n            ? getRect(externalPoses)\r\n            : {};\r\n        if (!snapRenderInfo.request) {\r\n            if (snapRenderInfo.direction) {\r\n                snapInfos.push(getSnapInfosByDirection(moveable, poses, snapRenderInfo.direction, snapRenderThreshold, snapRenderThreshold));\r\n            }\r\n            if (snapRenderInfo.snap) {\r\n                var rect = getRect(poses);\r\n                if (snapRenderInfo.center) {\r\n                    rect.middle = (rect.top + rect.bottom) / 2;\r\n                    rect.center = (rect.left + rect.right) / 2;\r\n                }\r\n                snapInfos.push(checkSnaps(moveable, rect, snapRenderThreshold, snapRenderThreshold));\r\n            }\r\n            if (hasExternalPoses) {\r\n                if (snapRenderInfo.center) {\r\n                    externalRect.middle =\r\n                        (externalRect.top + externalRect.bottom) / 2;\r\n                    externalRect.center =\r\n                        (externalRect.left + externalRect.right) / 2;\r\n                }\r\n                snapInfos.push(checkSnaps(moveable, externalRect, snapRenderThreshold, snapRenderThreshold));\r\n            }\r\n            snapInfos.forEach(function (snapInfo) {\r\n                var verticalPosInfos = snapInfo.vertical.posInfos, horizontalPosInfos = snapInfo.horizontal.posInfos;\r\n                verticalSnapPoses.push.apply(verticalSnapPoses, __spreadArray([], __read(verticalPosInfos.filter(function (_a) {\r\n                    var guidelineInfos = _a.guidelineInfos;\r\n                    return guidelineInfos.some(function (_a) {\r\n                        var guideline = _a.guideline;\r\n                        return !guideline.hide;\r\n                    });\r\n                }).map(function (posInfo) { return ({\r\n                    type: \"snap\",\r\n                    pos: posInfo.pos,\r\n                }); })), false));\r\n                horizontalSnapPoses.push.apply(horizontalSnapPoses, __spreadArray([], __read(horizontalPosInfos.filter(function (_a) {\r\n                    var guidelineInfos = _a.guidelineInfos;\r\n                    return guidelineInfos.some(function (_a) {\r\n                        var guideline = _a.guideline;\r\n                        return !guideline.hide;\r\n                    });\r\n                }).map(function (posInfo) { return ({\r\n                    type: \"snap\",\r\n                    pos: posInfo.pos,\r\n                }); })), false));\r\n                verticalGuidelines.push.apply(verticalGuidelines, __spreadArray([], __read(getSnapGuidelines(verticalPosInfos)), false));\r\n                horizontalGuidelines.push.apply(horizontalGuidelines, __spreadArray([], __read(getSnapGuidelines(horizontalPosInfos)), false));\r\n            });\r\n        }\r\n        var _c = addBoundGuidelines(moveable, [left, right], [top, bottom], verticalSnapPoses, horizontalSnapPoses), boundMap = _c.boundMap, innerBoundMap = _c.innerBoundMap;\r\n        if (hasExternalPoses) {\r\n            addBoundGuidelines(moveable, [externalRect.left, externalRect.right], [externalRect.top, externalRect.bottom], verticalSnapPoses, horizontalSnapPoses, snapRenderInfo.externalBounds);\r\n        }\r\n        var allGuidelines = __spreadArray(__spreadArray([], __read(verticalGuidelines), false), __read(horizontalGuidelines), false);\r\n        var elementGuidelines = allGuidelines.filter(function (guideline) { return guideline.element && !guideline.gapRects; });\r\n        var gapGuidelines = allGuidelines.filter(function (guideline) { return guideline.gapRects; }).sort(function (a, b) {\r\n            return a.gap - b.gap;\r\n        });\r\n        triggerEvent(moveable, \"onSnap\", {\r\n            guidelines: allGuidelines.filter(function (_a) {\r\n                var element = _a.element;\r\n                return !element;\r\n            }),\r\n            elements: elementGuidelines,\r\n            gaps: gapGuidelines,\r\n        }, true);\r\n        var nextBoundMap = watchValue(moveable, \"boundMap\", boundMap, function (v) { return JSON.stringify(v); }, getInitialBounds());\r\n        var nextInnerBoundMap = watchValue(moveable, \"innerBoundMap\", innerBoundMap, function (v) { return JSON.stringify(v); }, getInitialBounds());\r\n        if (boundMap === nextBoundMap || innerBoundMap === nextInnerBoundMap) {\r\n            triggerEvent(moveable, \"onBound\", {\r\n                bounds: boundMap,\r\n                innerBounds: innerBoundMap,\r\n            }, true);\r\n        }\r\n        // verticalSnapPoses.\r\n        return __spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([], __read(renderDashedGuidelines(moveable, elementGuidelines, [minLeft, minTop], targetRect, React)), false), __read(renderGapGuidelines(moveable, gapGuidelines, [minLeft, minTop], targetRect, React)), false), __read(renderGuidelines(moveable, \"horizontal\", horizontalGuidelines, [targetLeft, targetTop], targetRect, React)), false), __read(renderGuidelines(moveable, \"vertical\", verticalGuidelines, [targetLeft, targetTop], targetRect, React)), false), __read(renderSnapPoses(moveable, \"horizontal\", horizontalSnapPoses, minLeft, targetTop, width, 0, React)), false), __read(renderSnapPoses(moveable, \"vertical\", verticalSnapPoses, minTop, targetLeft, height, 1, React)), false);\r\n    },\r\n    dragStart: function (moveable, e) {\r\n        moveable.state.snapRenderInfo = {\r\n            request: e.isRequest,\r\n            snap: true,\r\n            center: true,\r\n        };\r\n        checkSnapInfo(moveable);\r\n    },\r\n    drag: function (moveable) {\r\n        var state = moveable.state;\r\n        if (!checkSnapInfo(moveable)) {\r\n            state.guidelines = getTotalGuidelines(moveable);\r\n        }\r\n        if (state.snapRenderInfo) {\r\n            state.snapRenderInfo.render = true;\r\n        }\r\n    },\r\n    pinchStart: function (moveable) {\r\n        this.unset(moveable);\r\n    },\r\n    dragEnd: function (moveable) {\r\n        this.unset(moveable);\r\n    },\r\n    dragControlCondition: function (moveable, e) {\r\n        if (directionCondition$1(moveable, e) || dragControlCondition(moveable, e)) {\r\n            return true;\r\n        }\r\n        if (!e.isRequest && e.inputEvent) {\r\n            return hasClass(e.inputEvent.target, prefix(\"snap-control\"));\r\n        }\r\n    },\r\n    dragControlStart: function (moveable) {\r\n        moveable.state.snapRenderInfo = null;\r\n        checkSnapInfo(moveable);\r\n    },\r\n    dragControl: function (moveable) {\r\n        this.drag(moveable);\r\n    },\r\n    dragControlEnd: function (moveable) {\r\n        this.unset(moveable);\r\n    },\r\n    dragGroupStart: function (moveable, e) {\r\n        this.dragStart(moveable, e);\r\n    },\r\n    dragGroup: function (moveable) {\r\n        this.drag(moveable);\r\n    },\r\n    dragGroupEnd: function (moveable) {\r\n        this.unset(moveable);\r\n    },\r\n    dragGroupControlStart: function (moveable) {\r\n        moveable.state.snapRenderInfo = null;\r\n        checkSnapInfo(moveable);\r\n    },\r\n    dragGroupControl: function (moveable) {\r\n        this.drag(moveable);\r\n    },\r\n    dragGroupControlEnd: function (moveable) {\r\n        this.unset(moveable);\r\n    },\r\n    unset: function (moveable) {\r\n        var state = moveable.state;\r\n        state.enableSnap = false;\r\n        state.guidelines = [];\r\n        state.snapRenderInfo = null;\r\n        state.elementRects = [];\r\n    },\r\n};\r\n/**\r\n * Whether or not target can be snapped to the guideline. (default: false)\r\n * @name Moveable.Snappable#snappable\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.snappable = true;\r\n */\r\n/**\r\n *  A snap container that is the basis for snap, bounds, and innerBounds. (default: null = container)\r\n * @name Moveable.Snappable#snapContainer\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.querySelector(\".container\"));\r\n *\r\n * moveable.snapContainer = document.body;\r\n */\r\n/**\r\n * You can specify the directions to snap to the target. (default: { left: true, top: true, right: true, bottom: true })\r\n * @name Moveable.Snappable#snapDirections\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *   snappable: true,\r\n *   snapDirections: true,\r\n * });\r\n * // snap center\r\n * moveable.snapDirections = { left: true, top: true, right: true, bottom: true, center: true, middle: true };\r\n */\r\n/**\r\n * You can specify the snap directions of elements. (default: { left: true, ftrue, right: true, bottom: true })\r\n * @name Moveable.Snappable#elementSnapDirections\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *   snappable: true,\r\n *   elementSnapDirections: true,\r\n * });\r\n * // snap center\r\n * moveable.elementSnapDirections = { left: true, top: true, right: true, bottom: true, center: true, middle: true };\r\n */\r\n/**\r\n * When you drag, make the gap snap in the element guidelines. (default: true)\r\n * @name Moveable.Snappable#snapGap\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *   snappable: true,\r\n *   snapElement: true,\r\n *   snapGap: true,\r\n * });\r\n *\r\n * moveable.snapGap = false;\r\n */\r\n/**\r\n * Distance value that can snap to guidelines. (default: 5)\r\n * @name Moveable.Snappable#snapThreshold\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.snapThreshold = 5;\r\n */\r\n/**\r\n * Add guidelines in the horizontal direction. (default: [])\r\n * @name Moveable.Snappable#horizontalGuidelines\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.horizontalGuidelines = [100, 200, 500];\r\n */\r\n/**\r\n * Add guidelines in the vertical direction. (default: [])\r\n * @name Moveable.Snappable#verticalGuidelines\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.verticalGuidelines = [100, 200, 500];\r\n */\r\n/**\r\n * Add guidelines for the element. (default: [])\r\n * @name Moveable.Snappable#elementGuidelines\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.elementGuidelines = [\r\n *   document.querySelector(\".element\"),\r\n * ];\r\n */\r\n/**\r\n * You can set up boundaries.\r\n * @name Moveable.Snappable#bounds\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @default null\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.bounds = { left: 0, right: 1000, top: 0, bottom: 1000};\r\n */\r\n/**\r\n * You can set up inner boundaries.\r\n * @name Moveable.Snappable#innerBounds\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @default null\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.innerBounds = { left: 500, top: 500, width: 100, height: 100};\r\n */\r\n/**\r\n * snap distance digits (default: 0)\r\n * @name Moveable.Snappable#snapDigit\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.snapDigit = 0\r\n */\r\n/**\r\n * If width size is greater than 0, you can vertical snap to the grid. (default: 0)\r\n * @name Moveable.Snappable#snapGridWidth\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.snapGridWidth = 5;\r\n */\r\n/**\r\n * If height size is greater than 0, you can horizontal snap to the grid. (default: 0)\r\n * @name Moveable.Snappable#snapGridHeight\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.snapGridHeight = 5;\r\n */\r\n/**\r\n * Whether to show snap distance (default: true)\r\n * @name Moveable.Snappable#isDisplaySnapDigit\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.isDisplaySnapDigit = true;\r\n */\r\n/**\r\n * Whether to show element inner snap distance (default: false)\r\n * @name Moveable.Snappable#isDisplayInnerSnapDigit\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.isDisplayInnerSnapDigit = true;\r\n */\r\n/**\r\n * You can set the text format of the distance shown in the guidelines. (default: self)\r\n * @name Moveable.Snappable#snapDistFormat\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *  snappable: true,\r\n *  snapDistFormat: (v, type) => v,\r\n * });\r\n * moveable.snapDistFormat = (v, type) => `${v}px`;\r\n */\r\n/**\r\n * When you drag or dragControl, the `snap` event is called.\r\n * @memberof Moveable.Snappable\r\n * @event snap\r\n * @param {Moveable.Snappable.OnSnap} - Parameters for the `snap` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     snappable: true\r\n * });\r\n * moveable.on(\"snap\", e => {\r\n *     console.log(\"onSnap\", e);\r\n * });\r\n */\n\nfunction multiply2(pos1, pos2) {\r\n    return [\r\n        pos1[0] * pos2[0],\r\n        pos1[1] * pos2[1],\r\n    ];\r\n}\r\nfunction prefix() {\r\n    var classNames = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        classNames[_i] = arguments[_i];\r\n    }\r\n    return prefixNames.apply(void 0, __spreadArray([PREFIX], __read(classNames), false));\r\n}\r\nfunction defaultSync(fn) {\r\n    fn();\r\n}\r\nfunction getTransformMatrix(transform) {\r\n    if (!transform || transform === \"none\") {\r\n        return [1, 0, 0, 1, 0, 0];\r\n    }\r\n    if (isObject(transform)) {\r\n        return transform;\r\n    }\r\n    return parseMat(transform);\r\n}\r\nfunction getAbsoluteMatrix(matrix, n, origin) {\r\n    return multiplies(n, createOriginMatrix(origin, n), matrix, createOriginMatrix(origin.map(function (a) { return -a; }), n));\r\n}\r\nfunction measureSVGSize(el, unit, isHorizontal) {\r\n    if (unit === \"%\") {\r\n        var viewBox = getSVGViewBox(el.ownerSVGElement);\r\n        return viewBox[isHorizontal ? \"width\" : \"height\"] / 100;\r\n    }\r\n    return 1;\r\n}\r\nfunction getBeforeTransformOrigin(el) {\r\n    var relativeOrigin = getTransformOrigin(getComputedStyle(el, \":before\"));\r\n    return relativeOrigin.map(function (o, i) {\r\n        var _a = splitUnit(o), value = _a.value, unit = _a.unit;\r\n        return value * measureSVGSize(el, unit, i === 0);\r\n    });\r\n}\r\nfunction getTransformOriginArray(transformOrigin) {\r\n    return transformOrigin ? transformOrigin.split(\" \") : [\"0\", \"0\"];\r\n}\r\nfunction getTransformOrigin(style) {\r\n    return getTransformOriginArray(style.transformOrigin);\r\n}\r\nfunction getElementTransform(target) {\r\n    var getStyle = getCachedStyle(target);\r\n    var computedTransform = getStyle(\"transform\");\r\n    if (computedTransform && computedTransform !== \"none\") {\r\n        return computedTransform;\r\n    }\r\n    if (\"transform\" in target) {\r\n        var list = target.transform;\r\n        var baseVal = list.baseVal;\r\n        if (!baseVal) {\r\n            return \"\";\r\n        }\r\n        var length_1 = baseVal.length;\r\n        if (!length_1) {\r\n            return \"\";\r\n        }\r\n        var matrixes = [];\r\n        var _loop_1 = function (i) {\r\n            var matrix = baseVal[i].matrix;\r\n            matrixes.push(\"matrix(\".concat([\"a\", \"b\", \"c\", \"d\", \"e\", \"f\"].map(function (chr) { return matrix[chr]; }).join(\", \"), \")\"));\r\n        };\r\n        for (var i = 0; i < length_1; ++i) {\r\n            _loop_1(i);\r\n        }\r\n        return matrixes.join(\" \");\r\n    }\r\n    return \"\";\r\n}\r\nfunction getOffsetInfo(el, lastParent, isParent, checkZoom, getTargetStyle) {\r\n    var _a, _b;\r\n    var documentElement = getDocumentElement(el) || getDocumentBody(el);\r\n    var hasSlot = false;\r\n    var target;\r\n    var parentSlotElement;\r\n    if (!el || isParent) {\r\n        target = el;\r\n    }\r\n    else {\r\n        var assignedSlotParentElement = (_a = el === null || el === void 0 ? void 0 : el.assignedSlot) === null || _a === void 0 ? void 0 : _a.parentElement;\r\n        var parentElement = el.parentElement;\r\n        if (assignedSlotParentElement) {\r\n            hasSlot = true;\r\n            parentSlotElement = parentElement;\r\n            target = assignedSlotParentElement;\r\n        }\r\n        else {\r\n            target = parentElement;\r\n        }\r\n    }\r\n    var isCustomElement = false;\r\n    var isEnd = el === lastParent || target === lastParent;\r\n    var position = \"relative\";\r\n    var offsetZoom = 1;\r\n    var targetZoom = parseFloat(getTargetStyle === null || getTargetStyle === void 0 ? void 0 : getTargetStyle(\"zoom\")) || 1;\r\n    var targetPosition = getTargetStyle === null || getTargetStyle === void 0 ? void 0 : getTargetStyle(\"position\");\r\n    while (target && target !== documentElement) {\r\n        if (lastParent === target) {\r\n            isEnd = true;\r\n        }\r\n        var getStyle = getCachedStyle(target);\r\n        var tagName = target.tagName.toLowerCase();\r\n        var transform = getElementTransform(target);\r\n        var willChange = getStyle(\"willChange\");\r\n        var zoom = parseFloat(getStyle(\"zoom\")) || 1;\r\n        position = getStyle(\"position\");\r\n        if (checkZoom && zoom !== 1) {\r\n            offsetZoom = zoom;\r\n            break;\r\n        }\r\n        if (\r\n        // offsetParent is the parentElement if the target's zoom is not 1 and not absolute.\r\n        !isParent && checkZoom && targetZoom !== 1 && targetPosition && targetPosition !== \"absolute\"\r\n            || tagName === \"svg\"\r\n            || tagName === \"foreignobject\"\r\n            || position !== \"static\"\r\n            || (transform && transform !== \"none\")\r\n            || willChange === \"transform\") {\r\n            break;\r\n        }\r\n        var slotParentNode = (_b = el === null || el === void 0 ? void 0 : el.assignedSlot) === null || _b === void 0 ? void 0 : _b.parentNode;\r\n        var targetParentNode = target.parentNode;\r\n        if (slotParentNode) {\r\n            hasSlot = true;\r\n            parentSlotElement = targetParentNode;\r\n        }\r\n        var parentNode = targetParentNode;\r\n        if (parentNode && parentNode.nodeType === 11) {\r\n            // Shadow Root\r\n            target = parentNode.host;\r\n            isCustomElement = true;\r\n            position = getCachedStyle(target)(\"position\");\r\n            break;\r\n        }\r\n        target = parentNode;\r\n        position = \"relative\";\r\n    }\r\n    return {\r\n        offsetZoom: offsetZoom,\r\n        hasSlot: hasSlot,\r\n        parentSlotElement: parentSlotElement,\r\n        isCustomElement: isCustomElement,\r\n        isStatic: position === \"static\",\r\n        isEnd: isEnd || !target || target === documentElement,\r\n        offsetParent: target || documentElement,\r\n    };\r\n}\r\nfunction getOffsetPosInfo(el, target) {\r\n    var _a;\r\n    var tagName = el.tagName.toLowerCase();\r\n    var offsetLeft = el.offsetLeft;\r\n    var offsetTop = el.offsetTop;\r\n    var getStyle = getCachedStyle(el);\r\n    // svg\r\n    var isSVG = isUndefined(offsetLeft);\r\n    var hasOffset = !isSVG;\r\n    var origin;\r\n    var targetOrigin;\r\n    // inner svg element\r\n    if (!hasOffset && (tagName !== \"svg\" || el.ownerSVGElement)) {\r\n        origin = IS_WEBKIT605\r\n            ? getBeforeTransformOrigin(el)\r\n            : getTransformOriginArray(getStyle(\"transformOrigin\")).map(function (pos) { return parseFloat(pos); });\r\n        targetOrigin = origin.slice();\r\n        hasOffset = true;\r\n        if (tagName === \"svg\") {\r\n            offsetLeft = 0;\r\n            offsetTop = 0;\r\n        }\r\n        else {\r\n            _a = __read(getSVGGraphicsOffset(el, origin, el === target && target.tagName.toLowerCase() === \"g\"), 4), offsetLeft = _a[0], offsetTop = _a[1], origin[0] = _a[2], origin[1] = _a[3];\r\n        }\r\n    }\r\n    else {\r\n        origin = getTransformOriginArray(getStyle(\"transformOrigin\")).map(function (pos) { return parseFloat(pos); });\r\n        targetOrigin = origin.slice();\r\n        // console.log(getStyle(\"transformOrigin\"), targetOrigin);\r\n    }\r\n    return {\r\n        tagName: tagName,\r\n        isSVG: isSVG,\r\n        hasOffset: hasOffset,\r\n        offset: [offsetLeft || 0, offsetTop || 0],\r\n        origin: origin,\r\n        targetOrigin: targetOrigin,\r\n    };\r\n}\r\nfunction getBodyOffset(el, isSVG) {\r\n    var getStyle = getCachedStyle(el);\r\n    var getBodyStyle = getCachedStyle(getDocumentBody(el));\r\n    var bodyPosition = getBodyStyle(\"position\");\r\n    if (!isSVG && (!bodyPosition || bodyPosition === \"static\")) {\r\n        return [0, 0];\r\n    }\r\n    var marginLeft = parseInt(getBodyStyle(\"marginLeft\"), 10);\r\n    var marginTop = parseInt(getBodyStyle(\"marginTop\"), 10);\r\n    if (getStyle(\"position\") === \"absolute\") {\r\n        if (getStyle(\"top\") !== \"auto\" || getStyle(\"bottom\") !== \"auto\") {\r\n            marginTop = 0;\r\n        }\r\n        if (getStyle(\"left\") !== \"auto\" || getStyle(\"right\") !== \"auto\") {\r\n            marginLeft = 0;\r\n        }\r\n    }\r\n    return [marginLeft, marginTop];\r\n}\r\nfunction convert3DMatrixes(matrixes) {\r\n    matrixes.forEach(function (info) {\r\n        var matrix = info.matrix;\r\n        if (matrix) {\r\n            info.matrix = convertDimension(matrix, 3, 4);\r\n        }\r\n    });\r\n}\r\nfunction getPositionFixedInfo(el) {\r\n    var fixedContainer = el.parentElement;\r\n    var hasTransform = false;\r\n    var body = getDocumentBody(el);\r\n    while (fixedContainer) {\r\n        var transform = getComputedStyle(fixedContainer).transform;\r\n        if (transform && transform !== \"none\") {\r\n            hasTransform = true;\r\n            break;\r\n        }\r\n        if (fixedContainer === body) {\r\n            break;\r\n        }\r\n        fixedContainer = fixedContainer.parentElement;\r\n    }\r\n    return {\r\n        fixedContainer: fixedContainer || body,\r\n        hasTransform: hasTransform,\r\n    };\r\n}\r\nfunction makeMatrixCSS(matrix, is3d) {\r\n    if (is3d === void 0) { is3d = matrix.length > 9; }\r\n    return \"\".concat(is3d ? \"matrix3d\" : \"matrix\", \"(\").concat(convertMatrixtoCSS(matrix, !is3d).join(\",\"), \")\");\r\n}\r\nfunction getSVGViewBox(el) {\r\n    var clientWidth = el.clientWidth;\r\n    var clientHeight = el.clientHeight;\r\n    if (!el) {\r\n        return { x: 0, y: 0, width: 0, height: 0, clientWidth: clientWidth, clientHeight: clientHeight };\r\n    }\r\n    var viewBox = el.viewBox;\r\n    var baseVal = (viewBox && viewBox.baseVal) || { x: 0, y: 0, width: 0, height: 0 };\r\n    return {\r\n        x: baseVal.x,\r\n        y: baseVal.y,\r\n        width: baseVal.width || clientWidth,\r\n        height: baseVal.height || clientHeight,\r\n        clientWidth: clientWidth,\r\n        clientHeight: clientHeight,\r\n    };\r\n}\r\nfunction getSVGMatrix(el, n) {\r\n    var _a;\r\n    var _b = getSVGViewBox(el), viewBoxWidth = _b.width, viewBoxHeight = _b.height, clientWidth = _b.clientWidth, clientHeight = _b.clientHeight;\r\n    var scaleX = clientWidth / viewBoxWidth;\r\n    var scaleY = clientHeight / viewBoxHeight;\r\n    var preserveAspectRatio = el.preserveAspectRatio.baseVal;\r\n    // https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/preserveAspectRatio\r\n    var align = preserveAspectRatio.align;\r\n    // 1 : meet 2: slice\r\n    var meetOrSlice = preserveAspectRatio.meetOrSlice;\r\n    var svgOrigin = [0, 0];\r\n    var scale = [scaleX, scaleY];\r\n    var translate = [0, 0];\r\n    if (align !== 1) {\r\n        var xAlign = (align - 2) % 3;\r\n        var yAlign = Math.floor((align - 2) / 3);\r\n        svgOrigin[0] = viewBoxWidth * xAlign / 2;\r\n        svgOrigin[1] = viewBoxHeight * yAlign / 2;\r\n        var scaleDimension = meetOrSlice === 2 ? Math.max(scaleY, scaleX) : Math.min(scaleX, scaleY);\r\n        scale[0] = scaleDimension;\r\n        scale[1] = scaleDimension;\r\n        translate[0] = (clientWidth - viewBoxWidth) / 2 * xAlign;\r\n        translate[1] = (clientHeight - viewBoxHeight) / 2 * yAlign;\r\n    }\r\n    var scaleMatrix = createScaleMatrix(scale, n);\r\n    _a = __read(translate, 2), scaleMatrix[n * (n - 1)] = _a[0], scaleMatrix[n * (n - 1) + 1] = _a[1];\r\n    return getAbsoluteMatrix(scaleMatrix, n, svgOrigin);\r\n}\r\nfunction getSVGGraphicsOffset(el, origin, isGTarget) {\r\n    var tagName = el.tagName.toLowerCase();\r\n    if (!el.getBBox || !isGTarget && tagName === \"g\") {\r\n        return [0, 0, 0, 0];\r\n    }\r\n    var getStyle = getCachedStyle(el);\r\n    var isFillBox = getStyle(\"transform-box\") === \"fill-box\";\r\n    var bbox = el.getBBox();\r\n    var viewBox = getSVGViewBox(el.ownerSVGElement);\r\n    var x = bbox.x;\r\n    var y = bbox.y;\r\n    // x, y 0  \r\n    if (tagName === \"foreignobject\" && (!x && !y)) {\r\n        x = parseFloat(el.getAttribute(\"x\")) || 0;\r\n        y = parseFloat(el.getAttribute(\"y\")) || 0;\r\n    }\r\n    var left = x - viewBox.x;\r\n    var top = y - viewBox.y;\r\n    var originX = isFillBox ? origin[0] : origin[0] - left;\r\n    var originY = isFillBox ? origin[1] : origin[1] - top;\r\n    // if (isFillBox) {\r\n    //     const bbox = (el as SVGGraphicsElement).getBBox();\r\n    //     const x = parseFloat(getStyle(\"x\")) || bbox.x;\r\n    //     const y = parseFloat(getStyle(\"y\")) || bbox.y;\r\n    //     const xScale = bbox.x / x;\r\n    //     const yScale = bbox.y / y;\r\n    //     console.log(x, y);\r\n    //     originX *= xScale;\r\n    //     originY *= yScale;\r\n    // }\r\n    return [left, top, originX, originY];\r\n}\r\nfunction calculatePosition(matrix, pos, n) {\r\n    return calculate(matrix, convertPositionMatrix(pos, n), n);\r\n}\r\nfunction calculatePoses(matrix, width, height, n) {\r\n    return [[0, 0], [width, 0], [0, height], [width, height]].map(function (pos) { return calculatePosition(matrix, pos, n); });\r\n}\r\nfunction getRect(poses) {\r\n    var posesX = poses.map(function (pos) { return pos[0]; });\r\n    var posesY = poses.map(function (pos) { return pos[1]; });\r\n    var left = Math.min.apply(Math, __spreadArray([], __read(posesX), false));\r\n    var top = Math.min.apply(Math, __spreadArray([], __read(posesY), false));\r\n    var right = Math.max.apply(Math, __spreadArray([], __read(posesX), false));\r\n    var bottom = Math.max.apply(Math, __spreadArray([], __read(posesY), false));\r\n    var rectWidth = right - left;\r\n    var rectHeight = bottom - top;\r\n    return {\r\n        left: left,\r\n        top: top,\r\n        right: right,\r\n        bottom: bottom,\r\n        width: rectWidth,\r\n        height: rectHeight,\r\n    };\r\n}\r\nfunction calculateRect(matrix, width, height, n) {\r\n    var poses = calculatePoses(matrix, width, height, n);\r\n    return getRect(poses);\r\n}\r\nfunction getSVGOffset(offsetInfo, targetInfo, container, n, beforeMatrix) {\r\n    var _a;\r\n    var target = offsetInfo.target;\r\n    var origin = offsetInfo.origin;\r\n    var targetMatrix = targetInfo.matrix;\r\n    var _b = getSize(target), width = _b.offsetWidth, height = _b.offsetHeight;\r\n    var containerClientRect = container.getBoundingClientRect();\r\n    var margin = [0, 0];\r\n    if (container === getDocumentBody(container)) {\r\n        margin = getBodyOffset(target, true);\r\n    }\r\n    var rect = target.getBoundingClientRect();\r\n    var rectLeft = rect.left - containerClientRect.left + container.scrollLeft\r\n        - (container.clientLeft || 0) + margin[0];\r\n    var rectTop = rect.top - containerClientRect.top + container.scrollTop\r\n        - (container.clientTop || 0) + margin[1];\r\n    var rectWidth = rect.width;\r\n    var rectHeight = rect.height;\r\n    var mat = multiplies(n, beforeMatrix, targetMatrix);\r\n    var _c = calculateRect(mat, width, height, n), prevLeft = _c.left, prevTop = _c.top, prevWidth = _c.width, prevHeight = _c.height;\r\n    var posOrigin = calculatePosition(mat, origin, n);\r\n    var prevOrigin = minus(posOrigin, [prevLeft, prevTop]);\r\n    var rectOrigin = [\r\n        rectLeft + prevOrigin[0] * rectWidth / prevWidth,\r\n        rectTop + prevOrigin[1] * rectHeight / prevHeight,\r\n    ];\r\n    var offset = [0, 0];\r\n    var count = 0;\r\n    while (++count < 10) {\r\n        var inverseBeforeMatrix = invert(beforeMatrix, n);\r\n        _a = __read(minus(calculatePosition(inverseBeforeMatrix, rectOrigin, n), calculatePosition(inverseBeforeMatrix, posOrigin, n)), 2), offset[0] = _a[0], offset[1] = _a[1];\r\n        var mat2 = multiplies(n, beforeMatrix, createOriginMatrix(offset, n), targetMatrix);\r\n        var _d = calculateRect(mat2, width, height, n), nextLeft = _d.left, nextTop = _d.top;\r\n        var distLeft = nextLeft - rectLeft;\r\n        var distTop = nextTop - rectTop;\r\n        if (abs(distLeft) < 2 && abs(distTop) < 2) {\r\n            break;\r\n        }\r\n        rectOrigin[0] -= distLeft;\r\n        rectOrigin[1] -= distTop;\r\n    }\r\n    return offset.map(function (p) { return Math.round(p); });\r\n}\r\nfunction calculateMoveableClientPositions(rootMatrix, poses, rootClientRect) {\r\n    var is3d = rootMatrix.length === 16;\r\n    var n = is3d ? 4 : 3;\r\n    var rootPoses = poses.map(function (pos) { return calculatePosition(rootMatrix, pos, n); });\r\n    var left = rootClientRect.left, top = rootClientRect.top;\r\n    return rootPoses.map(function (pos) {\r\n        return [pos[0] + left, pos[1] + top];\r\n    });\r\n}\r\nfunction getDistSize(vec) {\r\n    return Math.sqrt(vec[0] * vec[0] + vec[1] * vec[1]);\r\n}\r\nfunction getDiagonalSize(pos1, pos2) {\r\n    return getDistSize([\r\n        pos2[0] - pos1[0],\r\n        pos2[1] - pos1[1],\r\n    ]);\r\n}\r\nfunction getLineStyle(pos1, pos2, zoom, rad) {\r\n    if (zoom === void 0) { zoom = 1; }\r\n    if (rad === void 0) { rad = getRad(pos1, pos2); }\r\n    var width = getDiagonalSize(pos1, pos2);\r\n    return {\r\n        transform: \"translateY(-50%) translate(\".concat(pos1[0], \"px, \").concat(pos1[1], \"px) rotate(\").concat(rad, \"rad) scaleY(\").concat(zoom, \")\"),\r\n        width: \"\".concat(width, \"px\"),\r\n    };\r\n}\r\nfunction getControlTransform(rotation, zoom) {\r\n    var poses = [];\r\n    for (var _i = 2; _i < arguments.length; _i++) {\r\n        poses[_i - 2] = arguments[_i];\r\n    }\r\n    var length = poses.length;\r\n    var x = poses.reduce(function (prev, pos) { return prev + pos[0]; }, 0) / length;\r\n    var y = poses.reduce(function (prev, pos) { return prev + pos[1]; }, 0) / length;\r\n    return {\r\n        transform: \"translateZ(0px) translate(\".concat(x, \"px, \").concat(y, \"px) rotate(\").concat(rotation, \"rad) scale(\").concat(zoom, \")\"),\r\n    };\r\n}\r\nfunction getProps(props, ableName) {\r\n    var self = props[ableName];\r\n    if (isObject(self)) {\r\n        return __assign(__assign({}, props), self);\r\n    }\r\n    return props;\r\n}\r\nfunction getSize(target) {\r\n    var hasOffset = target && !isUndefined(target.offsetWidth);\r\n    var offsetWidth = 0;\r\n    var offsetHeight = 0;\r\n    var clientWidth = 0;\r\n    var clientHeight = 0;\r\n    var cssWidth = 0;\r\n    var cssHeight = 0;\r\n    var contentWidth = 0;\r\n    var contentHeight = 0;\r\n    var minWidth = 0;\r\n    var minHeight = 0;\r\n    var minOffsetWidth = 0;\r\n    var minOffsetHeight = 0;\r\n    var maxWidth = Infinity;\r\n    var maxHeight = Infinity;\r\n    var maxOffsetWidth = Infinity;\r\n    var maxOffsetHeight = Infinity;\r\n    var inlineCSSWidth = 0;\r\n    var inlineCSSHeight = 0;\r\n    var svg = false;\r\n    if (target) {\r\n        if (!hasOffset && target.ownerSVGElement) {\r\n            // check svg elements\r\n            var bbox = target.getBBox();\r\n            svg = true;\r\n            offsetWidth = bbox.width;\r\n            offsetHeight = bbox.height;\r\n            cssWidth = offsetWidth;\r\n            cssHeight = offsetHeight;\r\n            contentWidth = offsetWidth;\r\n            contentHeight = offsetHeight;\r\n            clientWidth = offsetWidth;\r\n            clientHeight = offsetHeight;\r\n        }\r\n        else {\r\n            // check html elements\r\n            var getStyle = getCachedStyle(target);\r\n            var targetStyle = target.style;\r\n            var boxSizing = getStyle(\"boxSizing\") === \"border-box\";\r\n            var borderLeft = parseFloat(getStyle(\"borderLeftWidth\")) || 0;\r\n            var borderRight = parseFloat(getStyle(\"borderRightWidth\")) || 0;\r\n            var borderTop = parseFloat(getStyle(\"borderTopWidth\")) || 0;\r\n            var borderBottom = parseFloat(getStyle(\"borderBottomWidth\")) || 0;\r\n            var paddingLeft = parseFloat(getStyle(\"paddingLeft\")) || 0;\r\n            var paddingRight = parseFloat(getStyle(\"paddingRight\")) || 0;\r\n            var paddingTop = parseFloat(getStyle(\"paddingTop\")) || 0;\r\n            var paddingBottom = parseFloat(getStyle(\"paddingBottom\")) || 0;\r\n            var horizontalPadding = paddingLeft + paddingRight;\r\n            var verticalPadding = paddingTop + paddingBottom;\r\n            var horizontalBorder = borderLeft + borderRight;\r\n            var verticalBorder = borderTop + borderBottom;\r\n            var horizontalOffset = horizontalPadding + horizontalBorder;\r\n            var verticalOffset = verticalPadding + verticalBorder;\r\n            var position = getStyle(\"position\");\r\n            var containerWidth = 0;\r\n            var containerHeight = 0;\r\n            // SVGSVGElement, HTMLElement\r\n            if (\"clientLeft\" in target) {\r\n                var parentElement = null;\r\n                if (position === \"absolute\") {\r\n                    var offsetInfo = getOffsetInfo(target, getDocumentBody(target));\r\n                    parentElement = offsetInfo.offsetParent;\r\n                }\r\n                else {\r\n                    parentElement = target.parentElement;\r\n                }\r\n                if (parentElement) {\r\n                    var getParentStyle = getCachedStyle(parentElement);\r\n                    containerWidth = parseFloat(getParentStyle(\"width\"));\r\n                    containerHeight = parseFloat(getParentStyle(\"height\"));\r\n                }\r\n            }\r\n            minWidth = Math.max(horizontalPadding, convertUnitSize(getStyle(\"minWidth\"), containerWidth) || 0);\r\n            minHeight = Math.max(verticalPadding, convertUnitSize(getStyle(\"minHeight\"), containerHeight) || 0);\r\n            maxWidth = convertUnitSize(getStyle(\"maxWidth\"), containerWidth);\r\n            maxHeight = convertUnitSize(getStyle(\"maxHeight\"), containerHeight);\r\n            if (isNaN(maxWidth)) {\r\n                maxWidth = Infinity;\r\n            }\r\n            if (isNaN(maxHeight)) {\r\n                maxHeight = Infinity;\r\n            }\r\n            inlineCSSWidth = convertUnitSize(targetStyle.width, 0) || 0;\r\n            inlineCSSHeight = convertUnitSize(targetStyle.height, 0) || 0;\r\n            cssWidth = parseFloat(getStyle(\"width\")) || 0;\r\n            cssHeight = parseFloat(getStyle(\"height\")) || 0;\r\n            contentWidth = abs(cssWidth - inlineCSSWidth) < 1\r\n                ? between(minWidth, inlineCSSWidth || cssWidth, maxWidth)\r\n                : cssWidth;\r\n            contentHeight = abs(cssHeight - inlineCSSHeight) < 1\r\n                ? between(minHeight, inlineCSSHeight || cssHeight, maxHeight)\r\n                : cssHeight;\r\n            offsetWidth = contentWidth;\r\n            offsetHeight = contentHeight;\r\n            clientWidth = contentWidth;\r\n            clientHeight = contentHeight;\r\n            if (boxSizing) {\r\n                maxOffsetWidth = maxWidth;\r\n                maxOffsetHeight = maxHeight;\r\n                minOffsetWidth = minWidth;\r\n                minOffsetHeight = minHeight;\r\n                contentWidth = offsetWidth - horizontalOffset;\r\n                contentHeight = offsetHeight - verticalOffset;\r\n            }\r\n            else {\r\n                maxOffsetWidth = maxWidth + horizontalOffset;\r\n                maxOffsetHeight = maxHeight + verticalOffset;\r\n                minOffsetWidth = minWidth + horizontalOffset;\r\n                minOffsetHeight = minHeight + verticalOffset;\r\n                offsetWidth = contentWidth + horizontalOffset;\r\n                offsetHeight = contentHeight + verticalOffset;\r\n            }\r\n            clientWidth = contentWidth + horizontalPadding;\r\n            clientHeight = contentHeight + verticalPadding;\r\n        }\r\n    }\r\n    return {\r\n        svg: svg,\r\n        offsetWidth: offsetWidth,\r\n        offsetHeight: offsetHeight,\r\n        clientWidth: clientWidth,\r\n        clientHeight: clientHeight,\r\n        contentWidth: contentWidth,\r\n        contentHeight: contentHeight,\r\n        inlineCSSWidth: inlineCSSWidth,\r\n        inlineCSSHeight: inlineCSSHeight,\r\n        cssWidth: cssWidth,\r\n        cssHeight: cssHeight,\r\n        minWidth: minWidth,\r\n        minHeight: minHeight,\r\n        maxWidth: maxWidth,\r\n        maxHeight: maxHeight,\r\n        minOffsetWidth: minOffsetWidth,\r\n        minOffsetHeight: minOffsetHeight,\r\n        maxOffsetWidth: maxOffsetWidth,\r\n        maxOffsetHeight: maxOffsetHeight,\r\n    };\r\n}\r\nfunction getRotationRad(poses, direction) {\r\n    return getRad(direction > 0 ? poses[0] : poses[1], direction > 0 ? poses[1] : poses[0]);\r\n}\r\nfunction resetClientRect() {\r\n    return {\r\n        left: 0, top: 0,\r\n        width: 0, height: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        clientLeft: 0, clientTop: 0,\r\n        clientWidth: 0, clientHeight: 0,\r\n        scrollWidth: 0, scrollHeight: 0,\r\n    };\r\n}\r\nfunction getExtendsRect(el, rect) {\r\n    var isRoot = el === getDocumentBody(el) || el === getDocumentElement(el);\r\n    var extendsRect = {\r\n        clientLeft: el.clientLeft,\r\n        clientTop: el.clientTop,\r\n        clientWidth: el.clientWidth,\r\n        clientHeight: el.clientHeight,\r\n        scrollWidth: el.scrollWidth,\r\n        scrollHeight: el.scrollHeight,\r\n        overflow: false,\r\n    };\r\n    if (isRoot) {\r\n        extendsRect.clientHeight = Math.max(rect.height, extendsRect.clientHeight);\r\n        extendsRect.scrollHeight = Math.max(rect.height, extendsRect.scrollHeight);\r\n    }\r\n    extendsRect.overflow = getCachedStyle(el)(\"overflow\") !== \"visible\";\r\n    return __assign(__assign({}, rect), extendsRect);\r\n}\r\nfunction getClientRectByPosition(position, base, el, isExtends) {\r\n    var left = position.left, right = position.right, top = position.top, bottom = position.bottom;\r\n    var baseTop = base.top;\r\n    var baseLeft = base.left;\r\n    var rect = {\r\n        left: baseLeft + left,\r\n        top: baseTop + top,\r\n        right: baseLeft + right,\r\n        bottom: baseTop + bottom,\r\n        width: right - left,\r\n        height: bottom - top,\r\n    };\r\n    if (el && isExtends) {\r\n        return getExtendsRect(el, rect);\r\n    }\r\n    return rect;\r\n}\r\nfunction getClientRect(el, isExtends) {\r\n    var left = 0;\r\n    var top = 0;\r\n    var width = 0;\r\n    var height = 0;\r\n    // let isRoot = false;\r\n    if (el) {\r\n        var clientRect = el.getBoundingClientRect();\r\n        left = clientRect.left;\r\n        top = clientRect.top;\r\n        width = clientRect.width;\r\n        height = clientRect.height;\r\n    }\r\n    var rect = {\r\n        left: left,\r\n        top: top,\r\n        width: width,\r\n        height: height,\r\n        right: left + width,\r\n        bottom: top + height,\r\n    };\r\n    if (el && isExtends) {\r\n        return getExtendsRect(el, rect);\r\n    }\r\n    return rect;\r\n}\r\nfunction getTotalOrigin(moveable) {\r\n    var _a = moveable.props, groupable = _a.groupable, svgOrigin = _a.svgOrigin;\r\n    var _b = moveable.getState(), offsetWidth = _b.offsetWidth, offsetHeight = _b.offsetHeight, svg = _b.svg, transformOrigin = _b.transformOrigin;\r\n    if (!groupable && svg && svgOrigin) {\r\n        return convertTransformOriginArray(svgOrigin, offsetWidth, offsetHeight);\r\n    }\r\n    return transformOrigin;\r\n}\r\nfunction getTotalDirection(parentDirection, isPinch, inputEvent, datas) {\r\n    var direction;\r\n    if (parentDirection) {\r\n        direction = parentDirection;\r\n    }\r\n    else if (isPinch) {\r\n        direction = [0, 0];\r\n    }\r\n    else {\r\n        var target = inputEvent.target;\r\n        direction = getDirection(target, datas);\r\n    }\r\n    return direction;\r\n}\r\nfunction getDirection(target, datas) {\r\n    if (!target) {\r\n        return;\r\n    }\r\n    var deg = target.getAttribute(\"data-rotation\") || \"\";\r\n    var direciton = target.getAttribute(\"data-direction\");\r\n    datas.deg = deg;\r\n    if (!direciton) {\r\n        return;\r\n    }\r\n    var dir = [0, 0];\r\n    (direciton.indexOf(\"w\") > -1) && (dir[0] = -1);\r\n    (direciton.indexOf(\"e\") > -1) && (dir[0] = 1);\r\n    (direciton.indexOf(\"n\") > -1) && (dir[1] = -1);\r\n    (direciton.indexOf(\"s\") > -1) && (dir[1] = 1);\r\n    return dir;\r\n}\r\nfunction getAbsolutePoses(poses, dist) {\r\n    return [\r\n        plus(dist, poses[0]),\r\n        plus(dist, poses[1]),\r\n        plus(dist, poses[2]),\r\n        plus(dist, poses[3]),\r\n    ];\r\n}\r\nfunction getAbsolutePosesByState(_a) {\r\n    var left = _a.left, top = _a.top, pos1 = _a.pos1, pos2 = _a.pos2, pos3 = _a.pos3, pos4 = _a.pos4;\r\n    return getAbsolutePoses([pos1, pos2, pos3, pos4], [left, top]);\r\n}\r\nfunction unsetAbles(self, isControl) {\r\n    self[isControl ? \"controlAbles\" : \"targetAbles\"].forEach(function (able) {\r\n        able.unset && able.unset(self);\r\n    });\r\n}\r\nfunction unsetGesto(self, isControl) {\r\n    var gestoName = isControl ? \"controlGesto\" : \"targetGesto\";\r\n    var gesto = self[gestoName];\r\n    if ((gesto === null || gesto === void 0 ? void 0 : gesto.isIdle()) === false) {\r\n        unsetAbles(self, isControl);\r\n    }\r\n    gesto === null || gesto === void 0 ? void 0 : gesto.unset();\r\n    self[gestoName] = null;\r\n}\r\nfunction fillCSSObject(style, resolvedEvent) {\r\n    if (resolvedEvent) {\r\n        var originalDatas = getBeforeRenderableDatas(resolvedEvent);\r\n        originalDatas.nextStyle = __assign(__assign({}, originalDatas.nextStyle), style);\r\n    }\r\n    return {\r\n        style: style,\r\n        cssText: getKeys(style).map(function (name) { return \"\".concat(decamelize(name, \"-\"), \": \").concat(style[name], \";\"); }).join(\"\"),\r\n    };\r\n}\r\nfunction fillAfterTransform(prevEvent, nextEvent, resolvedEvent) {\r\n    var afterTransform = nextEvent.afterTransform || nextEvent.transform;\r\n    return __assign(__assign({}, fillCSSObject(__assign(__assign(__assign({}, prevEvent.style), nextEvent.style), { transform: afterTransform }), resolvedEvent)), { afterTransform: afterTransform, transform: prevEvent.transform });\r\n}\r\nfunction fillParams(moveable, e, params, isBeforeEvent) {\r\n    var datas = e.datas;\r\n    if (!datas.datas) {\r\n        datas.datas = {};\r\n    }\r\n    var nextParams = __assign(__assign({}, params), { target: moveable.state.target, clientX: e.clientX, clientY: e.clientY, inputEvent: e.inputEvent, currentTarget: moveable, moveable: moveable, datas: datas.datas, isRequest: e.isRequest, isRequestChild: e.isRequestChild, isFirstDrag: !!e.isFirstDrag, isTrusted: e.isTrusted !== false, stopAble: function () {\r\n            datas.isEventStart = false;\r\n        }, stopDrag: function () {\r\n            var _a;\r\n            (_a = e.stop) === null || _a === void 0 ? void 0 : _a.call(e);\r\n        } });\r\n    if (!datas.isStartEvent) {\r\n        datas.isStartEvent = true;\r\n    }\r\n    else if (!isBeforeEvent) {\r\n        datas.lastEvent = nextParams;\r\n    }\r\n    return nextParams;\r\n}\r\nfunction fillEndParams(moveable, e, params) {\r\n    var datas = e.datas;\r\n    var isDrag = \"isDrag\" in params ? params.isDrag : e.isDrag;\r\n    if (!datas.datas) {\r\n        datas.datas = {};\r\n    }\r\n    return __assign(__assign({ isDrag: isDrag }, params), { moveable: moveable, target: moveable.state.target, clientX: e.clientX, clientY: e.clientY, inputEvent: e.inputEvent, currentTarget: moveable, lastEvent: datas.lastEvent, isDouble: e.isDouble, datas: datas.datas, isFirstDrag: !!e.isFirstDrag });\r\n}\r\nfunction catchEvent(moveable, name, callback) {\r\n    moveable._emitter.on(name, callback);\r\n}\r\nfunction triggerEvent(moveable, name, params, isManager, isRequest) {\r\n    return moveable.triggerEvent(name, params, isManager, isRequest);\r\n}\r\nfunction getComputedStyle(el, pseudoElt) {\r\n    return getWindow(el).getComputedStyle(el, pseudoElt);\r\n}\r\nfunction filterAbles(ables, methods, triggerAblesSimultaneously) {\r\n    var enabledAbles = {};\r\n    var ableGroups = {};\r\n    return ables.filter(function (able) {\r\n        var name = able.name;\r\n        if (enabledAbles[name] || !methods.some(function (method) { return able[method]; })) {\r\n            return false;\r\n        }\r\n        if (!triggerAblesSimultaneously && able.ableGroup) {\r\n            if (ableGroups[able.ableGroup]) {\r\n                return false;\r\n            }\r\n            ableGroups[able.ableGroup] = true;\r\n        }\r\n        enabledAbles[name] = true;\r\n        return true;\r\n    });\r\n}\r\nfunction equals(a1, a2) {\r\n    return a1 === a2 || (a1 == null && a2 == null);\r\n}\r\nfunction selectValue() {\r\n    var values = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        values[_i] = arguments[_i];\r\n    }\r\n    var length = values.length - 1;\r\n    for (var i = 0; i < length; ++i) {\r\n        var value = values[i];\r\n        if (!isUndefined(value)) {\r\n            return value;\r\n        }\r\n    }\r\n    return values[length];\r\n}\r\nfunction groupBy(arr, func) {\r\n    var groups = [];\r\n    var groupKeys = [];\r\n    arr.forEach(function (el, index) {\r\n        var groupKey = func(el, index, arr);\r\n        var keyIndex = groupKeys.indexOf(groupKey);\r\n        var group = groups[keyIndex] || [];\r\n        if (keyIndex === -1) {\r\n            groupKeys.push(groupKey);\r\n            groups.push(group);\r\n        }\r\n        group.push(el);\r\n    });\r\n    return groups;\r\n}\r\nfunction groupByMap(arr, func) {\r\n    var groups = [];\r\n    var groupKeys = {};\r\n    arr.forEach(function (el, index) {\r\n        var groupKey = func(el, index, arr);\r\n        var group = groupKeys[groupKey];\r\n        if (!group) {\r\n            group = [];\r\n            groupKeys[groupKey] = group;\r\n            groups.push(group);\r\n        }\r\n        group.push(el);\r\n    });\r\n    return groups;\r\n}\r\nfunction flat(arr) {\r\n    return arr.reduce(function (prev, cur) {\r\n        return prev.concat(cur);\r\n    }, []);\r\n}\r\nfunction maxOffset() {\r\n    var args = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        args[_i] = arguments[_i];\r\n    }\r\n    args.sort(function (a, b) { return abs(b) - abs(a); });\r\n    return args[0];\r\n}\r\nfunction calculateInversePosition(matrix, pos, n) {\r\n    return calculate(invert(matrix, n), convertPositionMatrix(pos, n), n);\r\n}\r\nfunction convertDragDist(state, e) {\r\n    var _a;\r\n    var is3d = state.is3d, rootMatrix = state.rootMatrix;\r\n    var n = is3d ? 4 : 3;\r\n    _a = __read(calculateInversePosition(rootMatrix, [e.distX, e.distY], n), 2), e.distX = _a[0], e.distY = _a[1];\r\n    return e;\r\n}\r\nfunction calculatePadding(matrix, pos, added, n) {\r\n    if (!added[0] && !added[1]) {\r\n        return pos;\r\n    }\r\n    var xAdded = calculatePosition(matrix, [normalized(added[0] || 1), 0], n);\r\n    var yAdded = calculatePosition(matrix, [0, normalized(added[1] || 1)], n);\r\n    var nextAdded = calculatePosition(matrix, [\r\n        added[0] / getDistSize(xAdded),\r\n        added[1] / getDistSize(yAdded),\r\n    ], n);\r\n    return plus(pos, nextAdded);\r\n}\r\nfunction convertCSSSize(value, size, isRelative) {\r\n    return isRelative ? \"\".concat(value / size * 100, \"%\") : \"\".concat(value, \"px\");\r\n}\r\nfunction getTinyDist(v) {\r\n    return abs(v) <= TINY_NUM ? 0 : v;\r\n}\r\nfunction getDirectionViewClassName(ableName) {\r\n    return function (moveable) {\r\n        if (!moveable.isDragging(ableName)) {\r\n            return \"\";\r\n        }\r\n        var data = getGestoData(moveable, ableName);\r\n        var deg = data.deg;\r\n        if (!deg) {\r\n            return \"\";\r\n        }\r\n        return prefix(\"view-control-rotation\".concat(deg));\r\n    };\r\n}\r\nfunction getDirectionCondition(ableName, checkAbles) {\r\n    if (checkAbles === void 0) { checkAbles = [ableName]; }\r\n    return function (moveable, e) {\r\n        if (e.isRequest) {\r\n            if (checkAbles.some(function (name) { return e.requestAble === name; })) {\r\n                return e.parentDirection;\r\n            }\r\n            else {\r\n                return false;\r\n            }\r\n        }\r\n        var target = e.inputEvent.target;\r\n        return hasClass(target, prefix(\"direction\")) && (!ableName || hasClass(target, prefix(ableName)));\r\n    };\r\n}\r\nfunction convertTransformInfo(transforms, state, index) {\r\n    var _a;\r\n    var matrixInfos = parse(transforms, {\r\n        \"x%\": function (v) { return v / 100 * state.offsetWidth; },\r\n        \"y%\": function (v) { return v / 100 * state.offsetHeight; },\r\n    });\r\n    var beforeFunctionTexts = transforms.slice(0, index < 0 ? undefined : index);\r\n    var beforeFunctionTexts2 = transforms.slice(0, index < 0 ? undefined : index + 1);\r\n    var targetFunctionText = transforms[index] || \"\";\r\n    var afterFunctionTexts = index < 0 ? [] : transforms.slice(index);\r\n    var afterFunctionTexts2 = index < 0 ? [] : transforms.slice(index + 1);\r\n    var beforeFunctions = matrixInfos.slice(0, index < 0 ? undefined : index);\r\n    var beforeFunctions2 = matrixInfos.slice(0, index < 0 ? undefined : index + 1);\r\n    var targetFunction = (_a = matrixInfos[index]) !== null && _a !== void 0 ? _a : parse([\"\"])[0];\r\n    var afterFunctions = index < 0 ? [] : matrixInfos.slice(index);\r\n    var afterFunctions2 = index < 0 ? [] : matrixInfos.slice(index + 1);\r\n    var targetFunctions = targetFunction ? [targetFunction] : [];\r\n    var beforeFunctionMatrix = toMat(beforeFunctions);\r\n    var beforeFunctionMatrix2 = toMat(beforeFunctions2);\r\n    var afterFunctionMatrix = toMat(afterFunctions);\r\n    var afterFunctionMatrix2 = toMat(afterFunctions2);\r\n    var allFunctionMatrix = multiply(beforeFunctionMatrix, afterFunctionMatrix, 4);\r\n    return {\r\n        transforms: transforms,\r\n        beforeFunctionMatrix: beforeFunctionMatrix,\r\n        beforeFunctionMatrix2: beforeFunctionMatrix2,\r\n        targetFunctionMatrix: toMat(targetFunctions),\r\n        afterFunctionMatrix: afterFunctionMatrix,\r\n        afterFunctionMatrix2: afterFunctionMatrix2,\r\n        allFunctionMatrix: allFunctionMatrix,\r\n        beforeFunctions: beforeFunctions,\r\n        beforeFunctions2: beforeFunctions2,\r\n        targetFunction: targetFunctions[0],\r\n        afterFunctions: afterFunctions,\r\n        afterFunctions2: afterFunctions2,\r\n        beforeFunctionTexts: beforeFunctionTexts,\r\n        beforeFunctionTexts2: beforeFunctionTexts2,\r\n        targetFunctionText: targetFunctionText,\r\n        afterFunctionTexts: afterFunctionTexts,\r\n        afterFunctionTexts2: afterFunctionTexts2,\r\n    };\r\n}\r\nfunction isArrayFormat(arr) {\r\n    if (!arr || !isObject(arr)) {\r\n        return false;\r\n    }\r\n    if (isNode(arr)) {\r\n        return false;\r\n    }\r\n    return isArray(arr) || \"length\" in arr;\r\n}\r\nfunction getRefTarget(target, isSelector) {\r\n    if (!target) {\r\n        return null;\r\n    }\r\n    if (isNode(target)) {\r\n        return target;\r\n    }\r\n    if (isString(target)) {\r\n        if (isSelector) {\r\n            return document.querySelector(target);\r\n        }\r\n        return target;\r\n    }\r\n    if (isFunction(target)) {\r\n        return target();\r\n    }\r\n    if (isWindow(target)) {\r\n        return target;\r\n    }\r\n    if (\"current\" in target) {\r\n        return target.current;\r\n    }\r\n    return target;\r\n}\r\nfunction getRefTargets(targets, isSelector) {\r\n    if (!targets) {\r\n        return [];\r\n    }\r\n    var userTargets = isArrayFormat(targets) ? [].slice.call(targets) : [targets];\r\n    return userTargets.reduce(function (prev, target) {\r\n        if (isString(target) && isSelector) {\r\n            return __spreadArray(__spreadArray([], __read(prev), false), __read([].slice.call(document.querySelectorAll(target))), false);\r\n        }\r\n        if (isArray(target)) {\r\n            prev.push(getRefTargets(target, isSelector));\r\n        }\r\n        else {\r\n            prev.push(getRefTarget(target, isSelector));\r\n        }\r\n        return prev;\r\n    }, []);\r\n}\r\nfunction getAbsoluteRotation(pos1, pos2, direction) {\r\n    var deg = getRad(pos1, pos2) / Math.PI * 180;\r\n    deg = direction >= 0 ? deg : 180 - deg;\r\n    deg = deg >= 0 ? deg : 360 + deg;\r\n    return deg;\r\n}\r\nfunction getDragDistByState(state, dist) {\r\n    var rootMatrix = state.rootMatrix, is3d = state.is3d;\r\n    var n = is3d ? 4 : 3;\r\n    var inverseMatrix = invert(rootMatrix, n);\r\n    if (!is3d) {\r\n        inverseMatrix = convertDimension(inverseMatrix, 3, 4);\r\n    }\r\n    inverseMatrix[12] = 0;\r\n    inverseMatrix[13] = 0;\r\n    inverseMatrix[14] = 0;\r\n    return calculateMatrixDist(inverseMatrix, dist);\r\n}\r\nfunction getSizeDistByDist(startSize, dist, ratio, direction, keepRatio) {\r\n    var _a = __read(startSize, 2), startOffsetWidth = _a[0], startOffsetHeight = _a[1];\r\n    var distWidth = 0;\r\n    var distHeight = 0;\r\n    if (keepRatio && startOffsetWidth && startOffsetHeight) {\r\n        var rad = getRad([0, 0], dist);\r\n        var standardRad = getRad([0, 0], direction);\r\n        var size = getDistSize(dist);\r\n        var signSize = Math.cos(rad - standardRad) * size;\r\n        if (!direction[0]) {\r\n            // top, bottom\r\n            distHeight = signSize;\r\n            distWidth = distHeight * ratio;\r\n        }\r\n        else if (!direction[1]) {\r\n            // left, right\r\n            distWidth = signSize;\r\n            distHeight = distWidth / ratio;\r\n        }\r\n        else {\r\n            // two-way\r\n            var startWidthSize = direction[0] * startOffsetWidth;\r\n            var startHeightSize = direction[1] * startOffsetHeight;\r\n            var secondRad = Math.atan2(startWidthSize + dist[0], startHeightSize + dist[1]);\r\n            var firstRad = Math.atan2(startWidthSize, startHeightSize);\r\n            if (secondRad < 0) {\r\n                secondRad += Math.PI * 2;\r\n            }\r\n            if (firstRad < 0) {\r\n                firstRad += Math.PI * 2;\r\n            }\r\n            var rad_1 = 0;\r\n            if (abs(secondRad - firstRad) < Math.PI / 2 || abs(secondRad - firstRad) > Math.PI / 2 * 3) {\r\n                rad_1 = secondRad - firstRad;\r\n            }\r\n            else {\r\n                firstRad += Math.PI;\r\n                rad_1 = secondRad - firstRad;\r\n            }\r\n            if (rad_1 > Math.PI * 2) {\r\n                rad_1 -= Math.PI * 2;\r\n            }\r\n            else if (rad_1 > Math.PI) {\r\n                rad_1 = 2 * Math.PI - rad_1;\r\n            }\r\n            else if (rad_1 < -Math.PI) {\r\n                rad_1 = -2 * Math.PI - rad_1;\r\n            }\r\n            //       180\r\n            // -1, -1,  // 1, -1\r\n            // 270            90\r\n            // -1, 1    // 1, 1\r\n            //       0\r\n            var distSize = getDistSize([startWidthSize + dist[0], startHeightSize + dist[1]]) * Math.cos(rad_1);\r\n            distWidth = distSize * Math.sin(firstRad) - startWidthSize;\r\n            distHeight = distSize * Math.cos(firstRad) - startHeightSize;\r\n            if (direction[0] < 0) {\r\n                distWidth *= -1;\r\n            }\r\n            if (direction[1] < 0) {\r\n                distHeight *= -1;\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        distWidth = direction[0] * dist[0];\r\n        distHeight = direction[1] * dist[1];\r\n    }\r\n    return [distWidth, distHeight];\r\n}\r\nfunction getOffsetSizeDist(sizeDirection, keepRatio, datas, e) {\r\n    var _a;\r\n    var ratio = datas.ratio, startOffsetWidth = datas.startOffsetWidth, startOffsetHeight = datas.startOffsetHeight;\r\n    var distWidth = 0;\r\n    var distHeight = 0;\r\n    var distX = e.distX, distY = e.distY, pinchScale = e.pinchScale, parentDistance = e.parentDistance, parentDist = e.parentDist, parentScale = e.parentScale;\r\n    var startFixedDirection = datas.fixedDirection;\r\n    var directionsDists = [0, 1].map(function (index) {\r\n        return abs(sizeDirection[index] - startFixedDirection[index]);\r\n    });\r\n    var directionRatios = [0, 1].map(function (index) {\r\n        var dist = directionsDists[index];\r\n        if (dist !== 0) {\r\n            dist = 2 / dist;\r\n        }\r\n        return dist;\r\n    });\r\n    if (parentDist) {\r\n        distWidth = parentDist[0];\r\n        distHeight = parentDist[1];\r\n        if (keepRatio) {\r\n            if (!distWidth) {\r\n                distWidth = distHeight * ratio;\r\n            }\r\n            else if (!distHeight) {\r\n                distHeight = distWidth / ratio;\r\n            }\r\n        }\r\n    }\r\n    else if (isNumber(pinchScale)) {\r\n        distWidth = (pinchScale - 1) * startOffsetWidth;\r\n        distHeight = (pinchScale - 1) * startOffsetHeight;\r\n    }\r\n    else if (parentScale) {\r\n        distWidth = (parentScale[0] - 1) * startOffsetWidth;\r\n        distHeight = (parentScale[1] - 1) * startOffsetHeight;\r\n    }\r\n    else if (parentDistance) {\r\n        var scaleX = startOffsetWidth * directionsDists[0];\r\n        var scaleY = startOffsetHeight * directionsDists[1];\r\n        var ratioDistance = getDistSize([scaleX, scaleY]);\r\n        distWidth = parentDistance / ratioDistance * scaleX * directionRatios[0];\r\n        distHeight = parentDistance / ratioDistance * scaleY * directionRatios[1];\r\n    }\r\n    else {\r\n        var dist_1 = getDragDist({ datas: datas, distX: distX, distY: distY });\r\n        dist_1 = directionRatios.map(function (ratio, i) {\r\n            return dist_1[i] * ratio;\r\n        });\r\n        _a = __read(getSizeDistByDist([startOffsetWidth, startOffsetHeight], dist_1, ratio, sizeDirection, keepRatio), 2), distWidth = _a[0], distHeight = _a[1];\r\n    }\r\n    return {\r\n        // direction,\r\n        // sizeDirection,\r\n        distWidth: distWidth,\r\n        distHeight: distHeight,\r\n    };\r\n}\r\nfunction convertTransformUnit(origin, xy) {\r\n    if (xy) {\r\n        if (origin === \"left\") {\r\n            return { x: \"0%\", y: \"50%\" };\r\n        }\r\n        else if (origin === \"top\") {\r\n            return { x: \"50%\", y: \"50%\" };\r\n        }\r\n        else if (origin === \"center\") {\r\n            return { x: \"50%\", y: \"50%\" };\r\n        }\r\n        else if (origin === \"right\") {\r\n            return { x: \"100%\", y: \"50%\" };\r\n        }\r\n        else if (origin === \"bottom\") {\r\n            return { x: \"50%\", y: \"100%\" };\r\n        }\r\n        var _a = __read(origin.split(\" \"), 2), left = _a[0], right = _a[1];\r\n        var leftOrigin = convertTransformUnit(left || \"\");\r\n        var rightOrigin = convertTransformUnit(right || \"\");\r\n        var originObject = __assign(__assign({}, leftOrigin), rightOrigin);\r\n        var nextOriginObject = {\r\n            x: \"50%\",\r\n            y: \"50%\",\r\n        };\r\n        if (originObject.x) {\r\n            nextOriginObject.x = originObject.x;\r\n        }\r\n        if (originObject.y) {\r\n            nextOriginObject.y = originObject.y;\r\n        }\r\n        if (originObject.value) {\r\n            if (originObject.x && !originObject.y) {\r\n                nextOriginObject.y = originObject.value;\r\n            }\r\n            if (!originObject.x && originObject.y) {\r\n                nextOriginObject.x = originObject.value;\r\n            }\r\n        }\r\n        return nextOriginObject;\r\n    }\r\n    if (origin === \"left\") {\r\n        return { x: \"0%\" };\r\n    }\r\n    if (origin === \"right\") {\r\n        return { x: \"100%\" };\r\n    }\r\n    if (origin === \"top\") {\r\n        return { y: \"0%\" };\r\n    }\r\n    if (origin === \"bottom\") {\r\n        return { y: \"100%\" };\r\n    }\r\n    if (!origin) {\r\n        return {};\r\n    }\r\n    if (origin === \"center\") {\r\n        return { value: \"50%\" };\r\n    }\r\n    return { value: origin };\r\n}\r\nfunction convertTransformOriginArray(transformOrigin, width, height) {\r\n    var _a = convertTransformUnit(transformOrigin, true), x = _a.x, y = _a.y;\r\n    return [\r\n        convertUnitSize(x, width) || 0,\r\n        convertUnitSize(y, height) || 0,\r\n    ];\r\n}\r\nfunction rotatePosesInfo(poses, origin, rad) {\r\n    var prevPoses = poses.map(function (pos) { return minus(pos, origin); });\r\n    var nextPoses = prevPoses.map(function (pos) { return rotate(pos, rad); });\r\n    return {\r\n        prev: prevPoses,\r\n        next: nextPoses,\r\n        result: nextPoses.map(function (pos) { return plus(pos, origin); }),\r\n    };\r\n}\r\nfunction isDeepArrayEquals(arr1, arr2) {\r\n    return arr1.length === arr2.length && arr1.every(function (value1, i) {\r\n        var value2 = arr2[i];\r\n        var isArray1 = isArray(value1);\r\n        var isArray2 = isArray(value2);\r\n        if (isArray1 && isArray2) {\r\n            return isDeepArrayEquals(value1, value2);\r\n        }\r\n        else if (!isArray1 && !isArray2) {\r\n            return value1 === value2;\r\n        }\r\n        return false;\r\n    });\r\n}\r\nfunction watchValue(moveable, property, nextValue, valueKey, defaultValue) {\r\n    var store = moveable._store;\r\n    var prevValue = store[property];\r\n    if (!(property in store)) {\r\n        if (defaultValue != null) {\r\n            store[property] = defaultValue;\r\n            prevValue = defaultValue;\r\n        }\r\n        else {\r\n            store[property] = nextValue;\r\n            return nextValue;\r\n        }\r\n    }\r\n    if (prevValue === nextValue || valueKey(prevValue) === valueKey(nextValue)) {\r\n        return prevValue;\r\n    }\r\n    store[property] = nextValue;\r\n    return nextValue;\r\n}\r\nfunction sign(value) {\r\n    return value >= 0 ? 1 : -1;\r\n}\r\nfunction abs(value) {\r\n    return Math.abs(value);\r\n}\r\nfunction countEach(count, callback) {\r\n    return counter(count).map(function (index) { return callback(index); });\r\n}\r\nfunction getPaddingBox(padding) {\r\n    if (isNumber(padding)) {\r\n        return {\r\n            top: padding,\r\n            left: padding,\r\n            right: padding,\r\n            bottom: padding,\r\n        };\r\n    }\r\n    return {\r\n        left: padding.left || 0,\r\n        top: padding.top || 0,\r\n        right: padding.right || 0,\r\n        bottom: padding.bottom || 0,\r\n    };\r\n}\n\n/**\r\n * @namespace Moveable.Pinchable\r\n * @description Whether or not target can be pinched with draggable, resizable, scalable, rotatable (default: false)\r\n */\r\nvar Pinchable = makeAble(\"pinchable\", {\r\n    props: [\r\n        \"pinchable\",\r\n    ],\r\n    events: [\r\n        \"pinchStart\",\r\n        \"pinch\",\r\n        \"pinchEnd\",\r\n        \"pinchGroupStart\",\r\n        \"pinchGroup\",\r\n        \"pinchGroupEnd\",\r\n    ],\r\n    dragStart: function () {\r\n        return true;\r\n    },\r\n    pinchStart: function (moveable, e) {\r\n        var datas = e.datas, targets = e.targets, angle = e.angle, originalDatas = e.originalDatas;\r\n        var _a = moveable.props, pinchable = _a.pinchable, ables = _a.ables;\r\n        if (!pinchable) {\r\n            return false;\r\n        }\r\n        var eventName = \"onPinch\".concat(targets ? \"Group\" : \"\", \"Start\");\r\n        var controlEventName = \"drag\".concat(targets ? \"Group\" : \"\", \"ControlStart\");\r\n        var pinchAbles = (pinchable === true ? moveable.controlAbles : ables.filter(function (able) {\r\n            return pinchable.indexOf(able.name) > -1;\r\n        })).filter(function (able) { return able.canPinch && able[controlEventName]; });\r\n        var params = fillParams(moveable, e, {});\r\n        if (targets) {\r\n            params.targets = targets;\r\n        }\r\n        var result = triggerEvent(moveable, eventName, params);\r\n        datas.isPinch = result !== false;\r\n        datas.ables = pinchAbles;\r\n        var isPinch = datas.isPinch;\r\n        if (!isPinch) {\r\n            return false;\r\n        }\r\n        pinchAbles.forEach(function (able) {\r\n            originalDatas[able.name] = originalDatas[able.name] || {};\r\n            if (!able[controlEventName]) {\r\n                return;\r\n            }\r\n            var ableEvent = __assign(__assign({}, e), { datas: originalDatas[able.name], parentRotate: angle, isPinch: true });\r\n            able[controlEventName](moveable, ableEvent);\r\n        });\r\n        moveable.state.snapRenderInfo = {\r\n            request: e.isRequest,\r\n            direction: [0, 0],\r\n        };\r\n        return isPinch;\r\n    },\r\n    pinch: function (moveable, e) {\r\n        var datas = e.datas, pinchScale = e.scale, distance = e.distance, originalDatas = e.originalDatas, inputEvent = e.inputEvent, targets = e.targets, angle = e.angle;\r\n        if (!datas.isPinch) {\r\n            return;\r\n        }\r\n        var parentDistance = distance * (1 - 1 / pinchScale);\r\n        var params = fillParams(moveable, e, {});\r\n        if (targets) {\r\n            params.targets = targets;\r\n        }\r\n        var eventName = \"onPinch\".concat(targets ? \"Group\" : \"\");\r\n        triggerEvent(moveable, eventName, params);\r\n        var ables = datas.ables;\r\n        var controlEventName = \"drag\".concat(targets ? \"Group\" : \"\", \"Control\");\r\n        ables.forEach(function (able) {\r\n            if (!able[controlEventName]) {\r\n                return;\r\n            }\r\n            able[controlEventName](moveable, __assign(__assign({}, e), { datas: originalDatas[able.name], inputEvent: inputEvent, resolveMatrix: true, pinchScale: pinchScale, parentDistance: parentDistance, parentRotate: angle, isPinch: true }));\r\n        });\r\n        return params;\r\n    },\r\n    pinchEnd: function (moveable, e) {\r\n        var datas = e.datas, isPinch = e.isPinch, inputEvent = e.inputEvent, targets = e.targets, originalDatas = e.originalDatas;\r\n        if (!datas.isPinch) {\r\n            return;\r\n        }\r\n        var eventName = \"onPinch\".concat(targets ? \"Group\" : \"\", \"End\");\r\n        var params = fillEndParams(moveable, e, { isDrag: isPinch });\r\n        if (targets) {\r\n            params.targets = targets;\r\n        }\r\n        triggerEvent(moveable, eventName, params);\r\n        var ables = datas.ables;\r\n        var controlEventName = \"drag\".concat(targets ? \"Group\" : \"\", \"ControlEnd\");\r\n        ables.forEach(function (able) {\r\n            if (!able[controlEventName]) {\r\n                return;\r\n            }\r\n            able[controlEventName](moveable, __assign(__assign({}, e), { isDrag: isPinch, datas: originalDatas[able.name], inputEvent: inputEvent, isPinch: true }));\r\n        });\r\n        return isPinch;\r\n    },\r\n    pinchGroupStart: function (moveable, e) {\r\n        return this.pinchStart(moveable, __assign(__assign({}, e), { targets: moveable.props.targets }));\r\n    },\r\n    pinchGroup: function (moveable, e) {\r\n        return this.pinch(moveable, __assign(__assign({}, e), { targets: moveable.props.targets }));\r\n    },\r\n    pinchGroupEnd: function (moveable, e) {\r\n        return this.pinchEnd(moveable, __assign(__assign({}, e), { targets: moveable.props.targets }));\r\n    },\r\n});\r\n/**\r\n * Whether or not target can be pinched with draggable, resizable, scalable, rotatable (default: false)\r\n * @name Moveable.Pinchable#pinchable\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.pinchable = true;\r\n */\r\n/**\r\n * When the pinch starts, the pinchStart event is called with part of scaleStart, rotateStart, resizeStart\r\n * @memberof Moveable.Pinchable\r\n * @event pinchStart\r\n * @param {Moveable.Pinchable.OnPinchStart} - Parameters for the pinchStart event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     rotatable: true,\r\n *     scalable: true,\r\n *     pinchable: true, // [\"rotatable\", \"scalable\"]\r\n * });\r\n * moveable.on(\"pinchStart\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n * moveable.on(\"rotateStart\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n * moveable.on(\"scaleStart\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n */\r\n/**\r\n * When pinching, the pinch event is called with part of scale, rotate, resize\r\n * @memberof Moveable.Pinchable\r\n * @event pinch\r\n * @param {Moveable.Pinchable.OnPinch} - Parameters for the pinch event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     rotatable: true,\r\n *     scalable: true,\r\n *     pinchable: true, // [\"rotatable\", \"scalable\"]\r\n * });\r\n * moveable.on(\"pinch\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n * moveable.on(\"rotate\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n * moveable.on(\"scale\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n */\r\n/**\r\n * When the pinch finishes, the pinchEnd event is called.\r\n * @memberof Moveable.Pinchable\r\n * @event pinchEnd\r\n * @param {Moveable.Pinchable.OnPinchEnd} - Parameters for the pinchEnd event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     rotatable: true,\r\n *     scalable: true,\r\n *     pinchable: true, // [\"rotatable\", \"scalable\"]\r\n * });\r\n * moveable.on(\"pinchEnd\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n * moveable.on(\"rotateEnd\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n * moveable.on(\"scaleEnd\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n */\r\n/**\r\n * When the group pinch starts, the `pinchGroupStart` event is called.\r\n * @memberof Moveable.Pinchable\r\n * @event pinchGroupStart\r\n * @param {Moveable.Pinchable.OnPinchGroupStart} - Parameters for the `pinchGroupStart` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n *     pinchable: true\r\n * });\r\n * moveable.on(\"pinchGroupStart\", ({ targets }) => {\r\n *     console.log(\"onPinchGroupStart\", targets);\r\n * });\r\n */\r\n/**\r\n * When the group pinch, the `pinchGroup` event is called.\r\n * @memberof Moveable.Pinchable\r\n * @event pinchGroup\r\n * @param {Moveable.Pinchable.OnPinchGroup} - Parameters for the `pinchGroup` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n *     pinchable: true\r\n * });\r\n * moveable.on(\"pinchGroup\", ({ targets, events }) => {\r\n *     console.log(\"onPinchGroup\", targets);\r\n * });\r\n */\r\n/**\r\n * When the group pinch finishes, the `pinchGroupEnd` event is called.\r\n * @memberof Moveable.Pinchable\r\n * @event pinchGroupEnd\r\n * @param {Moveable.Pinchable.OnPinchGroupEnd} - Parameters for the `pinchGroupEnd` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n *     pinchable: true\r\n * });\r\n * moveable.on(\"pinchGroupEnd\", ({ targets, isDrag }) => {\r\n *     console.log(\"onPinchGroupEnd\", targets, isDrag);\r\n * });\r\n */\n\nvar directionCondition = getDirectionCondition(\"scalable\");\r\n/**\r\n * @namespace Scalable\r\n * @memberof Moveable\r\n * @description Scalable indicates whether the target's x and y can be scale of transform.\r\n */\r\nvar Scalable = {\r\n    name: \"scalable\",\r\n    ableGroup: \"size\",\r\n    canPinch: true,\r\n    props: [\r\n        \"scalable\",\r\n        \"throttleScale\",\r\n        \"renderDirections\",\r\n        \"keepRatio\",\r\n        \"edge\",\r\n        \"displayAroundControls\",\r\n    ],\r\n    events: [\r\n        \"scaleStart\",\r\n        \"beforeScale\",\r\n        \"scale\",\r\n        \"scaleEnd\",\r\n        \"scaleGroupStart\",\r\n        \"beforeScaleGroup\",\r\n        \"scaleGroup\",\r\n        \"scaleGroupEnd\",\r\n    ],\r\n    render: getRenderDirections(\"scalable\"),\r\n    dragControlCondition: directionCondition,\r\n    viewClassName: getDirectionViewClassName(\"scalable\"),\r\n    dragControlStart: function (moveable, e) {\r\n        var datas = e.datas, isPinch = e.isPinch, inputEvent = e.inputEvent, parentDirection = e.parentDirection;\r\n        var direction = getTotalDirection(parentDirection, isPinch, inputEvent, datas);\r\n        var _a = moveable.state, width = _a.width, height = _a.height, targetTransform = _a.targetTransform, target = _a.target, pos1 = _a.pos1, pos2 = _a.pos2, pos4 = _a.pos4;\r\n        if (!direction || !target) {\r\n            return false;\r\n        }\r\n        if (!isPinch) {\r\n            setDragStart(moveable, e);\r\n        }\r\n        datas.datas = {};\r\n        datas.transform = targetTransform;\r\n        datas.prevDist = [1, 1];\r\n        datas.direction = direction;\r\n        datas.startOffsetWidth = width;\r\n        datas.startOffsetHeight = height;\r\n        datas.startValue = [1, 1];\r\n        // const scaleWidth = getDist(pos1, pos2);\r\n        // const scaleHeight = getDist(pos2, pos4);\r\n        var isWidth = (!direction[0] && !direction[1]) || direction[0] || !direction[1];\r\n        // datas.scaleWidth = scaleWidth;\r\n        // datas.scaleHeight = scaleHeight;\r\n        // datas.scaleXRatio = scaleWidth / width;\r\n        // datas.scaleYRatio = scaleHeight / height;\r\n        setDefaultTransformIndex(moveable, e, \"scale\");\r\n        datas.isWidth = isWidth;\r\n        function setRatio(ratio) {\r\n            datas.ratio = ratio && isFinite(ratio) ? ratio : 0;\r\n        }\r\n        datas.startPositions = getAbsolutePosesByState(moveable.state);\r\n        function setFixedDirection(fixedDirection) {\r\n            var result = getFixedDirectionInfo(datas.startPositions, fixedDirection);\r\n            datas.fixedDirection = result.fixedDirection;\r\n            datas.fixedPosition = result.fixedPosition;\r\n            datas.fixedOffset = result.fixedOffset;\r\n        }\r\n        datas.setFixedDirection = setFixedDirection;\r\n        setRatio(getDist$1(pos1, pos2) / getDist$1(pos2, pos4));\r\n        setFixedDirection([-direction[0], -direction[1]]);\r\n        var setMinScaleSize = function (min) {\r\n            datas.minScaleSize = min;\r\n        };\r\n        var setMaxScaleSize = function (max) {\r\n            datas.maxScaleSize = max;\r\n        };\r\n        // const setMinScale = (min: number[]) => {\r\n        // };\r\n        // const setMaxScale = (max: number[]) => {\r\n        // };\r\n        setMinScaleSize([-Infinity, -Infinity]);\r\n        setMaxScaleSize([Infinity, Infinity]);\r\n        var params = fillParams(moveable, e, __assign(__assign({ direction: direction, set: function (scale) {\r\n                datas.startValue = scale;\r\n            }, setRatio: setRatio, setFixedDirection: setFixedDirection, setMinScaleSize: setMinScaleSize, setMaxScaleSize: setMaxScaleSize }, fillTransformStartEvent(moveable, e)), { dragStart: Draggable.dragStart(moveable, new CustomGesto().dragStart([0, 0], e)) }));\r\n        var result = triggerEvent(moveable, \"onScaleStart\", params);\r\n        datas.startFixedDirection = datas.fixedDirection;\r\n        if (result !== false) {\r\n            datas.isScale = true;\r\n            moveable.state.snapRenderInfo = {\r\n                request: e.isRequest,\r\n                direction: direction,\r\n            };\r\n        }\r\n        return datas.isScale ? params : false;\r\n    },\r\n    dragControl: function (moveable, e) {\r\n        resolveTransformEvent(moveable, e, \"scale\");\r\n        var datas = e.datas, parentKeepRatio = e.parentKeepRatio, parentFlag = e.parentFlag, isPinch = e.isPinch, dragClient = e.dragClient, isRequest = e.isRequest, useSnap = e.useSnap, resolveMatrix = e.resolveMatrix;\r\n        var prevDist = datas.prevDist, direction = datas.direction, startOffsetWidth = datas.startOffsetWidth, startOffsetHeight = datas.startOffsetHeight, isScale = datas.isScale, startValue = datas.startValue, isWidth = datas.isWidth, ratio = datas.ratio;\r\n        if (!isScale) {\r\n            return false;\r\n        }\r\n        var props = moveable.props;\r\n        var throttleScale = props.throttleScale, parentMoveable = props.parentMoveable;\r\n        var sizeDirection = direction;\r\n        if (!direction[0] && !direction[1]) {\r\n            sizeDirection = [1, 1];\r\n        }\r\n        var keepRatio = (ratio && (parentKeepRatio != null ? parentKeepRatio : props.keepRatio)) || false;\r\n        var state = moveable.state;\r\n        var tempScaleValue = [\r\n            startValue[0],\r\n            startValue[1],\r\n        ];\r\n        function getNextScale() {\r\n            var _a = getOffsetSizeDist(sizeDirection, keepRatio, datas, e), distWidth = _a.distWidth, distHeight = _a.distHeight;\r\n            var distX = startOffsetWidth ? (startOffsetWidth + distWidth) / startOffsetWidth : 1;\r\n            var distY = startOffsetHeight ? (startOffsetHeight + distHeight) / startOffsetHeight : 1;\r\n            if (!startValue[0]) {\r\n                tempScaleValue[0] = distWidth / startOffsetWidth;\r\n            }\r\n            if (!startValue[1]) {\r\n                tempScaleValue[1] = distHeight / startOffsetHeight;\r\n            }\r\n            var scaleX = (sizeDirection[0] || keepRatio ? distX : 1) * tempScaleValue[0];\r\n            var scaleY = (sizeDirection[1] || keepRatio ? distY : 1) * tempScaleValue[1];\r\n            if (scaleX === 0) {\r\n                scaleX = sign(prevDist[0]) * MIN_SCALE;\r\n            }\r\n            if (scaleY === 0) {\r\n                scaleY = sign(prevDist[1]) * MIN_SCALE;\r\n            }\r\n            return [scaleX, scaleY];\r\n        }\r\n        var scale = getNextScale();\r\n        if (!isPinch && moveable.props.groupable) {\r\n            var snapRenderInfo = state.snapRenderInfo || {};\r\n            var stateDirection = snapRenderInfo.direction;\r\n            if (isArray(stateDirection) && (stateDirection[0] || stateDirection[1])) {\r\n                state.snapRenderInfo = { direction: direction, request: e.isRequest };\r\n            }\r\n        }\r\n        triggerEvent(moveable, \"onBeforeScale\", fillParams(moveable, e, {\r\n            scale: scale,\r\n            setFixedDirection: function (nextFixedDirection) {\r\n                datas.setFixedDirection(nextFixedDirection);\r\n                scale = getNextScale();\r\n                return scale;\r\n            },\r\n            startFixedDirection: datas.startFixedDirection,\r\n            setScale: function (nextScale) {\r\n                scale = nextScale;\r\n            },\r\n        }, true));\r\n        var dist = [\r\n            scale[0] / tempScaleValue[0],\r\n            scale[1] / tempScaleValue[1],\r\n        ];\r\n        var fixedPosition = dragClient;\r\n        var snapDist = [0, 0];\r\n        var distSign = sign(dist[0] * dist[1]);\r\n        var isSelfPinch = !dragClient && !parentFlag && isPinch;\r\n        if (isSelfPinch || resolveMatrix) {\r\n            fixedPosition = getTranslateFixedPosition(moveable, datas.targetAllTransform, [0, 0], [0, 0], datas);\r\n        }\r\n        else if (!dragClient) {\r\n            fixedPosition = datas.fixedPosition;\r\n        }\r\n        if (!isPinch) {\r\n            snapDist = checkSnapScale(moveable, dist, direction, !useSnap && isRequest, datas);\r\n        }\r\n        if (keepRatio) {\r\n            if (sizeDirection[0] && sizeDirection[1] && snapDist[0] && snapDist[1]) {\r\n                if (Math.abs(snapDist[0] * startOffsetWidth) > Math.abs(snapDist[1] * startOffsetHeight)) {\r\n                    snapDist[1] = 0;\r\n                }\r\n                else {\r\n                    snapDist[0] = 0;\r\n                }\r\n            }\r\n            var isNoSnap = !snapDist[0] && !snapDist[1];\r\n            if (isNoSnap) {\r\n                // throttle scale value (not absolute scale size)\r\n                if (isWidth) {\r\n                    dist[0] = throttle(dist[0] * tempScaleValue[0], throttleScale) / tempScaleValue[0];\r\n                }\r\n                else {\r\n                    dist[1] = throttle(dist[1] * tempScaleValue[1], throttleScale) / tempScaleValue[1];\r\n                }\r\n            }\r\n            if ((sizeDirection[0] && !sizeDirection[1])\r\n                || (snapDist[0] && !snapDist[1])\r\n                || (isNoSnap && isWidth)) {\r\n                dist[0] += snapDist[0];\r\n                var snapHeight = startOffsetWidth * dist[0] * tempScaleValue[0] / ratio;\r\n                dist[1] = sign(distSign * dist[0]) * abs(snapHeight / startOffsetHeight / tempScaleValue[1]);\r\n            }\r\n            else if ((!sizeDirection[0] && sizeDirection[1])\r\n                || (!snapDist[0] && snapDist[1])\r\n                || (isNoSnap && !isWidth)) {\r\n                dist[1] += snapDist[1];\r\n                var snapWidth = startOffsetHeight * dist[1] * tempScaleValue[1] * ratio;\r\n                dist[0] = sign(distSign * dist[1]) * abs(snapWidth / startOffsetWidth / tempScaleValue[0]);\r\n            }\r\n        }\r\n        else {\r\n            dist[0] += snapDist[0];\r\n            dist[1] += snapDist[1];\r\n            if (!snapDist[0]) {\r\n                dist[0] = throttle(dist[0] * tempScaleValue[0], throttleScale) / tempScaleValue[0];\r\n            }\r\n            if (!snapDist[1]) {\r\n                dist[1] = throttle(dist[1] * tempScaleValue[1], throttleScale) / tempScaleValue[1];\r\n            }\r\n        }\r\n        if (dist[0] === 0) {\r\n            dist[0] = sign(prevDist[0]) * MIN_SCALE;\r\n        }\r\n        if (dist[1] === 0) {\r\n            dist[1] = sign(prevDist[1]) * MIN_SCALE;\r\n        }\r\n        scale = multiply2(dist, [tempScaleValue[0], tempScaleValue[1]]);\r\n        var startOffsetSize = [\r\n            startOffsetWidth,\r\n            startOffsetHeight,\r\n        ];\r\n        var scaleSize = [\r\n            startOffsetWidth * scale[0],\r\n            startOffsetHeight * scale[1],\r\n        ];\r\n        scaleSize = calculateBoundSize(scaleSize, datas.minScaleSize, datas.maxScaleSize, keepRatio ? ratio : false);\r\n        // if (keepRatio && (isGroup || keepRatioFinally)) {\r\n        //     if (isWidth) {\r\n        //         boundingHeight = boundingWidth / ratio;\r\n        //     } else {\r\n        //         boundingWidth = boundingHeight * ratio;\r\n        //     }\r\n        // }\r\n        scale = countEach(2, function (i) {\r\n            return startOffsetSize[i] ? scaleSize[i] / startOffsetSize[i] : scaleSize[i];\r\n        });\r\n        dist = countEach(2, function (i) {\r\n            return scale[i] / tempScaleValue[i];\r\n        });\r\n        var delta = countEach(2, function (i) { return prevDist[i] ? dist[i] / prevDist[i] : dist[i]; });\r\n        var distText = \"scale(\".concat(dist.join(\", \"), \")\");\r\n        var scaleText = \"scale(\".concat(scale.join(\", \"), \")\");\r\n        var nextTransform = convertTransformFormat(datas, scaleText, distText);\r\n        var isZeroScale = !startValue[0] || !startValue[1];\r\n        var inverseDist = getScaleDist(moveable, isZeroScale ? scaleText : distText, datas.fixedDirection, fixedPosition, datas.fixedOffset, datas, isZeroScale);\r\n        var inverseDelta = isSelfPinch ? inverseDist : minus(inverseDist, datas.prevInverseDist || [0, 0]);\r\n        datas.prevDist = dist;\r\n        datas.prevInverseDist = inverseDist;\r\n        if (scale[0] === prevDist[0] && scale[1] === prevDist[1]\r\n            && inverseDelta.every(function (num) { return !num; })\r\n            && !parentMoveable\r\n            && !isSelfPinch) {\r\n            return false;\r\n        }\r\n        var params = fillParams(moveable, e, __assign({ offsetWidth: startOffsetWidth, offsetHeight: startOffsetHeight, direction: direction, scale: scale, dist: dist, delta: delta, isPinch: !!isPinch }, fillTransformEvent(moveable, nextTransform, inverseDelta, isPinch, e)));\r\n        triggerEvent(moveable, \"onScale\", params);\r\n        return params;\r\n    },\r\n    dragControlEnd: function (moveable, e) {\r\n        var datas = e.datas;\r\n        if (!datas.isScale) {\r\n            return false;\r\n        }\r\n        datas.isScale = false;\r\n        var scaleEndParam = fillEndParams(moveable, e, {});\r\n        triggerEvent(moveable, \"onScaleEnd\", scaleEndParam);\r\n        return scaleEndParam;\r\n    },\r\n    dragGroupControlCondition: directionCondition,\r\n    dragGroupControlStart: function (moveable, e) {\r\n        var datas = e.datas;\r\n        var params = this.dragControlStart(moveable, e);\r\n        if (!params) {\r\n            return false;\r\n        }\r\n        var originalEvents = fillChildEvents(moveable, \"resizable\", e);\r\n        datas.moveableScale = moveable.scale;\r\n        var events = triggerChildAbles(moveable, this, \"dragControlStart\", e, function (child, ev) {\r\n            return startChildDist(moveable, child, datas, ev);\r\n        });\r\n        var setFixedDirection = function (fixedDirection) {\r\n            params.setFixedDirection(fixedDirection);\r\n            events.forEach(function (ev, i) {\r\n                ev.setFixedDirection(fixedDirection);\r\n                startChildDist(moveable, ev.moveable, datas, originalEvents[i]);\r\n            });\r\n        };\r\n        datas.setFixedDirection = setFixedDirection;\r\n        var nextParams = __assign(__assign({}, params), { targets: moveable.props.targets, events: events, setFixedDirection: setFixedDirection });\r\n        var result = triggerEvent(moveable, \"onScaleGroupStart\", nextParams);\r\n        datas.isScale = result !== false;\r\n        return datas.isScale ? nextParams : false;\r\n    },\r\n    dragGroupControl: function (moveable, e) {\r\n        var datas = e.datas;\r\n        if (!datas.isScale) {\r\n            return;\r\n        }\r\n        catchEvent(moveable, \"onBeforeScale\", function (parentEvent) {\r\n            triggerEvent(moveable, \"onBeforeScaleGroup\", fillParams(moveable, e, __assign(__assign({}, parentEvent), { targets: moveable.props.targets }), true));\r\n        });\r\n        var params = this.dragControl(moveable, e);\r\n        if (!params) {\r\n            return;\r\n        }\r\n        var dist = params.dist;\r\n        var moveableScale = datas.moveableScale;\r\n        moveable.scale = [\r\n            dist[0] * moveableScale[0],\r\n            dist[1] * moveableScale[1],\r\n        ];\r\n        var keepRatio = moveable.props.keepRatio;\r\n        var fixedPosition = datas.fixedPosition;\r\n        var events = triggerChildAbles(moveable, this, \"dragControl\", e, function (_, ev) {\r\n            var _a = __read(calculate(createRotateMatrix(moveable.rotation / 180 * Math.PI, 3), [\r\n                ev.datas.originalX * dist[0],\r\n                ev.datas.originalY * dist[1],\r\n                1,\r\n            ], 3), 2), clientX = _a[0], clientY = _a[1];\r\n            return __assign(__assign({}, ev), { parentDist: null, parentScale: dist, parentKeepRatio: keepRatio, \r\n                // recalculate child fixed position for parent group's dragging.\r\n                dragClient: plus(fixedPosition, [clientX, clientY]) });\r\n        });\r\n        var nextParams = __assign({ targets: moveable.props.targets, events: events }, params);\r\n        triggerEvent(moveable, \"onScaleGroup\", nextParams);\r\n        return nextParams;\r\n    },\r\n    dragGroupControlEnd: function (moveable, e) {\r\n        var isDrag = e.isDrag, datas = e.datas;\r\n        if (!datas.isScale) {\r\n            return;\r\n        }\r\n        this.dragControlEnd(moveable, e);\r\n        var events = triggerChildAbles(moveable, this, \"dragControlEnd\", e);\r\n        var nextParams = fillEndParams(moveable, e, {\r\n            targets: moveable.props.targets,\r\n            events: events,\r\n        });\r\n        triggerEvent(moveable, \"onScaleGroupEnd\", nextParams);\r\n        return isDrag;\r\n    },\r\n    /**\r\n     * @method Moveable.Scalable#request\r\n     * @param {Moveable.Scalable.ScalableRequestParam} e - the Scalable's request parameter\r\n     * @return {Moveable.Requester} Moveable Requester\r\n     * @example\r\n\n     * // Instantly Request (requestStart - request - requestEnd)\r\n     * moveable.request(\"scalable\", { deltaWidth: 10, deltaHeight: 10 }, true);\r\n     *\r\n     * // requestStart\r\n     * const requester = moveable.request(\"scalable\");\r\n     *\r\n     * // request\r\n     * requester.request({ deltaWidth: 10, deltaHeight: 10 });\r\n     * requester.request({ deltaWidth: 10, deltaHeight: 10 });\r\n     * requester.request({ deltaWidth: 10, deltaHeight: 10 });\r\n     *\r\n     * // requestEnd\r\n     * requester.requestEnd();\r\n     */\r\n    request: function () {\r\n        var datas = {};\r\n        var distWidth = 0;\r\n        var distHeight = 0;\r\n        var useSnap = false;\r\n        return {\r\n            isControl: true,\r\n            requestStart: function (e) {\r\n                useSnap = e.useSnap;\r\n                return {\r\n                    datas: datas,\r\n                    parentDirection: e.direction || [1, 1],\r\n                    useSnap: useSnap,\r\n                };\r\n            },\r\n            request: function (e) {\r\n                distWidth += e.deltaWidth;\r\n                distHeight += e.deltaHeight;\r\n                return {\r\n                    datas: datas,\r\n                    parentDist: [distWidth, distHeight],\r\n                    parentKeepRatio: e.keepRatio,\r\n                    useSnap: useSnap,\r\n                };\r\n            },\r\n            requestEnd: function () {\r\n                return { datas: datas, isDrag: true, useSnap: useSnap };\r\n            },\r\n        };\r\n    },\r\n};\r\n/**\r\n * Whether or not target can scaled.\r\n *\r\n * @name Moveable.Scalable#scalable\r\n * @default false\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.scalable = true;\r\n */\r\n/**\r\n * throttle of scaleX, scaleY when scale.\r\n * @name Moveable.Scalable#throttleScale\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.throttleScale = 0.1;\r\n */\r\n/**\r\n * Set directions to show the control box. (default: [\"n\", \"nw\", \"ne\", \"s\", \"se\", \"sw\", \"e\", \"w\"])\r\n * @name Moveable.Scalable#renderDirections\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     scalable: true,\r\n *   renderDirections: [\"n\", \"nw\", \"ne\", \"s\", \"se\", \"sw\", \"e\", \"w\"],\r\n * });\r\n *\r\n * moveable.renderDirections = [\"nw\", \"ne\", \"sw\", \"se\"];\r\n */\r\n/**\r\n * When resize or scale, keeps a ratio of the width, height. (default: false)\r\n * @name Moveable.Scalable#keepRatio\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     scalable: true,\r\n * });\r\n *\r\n * moveable.keepRatio = true;\r\n */\r\n/**\r\n * When the scale starts, the scaleStart event is called.\r\n * @memberof Moveable.Scalable\r\n * @event scaleStart\r\n * @param {Moveable.Scalable.OnScaleStart} - Parameters for the scaleStart event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { scalable: true });\r\n * moveable.on(\"scaleStart\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n */\r\n/**\r\n * When scaling, `beforeScale` is called before `scale` occurs. In `beforeScale`, you can get and set the pre-value before scaling.\r\n * @memberof Moveable.Scalable\r\n * @event beforeScale\r\n * @param {Moveable.Scalable.OnBeforeScale} - Parameters for the `beforeScale` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { scalable: true });\r\n * moveable.on(\"beforeScale\", ({ setFixedDirection }) => {\r\n *     if (shiftKey) {\r\n *        setFixedDirection([0, 0]);\r\n *     }\r\n * });\r\n * moveable.on(\"scale\", ({ target, transform, dist }) => {\r\n *     target.style.transform = transform;\r\n * });\r\n */\r\n/**\r\n * When scaling, the `scale` event is called.\r\n * @memberof Moveable.Scalable\r\n * @event scale\r\n * @param {Moveable.Scalable.OnScale} - Parameters for the `scale` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { scalable: true });\r\n * moveable.on(\"scale\", ({ target, transform, dist }) => {\r\n *     target.style.transform = transform;\r\n * });\r\n */\r\n/**\r\n * When the scale finishes, the `scaleEnd` event is called.\r\n * @memberof Moveable.Scalable\r\n * @event scaleEnd\r\n * @param {Moveable.Scalable.OnScaleEnd} - Parameters for the `scaleEnd` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { scalable: true });\r\n * moveable.on(\"scaleEnd\", ({ target, isDrag }) => {\r\n *     console.log(target, isDrag);\r\n * });\r\n */\r\n/**\r\n* When the group scale starts, the `scaleGroupStart` event is called.\r\n* @memberof Moveable.Scalable\r\n* @event scaleGroupStart\r\n* @param {Moveable.Scalable.OnScaleGroupStart} - Parameters for the `scaleGroupStart` event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n*     scalable: true\r\n* });\r\n* moveable.on(\"scaleGroupStart\", ({ targets }) => {\r\n*     console.log(\"onScaleGroupStart\", targets);\r\n* });\r\n*/\r\n/**\r\n* When the group scale, the `scaleGroup` event is called.\r\n* @memberof Moveable.Scalable\r\n* @event scaleGroup\r\n* @param {Moveable.Scalable.OnScaleGroup} - Parameters for the `scaleGroup` event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n*     scalable: true\r\n* });\r\n* moveable.on(\"scaleGroup\", ({ targets, events }) => {\r\n*     console.log(\"onScaleGroup\", targets);\r\n*     events.forEach(ev => {\r\n*         const target = ev.target;\r\n*         // ev.drag is a drag event that occurs when the group scale.\r\n*         const left = ev.drag.beforeDist[0];\r\n*         const top = ev.drag.beforeDist[1];\r\n*         const scaleX = ev.scale[0];\r\n*         const scaleY = ev.scale[1];\r\n*     });\r\n* });\r\n*/\r\n/**\r\n * When the group scale finishes, the `scaleGroupEnd` event is called.\r\n * @memberof Moveable.Scalable\r\n * @event scaleGroupEnd\r\n * @param {Moveable.Scalable.OnScaleGroupEnd} - Parameters for the `scaleGroupEnd` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n *     scalable: true\r\n * });\r\n * moveable.on(\"scaleGroupEnd\", ({ targets, isDrag }) => {\r\n *     console.log(\"onScaleGroupEnd\", targets, isDrag);\r\n * });\r\n */\n\nfunction getMiddleLinePos(pos1, pos2) {\r\n    return pos1.map(function (pos, i) { return dot(pos, pos2[i], 1, 2); });\r\n}\r\nfunction getTriangleRad(pos1, pos2, pos3) {\r\n    // pos1 Rad\r\n    var rad1 = getRad(pos1, pos2);\r\n    var rad2 = getRad(pos1, pos3);\r\n    var rad = rad2 - rad1;\r\n    return rad >= 0 ? rad : rad + 2 * Math.PI;\r\n}\r\nfunction isValidPos(poses1, poses2) {\r\n    var rad1 = getTriangleRad(poses1[0], poses1[1], poses1[2]);\r\n    var rad2 = getTriangleRad(poses2[0], poses2[1], poses2[2]);\r\n    var pi = Math.PI;\r\n    if ((rad1 >= pi && rad2 <= pi) || (rad1 <= pi && rad2 >= pi)) {\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\n/**\r\n * @namespace Moveable.Warpable\r\n * @description Warpable indicates whether the target can be warped(distorted, bented).\r\n */\r\nvar Warpable = {\r\n    name: \"warpable\",\r\n    ableGroup: \"size\",\r\n    props: [\r\n        \"warpable\",\r\n        \"renderDirections\",\r\n        \"edge\",\r\n        \"displayAroundControls\",\r\n    ],\r\n    events: [\r\n        \"warpStart\",\r\n        \"warp\",\r\n        \"warpEnd\",\r\n    ],\r\n    viewClassName: getDirectionViewClassName(\"warpable\"),\r\n    render: function (moveable, React) {\r\n        var _a = moveable.props, resizable = _a.resizable, scalable = _a.scalable, warpable = _a.warpable, zoom = _a.zoom;\r\n        if (resizable || scalable || !warpable) {\r\n            return [];\r\n        }\r\n        var _b = moveable.state, pos1 = _b.pos1, pos2 = _b.pos2, pos3 = _b.pos3, pos4 = _b.pos4;\r\n        var linePosFrom1 = getMiddleLinePos(pos1, pos2);\r\n        var linePosFrom2 = getMiddleLinePos(pos2, pos1);\r\n        var linePosFrom3 = getMiddleLinePos(pos1, pos3);\r\n        var linePosFrom4 = getMiddleLinePos(pos3, pos1);\r\n        var linePosTo1 = getMiddleLinePos(pos3, pos4);\r\n        var linePosTo2 = getMiddleLinePos(pos4, pos3);\r\n        var linePosTo3 = getMiddleLinePos(pos2, pos4);\r\n        var linePosTo4 = getMiddleLinePos(pos4, pos2);\r\n        return __spreadArray([\r\n            React.createElement(\"div\", { className: prefix(\"line\"), key: \"middeLine1\", style: getLineStyle(linePosFrom1, linePosTo1, zoom) }),\r\n            React.createElement(\"div\", { className: prefix(\"line\"), key: \"middeLine2\", style: getLineStyle(linePosFrom2, linePosTo2, zoom) }),\r\n            React.createElement(\"div\", { className: prefix(\"line\"), key: \"middeLine3\", style: getLineStyle(linePosFrom3, linePosTo3, zoom) }),\r\n            React.createElement(\"div\", { className: prefix(\"line\"), key: \"middeLine4\", style: getLineStyle(linePosFrom4, linePosTo4, zoom) })\r\n        ], __read(renderAllDirections(moveable, \"warpable\", React)), false);\r\n    },\r\n    dragControlCondition: function (moveable, e) {\r\n        if (e.isRequest) {\r\n            return false;\r\n        }\r\n        var target = e.inputEvent.target;\r\n        return hasClass(target, prefix(\"direction\")) && hasClass(target, prefix(\"warpable\"));\r\n    },\r\n    dragControlStart: function (moveable, e) {\r\n        var datas = e.datas, inputEvent = e.inputEvent;\r\n        var target = moveable.props.target;\r\n        var inputTarget = inputEvent.target;\r\n        var direction = getDirection(inputTarget, datas);\r\n        if (!direction || !target) {\r\n            return false;\r\n        }\r\n        var state = moveable.state;\r\n        var transformOrigin = state.transformOrigin, is3d = state.is3d, targetTransform = state.targetTransform, targetMatrix = state.targetMatrix, width = state.width, height = state.height, left = state.left, top = state.top;\r\n        datas.datas = {};\r\n        datas.targetTransform = targetTransform;\r\n        datas.warpTargetMatrix = is3d ? targetMatrix : convertDimension(targetMatrix, 3, 4);\r\n        datas.targetInverseMatrix = ignoreDimension(invert(datas.warpTargetMatrix, 4), 3, 4);\r\n        datas.direction = direction;\r\n        datas.left = left;\r\n        datas.top = top;\r\n        datas.poses = [\r\n            [0, 0],\r\n            [width, 0],\r\n            [0, height],\r\n            [width, height],\r\n        ].map(function (p) { return minus(p, transformOrigin); });\r\n        datas.nextPoses = datas.poses.map(function (_a) {\r\n            var _b = __read(_a, 2), x = _b[0], y = _b[1];\r\n            return calculate(datas.warpTargetMatrix, [x, y, 0, 1], 4);\r\n        });\r\n        datas.startValue = createIdentityMatrix(4);\r\n        datas.prevMatrix = createIdentityMatrix(4);\r\n        datas.absolutePoses = getAbsolutePosesByState(state);\r\n        datas.posIndexes = getPosIndexesByDirection(direction);\r\n        setDragStart(moveable, e);\r\n        setDefaultTransformIndex(moveable, e, \"matrix3d\");\r\n        state.snapRenderInfo = {\r\n            request: e.isRequest,\r\n            direction: direction,\r\n        };\r\n        var params = fillParams(moveable, e, __assign({ set: function (matrix) {\r\n                datas.startValue = matrix;\r\n            } }, fillTransformStartEvent(moveable, e)));\r\n        var result = triggerEvent(moveable, \"onWarpStart\", params);\r\n        if (result !== false) {\r\n            datas.isWarp = true;\r\n        }\r\n        return datas.isWarp;\r\n    },\r\n    dragControl: function (moveable, e) {\r\n        var datas = e.datas, isRequest = e.isRequest;\r\n        var distX = e.distX, distY = e.distY;\r\n        var targetInverseMatrix = datas.targetInverseMatrix, prevMatrix = datas.prevMatrix, isWarp = datas.isWarp, startValue = datas.startValue, poses = datas.poses, posIndexes = datas.posIndexes, absolutePoses = datas.absolutePoses;\r\n        if (!isWarp) {\r\n            return false;\r\n        }\r\n        resolveTransformEvent(moveable, e, \"matrix3d\");\r\n        if (hasGuidelines(moveable, \"warpable\")) {\r\n            var selectedPoses = posIndexes.map(function (index) { return absolutePoses[index]; });\r\n            if (selectedPoses.length > 1) {\r\n                selectedPoses.push([\r\n                    (selectedPoses[0][0] + selectedPoses[1][0]) / 2,\r\n                    (selectedPoses[0][1] + selectedPoses[1][1]) / 2,\r\n                ]);\r\n            }\r\n            var _a = checkMoveableSnapBounds(moveable, isRequest, {\r\n                horizontal: selectedPoses.map(function (pos) { return pos[1] + distY; }),\r\n                vertical: selectedPoses.map(function (pos) { return pos[0] + distX; }),\r\n            }), horizontalSnapInfo = _a.horizontal, verticalSnapInfo = _a.vertical;\r\n            distY -= horizontalSnapInfo.offset;\r\n            distX -= verticalSnapInfo.offset;\r\n        }\r\n        var dist = getDragDist({ datas: datas, distX: distX, distY: distY }, true);\r\n        var nextPoses = datas.nextPoses.slice();\r\n        posIndexes.forEach(function (index) {\r\n            nextPoses[index] = plus(nextPoses[index], dist);\r\n        });\r\n        if (!NEARBY_POS.every(function (nearByPoses) { return isValidPos(nearByPoses.map(function (i) { return poses[i]; }), nearByPoses.map(function (i) { return nextPoses[i]; })); })) {\r\n            return false;\r\n        }\r\n        var h = createWarpMatrix(poses[0], poses[2], poses[1], poses[3], nextPoses[0], nextPoses[2], nextPoses[1], nextPoses[3]);\r\n        if (!h.length) {\r\n            return false;\r\n        }\r\n        // B * A * M\r\n        var afterMatrix = multiply(targetInverseMatrix, h, 4);\r\n        // B * M * A\r\n        var matrix = getTransfromMatrix(datas, afterMatrix, true);\r\n        var delta = multiply(invert(prevMatrix, 4), matrix, 4);\r\n        datas.prevMatrix = matrix;\r\n        var totalMatrix = multiply(startValue, matrix, 4);\r\n        var nextTransform = convertTransformFormat(datas, \"matrix3d(\".concat(totalMatrix.join(\", \"), \")\"), \"matrix3d(\".concat(matrix.join(\", \"), \")\"));\r\n        fillOriginalTransform(e, nextTransform);\r\n        triggerEvent(moveable, \"onWarp\", fillParams(moveable, e, __assign({ delta: delta, matrix: totalMatrix, dist: matrix, multiply: multiply, transform: nextTransform }, fillCSSObject({\r\n            transform: nextTransform,\r\n        }, e))));\r\n        return true;\r\n    },\r\n    dragControlEnd: function (moveable, e) {\r\n        var datas = e.datas, isDrag = e.isDrag;\r\n        if (!datas.isWarp) {\r\n            return false;\r\n        }\r\n        datas.isWarp = false;\r\n        triggerEvent(moveable, \"onWarpEnd\", fillEndParams(moveable, e, {}));\r\n        return isDrag;\r\n    },\r\n};\r\n/**\r\n * Whether or not target can be warped. (default: false)\r\n * @name Moveable.Warpable#warpable\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.warpable = true;\r\n */\r\n/**\r\n* Set directions to show the control box. (default: [\"n\", \"nw\", \"ne\", \"s\", \"se\", \"sw\", \"e\", \"w\"])\r\n* @name Moveable.Warpable#renderDirections\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     warpable: true,\r\n*     renderDirections: [\"n\", \"nw\", \"ne\", \"s\", \"se\", \"sw\", \"e\", \"w\"],\r\n* });\r\n*\r\n* moveable.renderDirections = [\"nw\", \"ne\", \"sw\", \"se\"];\r\n*/\r\n/**\r\n* When the warp starts, the warpStart event is called.\r\n* @memberof Moveable.Warpable\r\n* @event warpStart\r\n* @param {Moveable.Warpable.OnWarpStart} - Parameters for the warpStart event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, { warpable: true });\r\n* moveable.on(\"warpStart\", ({ target }) => {\r\n*     console.log(target);\r\n* });\r\n*/\r\n/**\r\n * When warping, the warp event is called.\r\n * @memberof Moveable.Warpable\r\n * @event warp\r\n * @param {Moveable.Warpable.OnWarp} - Parameters for the warp event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n * let matrix = [\r\n *  1, 0, 0, 0,\r\n *  0, 1, 0, 0,\r\n *  0, 0, 1, 0,\r\n *  0, 0, 0, 1,\r\n * ];\r\n * const moveable = new Moveable(document.body, { warpable: true });\r\n * moveable.on(\"warp\", ({ target, transform, delta, multiply }) => {\r\n *    // target.style.transform = transform;\r\n *    matrix = multiply(matrix, delta);\r\n *    target.style.transform = `matrix3d(${matrix.join(\",\")})`;\r\n * });\r\n */\r\n/**\r\n * When the warp finishes, the warpEnd event is called.\r\n * @memberof Moveable.Warpable\r\n * @event warpEnd\r\n * @param {Moveable.Warpable.OnWarpEnd} - Parameters for the warpEnd event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { warpable: true });\r\n * moveable.on(\"warpEnd\", ({ target, isDrag }) => {\r\n *     console.log(target, isDrag);\r\n * });\r\n */\n\nvar AREA_PIECES = /*#__PURE__*/ prefix(\"area-pieces\");\r\nvar AREA_PIECE = /*#__PURE__*/ prefix(\"area-piece\");\r\nvar AVOID = /*#__PURE__*/ prefix(\"avoid\");\r\nvar VIEW_DRAGGING = prefix(\"view-dragging\");\n\nfunction restoreStyle(moveable) {\r\n    var el = moveable.areaElement;\r\n    if (!el) {\r\n        return;\r\n    }\r\n    var _a = moveable.state, width = _a.width, height = _a.height;\r\n    removeClass(el, AVOID);\r\n    el.style.cssText += \"left: 0px; top: 0px; width: \".concat(width, \"px; height: \").concat(height, \"px\");\r\n}\r\nfunction renderPieces(React) {\r\n    return (React.createElement(\"div\", { key: \"area_pieces\", className: AREA_PIECES },\r\n        React.createElement(\"div\", { className: AREA_PIECE }),\r\n        React.createElement(\"div\", { className: AREA_PIECE }),\r\n        React.createElement(\"div\", { className: AREA_PIECE }),\r\n        React.createElement(\"div\", { className: AREA_PIECE })));\r\n}\r\nvar DragArea = {\r\n    name: \"dragArea\",\r\n    props: [\r\n        \"dragArea\",\r\n        \"passDragArea\",\r\n    ],\r\n    events: [\r\n        \"click\",\r\n        \"clickGroup\",\r\n    ],\r\n    render: function (moveable, React) {\r\n        var _a = moveable.props, target = _a.target, dragArea = _a.dragArea, groupable = _a.groupable, passDragArea = _a.passDragArea;\r\n        var _b = moveable.getState(), width = _b.width, height = _b.height, renderPoses = _b.renderPoses;\r\n        var className = passDragArea ? prefix(\"area\", \"pass\") : prefix(\"area\");\r\n        if (groupable) {\r\n            return [\r\n                React.createElement(\"div\", { key: \"area\", ref: ref(moveable, \"areaElement\"), className: className }),\r\n                renderPieces(React),\r\n            ];\r\n        }\r\n        if (!target || !dragArea) {\r\n            return [];\r\n        }\r\n        var h = createWarpMatrix([0, 0], [width, 0], [0, height], [width, height], renderPoses[0], renderPoses[1], renderPoses[2], renderPoses[3]);\r\n        var transform = h.length ? makeMatrixCSS(h, true) : \"none\";\r\n        return [\r\n            React.createElement(\"div\", { key: \"area\", ref: ref(moveable, \"areaElement\"), className: className, style: {\r\n                    top: \"0px\",\r\n                    left: \"0px\",\r\n                    width: \"\".concat(width, \"px\"),\r\n                    height: \"\".concat(height, \"px\"),\r\n                    transformOrigin: \"0 0\",\r\n                    transform: transform,\r\n                } }),\r\n            renderPieces(React),\r\n        ];\r\n    },\r\n    dragStart: function (moveable, _a) {\r\n        var datas = _a.datas, clientX = _a.clientX, clientY = _a.clientY, inputEvent = _a.inputEvent;\r\n        if (!inputEvent) {\r\n            return false;\r\n        }\r\n        datas.isDragArea = false;\r\n        var areaElement = moveable.areaElement;\r\n        var state = moveable.state;\r\n        var moveableClientRect = state.moveableClientRect, renderPoses = state.renderPoses, rootMatrix = state.rootMatrix, is3d = state.is3d;\r\n        var left = moveableClientRect.left, top = moveableClientRect.top;\r\n        var _b = getRect(renderPoses), relativeLeft = _b.left, relativeTop = _b.top, width = _b.width, height = _b.height;\r\n        var n = is3d ? 4 : 3;\r\n        var _c = __read(calculateInversePosition(rootMatrix, [clientX - left, clientY - top], n), 2), posX = _c[0], posY = _c[1];\r\n        posX -= relativeLeft;\r\n        posY -= relativeTop;\r\n        var rects = [\r\n            { left: relativeLeft, top: relativeTop, width: width, height: posY - 10 },\r\n            { left: relativeLeft, top: relativeTop, width: posX - 10, height: height },\r\n            { left: relativeLeft, top: relativeTop + posY + 10, width: width, height: height - posY - 10 },\r\n            { left: relativeLeft + posX + 10, top: relativeTop, width: width - posX - 10, height: height },\r\n        ];\r\n        var children = [].slice.call(areaElement.nextElementSibling.children);\r\n        rects.forEach(function (rect, i) {\r\n            children[i].style.cssText\r\n                = \"left: \".concat(rect.left, \"px;top: \").concat(rect.top, \"px; width: \").concat(rect.width, \"px; height: \").concat(rect.height, \"px;\");\r\n        });\r\n        addClass(areaElement, AVOID);\r\n        state.disableNativeEvent = true;\r\n        return;\r\n    },\r\n    drag: function (moveable, _a) {\r\n        var datas = _a.datas, inputEvent = _a.inputEvent;\r\n        this.enableNativeEvent(moveable);\r\n        if (!inputEvent) {\r\n            return false;\r\n        }\r\n        if (!datas.isDragArea) {\r\n            datas.isDragArea = true;\r\n            restoreStyle(moveable);\r\n        }\r\n    },\r\n    dragEnd: function (moveable, e) {\r\n        this.enableNativeEvent(moveable);\r\n        var inputEvent = e.inputEvent, datas = e.datas;\r\n        if (!inputEvent) {\r\n            return false;\r\n        }\r\n        if (!datas.isDragArea) {\r\n            restoreStyle(moveable);\r\n        }\r\n    },\r\n    dragGroupStart: function (moveable, e) {\r\n        return this.dragStart(moveable, e);\r\n    },\r\n    dragGroup: function (moveable, e) {\r\n        return this.drag(moveable, e);\r\n    },\r\n    dragGroupEnd: function (moveable, e) {\r\n        return this.dragEnd(moveable, e);\r\n    },\r\n    unset: function (moveable) {\r\n        restoreStyle(moveable);\r\n        moveable.state.disableNativeEvent = false;\r\n    },\r\n    enableNativeEvent: function (moveable) {\r\n        var state = moveable.state;\r\n        if (state.disableNativeEvent) {\r\n            requestAnimationFrame(function () {\r\n                state.disableNativeEvent = false;\r\n            });\r\n        }\r\n    },\r\n};\r\n/**\r\n * Add an event to the moveable area instead of the target for stopPropagation. (default: false, true in group)\r\n * @name Moveable#dragArea\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *  dragArea: false,\r\n * });\r\n */\r\n/**\r\n * Set `pointerEvents: none;` css to pass events in dragArea. (default: false)\r\n * @name Moveable#passDragArea\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *  dragArea: false,\r\n * });\r\n */\n\nvar Origin = makeAble(\"origin\", {\r\n    props: [\"origin\", \"svgOrigin\"],\r\n    render: function (moveable, React) {\r\n        var _a = moveable.props, zoom = _a.zoom, svgOrigin = _a.svgOrigin, groupable = _a.groupable;\r\n        var _b = moveable.getState(), beforeOrigin = _b.beforeOrigin, rotation = _b.rotation, svg = _b.svg, allMatrix = _b.allMatrix, is3d = _b.is3d, left = _b.left, top = _b.top, offsetWidth = _b.offsetWidth, offsetHeight = _b.offsetHeight;\r\n        var originStyle;\r\n        if (!groupable && svg && svgOrigin) {\r\n            var _c = __read(convertTransformOriginArray(svgOrigin, offsetWidth, offsetHeight), 2), originX = _c[0], originY = _c[1];\r\n            var n = is3d ? 4 : 3;\r\n            var result = calculatePosition(allMatrix, [originX, originY], n);\r\n            originStyle = getControlTransform(rotation, zoom, minus(result, [left, top]));\r\n        }\r\n        else {\r\n            originStyle = getControlTransform(rotation, zoom, beforeOrigin);\r\n        }\r\n        return [\r\n            React.createElement(\"div\", { className: prefix(\"control\", \"origin\"), style: originStyle, key: \"beforeOrigin\" }),\r\n        ];\r\n    },\r\n});\r\n/**\r\n * Whether or not the origin controlbox will be visible or not (default: true)\r\n * @name Moveable#origin\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.origin = true;\r\n */\n\nfunction getDefaultScrollPosition(e) {\r\n    var scrollContainer = e.scrollContainer;\r\n    return [\r\n        scrollContainer.scrollLeft,\r\n        scrollContainer.scrollTop,\r\n    ];\r\n}\r\n/**\r\n * @namespace Moveable.Scrollable\r\n * @description Whether or not target can be scrolled to the scroll container (default: false)\r\n */\r\nvar Scrollable = {\r\n    name: \"scrollable\",\r\n    canPinch: true,\r\n    props: [\r\n        \"scrollable\",\r\n        \"scrollContainer\",\r\n        \"scrollThreshold\",\r\n        \"scrollThrottleTime\",\r\n        \"getScrollPosition\",\r\n        \"scrollOptions\",\r\n    ],\r\n    events: [\r\n        \"scroll\",\r\n        \"scrollGroup\",\r\n    ],\r\n    dragRelation: \"strong\",\r\n    dragStart: function (moveable, e) {\r\n        var props = moveable.props;\r\n        var _a = props.scrollContainer, scrollContainer = _a === void 0 ? moveable.getContainer() : _a, scrollOptions = props.scrollOptions;\r\n        var dragScroll = new DragScroll();\r\n        var scrollContainerElement = getRefTarget(scrollContainer, true);\r\n        e.datas.dragScroll = dragScroll;\r\n        moveable.state.dragScroll = dragScroll;\r\n        var gestoName = e.isControl ? \"controlGesto\" : \"targetGesto\";\r\n        var targets = e.targets;\r\n        dragScroll.on(\"scroll\", function (_a) {\r\n            var container = _a.container, direction = _a.direction;\r\n            var params = fillParams(moveable, e, {\r\n                scrollContainer: container,\r\n                direction: direction,\r\n            });\r\n            var eventName = targets ? \"onScrollGroup\" : \"onScroll\";\r\n            if (targets) {\r\n                params.targets = targets;\r\n            }\r\n            triggerEvent(moveable, eventName, params);\r\n        }).on(\"move\", function (_a) {\r\n            var offsetX = _a.offsetX, offsetY = _a.offsetY, inputEvent = _a.inputEvent;\r\n            moveable[gestoName].scrollBy(offsetX, offsetY, inputEvent.inputEvent, false);\r\n        }).on(\"scrollDrag\", function (_a) {\r\n            var next = _a.next;\r\n            next(moveable[gestoName].getCurrentEvent());\r\n        });\r\n        dragScroll.dragStart(e, __assign({ container: scrollContainerElement }, scrollOptions));\r\n    },\r\n    checkScroll: function (moveable, e) {\r\n        var dragScroll = e.datas.dragScroll;\r\n        if (!dragScroll) {\r\n            return;\r\n        }\r\n        var _a = moveable.props, _b = _a.scrollContainer, scrollContainer = _b === void 0 ? moveable.getContainer() : _b, _c = _a.scrollThreshold, scrollThreshold = _c === void 0 ? 0 : _c, _d = _a.scrollThrottleTime, scrollThrottleTime = _d === void 0 ? 0 : _d, _e = _a.getScrollPosition, getScrollPosition = _e === void 0 ? getDefaultScrollPosition : _e, scrollOptions = _a.scrollOptions;\r\n        dragScroll.drag(e, __assign({ container: scrollContainer, threshold: scrollThreshold, throttleTime: scrollThrottleTime, getScrollPosition: function (ev) {\r\n                return getScrollPosition({ scrollContainer: ev.container, direction: ev.direction });\r\n            } }, scrollOptions));\r\n        return true;\r\n    },\r\n    drag: function (moveable, e) {\r\n        return this.checkScroll(moveable, e);\r\n    },\r\n    dragEnd: function (moveable, e) {\r\n        e.datas.dragScroll.dragEnd();\r\n        e.datas.dragScroll = null;\r\n    },\r\n    dragControlStart: function (moveable, e) {\r\n        return this.dragStart(moveable, __assign(__assign({}, e), { isControl: true }));\r\n    },\r\n    dragControl: function (moveable, e) {\r\n        return this.drag(moveable, e);\r\n    },\r\n    dragControlEnd: function (moveable, e) {\r\n        return this.dragEnd(moveable, e);\r\n    },\r\n    dragGroupStart: function (moveable, e) {\r\n        return this.dragStart(moveable, __assign(__assign({}, e), { targets: moveable.props.targets }));\r\n    },\r\n    dragGroup: function (moveable, e) {\r\n        return this.drag(moveable, __assign(__assign({}, e), { targets: moveable.props.targets }));\r\n    },\r\n    dragGroupEnd: function (moveable, e) {\r\n        return this.dragEnd(moveable, __assign(__assign({}, e), { targets: moveable.props.targets }));\r\n    },\r\n    dragGroupControlStart: function (moveable, e) {\r\n        return this.dragStart(moveable, __assign(__assign({}, e), { targets: moveable.props.targets, isControl: true }));\r\n    },\r\n    dragGroupControl: function (moveable, e) {\r\n        return this.drag(moveable, __assign(__assign({}, e), { targets: moveable.props.targets }));\r\n    },\r\n    dragGroupControEnd: function (moveable, e) {\r\n        return this.dragEnd(moveable, __assign(__assign({}, e), { targets: moveable.props.targets }));\r\n    },\r\n    unset: function (moveable) {\r\n        var _a;\r\n        var state = moveable.state;\r\n        (_a = state.dragScroll) === null || _a === void 0 ? void 0 : _a.dragEnd();\r\n        state.dragScroll = null;\r\n    },\r\n};\r\n/**\r\n * When the drag cursor leaves the scrollContainer, the `scroll` event occur to scroll.\r\n * @memberof Moveable.Scrollable\r\n * @event scroll\r\n * @param {Moveable.Scrollable.OnScroll} - Parameters for the `scroll` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: document.querySelector(\".target\"),\r\n * });\r\n * moveable.on(\"scroll\", ({ scrollContainer, direction }) => {\r\n *   scrollContainer.scrollLeft += direction[0] * 10;\r\n *   scrollContainer.scrollTop += direction[1] * 10;\r\n * });\r\n */\r\n/**\r\n * When the drag cursor leaves the scrollContainer, the `scrollGroup` event occur to scroll in group.\r\n * @memberof Moveable.Scrollable\r\n * @event scrollGroup\r\n * @param {Moveable.Scrollable.OnScrollGroup} - Parameters for the `scrollGroup` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n * });\r\n * moveable.on(\"scroll\", ({ scrollContainer, direction }) => {\r\n *   scrollContainer.scrollLeft += direction[0] * 10;\r\n *   scrollContainer.scrollTop += direction[1] * 10;\r\n * });\r\n */\n\nvar Default = {\r\n    name: \"\",\r\n    props: [\r\n        \"target\",\r\n        \"dragTargetSelf\",\r\n        \"dragTarget\",\r\n        \"dragContainer\",\r\n        \"container\",\r\n        \"warpSelf\",\r\n        \"rootContainer\",\r\n        \"useResizeObserver\",\r\n        \"useMutationObserver\",\r\n        \"zoom\",\r\n        \"dragFocusedInput\",\r\n        \"transformOrigin\",\r\n        \"ables\",\r\n        \"className\",\r\n        \"pinchThreshold\",\r\n        \"pinchOutside\",\r\n        \"triggerAblesSimultaneously\",\r\n        \"checkInput\",\r\n        \"cspNonce\",\r\n        \"translateZ\",\r\n        \"hideDefaultLines\",\r\n        \"props\",\r\n        \"flushSync\",\r\n        \"stopPropagation\",\r\n        \"preventClickEventOnDrag\",\r\n        \"preventClickDefault\",\r\n        \"viewContainer\",\r\n        \"persistData\",\r\n        \"useAccuratePosition\",\r\n        \"firstRenderState\",\r\n        \"linePadding\",\r\n        \"controlPadding\",\r\n        \"preventDefault\",\r\n        \"preventRightClick\",\r\n        \"preventWheelClick\",\r\n        \"requestStyles\",\r\n    ],\r\n    events: [\r\n        \"changeTargets\",\r\n    ],\r\n};\n\nvar Padding = makeAble(\"padding\", {\r\n    props: [\"padding\"],\r\n    render: function (moveable, React) {\r\n        var props = moveable.props;\r\n        if (props.dragArea) {\r\n            return [];\r\n        }\r\n        var _a = getPaddingBox(props.padding || {}), left = _a.left, top = _a.top, right = _a.right, bottom = _a.bottom;\r\n        var _b = moveable.getState(), renderPoses = _b.renderPoses, pos1 = _b.pos1, pos2 = _b.pos2, pos3 = _b.pos3, pos4 = _b.pos4;\r\n        var poses = [pos1, pos2, pos3, pos4];\r\n        var paddingDirections = [];\r\n        if (left > 0) {\r\n            paddingDirections.push([0, 2]);\r\n        }\r\n        if (top > 0) {\r\n            paddingDirections.push([0, 1]);\r\n        }\r\n        if (right > 0) {\r\n            paddingDirections.push([1, 3]);\r\n        }\r\n        if (bottom > 0) {\r\n            paddingDirections.push([2, 3]);\r\n        }\r\n        return paddingDirections.map(function (_a, i) {\r\n            var _b = __read(_a, 2), dir1 = _b[0], dir2 = _b[1];\r\n            var paddingPos1 = poses[dir1];\r\n            var paddingPos2 = poses[dir2];\r\n            var paddingPos3 = renderPoses[dir1];\r\n            var paddingPos4 = renderPoses[dir2];\r\n            var h = createWarpMatrix([0, 0], [100, 0], [0, 100], [100, 100], paddingPos1, paddingPos2, paddingPos3, paddingPos4);\r\n            if (!h.length) {\r\n                return undefined;\r\n            }\r\n            return (React.createElement(\"div\", { key: \"padding\".concat(i), className: prefix(\"padding\"), style: {\r\n                    transform: makeMatrixCSS(h, true),\r\n                } }));\r\n        });\r\n    },\r\n});\r\n/**\r\n * Add padding around the target to increase the drag area.\r\n * @name Moveable#padding\r\n * @default null\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *  target: document.querySelector(\".target\"),\r\n *  padding: { left: 0, top: 0, right: 0, bottom: 0 },\r\n * });\r\n * moveable.padding = { left: 10, top: 10, right: 10, bottom: 10 },\r\n * moveable.updateRect();\r\n */\n\nvar RADIUS_DIRECTIONS = [\"nw\", \"ne\", \"se\", \"sw\"];\r\nfunction calculateRatio(values, size) {\r\n    var sumSize = values[0] + values[1];\r\n    var sumRatio = sumSize > size ? size / sumSize : 1;\r\n    values[0] *= sumRatio;\r\n    values[1] = size - values[1] * sumRatio;\r\n    return values;\r\n}\r\nvar HORIZONTAL_RADIUS_ORDER = [1, 2, 5, 6];\r\nvar VERTICAL_RADIUS_ORDER = [0, 3, 4, 7];\r\nvar HORIZONTAL_RADIUS_DIRECTIONS = [1, -1, -1, 1];\r\nvar VERTICAL_RADIUS_DIRECTIONS = [1, 1, -1, -1];\r\nfunction getRadiusStyles(nextPoses, isRelative, width, height, left, top, right, bottom) {\r\n    if (left === void 0) { left = 0; }\r\n    if (top === void 0) { top = 0; }\r\n    if (right === void 0) { right = width; }\r\n    if (bottom === void 0) { bottom = height; }\r\n    var clipStyles = [];\r\n    var isVertical = false;\r\n    var radiusPoses = nextPoses.filter(function (pos) { return !pos.virtual; });\r\n    var raws = radiusPoses.map(function (posInfo) {\r\n        var horizontal = posInfo.horizontal, vertical = posInfo.vertical, pos = posInfo.pos;\r\n        if (vertical && !isVertical) {\r\n            isVertical = true;\r\n            clipStyles.push(\"/\");\r\n        }\r\n        if (isVertical) {\r\n            var rawPos = Math.max(0, vertical === 1 ? pos[1] - top : bottom - pos[1]);\r\n            clipStyles.push(convertCSSSize(rawPos, height, isRelative));\r\n            return rawPos;\r\n        }\r\n        else {\r\n            var rawPos = Math.max(0, horizontal === 1 ? pos[0] - left : right - pos[0]);\r\n            clipStyles.push(convertCSSSize(rawPos, width, isRelative));\r\n            return rawPos;\r\n        }\r\n    });\r\n    return {\r\n        radiusPoses: radiusPoses,\r\n        styles: clipStyles,\r\n        raws: raws,\r\n    };\r\n}\r\nfunction getRadiusRange(controlPoses) {\r\n    // [start, length]\r\n    var horizontalRange = [0, 0];\r\n    var verticalRange = [0, 0];\r\n    var length = controlPoses.length;\r\n    for (var i = 0; i < length; ++i) {\r\n        var clipPose = controlPoses[i];\r\n        if (!clipPose.sub) {\r\n            continue;\r\n        }\r\n        if (clipPose.horizontal) {\r\n            if (horizontalRange[1] === 0) {\r\n                horizontalRange[0] = i;\r\n            }\r\n            horizontalRange[1] = i - horizontalRange[0] + 1;\r\n            verticalRange[0] = i + 1;\r\n        }\r\n        if (clipPose.vertical) {\r\n            if (verticalRange[1] === 0) {\r\n                verticalRange[0] = i;\r\n            }\r\n            verticalRange[1] = i - verticalRange[0] + 1;\r\n        }\r\n    }\r\n    return {\r\n        horizontalRange: horizontalRange,\r\n        verticalRange: verticalRange,\r\n    };\r\n}\r\nfunction getRadiusValues(values, width, height, left, top, minCounts, full) {\r\n    var _a, _b, _c, _d;\r\n    if (minCounts === void 0) { minCounts = [0, 0]; }\r\n    if (full === void 0) { full = false; }\r\n    var splitIndex = values.indexOf(\"/\");\r\n    var splitLength = (splitIndex > -1 ? values.slice(0, splitIndex) : values).length;\r\n    var horizontalValues = values.slice(0, splitLength);\r\n    var verticalValues = values.slice(splitLength + 1);\r\n    var horizontalValuesLength = horizontalValues.length;\r\n    var verticalValuesLength = verticalValues.length;\r\n    var hasVerticalValues = verticalValuesLength > 0;\r\n    var _e = __read(horizontalValues, 4), _f = _e[0], nwValue = _f === void 0 ? \"0px\" : _f, _g = _e[1], neValue = _g === void 0 ? nwValue : _g, _h = _e[2], seValue = _h === void 0 ? nwValue : _h, _j = _e[3], swValue = _j === void 0 ? neValue : _j;\r\n    var _k = __read(verticalValues, 4), _l = _k[0], wnValue = _l === void 0 ? nwValue : _l, _m = _k[1], enValue = _m === void 0 ? hasVerticalValues ? wnValue : neValue : _m, _o = _k[2], esValue = _o === void 0 ? hasVerticalValues ? wnValue : seValue : _o, _p = _k[3], wsValue = _p === void 0 ? hasVerticalValues ? enValue : swValue : _p;\r\n    var horizontalRawPoses = [nwValue, neValue, seValue, swValue].map(function (pos) { return convertUnitSize(pos, width); });\r\n    var verticalRawPoses = [wnValue, enValue, esValue, wsValue].map(function (pos) { return convertUnitSize(pos, height); });\r\n    var horizontalPoses = horizontalRawPoses.slice();\r\n    var verticalPoses = verticalRawPoses.slice();\r\n    _a = __read(calculateRatio([horizontalPoses[0], horizontalPoses[1]], width), 2), horizontalPoses[0] = _a[0], horizontalPoses[1] = _a[1];\r\n    _b = __read(calculateRatio([horizontalPoses[3], horizontalPoses[2]], width), 2), horizontalPoses[3] = _b[0], horizontalPoses[2] = _b[1];\r\n    _c = __read(calculateRatio([verticalPoses[0], verticalPoses[3]], height), 2), verticalPoses[0] = _c[0], verticalPoses[3] = _c[1];\r\n    _d = __read(calculateRatio([verticalPoses[1], verticalPoses[2]], height), 2), verticalPoses[1] = _d[0], verticalPoses[2] = _d[1];\r\n    var nextHorizontalPoses = full\r\n        ? horizontalPoses\r\n        : horizontalPoses.slice(0, Math.max(minCounts[0], horizontalValuesLength));\r\n    var nextVerticalPoses = full\r\n        ? verticalPoses\r\n        : verticalPoses.slice(0, Math.max(minCounts[1], verticalValuesLength));\r\n    return __spreadArray(__spreadArray([], __read(nextHorizontalPoses.map(function (pos, i) {\r\n        var direction = RADIUS_DIRECTIONS[i];\r\n        return {\r\n            virtual: i >= horizontalValuesLength,\r\n            horizontal: HORIZONTAL_RADIUS_DIRECTIONS[i],\r\n            vertical: 0,\r\n            pos: [left + pos, top + (VERTICAL_RADIUS_DIRECTIONS[i] === -1 ? height : 0)],\r\n            sub: true,\r\n            raw: horizontalRawPoses[i],\r\n            direction: direction,\r\n        };\r\n    })), false), __read(nextVerticalPoses.map(function (pos, i) {\r\n        var direction = RADIUS_DIRECTIONS[i];\r\n        return {\r\n            virtual: i >= verticalValuesLength,\r\n            horizontal: 0,\r\n            vertical: VERTICAL_RADIUS_DIRECTIONS[i],\r\n            pos: [left + (HORIZONTAL_RADIUS_DIRECTIONS[i] === -1 ? width : 0), top + pos],\r\n            sub: true,\r\n            raw: verticalRawPoses[i],\r\n            direction: direction,\r\n        };\r\n    })), false);\r\n}\r\nfunction removeRadiusPos(controlPoses, poses, index, startIndex, length) {\r\n    if (length === void 0) { length = poses.length; }\r\n    var _a = getRadiusRange(controlPoses.slice(startIndex)), horizontalRange = _a.horizontalRange, verticalRange = _a.verticalRange;\r\n    var radiuslIndex = index - startIndex;\r\n    var deleteCount = 0;\r\n    if (radiuslIndex === 0) {\r\n        deleteCount = length;\r\n    }\r\n    else if (radiuslIndex > 0 && radiuslIndex < horizontalRange[1]) {\r\n        deleteCount = horizontalRange[1] - radiuslIndex;\r\n    }\r\n    else if (radiuslIndex >= verticalRange[0]) {\r\n        deleteCount = verticalRange[0] + verticalRange[1] - radiuslIndex;\r\n    }\r\n    else {\r\n        return;\r\n    }\r\n    controlPoses.splice(index, deleteCount);\r\n    poses.splice(index, deleteCount);\r\n}\r\nfunction addRadiusPos(controlPoses, poses, startIndex, horizontalIndex, verticalIndex, distX, distY, right, bottom, left, top) {\r\n    if (left === void 0) { left = 0; }\r\n    if (top === void 0) { top = 0; }\r\n    var _a = getRadiusRange(controlPoses.slice(startIndex)), horizontalRange = _a.horizontalRange, verticalRange = _a.verticalRange;\r\n    if (horizontalIndex > -1) {\r\n        var radiusX = HORIZONTAL_RADIUS_DIRECTIONS[horizontalIndex] === 1\r\n            ? distX - left\r\n            : right - distX;\r\n        for (var i = horizontalRange[1]; i <= horizontalIndex; ++i) {\r\n            var y = VERTICAL_RADIUS_DIRECTIONS[i] === 1 ? top : bottom;\r\n            var x = 0;\r\n            if (horizontalIndex === i) {\r\n                x = distX;\r\n            }\r\n            else if (i === 0) {\r\n                x = left + radiusX;\r\n            }\r\n            else if (HORIZONTAL_RADIUS_DIRECTIONS[i] === -1) {\r\n                x = right - (poses[startIndex][0] - left);\r\n            }\r\n            controlPoses.splice(startIndex + i, 0, {\r\n                horizontal: HORIZONTAL_RADIUS_DIRECTIONS[i],\r\n                vertical: 0,\r\n                pos: [x, y],\r\n            });\r\n            poses.splice(startIndex + i, 0, [x, y]);\r\n            if (i === 0) {\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    else if (verticalIndex > -1) {\r\n        var radiusY = VERTICAL_RADIUS_DIRECTIONS[verticalIndex] === 1\r\n            ? distY - top\r\n            : bottom - distY;\r\n        if (horizontalRange[1] === 0 && verticalRange[1] === 0) {\r\n            var pos = [\r\n                left + radiusY,\r\n                top,\r\n            ];\r\n            controlPoses.push({\r\n                horizontal: HORIZONTAL_RADIUS_DIRECTIONS[0],\r\n                vertical: 0,\r\n                pos: pos,\r\n            });\r\n            poses.push(pos);\r\n        }\r\n        var startVerticalIndex = verticalRange[0];\r\n        for (var i = verticalRange[1]; i <= verticalIndex; ++i) {\r\n            var x = HORIZONTAL_RADIUS_DIRECTIONS[i] === 1 ? left : right;\r\n            var y = 0;\r\n            if (verticalIndex === i) {\r\n                y = distY;\r\n            }\r\n            else if (i === 0) {\r\n                y = top + radiusY;\r\n            }\r\n            else if (VERTICAL_RADIUS_DIRECTIONS[i] === 1) {\r\n                y = poses[startIndex + startVerticalIndex][1];\r\n            }\r\n            else if (VERTICAL_RADIUS_DIRECTIONS[i] === -1) {\r\n                y = bottom - (poses[startIndex + startVerticalIndex][1] - top);\r\n            }\r\n            controlPoses.push({\r\n                horizontal: 0,\r\n                vertical: VERTICAL_RADIUS_DIRECTIONS[i],\r\n                pos: [x, y],\r\n            });\r\n            poses.push([x, y]);\r\n            if (i === 0) {\r\n                break;\r\n            }\r\n        }\r\n    }\r\n}\r\nfunction splitRadiusPoses(controlPoses, raws) {\r\n    if (raws === void 0) { raws = controlPoses.map(function (pos) { return pos.raw; }); }\r\n    var horizontals = controlPoses\r\n        .map(function (pos, i) { return pos.horizontal ? raws[i] : null; }).filter(function (pos) { return pos != null; });\r\n    var verticals = controlPoses\r\n        .map(function (pos, i) { return pos.vertical ? raws[i] : null; }).filter(function (pos) { return pos != null; });\r\n    return {\r\n        horizontals: horizontals,\r\n        verticals: verticals,\r\n    };\r\n}\n\nvar CLIP_DIRECTIONS = [\r\n    [0, -1, \"n\"],\r\n    [1, 0, \"e\"],\r\n];\r\nvar CLIP_RECT_DIRECTIONS = [\r\n    [-1, -1, \"nw\"],\r\n    [0, -1, \"n\"],\r\n    [1, -1, \"ne\"],\r\n    [1, 0, \"e\"],\r\n    [1, 1, \"se\"],\r\n    [0, 1, \"s\"],\r\n    [-1, 1, \"sw\"],\r\n    [-1, 0, \"w\"],\r\n];\r\n// 1 2 5 6 0 3 4 7\r\n// 0 1 2 3 4 5 6 7\r\nfunction getClipStyles(moveable, clipPath, poses) {\r\n    var clipRelative = moveable.props.clipRelative;\r\n    var _a = moveable.state, width = _a.width, height = _a.height;\r\n    var _b = clipPath, clipType = _b.type, clipPoses = _b.poses;\r\n    var isRect = clipType === \"rect\";\r\n    var isCircle = clipType === \"circle\";\r\n    if (clipType === \"polygon\") {\r\n        return poses.map(function (pos) { return \"\".concat(convertCSSSize(pos[0], width, clipRelative), \" \").concat(convertCSSSize(pos[1], height, clipRelative)); });\r\n    }\r\n    else if (isRect || clipType === \"inset\") {\r\n        var top_1 = poses[1][1];\r\n        var right = poses[3][0];\r\n        var left = poses[7][0];\r\n        var bottom = poses[5][1];\r\n        if (isRect) {\r\n            return [\r\n                top_1,\r\n                right,\r\n                bottom,\r\n                left,\r\n            ].map(function (pos) { return \"\".concat(pos, \"px\"); });\r\n        }\r\n        var clipStyles = [top_1, width - right, height - bottom, left]\r\n            .map(function (pos, i) { return convertCSSSize(pos, i % 2 ? width : height, clipRelative); });\r\n        if (poses.length > 8) {\r\n            var _c = __read(minus(poses[4], poses[0]), 2), subWidth = _c[0], subHeight = _c[1];\r\n            clipStyles.push.apply(clipStyles, __spreadArray([\"round\"], __read(getRadiusStyles(clipPoses.slice(8).map(function (info, i) {\r\n                return __assign(__assign({}, info), { pos: poses[i] });\r\n            }), clipRelative, subWidth, subHeight, left, top_1, right, bottom).styles), false));\r\n        }\r\n        return clipStyles;\r\n    }\r\n    else if (isCircle || clipType === \"ellipse\") {\r\n        var center = poses[0];\r\n        var ry = convertCSSSize(abs(poses[1][1] - center[1]), isCircle ? Math.sqrt((width * width + height * height) / 2) : height, clipRelative);\r\n        var clipStyles = isCircle ? [ry]\r\n            : [convertCSSSize(abs(poses[2][0] - center[0]), width, clipRelative), ry];\r\n        clipStyles.push(\"at\", convertCSSSize(center[0], width, clipRelative), convertCSSSize(center[1], height, clipRelative));\r\n        return clipStyles;\r\n    }\r\n}\r\nfunction getRectPoses(top, right, bottom, left) {\r\n    var xs = [left, (left + right) / 2, right];\r\n    var ys = [top, (top + bottom) / 2, bottom];\r\n    return CLIP_RECT_DIRECTIONS.map(function (_a) {\r\n        var _b = __read(_a, 3), dirx = _b[0], diry = _b[1], dir = _b[2];\r\n        var x = xs[dirx + 1];\r\n        var y = ys[diry + 1];\r\n        return {\r\n            vertical: abs(diry),\r\n            horizontal: abs(dirx),\r\n            direction: dir,\r\n            pos: [x, y],\r\n        };\r\n    });\r\n}\r\nfunction getControlSize(controlPoses) {\r\n    var xRange = [Infinity, -Infinity];\r\n    var yRange = [Infinity, -Infinity];\r\n    controlPoses.forEach(function (_a) {\r\n        var pos = _a.pos;\r\n        xRange[0] = Math.min(xRange[0], pos[0]);\r\n        xRange[1] = Math.max(xRange[1], pos[0]);\r\n        yRange[0] = Math.min(yRange[0], pos[1]);\r\n        yRange[1] = Math.max(yRange[1], pos[1]);\r\n    });\r\n    return [\r\n        abs(xRange[1] - xRange[0]),\r\n        abs(yRange[1] - yRange[0]),\r\n    ];\r\n}\r\nfunction getClipPath(target, width, height, defaultClip, customClip) {\r\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j;\r\n    if (!target) {\r\n        return;\r\n    }\r\n    var clipText = customClip;\r\n    if (!clipText) {\r\n        var getStyle = getCachedStyle(target);\r\n        var clipPath = getStyle(\"clipPath\");\r\n        clipText = clipPath !== \"none\" ? clipPath : getStyle(\"clip\");\r\n    }\r\n    if (!clipText || clipText === \"none\" || clipText === \"auto\") {\r\n        clipText = defaultClip;\r\n        if (!clipText) {\r\n            return;\r\n        }\r\n    }\r\n    var _k = splitBracket(clipText), _l = _k.prefix, clipPrefix = _l === void 0 ? clipText : _l, _m = _k.value, value = _m === void 0 ? \"\" : _m;\r\n    var isCircle = clipPrefix === \"circle\";\r\n    var splitter = \" \";\r\n    if (clipPrefix === \"polygon\") {\r\n        var values = splitComma(value || \"0% 0%, 100% 0%, 100% 100%, 0% 100%\");\r\n        splitter = \",\";\r\n        var poses = values.map(function (pos) {\r\n            var _a = __read(pos.split(\" \"), 2), xPos = _a[0], yPos = _a[1];\r\n            return {\r\n                vertical: 1,\r\n                horizontal: 1,\r\n                pos: [\r\n                    convertUnitSize(xPos, width),\r\n                    convertUnitSize(yPos, height),\r\n                ],\r\n            };\r\n        });\r\n        var minMaxs = getMinMaxs(poses.map(function (pos) { return pos.pos; }));\r\n        return {\r\n            type: clipPrefix,\r\n            clipText: clipText,\r\n            poses: poses,\r\n            splitter: splitter,\r\n            left: minMaxs.minX,\r\n            right: minMaxs.maxX,\r\n            top: minMaxs.minY,\r\n            bottom: minMaxs.maxY,\r\n        };\r\n    }\r\n    else if (isCircle || clipPrefix === \"ellipse\") {\r\n        var xPos = \"\";\r\n        var yPos = \"\";\r\n        var radiusX_1 = 0;\r\n        var radiusY_1 = 0;\r\n        var values = splitSpace(value);\r\n        if (isCircle) {\r\n            var radius = \"\";\r\n            _a = __read(values, 4), _b = _a[0], radius = _b === void 0 ? \"50%\" : _b, _c = _a[2], xPos = _c === void 0 ? \"50%\" : _c, _d = _a[3], yPos = _d === void 0 ? \"50%\" : _d;\r\n            radiusX_1 = convertUnitSize(radius, Math.sqrt((width * width + height * height) / 2));\r\n            radiusY_1 = radiusX_1;\r\n        }\r\n        else {\r\n            var xRadius = \"\";\r\n            var yRadius = \"\";\r\n            _e = __read(values, 5), _f = _e[0], xRadius = _f === void 0 ? \"50%\" : _f, _g = _e[1], yRadius = _g === void 0 ? \"50%\" : _g, _h = _e[3], xPos = _h === void 0 ? \"50%\" : _h, _j = _e[4], yPos = _j === void 0 ? \"50%\" : _j;\r\n            radiusX_1 = convertUnitSize(xRadius, width);\r\n            radiusY_1 = convertUnitSize(yRadius, height);\r\n        }\r\n        var centerPos_1 = [\r\n            convertUnitSize(xPos, width),\r\n            convertUnitSize(yPos, height),\r\n        ];\r\n        var poses = __spreadArray([\r\n            {\r\n                vertical: 1,\r\n                horizontal: 1,\r\n                pos: centerPos_1,\r\n                direction: \"nesw\",\r\n            }\r\n        ], __read(CLIP_DIRECTIONS.slice(0, isCircle ? 1 : 2).map(function (dir) { return ({\r\n            vertical: abs(dir[1]),\r\n            horizontal: dir[0],\r\n            direction: dir[2],\r\n            sub: true,\r\n            pos: [\r\n                centerPos_1[0] + dir[0] * radiusX_1,\r\n                centerPos_1[1] + dir[1] * radiusY_1,\r\n            ],\r\n        }); })), false);\r\n        return {\r\n            type: clipPrefix,\r\n            clipText: clipText,\r\n            radiusX: radiusX_1,\r\n            radiusY: radiusY_1,\r\n            left: centerPos_1[0] - radiusX_1,\r\n            top: centerPos_1[1] - radiusY_1,\r\n            right: centerPos_1[0] + radiusX_1,\r\n            bottom: centerPos_1[1] + radiusY_1,\r\n            poses: poses,\r\n            splitter: splitter,\r\n        };\r\n    }\r\n    else if (clipPrefix === \"inset\") {\r\n        var values = splitSpace(value || \"0 0 0 0\");\r\n        var roundIndex = values.indexOf(\"round\");\r\n        var rectLength = (roundIndex > -1 ? values.slice(0, roundIndex) : values).length;\r\n        var radiusValues = values.slice(rectLength + 1);\r\n        var _o = __read(values.slice(0, rectLength), 4), topValue = _o[0], _p = _o[1], rightValue = _p === void 0 ? topValue : _p, _q = _o[2], bottomValue = _q === void 0 ? topValue : _q, _r = _o[3], leftValue = _r === void 0 ? rightValue : _r;\r\n        var _s = __read([topValue, bottomValue].map(function (pos) { return convertUnitSize(pos, height); }), 2), top_2 = _s[0], bottom = _s[1];\r\n        var _t = __read([leftValue, rightValue].map(function (pos) { return convertUnitSize(pos, width); }), 2), left = _t[0], right = _t[1];\r\n        var nextRight = width - right;\r\n        var nextBottom = height - bottom;\r\n        var radiusPoses = getRadiusValues(radiusValues, nextRight - left, nextBottom - top_2, left, top_2);\r\n        var poses = __spreadArray(__spreadArray([], __read(getRectPoses(top_2, nextRight, nextBottom, left)), false), __read(radiusPoses), false);\r\n        return {\r\n            type: \"inset\",\r\n            clipText: clipText,\r\n            poses: poses,\r\n            top: top_2,\r\n            left: left,\r\n            right: nextRight,\r\n            bottom: nextBottom,\r\n            radius: radiusValues,\r\n            splitter: splitter,\r\n        };\r\n    }\r\n    else if (clipPrefix === \"rect\") {\r\n        // top right bottom left\r\n        var values = splitComma(value || \"0px, \".concat(width, \"px, \").concat(height, \"px, 0px\"));\r\n        splitter = \",\";\r\n        var _u = __read(values.map(function (pos) {\r\n            var posValue = splitUnit(pos).value;\r\n            return posValue;\r\n        }), 4), top_3 = _u[0], right = _u[1], bottom = _u[2], left = _u[3];\r\n        var poses = getRectPoses(top_3, right, bottom, left);\r\n        return {\r\n            type: \"rect\",\r\n            clipText: clipText,\r\n            poses: poses,\r\n            top: top_3,\r\n            right: right,\r\n            bottom: bottom,\r\n            left: left,\r\n            values: values,\r\n            splitter: splitter,\r\n        };\r\n    }\r\n    return;\r\n}\n\nfunction moveControlPos(controlPoses, index, dist, isRect, keepRatio) {\r\n    var _a = controlPoses[index], direction = _a.direction, sub = _a.sub;\r\n    var dists = controlPoses.map(function () { return [0, 0]; });\r\n    var directions = direction ? direction.split(\"\") : [];\r\n    if (isRect && index < 8) {\r\n        var verticalDirections = directions.filter(function (dir) { return dir === \"w\" || dir === \"e\"; });\r\n        var horizontalDirections = directions.filter(function (dir) { return dir === \"n\" || dir === \"s\"; });\r\n        var verticalDirection_1 = verticalDirections[0];\r\n        var horizontalDirection_1 = horizontalDirections[0];\r\n        dists[index] = dist;\r\n        var _b = __read(getControlSize(controlPoses), 2), width = _b[0], height = _b[1];\r\n        var ratio = width && height ? width / height : 0;\r\n        if (ratio && keepRatio) {\r\n            // 0 1 2\r\n            // 7   3\r\n            // 6 5 4\r\n            var fixedIndex = (index + 4) % 8;\r\n            var fixedPosition = controlPoses[fixedIndex].pos;\r\n            var sizeDirection = [0, 0];\r\n            if (direction.indexOf(\"w\") > -1) {\r\n                sizeDirection[0] = -1;\r\n            }\r\n            else if (direction.indexOf(\"e\") > -1) {\r\n                sizeDirection[0] = 1;\r\n            }\r\n            if (direction.indexOf(\"n\") > -1) {\r\n                sizeDirection[1] = -1;\r\n            }\r\n            else if (direction.indexOf(\"s\") > -1) {\r\n                sizeDirection[1] = 1;\r\n            }\r\n            var nextDist = getSizeDistByDist([width, height], dist, ratio, sizeDirection, true);\r\n            var nextWidth = width + nextDist[0];\r\n            var nextHeight = height + nextDist[1];\r\n            var top_1 = fixedPosition[1];\r\n            var bottom = fixedPosition[1];\r\n            var left = fixedPosition[0];\r\n            var right = fixedPosition[0];\r\n            if (sizeDirection[0] === -1) {\r\n                left = right - nextWidth;\r\n            }\r\n            else if (sizeDirection[0] === 1) {\r\n                right = left + nextWidth;\r\n            }\r\n            else {\r\n                left = left - nextWidth / 2;\r\n                right = right + nextWidth / 2;\r\n            }\r\n            if (sizeDirection[1] === -1) {\r\n                top_1 = bottom - nextHeight;\r\n            }\r\n            else if (sizeDirection[1] === 1) {\r\n                bottom = top_1 + nextHeight;\r\n            }\r\n            else {\r\n                top_1 = bottom - nextHeight / 2;\r\n                bottom = top_1 + nextHeight;\r\n            }\r\n            var nextControlPoses_1 = getRectPoses(top_1, right, bottom, left);\r\n            controlPoses.forEach(function (controlPose, i) {\r\n                dists[i][0] = nextControlPoses_1[i].pos[0] - controlPose.pos[0];\r\n                dists[i][1] = nextControlPoses_1[i].pos[1] - controlPose.pos[1];\r\n            });\r\n        }\r\n        else {\r\n            controlPoses.forEach(function (controlPose, i) {\r\n                var controlDir = controlPose.direction;\r\n                if (!controlDir) {\r\n                    return;\r\n                }\r\n                if (controlDir.indexOf(verticalDirection_1) > -1) {\r\n                    dists[i][0] = dist[0];\r\n                }\r\n                if (controlDir.indexOf(horizontalDirection_1) > -1) {\r\n                    dists[i][1] = dist[1];\r\n                }\r\n            });\r\n            if (verticalDirection_1) {\r\n                dists[1][0] = dist[0] / 2;\r\n                dists[5][0] = dist[0] / 2;\r\n            }\r\n            if (horizontalDirection_1) {\r\n                dists[3][1] = dist[1] / 2;\r\n                dists[7][1] = dist[1] / 2;\r\n            }\r\n        }\r\n    }\r\n    else if (direction && !sub) {\r\n        directions.forEach(function (dir) {\r\n            var isVertical = dir === \"n\" || dir === \"s\";\r\n            controlPoses.forEach(function (controlPose, i) {\r\n                var dirDir = controlPose.direction, dirHorizontal = controlPose.horizontal, dirVertical = controlPose.vertical;\r\n                if (!dirDir || dirDir.indexOf(dir) === -1) {\r\n                    return;\r\n                }\r\n                dists[i] = [\r\n                    isVertical || !dirHorizontal ? 0 : dist[0],\r\n                    !isVertical || !dirVertical ? 0 : dist[1],\r\n                ];\r\n            });\r\n        });\r\n    }\r\n    else {\r\n        dists[index] = dist;\r\n    }\r\n    return dists;\r\n}\r\nfunction addClipPath(moveable, e) {\r\n    var _a = __read(calculatePointerDist(moveable, e), 2), distX = _a[0], distY = _a[1];\r\n    var _b = e.datas, clipPath = _b.clipPath, clipIndex = _b.clipIndex;\r\n    var _c = clipPath, clipType = _c.type, clipPoses = _c.poses, splitter = _c.splitter;\r\n    var poses = clipPoses.map(function (pos) { return pos.pos; });\r\n    if (clipType === \"polygon\") {\r\n        poses.splice(clipIndex, 0, [distX, distY]);\r\n    }\r\n    else if (clipType === \"inset\") {\r\n        var horizontalIndex = HORIZONTAL_RADIUS_ORDER.indexOf(clipIndex);\r\n        var verticalIndex = VERTICAL_RADIUS_ORDER.indexOf(clipIndex);\r\n        var length_1 = clipPoses.length;\r\n        addRadiusPos(clipPoses, poses, 8, horizontalIndex, verticalIndex, distX, distY, poses[4][0], poses[4][1], poses[0][0], poses[0][1]);\r\n        if (length_1 === clipPoses.length) {\r\n            return;\r\n        }\r\n    }\r\n    else {\r\n        return;\r\n    }\r\n    var clipStyles = getClipStyles(moveable, clipPath, poses);\r\n    var clipStyle = \"\".concat(clipType, \"(\").concat(clipStyles.join(splitter), \")\");\r\n    triggerEvent(moveable, \"onClip\", fillParams(moveable, e, __assign({ clipEventType: \"added\", clipType: clipType, poses: poses, clipStyles: clipStyles, clipStyle: clipStyle, distX: 0, distY: 0 }, fillCSSObject({\r\n        clipPath: clipStyle,\r\n    }, e))));\r\n}\r\nfunction removeClipPath(moveable, e) {\r\n    var _a = e.datas, clipPath = _a.clipPath, clipIndex = _a.clipIndex;\r\n    var _b = clipPath, clipType = _b.type, clipPoses = _b.poses, splitter = _b.splitter;\r\n    var poses = clipPoses.map(function (pos) { return pos.pos; });\r\n    var length = poses.length;\r\n    if (clipType === \"polygon\") {\r\n        clipPoses.splice(clipIndex, 1);\r\n        poses.splice(clipIndex, 1);\r\n    }\r\n    else if (clipType === \"inset\") {\r\n        if (clipIndex < 8) {\r\n            return;\r\n        }\r\n        removeRadiusPos(clipPoses, poses, clipIndex, 8, length);\r\n        if (length === clipPoses.length) {\r\n            return;\r\n        }\r\n    }\r\n    else {\r\n        return;\r\n    }\r\n    var clipStyles = getClipStyles(moveable, clipPath, poses);\r\n    var clipStyle = \"\".concat(clipType, \"(\").concat(clipStyles.join(splitter), \")\");\r\n    triggerEvent(moveable, \"onClip\", fillParams(moveable, e, __assign({ clipEventType: \"removed\", clipType: clipType, poses: poses, clipStyles: clipStyles, clipStyle: clipStyle, distX: 0, distY: 0 }, fillCSSObject({\r\n        clipPath: clipStyle,\r\n    }, e))));\r\n}\r\n/**\r\n * @namespace Moveable.Clippable\r\n * @description Whether to clip the target.\r\n */\r\nvar Clippable = {\r\n    name: \"clippable\",\r\n    props: [\r\n        \"clippable\",\r\n        \"defaultClipPath\",\r\n        \"customClipPath\",\r\n        \"keepRatio\",\r\n        \"clipRelative\",\r\n        \"clipArea\",\r\n        \"dragWithClip\",\r\n        \"clipTargetBounds\",\r\n        \"clipVerticalGuidelines\",\r\n        \"clipHorizontalGuidelines\",\r\n        \"clipSnapThreshold\",\r\n    ],\r\n    events: [\r\n        \"clipStart\",\r\n        \"clip\",\r\n        \"clipEnd\",\r\n    ],\r\n    css: [\r\n        \".control.clip-control {\\nbackground: #6d6;\\ncursor: pointer;\\n}\\n.control.clip-control.clip-radius {\\nbackground: #d66;\\n}\\n.line.clip-line {\\nbackground: #6e6;\\ncursor: move;\\nz-index: 1;\\n}\\n.clip-area {\\nposition: absolute;\\ntop: 0;\\nleft: 0;\\n}\\n.clip-ellipse {\\nposition: absolute;\\ncursor: move;\\nborder: 1px solid #6d6;\\nborder: var(--zoompx) solid #6d6;\\nborder-radius: 50%;\\ntransform-origin: 0px 0px;\\n}\",\r\n        \":host {\\n--bounds-color: #d66;\\n}\",\r\n        \".guideline {\\npointer-events: none;\\nz-index: 2;\\n}\",\r\n        \".line.guideline.bounds {\\nbackground: #d66;\\nbackground: var(--bounds-color);\\n}\",\r\n    ],\r\n    render: function (moveable, React) {\r\n        var _a = moveable.props, customClipPath = _a.customClipPath, defaultClipPath = _a.defaultClipPath, clipArea = _a.clipArea, zoom = _a.zoom, groupable = _a.groupable;\r\n        var _b = moveable.getState(), target = _b.target, width = _b.width, height = _b.height, allMatrix = _b.allMatrix, is3d = _b.is3d, left = _b.left, top = _b.top, pos1 = _b.pos1, pos2 = _b.pos2, pos3 = _b.pos3, pos4 = _b.pos4, clipPathState = _b.clipPathState, snapBoundInfos = _b.snapBoundInfos, rotationRad = _b.rotation;\r\n        if (!target || groupable) {\r\n            return [];\r\n        }\r\n        var clipPath = getClipPath(target, width, height, defaultClipPath || \"inset\", clipPathState || customClipPath);\r\n        if (!clipPath) {\r\n            return [];\r\n        }\r\n        var n = is3d ? 4 : 3;\r\n        var type = clipPath.type;\r\n        var clipPoses = clipPath.poses;\r\n        var poses = clipPoses.map(function (pos) {\r\n            // return [x, y];\r\n            var calculatedPos = calculatePosition(allMatrix, pos.pos, n);\r\n            return [\r\n                calculatedPos[0] - left,\r\n                calculatedPos[1] - top,\r\n            ];\r\n        });\r\n        var controls = [];\r\n        var lines = [];\r\n        var isRect = type === \"rect\";\r\n        var isInset = type === \"inset\";\r\n        var isPolygon = type === \"polygon\";\r\n        if (isRect || isInset || isPolygon) {\r\n            var linePoses_1 = isInset ? poses.slice(0, 8) : poses;\r\n            lines = linePoses_1.map(function (to, i) {\r\n                var from = i === 0 ? linePoses_1[linePoses_1.length - 1] : linePoses_1[i - 1];\r\n                var rad = getRad(from, to);\r\n                var dist = getDiagonalSize(from, to);\r\n                return React.createElement(\"div\", { key: \"clipLine\".concat(i), className: prefix(\"line\", \"clip-line\", \"snap-control\"), \"data-clip-index\": i, style: {\r\n                        width: \"\".concat(dist, \"px\"),\r\n                        transform: \"translate(\".concat(from[0], \"px, \").concat(from[1], \"px) rotate(\").concat(rad, \"rad) scaleY(\").concat(zoom, \")\"),\r\n                    } });\r\n            });\r\n        }\r\n        controls = poses.map(function (pos, i) {\r\n            return React.createElement(\"div\", { key: \"clipControl\".concat(i), className: prefix(\"control\", \"clip-control\", \"snap-control\"), \"data-clip-index\": i, style: {\r\n                    transform: \"translate(\".concat(pos[0], \"px, \").concat(pos[1], \"px) rotate(\").concat(rotationRad, \"rad) scale(\").concat(zoom, \")\"),\r\n                } });\r\n        });\r\n        if (isInset) {\r\n            controls.push.apply(controls, __spreadArray([], __read(poses.slice(8).map(function (pos, i) {\r\n                return React.createElement(\"div\", { key: \"clipRadiusControl\".concat(i), className: prefix(\"control\", \"clip-control\", \"clip-radius\", \"snap-control\"), \"data-clip-index\": 8 + i, style: {\r\n                        transform: \"translate(\".concat(pos[0], \"px, \").concat(pos[1], \"px) rotate(\").concat(rotationRad, \"rad) scale(\").concat(zoom, \")\"),\r\n                    } });\r\n            })), false));\r\n        }\r\n        if (type === \"circle\" || type === \"ellipse\") {\r\n            var clipLeft = clipPath.left, clipTop = clipPath.top, radiusX = clipPath.radiusX, radiusY = clipPath.radiusY;\r\n            var _c = __read(minus(calculatePosition(allMatrix, [clipLeft, clipTop], n), calculatePosition(allMatrix, [0, 0], n)), 2), distLeft = _c[0], distTop = _c[1];\r\n            var ellipseClipPath = \"none\";\r\n            if (!clipArea) {\r\n                var piece = Math.max(10, radiusX / 5, radiusY / 5);\r\n                var areaPoses = [];\r\n                for (var i = 0; i <= piece; ++i) {\r\n                    var rad = Math.PI * 2 / piece * i;\r\n                    areaPoses.push([\r\n                        radiusX + (radiusX - zoom) * Math.cos(rad),\r\n                        radiusY + (radiusY - zoom) * Math.sin(rad),\r\n                    ]);\r\n                }\r\n                areaPoses.push([radiusX, -2]);\r\n                areaPoses.push([-2, -2]);\r\n                areaPoses.push([-2, radiusY * 2 + 2]);\r\n                areaPoses.push([radiusX * 2 + 2, radiusY * 2 + 2]);\r\n                areaPoses.push([radiusX * 2 + 2, -2]);\r\n                areaPoses.push([radiusX, -2]);\r\n                ellipseClipPath = \"polygon(\".concat(areaPoses.map(function (pos) { return \"\".concat(pos[0], \"px \").concat(pos[1], \"px\"); }).join(\", \"), \")\");\r\n            }\r\n            controls.push(React.createElement(\"div\", { key: \"clipEllipse\", className: prefix(\"clip-ellipse\", \"snap-control\"), style: {\r\n                    width: \"\".concat(radiusX * 2, \"px\"),\r\n                    height: \"\".concat(radiusY * 2, \"px\"),\r\n                    clipPath: ellipseClipPath,\r\n                    transform: \"translate(\".concat(-left + distLeft, \"px, \").concat(-top + distTop, \"px) \").concat(makeMatrixCSS(allMatrix)),\r\n                } }));\r\n        }\r\n        if (clipArea) {\r\n            var _d = getRect(__spreadArray([pos1, pos2, pos3, pos4], __read(poses), false)), allWidth = _d.width, allHeight = _d.height, allLeft_1 = _d.left, allTop_1 = _d.top;\r\n            if (isPolygon || isRect || isInset) {\r\n                var areaPoses = isInset ? poses.slice(0, 8) : poses;\r\n                controls.push(React.createElement(\"div\", { key: \"clipArea\", className: prefix(\"clip-area\", \"snap-control\"), style: {\r\n                        width: \"\".concat(allWidth, \"px\"),\r\n                        height: \"\".concat(allHeight, \"px\"),\r\n                        transform: \"translate(\".concat(allLeft_1, \"px, \").concat(allTop_1, \"px)\"),\r\n                        clipPath: \"polygon(\".concat(areaPoses.map(function (pos) { return \"\".concat(pos[0] - allLeft_1, \"px \").concat(pos[1] - allTop_1, \"px\"); }).join(\", \"), \")\"),\r\n                    } }));\r\n            }\r\n        }\r\n        if (snapBoundInfos) {\r\n            [\"vertical\", \"horizontal\"].forEach(function (directionType) {\r\n                var info = snapBoundInfos[directionType];\r\n                var isHorizontal = directionType === \"horizontal\";\r\n                if (info.isSnap) {\r\n                    lines.push.apply(lines, __spreadArray([], __read(info.snap.posInfos.map(function (_a, i) {\r\n                        var pos = _a.pos;\r\n                        var snapPos1 = minus(calculatePosition(allMatrix, isHorizontal ? [0, pos] : [pos, 0], n), [left, top]);\r\n                        var snapPos2 = minus(calculatePosition(allMatrix, isHorizontal ? [width, pos] : [pos, height], n), [left, top]);\r\n                        return renderLine(React, \"\", snapPos1, snapPos2, zoom, \"clip\".concat(directionType, \"snap\").concat(i), \"guideline\");\r\n                    })), false));\r\n                }\r\n                if (info.isBound) {\r\n                    lines.push.apply(lines, __spreadArray([], __read(info.bounds.map(function (_a, i) {\r\n                        var pos = _a.pos;\r\n                        var snapPos1 = minus(calculatePosition(allMatrix, isHorizontal ? [0, pos] : [pos, 0], n), [left, top]);\r\n                        var snapPos2 = minus(calculatePosition(allMatrix, isHorizontal ? [width, pos] : [pos, height], n), [left, top]);\r\n                        return renderLine(React, \"\", snapPos1, snapPos2, zoom, \"clip\".concat(directionType, \"bounds\").concat(i), \"guideline\", \"bounds\", \"bold\");\r\n                    })), false));\r\n                }\r\n            });\r\n        }\r\n        return __spreadArray(__spreadArray([], __read(controls), false), __read(lines), false);\r\n    },\r\n    dragControlCondition: function (moveable, e) {\r\n        return e.inputEvent && (e.inputEvent.target.getAttribute(\"class\") || \"\").indexOf(\"clip\") > -1;\r\n    },\r\n    dragStart: function (moveable, e) {\r\n        var props = moveable.props;\r\n        var _a = props.dragWithClip, dragWithClip = _a === void 0 ? true : _a;\r\n        if (dragWithClip) {\r\n            return false;\r\n        }\r\n        return this.dragControlStart(moveable, e);\r\n    },\r\n    drag: function (moveable, e) {\r\n        return this.dragControl(moveable, __assign(__assign({}, e), { isDragTarget: true }));\r\n    },\r\n    dragEnd: function (moveable, e) {\r\n        return this.dragControlEnd(moveable, e);\r\n    },\r\n    dragControlStart: function (moveable, e) {\r\n        var state = moveable.state;\r\n        var _a = moveable.props, defaultClipPath = _a.defaultClipPath, customClipPath = _a.customClipPath;\r\n        var target = state.target, width = state.width, height = state.height;\r\n        var inputTarget = e.inputEvent ? e.inputEvent.target : null;\r\n        var className = (inputTarget && inputTarget.getAttribute(\"class\")) || \"\";\r\n        var datas = e.datas;\r\n        var clipPath = getClipPath(target, width, height, defaultClipPath || \"inset\", customClipPath);\r\n        if (!clipPath) {\r\n            return false;\r\n        }\r\n        var clipText = clipPath.clipText, type = clipPath.type, poses = clipPath.poses;\r\n        var result = triggerEvent(moveable, \"onClipStart\", fillParams(moveable, e, {\r\n            clipType: type,\r\n            clipStyle: clipText,\r\n            poses: poses.map(function (pos) { return pos.pos; }),\r\n        }));\r\n        if (result === false) {\r\n            datas.isClipStart = false;\r\n            return false;\r\n        }\r\n        datas.isControl = className && className.indexOf(\"clip-control\") > -1;\r\n        datas.isLine = className.indexOf(\"clip-line\") > -1;\r\n        datas.isArea = className.indexOf(\"clip-area\") > -1 || className.indexOf(\"clip-ellipse\") > -1;\r\n        datas.clipIndex = inputTarget ? parseInt(inputTarget.getAttribute(\"data-clip-index\"), 10) : -1;\r\n        datas.clipPath = clipPath;\r\n        datas.isClipStart = true;\r\n        state.clipPathState = clipText;\r\n        setDragStart(moveable, e);\r\n        return true;\r\n    },\r\n    dragControl: function (moveable, e) {\r\n        var _a, _b, _c;\r\n        var datas = e.datas, originalDatas = e.originalDatas, isDragTarget = e.isDragTarget;\r\n        if (!datas.isClipStart) {\r\n            return false;\r\n        }\r\n        var _d = datas, isControl = _d.isControl, isLine = _d.isLine, isArea = _d.isArea, clipIndex = _d.clipIndex, clipPath = _d.clipPath;\r\n        if (!clipPath) {\r\n            return false;\r\n        }\r\n        var props = getProps(moveable.props, \"clippable\");\r\n        var keepRatio = props.keepRatio;\r\n        var distX = 0;\r\n        var distY = 0;\r\n        var originalDraggable = originalDatas.draggable;\r\n        var originalDist = getDragDist(e);\r\n        if (isDragTarget && originalDraggable) {\r\n            _a = __read(originalDraggable.prevBeforeDist, 2), distX = _a[0], distY = _a[1];\r\n        }\r\n        else {\r\n            _b = __read(originalDist, 2), distX = _b[0], distY = _b[1];\r\n        }\r\n        var firstDist = [distX, distY];\r\n        var state = moveable.state;\r\n        var width = state.width, height = state.height;\r\n        var isDragWithTarget = !isArea && !isControl && !isLine;\r\n        var clipType = clipPath.type, clipPoses = clipPath.poses, splitter = clipPath.splitter;\r\n        var poses = clipPoses.map(function (pos) { return pos.pos; });\r\n        if (isDragWithTarget) {\r\n            distX = -distX;\r\n            distY = -distY;\r\n        }\r\n        var isAll = !isControl || clipPoses[clipIndex].direction === \"nesw\";\r\n        var isRect = clipType === \"inset\" || clipType === \"rect\";\r\n        var dists = clipPoses.map(function () { return [0, 0]; });\r\n        if (isControl && !isAll) {\r\n            var _e = clipPoses[clipIndex], horizontal = _e.horizontal, vertical = _e.vertical;\r\n            var dist = [\r\n                distX * abs(horizontal),\r\n                distY * abs(vertical),\r\n            ];\r\n            dists = moveControlPos(clipPoses, clipIndex, dist, isRect, keepRatio);\r\n        }\r\n        else if (isAll) {\r\n            dists = poses.map(function () { return [distX, distY]; });\r\n        }\r\n        var nextPoses = poses.map(function (pos, i) { return plus(pos, dists[i]); });\r\n        var guidePoses = __spreadArray([], __read(nextPoses), false);\r\n        state.snapBoundInfos = null;\r\n        var isCircle = clipPath.type === \"circle\";\r\n        var isEllipse = clipPath.type === \"ellipse\";\r\n        if (isCircle || isEllipse) {\r\n            var guideRect = getRect(nextPoses);\r\n            var ry = abs(guideRect.bottom - guideRect.top);\r\n            var rx = abs(isEllipse ? guideRect.right - guideRect.left : ry);\r\n            var bottom = nextPoses[0][1] + ry;\r\n            var left = nextPoses[0][0] - rx;\r\n            var right = nextPoses[0][0] + rx;\r\n            // right\r\n            if (isCircle) {\r\n                guidePoses.push([right, guideRect.bottom]);\r\n                dists.push([1, 0]);\r\n            }\r\n            // bottom\r\n            guidePoses.push([guideRect.left, bottom]);\r\n            dists.push([0, 1]);\r\n            // left\r\n            guidePoses.push([left, guideRect.bottom]);\r\n            dists.push([1, 0]);\r\n        }\r\n        var guidelines = getDefaultGuidelines((props.clipHorizontalGuidelines || []).map(function (v) { return convertUnitSize(\"\".concat(v), height); }), (props.clipVerticalGuidelines || []).map(function (v) { return convertUnitSize(\"\".concat(v), width); }), width, height);\r\n        var guideXPoses = [];\r\n        var guideYPoses = [];\r\n        if (isCircle || isEllipse) {\r\n            guideXPoses = [guidePoses[4][0], guidePoses[2][0]];\r\n            guideYPoses = [guidePoses[1][1], guidePoses[3][1]];\r\n        }\r\n        else if (isRect) {\r\n            var rectPoses = [guidePoses[0], guidePoses[2], guidePoses[4], guidePoses[6]];\r\n            var rectDists_1 = [dists[0], dists[2], dists[4], dists[6]];\r\n            guideXPoses = rectPoses.filter(function (_, i) { return rectDists_1[i][0]; }).map(function (pos) { return pos[0]; });\r\n            guideYPoses = rectPoses.filter(function (_, i) { return rectDists_1[i][1]; }).map(function (pos) { return pos[1]; });\r\n        }\r\n        else {\r\n            guideXPoses = guidePoses.filter(function (_, i) { return dists[i][0]; }).map(function (pos) { return pos[0]; });\r\n            guideYPoses = guidePoses.filter(function (_, i) { return dists[i][1]; }).map(function (pos) { return pos[1]; });\r\n        }\r\n        var boundDelta = [0, 0];\r\n        var _f = checkSnapBounds(guidelines, props.clipTargetBounds && { left: 0, top: 0, right: width, bottom: height }, guideXPoses, guideYPoses, 5, 5), horizontalSnapInfo = _f.horizontal, verticalSnapInfo = _f.vertical;\r\n        var snapOffsetY = horizontalSnapInfo.offset;\r\n        var snapOffsetX = verticalSnapInfo.offset;\r\n        if (horizontalSnapInfo.isBound) {\r\n            boundDelta[1] += snapOffsetY;\r\n        }\r\n        if (verticalSnapInfo.isBound) {\r\n            boundDelta[0] += snapOffsetX;\r\n        }\r\n        if ((isEllipse || isCircle) && dists[0][0] === 0 && dists[0][1] === 0) {\r\n            var guideRect = getRect(nextPoses);\r\n            var cy = guideRect.bottom - guideRect.top;\r\n            var cx = isEllipse ? guideRect.right - guideRect.left : cy;\r\n            var distSnapX = verticalSnapInfo.isBound\r\n                ? abs(snapOffsetX)\r\n                : (verticalSnapInfo.snapIndex === 0 ? -snapOffsetX : snapOffsetX);\r\n            var distSnapY = horizontalSnapInfo.isBound\r\n                ? abs(snapOffsetY)\r\n                : (horizontalSnapInfo.snapIndex === 0 ? -snapOffsetY : snapOffsetY);\r\n            cx -= distSnapX;\r\n            cy -= distSnapY;\r\n            if (isCircle) {\r\n                cy = checkSnapBoundPriority(verticalSnapInfo, horizontalSnapInfo) > 0 ? cy : cx;\r\n                cx = cy;\r\n            }\r\n            var center = guidePoses[0];\r\n            guidePoses[1][1] = center[1] - cy;\r\n            guidePoses[2][0] = center[0] + cx;\r\n            guidePoses[3][1] = center[1] + cy;\r\n            guidePoses[4][0] = center[0] - cx;\r\n        }\r\n        else if (isRect && keepRatio && isControl) {\r\n            var _g = __read(getControlSize(clipPoses), 2), width_1 = _g[0], height_1 = _g[1];\r\n            var ratio = width_1 && height_1 ? width_1 / height_1 : 0;\r\n            var clipPose = clipPoses[clipIndex];\r\n            var direction = clipPose.direction || \"\";\r\n            var top_2 = guidePoses[1][1];\r\n            var bottom = guidePoses[5][1];\r\n            var left = guidePoses[7][0];\r\n            var right = guidePoses[3][0];\r\n            if (abs(snapOffsetY) <= abs(snapOffsetX)) {\r\n                snapOffsetY = sign(snapOffsetY) * abs(snapOffsetX) / ratio;\r\n            }\r\n            else {\r\n                snapOffsetX = sign(snapOffsetX) * abs(snapOffsetY) * ratio;\r\n            }\r\n            if (direction.indexOf(\"w\") > -1) {\r\n                left -= snapOffsetX;\r\n            }\r\n            else if (direction.indexOf(\"e\") > -1) {\r\n                right -= snapOffsetX;\r\n            }\r\n            else {\r\n                left += snapOffsetX / 2;\r\n                right -= snapOffsetX / 2;\r\n            }\r\n            if (direction.indexOf(\"n\") > -1) {\r\n                top_2 -= snapOffsetY;\r\n            }\r\n            else if (direction.indexOf(\"s\") > -1) {\r\n                bottom -= snapOffsetY;\r\n            }\r\n            else {\r\n                top_2 += snapOffsetY / 2;\r\n                bottom -= snapOffsetY / 2;\r\n            }\r\n            var nextControlPoses_2 = getRectPoses(top_2, right, bottom, left);\r\n            guidePoses.forEach(function (pos, i) {\r\n                var _a;\r\n                _a = __read(nextControlPoses_2[i].pos, 2), pos[0] = _a[0], pos[1] = _a[1];\r\n            });\r\n        }\r\n        else {\r\n            guidePoses.forEach(function (pos, j) {\r\n                var dist = dists[j];\r\n                if (dist[0]) {\r\n                    pos[0] -= snapOffsetX;\r\n                }\r\n                if (dist[1]) {\r\n                    pos[1] -= snapOffsetY;\r\n                }\r\n            });\r\n        }\r\n        var nextClipStyles = getClipStyles(moveable, clipPath, nextPoses);\r\n        var clipStyle = \"\".concat(clipType, \"(\").concat(nextClipStyles.join(splitter), \")\");\r\n        state.clipPathState = clipStyle;\r\n        if (isCircle || isEllipse) {\r\n            guideXPoses = [guidePoses[4][0], guidePoses[2][0]];\r\n            guideYPoses = [guidePoses[1][1], guidePoses[3][1]];\r\n        }\r\n        else if (isRect) {\r\n            var rectPoses = [guidePoses[0], guidePoses[2], guidePoses[4], guidePoses[6]];\r\n            guideXPoses = rectPoses.map(function (pos) { return pos[0]; });\r\n            guideYPoses = rectPoses.map(function (pos) { return pos[1]; });\r\n        }\r\n        else {\r\n            guideXPoses = guidePoses.map(function (pos) { return pos[0]; });\r\n            guideYPoses = guidePoses.map(function (pos) { return pos[1]; });\r\n        }\r\n        state.snapBoundInfos = checkSnapBounds(guidelines, props.clipTargetBounds && { left: 0, top: 0, right: width, bottom: height }, guideXPoses, guideYPoses, 1, 1);\r\n        if (originalDraggable) {\r\n            var is3d = state.is3d, allMatrix = state.allMatrix;\r\n            var n = is3d ? 4 : 3;\r\n            var dragDist = boundDelta;\r\n            if (isDragTarget) {\r\n                dragDist = [\r\n                    firstDist[0] + boundDelta[0] - originalDist[0],\r\n                    firstDist[1] + boundDelta[1] - originalDist[1],\r\n                ];\r\n            }\r\n            originalDraggable.deltaOffset = multiply(allMatrix, [dragDist[0], dragDist[1], 0, 0], n);\r\n        }\r\n        triggerEvent(moveable, \"onClip\", fillParams(moveable, e, __assign({ clipEventType: \"changed\", clipType: clipType, poses: nextPoses, clipStyle: clipStyle, clipStyles: nextClipStyles, distX: distX, distY: distY }, fillCSSObject((_c = {},\r\n            _c[clipType === \"rect\" ? \"clip\" : \"clipPath\"] = clipStyle,\r\n            _c), e))));\r\n        return true;\r\n    },\r\n    dragControlEnd: function (moveable, e) {\r\n        this.unset(moveable);\r\n        var isDrag = e.isDrag, datas = e.datas, isDouble = e.isDouble;\r\n        var isLine = datas.isLine, isClipStart = datas.isClipStart, isControl = datas.isControl;\r\n        if (!isClipStart) {\r\n            return false;\r\n        }\r\n        triggerEvent(moveable, \"onClipEnd\", fillEndParams(moveable, e, {}));\r\n        if (isDouble) {\r\n            if (isControl) {\r\n                removeClipPath(moveable, e);\r\n            }\r\n            else if (isLine) {\r\n                // add\r\n                addClipPath(moveable, e);\r\n            }\r\n        }\r\n        return isDouble || isDrag;\r\n    },\r\n    unset: function (moveable) {\r\n        moveable.state.clipPathState = \"\";\r\n        moveable.state.snapBoundInfos = null;\r\n    },\r\n};\r\n/**\r\n * Whether to clip the target. (default: false)\r\n * @name Moveable.Clippable#clippable\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     clippable: true,\r\n *     defaultClipPath: \"inset\",\r\n *     customClipPath: \"\",\r\n *     clipRelative: false,\r\n *     clipArea: false,\r\n *     dragWithClip: true,\r\n * });\r\n * moveable.on(\"clipStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"clip\", e => {\r\n *     if (e.clipType === \"rect\") {\r\n *         e.target.style.clip = e.clipStyle;\r\n *     } else {\r\n *         e.target.style.clipPath = e.clipStyle;\r\n *     }\r\n * }).on(\"clipEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n *  If clippath is not set, the default value can be set. (defaultClipPath < style < customClipPath < dragging clipPath)\r\n * @name Moveable.Clippable#defaultClipPath\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     clippable: true,\r\n *     defaultClipPath: \"inset\",\r\n *     customClipPath: \"\",\r\n *     clipRelative: false,\r\n *     clipArea: false,\r\n *     dragWithClip: true,\r\n * });\r\n * moveable.on(\"clipStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"clip\", e => {\r\n *     if (e.clipType === \"rect\") {\r\n *         e.target.style.clip = e.clipStyle;\r\n *     } else {\r\n *         e.target.style.clipPath = e.clipStyle;\r\n *     }\r\n * }).on(\"clipEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * % Can be used instead of the absolute px (`rect` not possible) (default: false)\r\n * @name Moveable.Clippable#clipRelative\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     clippable: true,\r\n *     defaultClipPath: \"inset\",\r\n *     customClipPath: \"\",\r\n *     clipRelative: false,\r\n *     clipArea: false,\r\n *     dragWithClip: true,\r\n * });\r\n * moveable.on(\"clipStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"clip\", e => {\r\n *     if (e.clipType === \"rect\") {\r\n *         e.target.style.clip = e.clipStyle;\r\n *     } else {\r\n *         e.target.style.clipPath = e.clipStyle;\r\n *     }\r\n * }).on(\"clipEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * You can force the custom clipPath. (defaultClipPath < style < customClipPath < dragging clipPath)\r\n * @name Moveable.Clippable#customClipPath\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     clippable: true,\r\n *     defaultClipPath: \"inset\",\r\n *     customClipPath: \"\",\r\n *     clipRelative: false,\r\n *     clipArea: false,\r\n *     dragWithClip: true,\r\n * });\r\n * moveable.on(\"clipStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"clip\", e => {\r\n *     if (e.clipType === \"rect\") {\r\n *         e.target.style.clip = e.clipStyle;\r\n *     } else {\r\n *         e.target.style.clipPath = e.clipStyle;\r\n *     }\r\n * }).on(\"clipEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * When dragging the target, the clip also moves. (default: true)\r\n * @name Moveable.Clippable#dragWithClip\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     clippable: true,\r\n *     defaultClipPath: \"inset\",\r\n *     customClipPath: \"\",\r\n *     clipRelative: false,\r\n *     clipArea: false,\r\n *     dragWithClip: true,\r\n * });\r\n * moveable.on(\"clipStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"clip\", e => {\r\n *     if (e.clipType === \"rect\") {\r\n *         e.target.style.clip = e.clipStyle;\r\n *     } else {\r\n *         e.target.style.clipPath = e.clipStyle;\r\n *     }\r\n * }).on(\"clipEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * You can drag the clip by setting clipArea.\r\n * @name Moveable.Clippable#clipArea\r\n * @default false\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     clippable: true,\r\n *     defaultClipPath: \"inset\",\r\n *     customClipPath: \"\",\r\n *     clipRelative: false,\r\n *     clipArea: false,\r\n *     dragWithClip: true,\r\n * });\r\n * moveable.on(\"clipStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"clip\", e => {\r\n *     if (e.clipType === \"rect\") {\r\n *         e.target.style.clip = e.clipStyle;\r\n *     } else {\r\n *         e.target.style.clipPath = e.clipStyle;\r\n *     }\r\n * }).on(\"clipEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n* Whether the clip is bound to the target.\r\n* @name Moveable.Clippable#clipTargetBounds\r\n* @default false\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     clippable: true,\r\n*     defaultClipPath: \"inset\",\r\n*     customClipPath: \"\",\r\n*     clipRelative: false,\r\n*     clipArea: false,\r\n*     dragWithClip: true,\r\n*     clipTargetBounds: true,\r\n* });\r\n* moveable.on(\"clipStart\", e => {\r\n*     console.log(e);\r\n* }).on(\"clip\", e => {\r\n*     if (e.clipType === \"rect\") {\r\n*         e.target.style.clip = e.clipStyle;\r\n*     } else {\r\n*         e.target.style.clipPath = e.clipStyle;\r\n*     }\r\n* }).on(\"clipEnd\", e => {\r\n*     console.log(e);\r\n* });\r\n*/\r\n/**\r\n * Add clip guidelines in the vertical direction.\r\n * @name Moveable.Clippable#clipVerticalGuidelines\r\n * @default 0\r\n * @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     clippable: true,\r\n*     defaultClipPath: \"inset\",\r\n*     customClipPath: \"\",\r\n*     clipRelative: false,\r\n*     clipArea: false,\r\n*     dragWithClip: true,\r\n*     clipVerticalGuidelines: [0, 100, 200],\r\n*     clipHorizontalGuidelines: [0, 100, 200],\r\n*     clipSnapThreshold: 5,\r\n* });\r\n*/\r\n/**\r\n* Add clip guidelines in the horizontal direction.\r\n* @name Moveable.Clippable#clipHorizontalGuidelines\r\n* @default []\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     clippable: true,\r\n*     defaultClipPath: \"inset\",\r\n*     customClipPath: \"\",\r\n*     clipRelative: false,\r\n*     clipArea: false,\r\n*     dragWithClip: true,\r\n*     clipVerticalGuidelines: [0, 100, 200],\r\n*     clipHorizontalGuidelines: [0, 100, 200],\r\n*     clipSnapThreshold: 5,\r\n* });\r\n*/\r\n/**\r\n* istance value that can snap to clip guidelines.\r\n* @name Moveable.Clippable#clipSnapThreshold\r\n* @default 5\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     clippable: true,\r\n*     defaultClipPath: \"inset\",\r\n*     customClipPath: \"\",\r\n*     clipRelative: false,\r\n*     clipArea: false,\r\n*     dragWithClip: true,\r\n*     clipVerticalGuidelines: [0, 100, 200],\r\n*     clipHorizontalGuidelines: [0, 100, 200],\r\n*     clipSnapThreshold: 5,\r\n* });\r\n*/\r\n/**\r\n * When drag start the clip area or controls, the `clipStart` event is called.\r\n * @memberof Moveable.Clippable\r\n * @event clipStart\r\n * @param {Moveable.Clippable.OnClipStart} - Parameters for the `clipStart` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     clippable: true,\r\n *     defaultClipPath: \"inset\",\r\n *     customClipPath: \"\",\r\n *     clipRelative: false,\r\n *     clipArea: false,\r\n *     dragWithClip: true,\r\n * });\r\n * moveable.on(\"clipStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"clip\", e => {\r\n *     if (e.clipType === \"rect\") {\r\n *         e.target.style.clip = e.clipStyle;\r\n *     } else {\r\n *         e.target.style.clipPath = e.clipStyle;\r\n *     }\r\n * }).on(\"clipEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * When drag the clip area or controls, the `clip` event is called.\r\n * @memberof Moveable.Clippable\r\n * @event clip\r\n * @param {Moveable.Clippable.OnClip} - Parameters for the `clip` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     clippable: true,\r\n *     defaultClipPath: \"inset\",\r\n *     customClipPath: \"\",\r\n *     clipRelative: false,\r\n *     clipArea: false,\r\n *     dragWithClip: true,\r\n * });\r\n * moveable.on(\"clipStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"clip\", e => {\r\n *     if (e.clipType === \"rect\") {\r\n *         e.target.style.clip = e.clipStyle;\r\n *     } else {\r\n *         e.target.style.clipPath = e.clipStyle;\r\n *     }\r\n * }).on(\"clipEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * When drag end the clip area or controls, the `clipEnd` event is called.\r\n * @memberof Moveable.Clippable\r\n * @event clipEnd\r\n * @param {Moveable.Clippable.OnClipEnd} - Parameters for the `clipEnd` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     clippable: true,\r\n *     defaultClipPath: \"inset\",\r\n *     customClipPath: \"\",\r\n *     clipRelative: false,\r\n *     clipArea: false,\r\n *     dragWithClip: true,\r\n * });\r\n * moveable.on(\"clipStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"clip\", e => {\r\n *     if (e.clipType === \"rect\") {\r\n *         e.target.style.clip = e.clipStyle;\r\n *     } else {\r\n *         e.target.style.clipPath = e.clipStyle;\r\n *     }\r\n * }).on(\"clipEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\n\n/**\r\n * @namespace OriginDraggable\r\n * @memberof Moveable\r\n * @description Whether to drag origin (default: false)\r\n */\r\nvar OriginDraggable = {\r\n    name: \"originDraggable\",\r\n    props: [\r\n        \"originDraggable\",\r\n        \"originRelative\",\r\n    ],\r\n    events: [\r\n        \"dragOriginStart\",\r\n        \"dragOrigin\",\r\n        \"dragOriginEnd\",\r\n    ],\r\n    css: [\r\n        \":host[data-able-origindraggable] .control.origin {\\npointer-events: auto;\\n}\",\r\n    ],\r\n    dragControlCondition: function (_, e) {\r\n        if (e.isRequest) {\r\n            return e.requestAble === \"originDraggable\";\r\n        }\r\n        return hasClass(e.inputEvent.target, prefix(\"origin\"));\r\n    },\r\n    dragControlStart: function (moveable, e) {\r\n        var datas = e.datas;\r\n        setDragStart(moveable, e);\r\n        var params = fillParams(moveable, e, {\r\n            dragStart: Draggable.dragStart(moveable, new CustomGesto().dragStart([0, 0], e)),\r\n        });\r\n        var result = triggerEvent(moveable, \"onDragOriginStart\", params);\r\n        datas.startOrigin = moveable.state.transformOrigin;\r\n        datas.startTargetOrigin = moveable.state.targetOrigin;\r\n        datas.prevOrigin = [0, 0];\r\n        datas.isDragOrigin = true;\r\n        if (result === false) {\r\n            datas.isDragOrigin = false;\r\n            return false;\r\n        }\r\n        return params;\r\n    },\r\n    dragControl: function (moveable, e) {\r\n        var datas = e.datas, isPinch = e.isPinch, isRequest = e.isRequest;\r\n        if (!datas.isDragOrigin) {\r\n            return false;\r\n        }\r\n        var _a = __read(getDragDist(e), 2), distX = _a[0], distY = _a[1];\r\n        var state = moveable.state;\r\n        var width = state.width, height = state.height, offsetMatrix = state.offsetMatrix, targetMatrix = state.targetMatrix, is3d = state.is3d;\r\n        var _b = moveable.props.originRelative, originRelative = _b === void 0 ? true : _b;\r\n        var n = is3d ? 4 : 3;\r\n        var dist = [distX, distY];\r\n        if (isRequest) {\r\n            var distOrigin = e.distOrigin;\r\n            if (distOrigin[0] || distOrigin[1]) {\r\n                dist = distOrigin;\r\n            }\r\n        }\r\n        var origin = plus(datas.startOrigin, dist);\r\n        var targetOrigin = plus(datas.startTargetOrigin, dist);\r\n        var delta = minus(dist, datas.prevOrigin);\r\n        var nextMatrix = getNextMatrix(offsetMatrix, targetMatrix, origin, n);\r\n        var rect = moveable.getRect();\r\n        var nextRect = getRect(calculatePoses(nextMatrix, width, height, n));\r\n        var dragDelta = [\r\n            rect.left - nextRect.left,\r\n            rect.top - nextRect.top,\r\n        ];\r\n        datas.prevOrigin = dist;\r\n        var transformOrigin = [\r\n            convertCSSSize(targetOrigin[0], width, originRelative),\r\n            convertCSSSize(targetOrigin[1], height, originRelative),\r\n        ].join(\" \");\r\n        var result = Draggable.drag(moveable, setCustomDrag(e, moveable.state, dragDelta, !!isPinch, false));\r\n        var params = fillParams(moveable, e, __assign(__assign({ width: width, height: height, origin: origin, dist: dist, delta: delta, transformOrigin: transformOrigin, drag: result }, fillCSSObject({\r\n            transformOrigin: transformOrigin,\r\n            transform: result.transform,\r\n        }, e)), { afterTransform: result.transform }));\r\n        triggerEvent(moveable, \"onDragOrigin\", params);\r\n        return params;\r\n    },\r\n    dragControlEnd: function (moveable, e) {\r\n        var datas = e.datas;\r\n        if (!datas.isDragOrigin) {\r\n            return false;\r\n        }\r\n        triggerEvent(moveable, \"onDragOriginEnd\", fillEndParams(moveable, e, {}));\r\n        return true;\r\n    },\r\n    dragGroupControlCondition: function (moveable, e) {\r\n        return this.dragControlCondition(moveable, e);\r\n    },\r\n    dragGroupControlStart: function (moveable, e) {\r\n        var params = this.dragControlStart(moveable, e);\r\n        if (!params) {\r\n            return false;\r\n        }\r\n        return true;\r\n    },\r\n    dragGroupControl: function (moveable, e) {\r\n        var params = this.dragControl(moveable, e);\r\n        if (!params) {\r\n            return false;\r\n        }\r\n        moveable.transformOrigin = params.transformOrigin;\r\n        return true;\r\n    },\r\n    /**\r\n    * @method Moveable.OriginDraggable#request\r\n    * @param {object} e - the OriginDraggable's request parameter\r\n    * @param {number} [e.x] - x position\r\n    * @param {number} [e.y] - y position\r\n    * @param {number} [e.deltaX] - x number to move\r\n    * @param {number} [e.deltaY] - y number to move\r\n    * @param {array} [e.deltaOrigin] - left, top number to move transform-origin\r\n    * @param {array} [e.origin] - transform-origin position\r\n    * @param {number} [e.isInstant] - Whether to execute the request instantly\r\n    * @return {Moveable.Requester} Moveable Requester\r\n    * @example\r\n\n    * // Instantly Request (requestStart - request - requestEnd)\r\n    * // Use Relative Value\r\n    * moveable.request(\"originDraggable\", { deltaX: 10, deltaY: 10 }, true);\r\n    * // Use Absolute Value\r\n    * moveable.request(\"originDraggable\", { x: 200, y: 100 }, true);\r\n    * // Use Transform Value\r\n    * moveable.request(\"originDraggable\", { deltaOrigin: [10, 0] }, true);\r\n    * moveable.request(\"originDraggable\", { origin: [100, 0] }, true);\r\n    * // requestStart\r\n    * const requester = moveable.request(\"originDraggable\");\r\n    *\r\n    * // request\r\n    * // Use Relative Value\r\n    * requester.request({ deltaX: 10, deltaY: 10 });\r\n    * requester.request({ deltaX: 10, deltaY: 10 });\r\n    * requester.request({ deltaX: 10, deltaY: 10 });\r\n    * // Use Absolute Value\r\n    * moveable.request(\"originDraggable\", { x: 200, y: 100 });\r\n    * moveable.request(\"originDraggable\", { x: 220, y: 100 });\r\n    * moveable.request(\"originDraggable\", { x: 240, y: 100 });\r\n    *\r\n    * // requestEnd\r\n    * requester.requestEnd();\r\n    */\r\n    request: function (moveable) {\r\n        var datas = {};\r\n        var rect = moveable.getRect();\r\n        var distX = 0;\r\n        var distY = 0;\r\n        var transformOrigin = rect.transformOrigin;\r\n        var distOrigin = [0, 0];\r\n        return {\r\n            isControl: true,\r\n            requestStart: function () {\r\n                return { datas: datas };\r\n            },\r\n            request: function (e) {\r\n                if (\"deltaOrigin\" in e) {\r\n                    distOrigin[0] += e.deltaOrigin[0];\r\n                    distOrigin[1] += e.deltaOrigin[1];\r\n                }\r\n                else if (\"origin\" in e) {\r\n                    distOrigin[0] = e.origin[0] - transformOrigin[0];\r\n                    distOrigin[1] = e.origin[1] - transformOrigin[1];\r\n                }\r\n                else {\r\n                    if (\"x\" in e) {\r\n                        distX = e.x - rect.left;\r\n                    }\r\n                    else if (\"deltaX\" in e) {\r\n                        distX += e.deltaX;\r\n                    }\r\n                    if (\"y\" in e) {\r\n                        distY = e.y - rect.top;\r\n                    }\r\n                    else if (\"deltaY\" in e) {\r\n                        distY += e.deltaY;\r\n                    }\r\n                }\r\n                return { datas: datas, distX: distX, distY: distY, distOrigin: distOrigin };\r\n            },\r\n            requestEnd: function () {\r\n                return { datas: datas, isDrag: true };\r\n            },\r\n        };\r\n    },\r\n};\r\n/**\r\n * Whether to drag origin (default: false)\r\n * @name Moveable.OriginDraggable#originDraggable\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     originDraggable: true,\r\n * });\r\n * let translate = [0, 0];\r\n * moveable.on(\"dragOriginStart\", e => {\r\n *     e.dragStart && e.dragStart.set(translate);\r\n * }).on(\"dragOrigin\", e => {\r\n *     translate = e.drag.beforeTranslate;\r\n *     e.target.style.cssText\r\n *         = `transform-origin: ${e.transformOrigin};`\r\n *         + `transform: translate(${translate[0]}px, ${translate[1]}px)`;\r\n * }).on(\"dragOriginEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * % Can be used instead of the absolute px (default: true)\r\n * @name Moveable.OriginDraggable#originRelative\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     originDraggable: true,\r\n *     originRelative: false,\r\n * });\r\n * moveable.originRelative = true;\r\n */\r\n/**\r\n* When drag start the origin, the `dragOriginStart` event is called.\r\n* @memberof Moveable.OriginDraggable\r\n* @event dragOriginStart\r\n* @param {Moveable.OriginDraggable.OnDragOriginStart} - Parameters for the `dragOriginStart` event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     originDraggable: true,\r\n* });\r\n* let translate = [0, 0];\r\n* moveable.on(\"dragOriginStart\", e => {\r\n*     e.dragStart && e.dragStart.set(translate);\r\n* }).on(\"dragOrigin\", e => {\r\n*     translate = e.drag.beforeTranslate;\r\n*     e.target.style.cssText\r\n*         = `transform-origin: ${e.transformOrigin};`\r\n*         + `transform: translate(${translate[0]}px, ${translate[1]}px)`;\r\n* }).on(\"dragOriginEnd\", e => {\r\n*     console.log(e);\r\n* });\r\n*/\r\n/**\r\n* When drag the origin, the `dragOrigin` event is called.\r\n* @memberof Moveable.OriginDraggable\r\n* @event dragOrigin\r\n* @param {Moveable.OriginDraggable.OnDragOrigin} - Parameters for the `dragOrigin` event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     originDraggable: true,\r\n* });\r\n* let translate = [0, 0];\r\n* moveable.on(\"dragOriginStart\", e => {\r\n*     e.dragStart && e.dragStart.set(translate);\r\n* }).on(\"dragOrigin\", e => {\r\n*     translate = e.drag.beforeTranslate;\r\n*     e.target.style.cssText\r\n*         = `transform-origin: ${e.transformOrigin};`\r\n*         + `transform: translate(${translate[0]}px, ${translate[1]}px)`;\r\n* }).on(\"dragOriginEnd\", e => {\r\n*     console.log(e);\r\n* });\r\n*/\r\n/**\r\n* When drag end the origin, the `dragOriginEnd` event is called.\r\n* @memberof Moveable.OriginDraggable\r\n* @event dragOriginEnd\r\n* @param {Moveable.OriginDraggable.OnDragOriginEnd} - Parameters for the `dragOriginEnd` event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     originDraggable: true,\r\n* });\r\n* let translate = [0, 0];\r\n* moveable.on(\"dragOriginStart\", e => {\r\n*     e.dragStart && e.dragStart.set(translate);\r\n* }).on(\"dragOrigin\", e => {\r\n*     translate = e.drag.beforeTranslate;\r\n*     e.target.style.cssText\r\n*         = `transform-origin: ${e.transformOrigin};`\r\n*         + `transform: translate(${translate[0]}px, ${translate[1]}px)`;\r\n* }).on(\"dragOriginEnd\", e => {\r\n*     console.log(e);\r\n* });\r\n*/\n\nfunction addBorderRadiusByLine(controlPoses, lineIndex, distX, distY) {\r\n    // lineIndex\r\n    // 0 top\r\n    // 1 right\r\n    // 2 bottom\r\n    // 3 left\r\n    var horizontalsLength = controlPoses.filter(function (_a) {\r\n        var virtual = _a.virtual, horizontal = _a.horizontal;\r\n        return horizontal && !virtual;\r\n    }).length;\r\n    var verticalsLength = controlPoses.filter(function (_a) {\r\n        var virtual = _a.virtual, vertical = _a.vertical;\r\n        return vertical && !virtual;\r\n    }).length;\r\n    var controlIndex = -1;\r\n    //top\r\n    if (lineIndex === 0) {\r\n        if (horizontalsLength === 0) {\r\n            controlIndex = 0;\r\n        }\r\n        else if (horizontalsLength === 1) {\r\n            controlIndex = 1;\r\n        }\r\n    }\r\n    // bottom\r\n    if (lineIndex === 2) {\r\n        if (horizontalsLength <= 2) {\r\n            controlIndex = 2;\r\n        }\r\n        else if (horizontalsLength <= 3) {\r\n            controlIndex = 3;\r\n        }\r\n    }\r\n    // left\r\n    if (lineIndex === 3) {\r\n        if (verticalsLength === 0) {\r\n            controlIndex = 4;\r\n        }\r\n        else if (verticalsLength < 4) {\r\n            controlIndex = 7;\r\n        }\r\n    }\r\n    // right\r\n    if (lineIndex === 1) {\r\n        if (verticalsLength <= 1) {\r\n            controlIndex = 5;\r\n        }\r\n        else if (verticalsLength <= 2) {\r\n            controlIndex = 6;\r\n        }\r\n    }\r\n    if (controlIndex === -1 || !controlPoses[controlIndex].virtual) {\r\n        return;\r\n    }\r\n    var controlPoseInfo = controlPoses[controlIndex];\r\n    addBorderRadius(controlPoses, controlIndex);\r\n    if (controlIndex < 4) {\r\n        controlPoseInfo.pos[0] = distX;\r\n    }\r\n    else {\r\n        controlPoseInfo.pos[1] = distY;\r\n    }\r\n}\r\nfunction addBorderRadius(controlPoses, index) {\r\n    if (index < 4) {\r\n        controlPoses.slice(0, index + 1).forEach(function (info) {\r\n            info.virtual = false;\r\n        });\r\n    }\r\n    else {\r\n        if (controlPoses[0].virtual) {\r\n            controlPoses[0].virtual = false;\r\n        }\r\n        controlPoses.slice(4, index + 1).forEach(function (info) {\r\n            info.virtual = false;\r\n        });\r\n    }\r\n}\r\nfunction removeBorderRadius(controlPoses, index) {\r\n    if (index < 4) {\r\n        controlPoses.slice(index, 4).forEach(function (info) {\r\n            info.virtual = true;\r\n        });\r\n    }\r\n    else {\r\n        controlPoses.slice(index).forEach(function (info) {\r\n            info.virtual = true;\r\n        });\r\n    }\r\n}\r\nfunction getBorderRadius(borderRadius, width, height, minCounts, full) {\r\n    if (minCounts === void 0) { minCounts = [0, 0]; }\r\n    var values = [];\r\n    if (!borderRadius || borderRadius === \"0px\") {\r\n        values = [];\r\n    }\r\n    else {\r\n        values = splitSpace(borderRadius);\r\n    }\r\n    return getRadiusValues(values, width, height, 0, 0, minCounts, full);\r\n}\r\nfunction triggerRoundEvent(moveable, e, dist, delta, nextPoses) {\r\n    var state = moveable.state;\r\n    var width = state.width, height = state.height;\r\n    var _a = getRadiusStyles(nextPoses, moveable.props.roundRelative, width, height), raws = _a.raws, styles = _a.styles, radiusPoses = _a.radiusPoses;\r\n    var _b = splitRadiusPoses(radiusPoses, raws), horizontals = _b.horizontals, verticals = _b.verticals;\r\n    var borderRadius = styles.join(\" \");\r\n    state.borderRadiusState = borderRadius;\r\n    var params = fillParams(moveable, e, __assign({ horizontals: horizontals, verticals: verticals, borderRadius: borderRadius, width: width, height: height, delta: delta, dist: dist }, fillCSSObject({\r\n        borderRadius: borderRadius,\r\n    }, e)));\r\n    triggerEvent(moveable, \"onRound\", params);\r\n    return params;\r\n}\r\nfunction getStyleBorderRadius(moveable) {\r\n    var _a, _b;\r\n    var style = moveable.getState().style;\r\n    var borderRadius = style.borderRadius || \"\";\r\n    if (!borderRadius && moveable.props.groupable) {\r\n        var firstMoveable = moveable.moveables[0];\r\n        var firstTarget = moveable.getTargets()[0];\r\n        if (firstTarget) {\r\n            if ((firstMoveable === null || firstMoveable === void 0 ? void 0 : firstMoveable.props.target) === firstTarget) {\r\n                borderRadius = (_b = (_a = moveable.moveables[0]) === null || _a === void 0 ? void 0 : _a.state.style.borderRadius) !== null && _b !== void 0 ? _b : \"\";\r\n                style.borderRadius = borderRadius;\r\n            }\r\n            else {\r\n                borderRadius = getComputedStyle(firstTarget).borderRadius;\r\n                style.borderRadius = borderRadius;\r\n            }\r\n        }\r\n    }\r\n    return borderRadius;\r\n}\r\n/**\r\n * @namespace Moveable.Roundable\r\n * @description Whether to show and drag or double click border-radius\r\n */\r\nvar Roundable = {\r\n    name: \"roundable\",\r\n    props: [\r\n        \"roundable\",\r\n        \"roundRelative\",\r\n        \"minRoundControls\",\r\n        \"maxRoundControls\",\r\n        \"roundClickable\",\r\n        \"roundPadding\",\r\n        \"isDisplayShadowRoundControls\",\r\n    ],\r\n    events: [\r\n        \"roundStart\",\r\n        \"round\",\r\n        \"roundEnd\",\r\n        \"roundGroupStart\",\r\n        \"roundGroup\",\r\n        \"roundGroupEnd\",\r\n    ],\r\n    css: [\r\n        \".control.border-radius {\\nbackground: #d66;\\ncursor: pointer;\\nz-index: 3;\\n}\",\r\n        \".control.border-radius.vertical {\\nbackground: #d6d;\\nz-index: 2;\\n}\",\r\n        \".control.border-radius.virtual {\\nopacity: 0.5;\\nz-index: 1;\\n}\",\r\n        \":host.round-line-clickable .line.direction {\\ncursor: pointer;\\n}\",\r\n    ],\r\n    className: function (moveable) {\r\n        var roundClickable = moveable.props.roundClickable;\r\n        return roundClickable === true || roundClickable === \"line\" ? prefix(\"round-line-clickable\") : \"\";\r\n    },\r\n    requestStyle: function () {\r\n        return [\"borderRadius\"];\r\n    },\r\n    requestChildStyle: function () {\r\n        return [\"borderRadius\"];\r\n    },\r\n    render: function (moveable, React) {\r\n        var _a = moveable.getState(), target = _a.target, width = _a.width, height = _a.height, allMatrix = _a.allMatrix, is3d = _a.is3d, left = _a.left, top = _a.top, borderRadiusState = _a.borderRadiusState;\r\n        var _b = moveable.props, _c = _b.minRoundControls, minRoundControls = _c === void 0 ? [0, 0] : _c, _d = _b.maxRoundControls, maxRoundControls = _d === void 0 ? [4, 4] : _d, zoom = _b.zoom, _e = _b.roundPadding, roundPadding = _e === void 0 ? 0 : _e, isDisplayShadowRoundControls = _b.isDisplayShadowRoundControls, groupable = _b.groupable;\r\n        if (!target) {\r\n            return null;\r\n        }\r\n        var borderRadius = borderRadiusState || getStyleBorderRadius(moveable);\r\n        var n = is3d ? 4 : 3;\r\n        var radiusValues = getBorderRadius(borderRadius, width, height, minRoundControls, true);\r\n        if (!radiusValues) {\r\n            return null;\r\n        }\r\n        var verticalCount = 0;\r\n        var horizontalCount = 0;\r\n        var basePos = groupable ? [0, 0] : [left, top];\r\n        return radiusValues.map(function (v, i) {\r\n            var horizontal = v.horizontal;\r\n            var vertical = v.vertical;\r\n            var direction = v.direction || \"\";\r\n            var originalPos = __spreadArray([], __read(v.pos), false);\r\n            horizontalCount += Math.abs(horizontal);\r\n            verticalCount += Math.abs(vertical);\r\n            if (horizontal && direction.indexOf(\"n\") > -1) {\r\n                originalPos[1] -= roundPadding;\r\n            }\r\n            if (vertical && direction.indexOf(\"w\") > -1) {\r\n                originalPos[0] -= roundPadding;\r\n            }\r\n            if (horizontal && direction.indexOf(\"s\") > -1) {\r\n                originalPos[1] += roundPadding;\r\n            }\r\n            if (vertical && direction.indexOf(\"e\") > -1) {\r\n                originalPos[0] += roundPadding;\r\n            }\r\n            var pos = minus(calculatePosition(allMatrix, originalPos, n), basePos);\r\n            var isDisplayVerticalShadow = isDisplayShadowRoundControls\r\n                && isDisplayShadowRoundControls !== \"horizontal\";\r\n            var isDisplay = v.vertical\r\n                ? verticalCount <= maxRoundControls[1] && (isDisplayVerticalShadow || !v.virtual)\r\n                : horizontalCount <= maxRoundControls[0] && (isDisplayShadowRoundControls || !v.virtual);\r\n            return React.createElement(\"div\", { key: \"borderRadiusControl\".concat(i), className: prefix(\"control\", \"border-radius\", v.vertical ? \"vertical\" : \"\", v.virtual ? \"virtual\" : \"\"), \"data-radius-index\": i, style: {\r\n                    display: isDisplay ? \"block\" : \"none\",\r\n                    transform: \"translate(\".concat(pos[0], \"px, \").concat(pos[1], \"px) scale(\").concat(zoom, \")\"),\r\n                } });\r\n        });\r\n    },\r\n    dragControlCondition: function (moveable, e) {\r\n        if (!e.inputEvent || e.isRequest) {\r\n            return false;\r\n        }\r\n        var className = (e.inputEvent.target.getAttribute(\"class\") || \"\");\r\n        return className.indexOf(\"border-radius\") > -1\r\n            || (className.indexOf(\"moveable-line\") > -1 && className.indexOf(\"moveable-direction\") > -1);\r\n    },\r\n    dragGroupControlCondition: function (moveable, e) {\r\n        return this.dragControlCondition(moveable, e);\r\n    },\r\n    dragControlStart: function (moveable, e) {\r\n        var inputEvent = e.inputEvent, datas = e.datas;\r\n        var inputTarget = inputEvent.target;\r\n        var className = (inputTarget.getAttribute(\"class\") || \"\");\r\n        var isControl = className.indexOf(\"border-radius\") > -1;\r\n        var isLine = className.indexOf(\"moveable-line\") > -1 && className.indexOf(\"moveable-direction\") > -1;\r\n        var controlIndex = isControl ? parseInt(inputTarget.getAttribute(\"data-radius-index\"), 10) : -1;\r\n        var lineIndex = -1;\r\n        if (isLine) {\r\n            var indexAttr = inputTarget.getAttribute(\"data-line-key\") || \"\";\r\n            if (indexAttr) {\r\n                lineIndex = parseInt(indexAttr.replace(/render-line-/g, \"\"), 10);\r\n                if (isNaN(lineIndex)) {\r\n                    lineIndex = -1;\r\n                }\r\n            }\r\n        }\r\n        if (!isControl && !isLine) {\r\n            return false;\r\n        }\r\n        var params = fillParams(moveable, e, {});\r\n        var result = triggerEvent(moveable, \"onRoundStart\", params);\r\n        if (result === false) {\r\n            return false;\r\n        }\r\n        datas.lineIndex = lineIndex;\r\n        datas.controlIndex = controlIndex;\r\n        datas.isControl = isControl;\r\n        datas.isLine = isLine;\r\n        setDragStart(moveable, e);\r\n        var _a = moveable.props, roundRelative = _a.roundRelative, _b = _a.minRoundControls, minRoundControls = _b === void 0 ? [0, 0] : _b;\r\n        var state = moveable.state;\r\n        var width = state.width, height = state.height;\r\n        datas.isRound = true;\r\n        datas.prevDist = [0, 0];\r\n        var borderRadius = getStyleBorderRadius(moveable);\r\n        var controlPoses = getBorderRadius(borderRadius || \"\", width, height, minRoundControls, true) || [];\r\n        datas.controlPoses = controlPoses;\r\n        state.borderRadiusState = getRadiusStyles(controlPoses, roundRelative, width, height).styles.join(\" \");\r\n        return params;\r\n    },\r\n    dragControl: function (moveable, e) {\r\n        var datas = e.datas;\r\n        var controlPoses = datas.controlPoses;\r\n        if (!datas.isRound || !datas.isControl || !controlPoses.length) {\r\n            return false;\r\n        }\r\n        var index = datas.controlIndex;\r\n        var _a = __read(getDragDist(e), 2), distX = _a[0], distY = _a[1];\r\n        var dist = [distX, distY];\r\n        var delta = minus(dist, datas.prevDist);\r\n        var _b = moveable.props.maxRoundControls, maxRoundControls = _b === void 0 ? [4, 4] : _b;\r\n        var _c = moveable.state, width = _c.width, height = _c.height;\r\n        var selectedControlPose = controlPoses[index];\r\n        var selectedVertical = selectedControlPose.vertical;\r\n        var selectedHorizontal = selectedControlPose.horizontal;\r\n        // 0: [0, 1, 2, 3] maxCount === 1\r\n        // 0: [0, 2] maxCount === 2\r\n        // 1: [1, 3] maxCount === 2\r\n        // 0: [0] maxCount === 3\r\n        // 1: [1, 3] maxCount === 3\r\n        var dists = controlPoses.map(function (pose) {\r\n            var horizontal = pose.horizontal, vertical = pose.vertical;\r\n            var poseDist = [\r\n                horizontal * selectedHorizontal * dist[0],\r\n                vertical * selectedVertical * dist[1],\r\n            ];\r\n            if (horizontal) {\r\n                if (maxRoundControls[0] === 1) {\r\n                    return poseDist;\r\n                }\r\n                else if (maxRoundControls[0] < 4 && horizontal !== selectedHorizontal) {\r\n                    return poseDist;\r\n                }\r\n            }\r\n            else if (maxRoundControls[1] === 0) {\r\n                poseDist[1] = vertical * selectedHorizontal * dist[0] / width * height;\r\n                return poseDist;\r\n            }\r\n            else if (selectedVertical) {\r\n                if (maxRoundControls[1] === 1) {\r\n                    return poseDist;\r\n                }\r\n                else if (maxRoundControls[1] < 4 && vertical !== selectedVertical) {\r\n                    return poseDist;\r\n                }\r\n            }\r\n            return [0, 0];\r\n        });\r\n        dists[index] = dist;\r\n        var nextPoses = controlPoses.map(function (info, i) {\r\n            return __assign(__assign({}, info), { pos: plus(info.pos, dists[i]) });\r\n        });\r\n        if (index < 4) {\r\n            nextPoses.slice(0, index + 1).forEach(function (info) {\r\n                info.virtual = false;\r\n            });\r\n        }\r\n        else {\r\n            nextPoses.slice(4, index + 1).forEach(function (info) {\r\n                info.virtual = false;\r\n            });\r\n        }\r\n        datas.prevDist = [distX, distY];\r\n        return triggerRoundEvent(moveable, e, dist, delta, nextPoses);\r\n    },\r\n    dragControlEnd: function (moveable, e) {\r\n        var state = moveable.state;\r\n        state.borderRadiusState = \"\";\r\n        var datas = e.datas, isDouble = e.isDouble;\r\n        if (!datas.isRound) {\r\n            return false;\r\n        }\r\n        var isControl = datas.isControl, controlIndex = datas.controlIndex, isLine = datas.isLine, lineIndex = datas.lineIndex;\r\n        var controlPoses = datas.controlPoses;\r\n        var length = controlPoses.filter(function (_a) {\r\n            var virtual = _a.virtual;\r\n            return virtual;\r\n        }).length;\r\n        var _a = moveable.props.roundClickable, roundClickable = _a === void 0 ? true : _a;\r\n        if (isDouble && roundClickable) {\r\n            if (isControl && (roundClickable === true || roundClickable === \"control\")) {\r\n                removeBorderRadius(controlPoses, controlIndex);\r\n            }\r\n            else if (isLine && (roundClickable === true || roundClickable === \"line\")) {\r\n                var _b = __read(calculatePointerDist(moveable, e), 2), distX = _b[0], distY = _b[1];\r\n                addBorderRadiusByLine(controlPoses, lineIndex, distX, distY);\r\n            }\r\n            if (length !== controlPoses.filter(function (_a) {\r\n                var virtual = _a.virtual;\r\n                return virtual;\r\n            }).length) {\r\n                triggerRoundEvent(moveable, e, [0, 0], [0, 0], controlPoses);\r\n            }\r\n        }\r\n        var params = fillEndParams(moveable, e, {});\r\n        triggerEvent(moveable, \"onRoundEnd\", params);\r\n        state.borderRadiusState = \"\";\r\n        return params;\r\n    },\r\n    dragGroupControlStart: function (moveable, e) {\r\n        var result = this.dragControlStart(moveable, e);\r\n        if (!result) {\r\n            return false;\r\n        }\r\n        var moveables = moveable.moveables;\r\n        var targets = moveable.props.targets;\r\n        var events = fillChildEvents(moveable, \"roundable\", e);\r\n        var nextParams = __assign({ targets: moveable.props.targets, events: events.map(function (ev, i) {\r\n                return __assign(__assign({}, ev), { target: targets[i], moveable: moveables[i], currentTarget: moveables[i] });\r\n            }) }, result);\r\n        triggerEvent(moveable, \"onRoundGroupStart\", nextParams);\r\n        return result;\r\n    },\r\n    dragGroupControl: function (moveable, e) {\r\n        var result = this.dragControl(moveable, e);\r\n        if (!result) {\r\n            return false;\r\n        }\r\n        var moveables = moveable.moveables;\r\n        var targets = moveable.props.targets;\r\n        var events = fillChildEvents(moveable, \"roundable\", e);\r\n        var nextParams = __assign({ targets: moveable.props.targets, events: events.map(function (ev, i) {\r\n                return __assign(__assign(__assign({}, ev), { target: targets[i], moveable: moveables[i], currentTarget: moveables[i] }), fillCSSObject({\r\n                    borderRadius: result.borderRadius,\r\n                }, ev));\r\n            }) }, result);\r\n        triggerEvent(moveable, \"onRoundGroup\", nextParams);\r\n        return nextParams;\r\n    },\r\n    dragGroupControlEnd: function (moveable, e) {\r\n        var moveables = moveable.moveables;\r\n        var targets = moveable.props.targets;\r\n        var events = fillChildEvents(moveable, \"roundable\", e);\r\n        catchEvent(moveable, \"onRound\", function (parentEvent) {\r\n            var nextParams = __assign({ targets: moveable.props.targets, events: events.map(function (ev, i) {\r\n                    return __assign(__assign(__assign({}, ev), { target: targets[i], moveable: moveables[i], currentTarget: moveables[i] }), fillCSSObject({\r\n                        borderRadius: parentEvent.borderRadius,\r\n                    }, ev));\r\n                }) }, parentEvent);\r\n            triggerEvent(moveable, \"onRoundGroup\", nextParams);\r\n        });\r\n        var result = this.dragControlEnd(moveable, e);\r\n        if (!result) {\r\n            return false;\r\n        }\r\n        var nextParams = __assign({ targets: moveable.props.targets, events: events.map(function (ev, i) {\r\n                var _a;\r\n                return __assign(__assign({}, ev), { target: targets[i], moveable: moveables[i], currentTarget: moveables[i], lastEvent: (_a = ev.datas) === null || _a === void 0 ? void 0 : _a.lastEvent });\r\n            }) }, result);\r\n        triggerEvent(moveable, \"onRoundGroupEnd\", nextParams);\r\n        return nextParams;\r\n    },\r\n    unset: function (moveable) {\r\n        moveable.state.borderRadiusState = \"\";\r\n    },\r\n};\r\n/**\r\n * Whether to show and drag or double click border-radius, (default: false)\r\n * @name Moveable.Roundable#roundable\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     roundable: true,\r\n *     roundRelative: false,\r\n * });\r\n * moveable.on(\"roundStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"round\", e => {\r\n *     e.target.style.borderRadius = e.borderRadius;\r\n * }).on(\"roundEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * % Can be used instead of the absolute px\r\n * @name Moveable.Roundable#roundRelative\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     roundable: true,\r\n *     roundRelative: false,\r\n * });\r\n * moveable.on(\"roundStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"round\", e => {\r\n *     e.target.style.borderRadius = e.borderRadius;\r\n * }).on(\"roundEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * Minimum number of round controls. It moves in proportion by control. [horizontal, vertical] (default: [0, 0])\r\n * @name Moveable.Roundable#minRoundControls\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     roundable: true,\r\n *     roundRelative: false,\r\n *     minRoundControls: [0, 0],\r\n * });\r\n * moveable.minRoundControls = [1, 0];\r\n */\r\n/**\r\n * Maximum number of round controls. It moves in proportion by control. [horizontal, vertical] (default: [4, 4])\r\n * @name Moveable.Roundable#maxRoundControls\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     roundable: true,\r\n *     roundRelative: false,\r\n *     maxRoundControls: [4, 4],\r\n * });\r\n * moveable.maxRoundControls = [1, 0];\r\n */\r\n/**\r\n * Whether you can add/delete round controls by double-clicking a line or control.\r\n * @name Moveable.Roundable#roundClickable\r\n * @default true\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     roundable: true,\r\n *     roundRelative: false,\r\n *     roundClickable: true,\r\n * });\r\n * moveable.roundClickable = false;\r\n */\r\n/**\r\n * Whether to show a round control that does not actually exist as a shadow\r\n * @name Moveable.Roundable#isDisplayShadowRoundControls\r\n * @default false\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     roundable: true,\r\n *     isDisplayShadowRoundControls: false,\r\n * });\r\n * moveable.isDisplayShadowRoundControls = true;\r\n */\r\n/**\r\n * The padding value of the position of the round control\r\n * @name Moveable.Roundable#roundPadding\r\n * @default false\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     roundable: true,\r\n *     roundPadding: 0,\r\n * });\r\n * moveable.roundPadding = 15;\r\n */\r\n/**\r\n * When drag start the clip area or controls, the `roundStart` event is called.\r\n * @memberof Moveable.Roundable\r\n * @event roundStart\r\n * @param {Moveable.Roundable.OnRoundStart} - Parameters for the `roundStart` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     roundable: true,\r\n *     roundRelative: false,\r\n * });\r\n * moveable.on(\"roundStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"round\", e => {\r\n *     e.target.style.borderRadius = e.borderRadius;\r\n * }).on(\"roundEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * When drag or double click the border area or controls, the `round` event is called.\r\n * @memberof Moveable.Roundable\r\n * @event round\r\n * @param {Moveable.Roundable.OnRound} - Parameters for the `round` event\r\n * @example\r\n  * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     roundable: true,\r\n *     roundRelative: false,\r\n * });\r\n * moveable.on(\"roundStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"round\", e => {\r\n *     e.target.style.borderRadius = e.borderRadius;\r\n * }).on(\"roundEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * When drag end the border area or controls, the `roundEnd` event is called.\r\n * @memberof Moveable.Roundable\r\n * @event roundEnd\r\n * @param {Moveable.Roundable.onRoundEnd} - Parameters for the `roundEnd` event\r\n * @example\r\n  * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     roundable: true,\r\n *     roundRelative: false,\r\n * });\r\n * moveable.on(\"roundStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"round\", e => {\r\n *     e.target.style.borderRadius = e.borderRadius;\r\n * }).on(\"roundEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * When drag start the clip area or controls, the `roundGroupStart` event is called.\r\n * @memberof Moveable.Roundable\r\n * @event roundGroupStart\r\n * @param {Moveable.Roundable.OnRoundGroupStart} - Parameters for the `roundGroupStart` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     targets: [target1, target2, target3],\r\n *     roundable: true,\r\n * });\r\n * moveable.on(\"roundGroupStart\", e => {\r\n *     console.log(e.targets);\r\n * }).on(\"roundGroup\", e => {\r\n *   e.events.forEach(ev => {\r\n *       ev.target.style.cssText += ev.cssText;\r\n *   });\r\n * }).on(\"roundGroupEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * When drag or double click the border area or controls, the `roundGroup` event is called.\r\n * @memberof Moveable.Roundable\r\n * @event roundGroup\r\n * @param {Moveable.Roundable.OnRoundGroup} - Parameters for the `roundGroup` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     targets: [target1, target2, target3],\r\n *     roundable: true,\r\n * });\r\n * moveable.on(\"roundGroupStart\", e => {\r\n *     console.log(e.targets);\r\n * }).on(\"roundGroup\", e => {\r\n *   e.events.forEach(ev => {\r\n *       ev.target.style.cssText += ev.cssText;\r\n *   });\r\n * }).on(\"roundGroupEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * When drag end the border area or controls, the `roundGroupEnd` event is called.\r\n * @memberof Moveable.Roundable\r\n * @event roundGroupEnd\r\n * @param {Moveable.Roundable.onRoundGroupEnd} - Parameters for the `roundGroupEnd` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     targets: [target1, target2, target3],\r\n *     roundable: true,\r\n * });\r\n * moveable.on(\"roundGroupStart\", e => {\r\n *     console.log(e.targets);\r\n * }).on(\"roundGroup\", e => {\r\n *     e.events.forEach(ev => {\r\n *         ev.target.style.cssText += ev.cssText;\r\n *     });\r\n * }).on(\"roundGroupEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\n\nfunction isIdentityMatrix(matrix, is3d) {\r\n    var n = is3d ? 4 : 3;\r\n    var identityMatrix = createIdentityMatrix(n);\r\n    var value = \"matrix\".concat(is3d ? \"3d\" : \"\", \"(\").concat(identityMatrix.join(\",\"), \")\");\r\n    return matrix === value || matrix === \"matrix(1,0,0,1,0,0)\";\r\n}\r\nvar BeforeRenderable = {\r\n    isPinch: true,\r\n    name: \"beforeRenderable\",\r\n    props: [],\r\n    events: [\r\n        \"beforeRenderStart\",\r\n        \"beforeRender\",\r\n        \"beforeRenderEnd\",\r\n        \"beforeRenderGroupStart\",\r\n        \"beforeRenderGroup\",\r\n        \"beforeRenderGroupEnd\",\r\n    ],\r\n    dragRelation: \"weak\",\r\n    setTransform: function (moveable, e) {\r\n        var _a = moveable.state, is3d = _a.is3d, targetMatrix = _a.targetMatrix, inlineTransform = _a.inlineTransform;\r\n        var cssMatrix = is3d\r\n            ? \"matrix3d(\".concat(targetMatrix.join(\",\"), \")\")\r\n            : \"matrix(\".concat(convertMatrixtoCSS(targetMatrix, true), \")\");\r\n        var startTransform = !inlineTransform || inlineTransform === \"none\" ? cssMatrix : inlineTransform;\r\n        e.datas.startTransforms = isIdentityMatrix(startTransform, is3d) ? [] : splitSpace(startTransform);\r\n    },\r\n    resetStyle: function (e) {\r\n        var datas = e.datas;\r\n        datas.nextStyle = {};\r\n        datas.nextTransforms = e.datas.startTransforms;\r\n        datas.nextTransformAppendedIndexes = [];\r\n    },\r\n    fillDragStartParams: function (moveable, e) {\r\n        return fillParams(moveable, e, {\r\n            setTransform: function (transform) {\r\n                e.datas.startTransforms = isArray(transform) ? transform : splitSpace(transform);\r\n            },\r\n            isPinch: !!e.isPinch,\r\n        });\r\n    },\r\n    fillDragParams: function (moveable, e) {\r\n        return fillParams(moveable, e, {\r\n            isPinch: !!e.isPinch,\r\n        });\r\n    },\r\n    dragStart: function (moveable, e) {\r\n        this.setTransform(moveable, e);\r\n        this.resetStyle(e);\r\n        triggerEvent(moveable, \"onBeforeRenderStart\", this.fillDragStartParams(moveable, e));\r\n    },\r\n    drag: function (moveable, e) {\r\n        if (!e.datas.startTransforms) {\r\n            this.setTransform(moveable, e);\r\n        }\r\n        this.resetStyle(e);\r\n        triggerEvent(moveable, \"onBeforeRender\", fillParams(moveable, e, {\r\n            isPinch: !!e.isPinch,\r\n        }));\r\n    },\r\n    dragEnd: function (moveable, e) {\r\n        if (!e.datas.startTransforms) {\r\n            this.setTransform(moveable, e);\r\n            this.resetStyle(e);\r\n        }\r\n        triggerEvent(moveable, \"onBeforeRenderEnd\", fillParams(moveable, e, {\r\n            isPinch: !!e.isPinch,\r\n            isDrag: e.isDrag,\r\n        }));\r\n    },\r\n    dragGroupStart: function (moveable, e) {\r\n        var _this = this;\r\n        this.dragStart(moveable, e);\r\n        var events = fillChildEvents(moveable, \"beforeRenderable\", e);\r\n        var moveables = moveable.moveables;\r\n        var params = events.map(function (childEvent, i) {\r\n            var childMoveable = moveables[i];\r\n            _this.setTransform(childMoveable, childEvent);\r\n            _this.resetStyle(childEvent);\r\n            return _this.fillDragStartParams(childMoveable, childEvent);\r\n        });\r\n        triggerEvent(moveable, \"onBeforeRenderGroupStart\", fillParams(moveable, e, {\r\n            isPinch: !!e.isPinch,\r\n            targets: moveable.props.targets,\r\n            setTransform: function () { },\r\n            events: params,\r\n        }));\r\n    },\r\n    dragGroup: function (moveable, e) {\r\n        var _this = this;\r\n        this.drag(moveable, e);\r\n        var events = fillChildEvents(moveable, \"beforeRenderable\", e);\r\n        var moveables = moveable.moveables;\r\n        var params = events.map(function (childEvent, i) {\r\n            var childMoveable = moveables[i];\r\n            _this.resetStyle(childEvent);\r\n            return _this.fillDragParams(childMoveable, childEvent);\r\n        });\r\n        triggerEvent(moveable, \"onBeforeRenderGroup\", fillParams(moveable, e, {\r\n            isPinch: !!e.isPinch,\r\n            targets: moveable.props.targets,\r\n            events: params,\r\n        }));\r\n    },\r\n    dragGroupEnd: function (moveable, e) {\r\n        this.dragEnd(moveable, e);\r\n        triggerEvent(moveable, \"onBeforeRenderGroupEnd\", fillParams(moveable, e, {\r\n            isPinch: !!e.isPinch,\r\n            isDrag: e.isDrag,\r\n            targets: moveable.props.targets,\r\n        }));\r\n    },\r\n    dragControlStart: function (moveable, e) {\r\n        return this.dragStart(moveable, e);\r\n    },\r\n    dragControl: function (moveable, e) {\r\n        return this.drag(moveable, e);\r\n    },\r\n    dragControlEnd: function (moveable, e) {\r\n        return this.dragEnd(moveable, e);\r\n    },\r\n    dragGroupControlStart: function (moveable, e) {\r\n        return this.dragGroupStart(moveable, e);\r\n    },\r\n    dragGroupControl: function (moveable, e) {\r\n        return this.dragGroup(moveable, e);\r\n    },\r\n    dragGroupControlEnd: function (moveable, e) {\r\n        return this.dragGroupEnd(moveable, e);\r\n    },\r\n};\n\nvar Renderable = {\r\n    name: \"renderable\",\r\n    props: [],\r\n    events: [\r\n        \"renderStart\",\r\n        \"render\",\r\n        \"renderEnd\",\r\n        \"renderGroupStart\",\r\n        \"renderGroup\",\r\n        \"renderGroupEnd\",\r\n    ],\r\n    dragRelation: \"weak\",\r\n    dragStart: function (moveable, e) {\r\n        triggerEvent(moveable, \"onRenderStart\", fillParams(moveable, e, {\r\n            isPinch: !!e.isPinch,\r\n        }));\r\n    },\r\n    drag: function (moveable, e) {\r\n        triggerEvent(moveable, \"onRender\", this.fillDragParams(moveable, e));\r\n    },\r\n    dragAfter: function (moveable, e) {\r\n        return this.drag(moveable, e);\r\n    },\r\n    dragEnd: function (moveable, e) {\r\n        triggerEvent(moveable, \"onRenderEnd\", this.fillDragEndParams(moveable, e));\r\n    },\r\n    dragGroupStart: function (moveable, e) {\r\n        triggerEvent(moveable, \"onRenderGroupStart\", fillParams(moveable, e, {\r\n            isPinch: !!e.isPinch,\r\n            targets: moveable.props.targets,\r\n        }));\r\n    },\r\n    dragGroup: function (moveable, e) {\r\n        var _this = this;\r\n        var events = fillChildEvents(moveable, \"beforeRenderable\", e);\r\n        var moveables = moveable.moveables;\r\n        var params = events.map(function (childEvent, i) {\r\n            var childMoveable = moveables[i];\r\n            return _this.fillDragParams(childMoveable, childEvent);\r\n        });\r\n        triggerEvent(moveable, \"onRenderGroup\", fillParams(moveable, e, __assign(__assign({ isPinch: !!e.isPinch, targets: moveable.props.targets, transform: getNextTransformText(e), transformObject: {} }, fillCSSObject(getNextStyle(e))), { events: params })));\r\n    },\r\n    dragGroupEnd: function (moveable, e) {\r\n        var _this = this;\r\n        var events = fillChildEvents(moveable, \"beforeRenderable\", e);\r\n        var moveables = moveable.moveables;\r\n        var params = events.map(function (childEvent, i) {\r\n            var childMoveable = moveables[i];\r\n            return _this.fillDragEndParams(childMoveable, childEvent);\r\n        });\r\n        triggerEvent(moveable, \"onRenderGroupEnd\", fillParams(moveable, e, __assign({ isPinch: !!e.isPinch, isDrag: e.isDrag, targets: moveable.props.targets, events: params, transformObject: {}, transform: getNextTransformText(e) }, fillCSSObject(getNextStyle(e)))));\r\n    },\r\n    dragControlStart: function (moveable, e) {\r\n        return this.dragStart(moveable, e);\r\n    },\r\n    dragControl: function (moveable, e) {\r\n        return this.drag(moveable, e);\r\n    },\r\n    dragControlAfter: function (moveable, e) {\r\n        return this.dragAfter(moveable, e);\r\n    },\r\n    dragControlEnd: function (moveable, e) {\r\n        return this.dragEnd(moveable, e);\r\n    },\r\n    dragGroupControlStart: function (moveable, e) {\r\n        return this.dragGroupStart(moveable, e);\r\n    },\r\n    dragGroupControl: function (moveable, e) {\r\n        return this.dragGroup(moveable, e);\r\n    },\r\n    dragGroupControlEnd: function (moveable, e) {\r\n        return this.dragGroupEnd(moveable, e);\r\n    },\r\n    fillDragParams: function (moveable, e) {\r\n        var transformObject = {};\r\n        parse(getNextTransforms(e) || []).forEach(function (matrixInfo) {\r\n            transformObject[matrixInfo.name] = matrixInfo.functionValue;\r\n        });\r\n        return fillParams(moveable, e, __assign({ isPinch: !!e.isPinch, transformObject: transformObject, transform: getNextTransformText(e) }, fillCSSObject(getNextStyle(e))));\r\n    },\r\n    fillDragEndParams: function (moveable, e) {\r\n        var transformObject = {};\r\n        parse(getNextTransforms(e) || []).forEach(function (matrixInfo) {\r\n            transformObject[matrixInfo.name] = matrixInfo.functionValue;\r\n        });\r\n        return fillParams(moveable, e, __assign({ isPinch: !!e.isPinch, isDrag: e.isDrag, transformObject: transformObject, transform: getNextTransformText(e) }, fillCSSObject(getNextStyle(e))));\r\n    },\r\n};\n\nfunction triggerAble(moveable, moveableAbles, eventOperations, eventAffix, eventType, e, requestInstant) {\r\n    // pre setting\r\n    e.clientDistX = e.distX;\r\n    e.clientDistY = e.distY;\r\n    var isStart = eventType === \"Start\";\r\n    var isEnd = eventType === \"End\";\r\n    var isAfter = eventType === \"After\";\r\n    var target = moveable.state.target;\r\n    var isRequest = e.isRequest;\r\n    var isControl = eventAffix.indexOf(\"Control\") > -1;\r\n    if (!target\r\n        || (isStart && isControl && !isRequest && moveable.areaElement === e.inputEvent.target)) {\r\n        return false;\r\n    }\r\n    var ables = __spreadArray([], __read(moveableAbles), false);\r\n    if (isRequest) {\r\n        var requestAble_1 = e.requestAble;\r\n        if (!ables.some(function (able) { return able.name === requestAble_1; })) {\r\n            ables.push.apply(ables, __spreadArray([], __read(moveable.props.ables.filter(function (able) { return able.name === requestAble_1; })), false));\r\n        }\r\n    }\r\n    if (!ables.length || ables.every(function (able) { return able.dragRelation; })) {\r\n        return false;\r\n    }\r\n    // \"drag\" \"Control\" \"After\"\r\n    var inputEvent = e.inputEvent;\r\n    var inputTarget;\r\n    if (isEnd && inputEvent) {\r\n        inputTarget = document.elementFromPoint(e.clientX, e.clientY) || inputEvent.target;\r\n    }\r\n    var isDragStop = false;\r\n    var stop = function () {\r\n        var _a;\r\n        isDragStop = true;\r\n        (_a = e.stop) === null || _a === void 0 ? void 0 : _a.call(e);\r\n    };\r\n    var isFirstStart = isStart && (!moveable.targetGesto || !moveable.controlGesto\r\n        || (!moveable.targetGesto.isFlag() || !moveable.controlGesto.isFlag()));\r\n    if (isFirstStart) {\r\n        moveable.updateRect(eventType, true, false);\r\n    }\r\n    // trigger ables\r\n    var datas = e.datas;\r\n    var gestoType = isControl ? \"controlGesto\" : \"targetGesto\";\r\n    var prevGesto = moveable[gestoType];\r\n    var trigger = function (able, eventName, conditionName) {\r\n        if (!(eventName in able) || prevGesto !== moveable[gestoType]) {\r\n            return false;\r\n        }\r\n        var ableName = able.name;\r\n        var nextDatas = datas[ableName] || (datas[ableName] = {});\r\n        if (isStart) {\r\n            nextDatas.isEventStart = !conditionName\r\n                || !able[conditionName] || able[conditionName](moveable, e);\r\n        }\r\n        if (!nextDatas.isEventStart) {\r\n            return false;\r\n        }\r\n        var result = able[eventName](moveable, __assign(__assign({}, e), { stop: stop, datas: nextDatas, originalDatas: datas, inputTarget: inputTarget }));\r\n        moveable._emitter.off();\r\n        if (isStart && result === false) {\r\n            nextDatas.isEventStart = false;\r\n        }\r\n        return result;\r\n    };\r\n    // unset ables for first drag start\r\n    if (isFirstStart) {\r\n        ables.forEach(function (able) {\r\n            able.unset && able.unset(moveable);\r\n        });\r\n    }\r\n    // BeforeRenderable\r\n    trigger(BeforeRenderable, \"drag\".concat(eventAffix).concat(eventType));\r\n    var forceEndedCount = 0;\r\n    var updatedCount = 0;\r\n    eventOperations.forEach(function (eventOperation) {\r\n        if (isDragStop) {\r\n            return false;\r\n        }\r\n        var eventName = \"\".concat(eventOperation).concat(eventAffix).concat(eventType);\r\n        var conditionName = \"\".concat(eventOperation).concat(eventAffix, \"Condition\");\r\n        if (eventType === \"\" && !isRequest) {\r\n            // Convert distX, distY\r\n            convertDragDist(moveable.state, e);\r\n        }\r\n        // const isGroup = eventAffix.indexOf(\"Group\") > -1;\r\n        var eventAbles = ables.filter(function (able) { return able[eventName]; });\r\n        eventAbles = eventAbles.filter(function (able, i) {\r\n            return able.name && eventAbles.indexOf(able) === i;\r\n        });\r\n        var results = eventAbles.filter(function (able) { return trigger(able, eventName, conditionName); });\r\n        var isUpdate = results.length;\r\n        // end ables\r\n        if (isDragStop) {\r\n            ++forceEndedCount;\r\n        }\r\n        if (isUpdate) {\r\n            ++updatedCount;\r\n        }\r\n        if (!isDragStop && isStart && eventAbles.length && !isUpdate) {\r\n            forceEndedCount += eventAbles.filter(function (able) {\r\n                var ableName = able.name;\r\n                var nextDatas = datas[ableName];\r\n                if (nextDatas.isEventStart) {\r\n                    if (able.dragRelation === \"strong\") {\r\n                        return false;\r\n                    }\r\n                    // stop drag\r\n                    return true;\r\n                }\r\n                // pre stop drag\r\n                return false;\r\n            }).length ? 1 : 0;\r\n        }\r\n    });\r\n    if (!isAfter || updatedCount) {\r\n        trigger(Renderable, \"drag\".concat(eventAffix).concat(eventType));\r\n    }\r\n    // stop gesto condition\r\n    var isForceEnd = prevGesto !== moveable[gestoType] || forceEndedCount === eventOperations.length;\r\n    if (isEnd || isDragStop || isForceEnd) {\r\n        moveable.state.gestos = {};\r\n        if (moveable.moveables) {\r\n            moveable.moveables.forEach(function (childMoveable) {\r\n                childMoveable.state.gestos = {};\r\n            });\r\n        }\r\n        ables.forEach(function (able) {\r\n            able.unset && able.unset(moveable);\r\n        });\r\n    }\r\n    if (isStart && !isForceEnd && !isRequest && updatedCount && moveable.props.preventDefault) {\r\n        e === null || e === void 0 ? void 0 : e.preventDefault();\r\n    }\r\n    if (moveable.isUnmounted || isForceEnd) {\r\n        return false;\r\n    }\r\n    if ((!isStart && updatedCount && !requestInstant) || isEnd) {\r\n        var flushSync = moveable.props.flushSync || defaultSync;\r\n        flushSync(function () {\r\n            moveable.updateRect(isEnd ? eventType : \"\", true, false);\r\n            moveable.forceUpdate();\r\n        });\r\n    }\r\n    if (!isStart && !isEnd && !isAfter && updatedCount && !requestInstant) {\r\n        triggerAble(moveable, moveableAbles, eventOperations, eventAffix, eventType + \"After\", e);\r\n    }\r\n    return true;\r\n}\r\nfunction checkMoveableTarget(moveable, isControl) {\r\n    return function (e, target) {\r\n        var _a;\r\n        if (target === void 0) { target = e.inputEvent.target; }\r\n        var eventTarget = target;\r\n        var areaElement = moveable.areaElement;\r\n        var dragTargetElement = moveable._dragTarget;\r\n        if (!dragTargetElement || (!isControl && ((_a = moveable.controlGesto) === null || _a === void 0 ? void 0 : _a.isFlag()))) {\r\n            return false;\r\n        }\r\n        return eventTarget === dragTargetElement\r\n            || dragTargetElement.contains(eventTarget)\r\n            || eventTarget === areaElement\r\n            || (!moveable.isMoveableElement(eventTarget) && !moveable.controlBox.contains(eventTarget))\r\n            || hasClass(eventTarget, \"moveable-area\")\r\n            || hasClass(eventTarget, \"moveable-padding\")\r\n            || hasClass(eventTarget, \"moveable-edgeDraggable\");\r\n    };\r\n}\r\nfunction getTargetAbleGesto(moveable, moveableTarget, eventAffix) {\r\n    var controlBox = moveable.controlBox;\r\n    var targets = [];\r\n    var props = moveable.props;\r\n    var dragArea = props.dragArea;\r\n    var target = moveable.state.target;\r\n    var dragTarget = props.dragTarget;\r\n    targets.push(controlBox);\r\n    if (!dragArea || dragTarget) {\r\n        targets.push(moveableTarget);\r\n    }\r\n    if (!dragArea && dragTarget && target && moveableTarget !== target && props.dragTargetSelf) {\r\n        targets.push(target);\r\n    }\r\n    var checkTarget = checkMoveableTarget(moveable);\r\n    return getAbleGesto(moveable, targets, \"targetAbles\", eventAffix, {\r\n        dragStart: checkTarget,\r\n        pinchStart: checkTarget,\r\n    });\r\n}\r\nfunction getControlAbleGesto(moveable, eventAffix) {\r\n    var controlBox = moveable.controlBox;\r\n    var targets = [];\r\n    targets.push(controlBox);\r\n    var checkTarget = checkMoveableTarget(moveable, true);\r\n    var checkControlTarget = function (e, target) {\r\n        if (target === void 0) { target = e.inputEvent.target; }\r\n        if (target === controlBox) {\r\n            return true;\r\n        }\r\n        var result = checkTarget(e, target);\r\n        return !result;\r\n    };\r\n    return getAbleGesto(moveable, targets, \"controlAbles\", eventAffix, {\r\n        dragStart: checkControlTarget,\r\n        pinchStart: checkControlTarget,\r\n    });\r\n}\r\nfunction getAbleGesto(moveable, target, ableType, eventAffix, conditionFunctions) {\r\n    if (conditionFunctions === void 0) { conditionFunctions = {}; }\r\n    var isTargetAbles = ableType === \"targetAbles\";\r\n    var _a = moveable.props, pinchOutside = _a.pinchOutside, pinchThreshold = _a.pinchThreshold, preventClickEventOnDrag = _a.preventClickEventOnDrag, preventClickDefault = _a.preventClickDefault, checkInput = _a.checkInput, dragFocusedInput = _a.dragFocusedInput, _b = _a.preventDefault, preventDefault = _b === void 0 ? true : _b, _c = _a.preventRightClick, preventRightClick = _c === void 0 ? true : _c, _d = _a.preventWheelClick, preventWheelClick = _d === void 0 ? true : _d, dragContaienrOption = _a.dragContainer;\r\n    var dragContainer = getRefTarget(dragContaienrOption, true);\r\n    var options = {\r\n        preventDefault: preventDefault,\r\n        preventRightClick: preventRightClick,\r\n        preventWheelClick: preventWheelClick,\r\n        container: dragContainer || getWindow(moveable.getControlBoxElement()),\r\n        pinchThreshold: pinchThreshold,\r\n        pinchOutside: pinchOutside,\r\n        preventClickEventOnDrag: isTargetAbles ? preventClickEventOnDrag : false,\r\n        preventClickEventOnDragStart: isTargetAbles ? preventClickDefault : false,\r\n        preventClickEventByCondition: isTargetAbles ? null : function (e) {\r\n            return moveable.controlBox.contains(e.target);\r\n        },\r\n        checkInput: isTargetAbles ? checkInput : false,\r\n        dragFocusedInput: dragFocusedInput,\r\n    };\r\n    var gesto = new Gesto(target, options);\r\n    var isControl = eventAffix === \"Control\";\r\n    [\"drag\", \"pinch\"].forEach(function (eventOperation) {\r\n        [\"Start\", \"\", \"End\"].forEach(function (eventType) {\r\n            gesto.on(\"\".concat(eventOperation).concat(eventType), function (e) {\r\n                var _a;\r\n                var eventName = e.eventType;\r\n                var isPinchScheduled = eventOperation === \"drag\" && e.isPinch;\r\n                if (conditionFunctions[eventName] && !conditionFunctions[eventName](e)) {\r\n                    e.stop();\r\n                    return;\r\n                }\r\n                if (isPinchScheduled) {\r\n                    return;\r\n                }\r\n                var eventOperations = eventOperation === \"drag\" ? [eventOperation] : [\"drag\", eventOperation];\r\n                var moveableAbles = __spreadArray([], __read(moveable[ableType]), false);\r\n                var result = triggerAble(moveable, moveableAbles, eventOperations, eventAffix, eventType, e);\r\n                if (!result) {\r\n                    e.stop();\r\n                }\r\n                else if (moveable.props.stopPropagation || (eventType === \"Start\" && isControl)) {\r\n                    (_a = e === null || e === void 0 ? void 0 : e.inputEvent) === null || _a === void 0 ? void 0 : _a.stopPropagation();\r\n                }\r\n            });\r\n        });\r\n    });\r\n    return gesto;\r\n}\n\nvar EventManager = /*#__PURE__*/ (function () {\r\n    function EventManager(target, moveable, eventName) {\r\n        var _this = this;\r\n        this.target = target;\r\n        this.moveable = moveable;\r\n        this.eventName = eventName;\r\n        this.ables = [];\r\n        this._onEvent = function (e) {\r\n            var eventName = _this.eventName;\r\n            var moveable = _this.moveable;\r\n            if (moveable.state.disableNativeEvent) {\r\n                return;\r\n            }\r\n            _this.ables.forEach(function (able) {\r\n                able[eventName](moveable, {\r\n                    inputEvent: e,\r\n                });\r\n            });\r\n        };\r\n        target.addEventListener(eventName.toLowerCase(), this._onEvent);\r\n    }\r\n    EventManager.prototype.setAbles = function (ables) {\r\n        this.ables = ables;\r\n    };\r\n    EventManager.prototype.destroy = function () {\r\n        this.target.removeEventListener(this.eventName.toLowerCase(), this._onEvent);\r\n        this.target = null;\r\n        this.moveable = null;\r\n    };\r\n    return EventManager;\r\n}());\n\nfunction calculateMatrixStack(target, container, rootContainer, isAbsolute3d) {\r\n    var _a;\r\n    if (rootContainer === void 0) { rootContainer = container; }\r\n    var _b = getMatrixStackInfo(target, container), matrixes = _b.matrixes, is3d = _b.is3d, prevTargetMatrix = _b.targetMatrix, transformOrigin = _b.transformOrigin, targetOrigin = _b.targetOrigin, offsetContainer = _b.offsetContainer, hasFixed = _b.hasFixed, containerZoom = _b.zoom; // prevMatrix\r\n    var _c = getCachedMatrixContainerInfo(offsetContainer, rootContainer), rootMatrixes = _c.matrixes, isRoot3d = _c.is3d, offsetRootContainer = _c.offsetContainer, rootZoom = _c.zoom; // prevRootMatrix\r\n    // if (rootContainer === document.body) {\r\n    //     console.log(offsetContainer, rootContainer, rootMatrixes);\r\n    // }\r\n    var isNext3d = isAbsolute3d || isRoot3d || is3d;\r\n    var n = isNext3d ? 4 : 3;\r\n    var isSVGGraphicElement = target.tagName.toLowerCase() !== \"svg\" && \"ownerSVGElement\" in target;\r\n    var targetMatrix = prevTargetMatrix;\r\n    // let allMatrix = prevMatrix ? convertDimension(prevMatrix, prevN!, n) : createIdentityMatrix(n);\r\n    // let rootMatrix = prevRootMatrix ? convertDimension(prevRootMatrix, prevN!, n) : createIdentityMatrix(n);\r\n    // let beforeMatrix = prevMatrix ? convertDimension(prevMatrix, prevN!, n) : createIdentityMatrix(n);\r\n    var allMatrix = createIdentityMatrix(n);\r\n    var rootMatrix = createIdentityMatrix(n);\r\n    var beforeMatrix = createIdentityMatrix(n);\r\n    var offsetMatrix = createIdentityMatrix(n);\r\n    var length = matrixes.length;\r\n    var nextRootMatrixes = rootMatrixes.map(function (info) {\r\n        return __assign(__assign({}, info), { matrix: info.matrix ? __spreadArray([], __read(info.matrix), false) : undefined });\r\n    }).reverse();\r\n    matrixes.reverse();\r\n    if (!is3d && isNext3d) {\r\n        targetMatrix = convertDimension(targetMatrix, 3, 4);\r\n        convert3DMatrixes(matrixes);\r\n    }\r\n    if (!isRoot3d && isNext3d) {\r\n        convert3DMatrixes(nextRootMatrixes);\r\n    }\r\n    // rootMatrix = (...) -> container -> offset -> absolute -> offset -> absolute(targetMatrix)\r\n    // rootMatrixBeforeOffset = lastOffsetMatrix -> (...) -> container\r\n    // beforeMatrix = (... -> container -> offset -> absolute) -> offset -> absolute(targetMatrix)\r\n    // offsetMatrix = (... -> container -> offset -> absolute -> offset) -> absolute(targetMatrix)\r\n    nextRootMatrixes.forEach(function (info) {\r\n        rootMatrix = multiply(rootMatrix, info.matrix, n);\r\n    });\r\n    var originalRootContainer = rootContainer || getDocumentBody(target);\r\n    var endContainer = ((_a = nextRootMatrixes[0]) === null || _a === void 0 ? void 0 : _a.target)\r\n        || getOffsetInfo(originalRootContainer, originalRootContainer, true).offsetParent;\r\n    var rootMatrixBeforeOffset = nextRootMatrixes.slice(1).reduce(function (matrix, info) {\r\n        return multiply(matrix, info.matrix, n);\r\n    }, createIdentityMatrix(n));\r\n    matrixes.forEach(function (info, i) {\r\n        if (length - 2 === i) {\r\n            // length - 3\r\n            beforeMatrix = allMatrix.slice();\r\n        }\r\n        if (length - 1 === i) {\r\n            // length - 2\r\n            offsetMatrix = allMatrix.slice();\r\n        }\r\n        // calculate for SVGElement\r\n        if (!info.matrix) {\r\n            var nextInfo = matrixes[i + 1];\r\n            var offset = getSVGOffset(info, nextInfo, endContainer, n, multiply(rootMatrixBeforeOffset, allMatrix, n));\r\n            info.matrix = createOriginMatrix(offset, n);\r\n        }\r\n        allMatrix = multiply(allMatrix, info.matrix, n);\r\n    });\r\n    var isMatrix3d = !isSVGGraphicElement && is3d;\r\n    if (!targetMatrix) {\r\n        targetMatrix = createIdentityMatrix(isMatrix3d ? 4 : 3);\r\n    }\r\n    var targetTransform = makeMatrixCSS(isSVGGraphicElement && targetMatrix.length === 16\r\n        ? convertDimension(targetMatrix, 4, 3) : targetMatrix, isMatrix3d);\r\n    var originalRootMatrix = rootMatrix;\r\n    rootMatrix = ignoreDimension(rootMatrix, n, n);\r\n    return {\r\n        hasZoom: containerZoom !== 1 || rootZoom !== 1,\r\n        hasFixed: hasFixed,\r\n        matrixes: matrixes,\r\n        rootMatrix: rootMatrix,\r\n        originalRootMatrix: originalRootMatrix,\r\n        beforeMatrix: beforeMatrix,\r\n        offsetMatrix: offsetMatrix,\r\n        allMatrix: allMatrix,\r\n        targetMatrix: targetMatrix,\r\n        targetTransform: targetTransform,\r\n        inlineTransform: target.style.transform,\r\n        transformOrigin: transformOrigin,\r\n        targetOrigin: targetOrigin,\r\n        is3d: isNext3d,\r\n        offsetContainer: offsetContainer,\r\n        offsetRootContainer: offsetRootContainer,\r\n    };\r\n}\n\nfunction calculateElementInfo(target, container, rootContainer, isAbsolute3d) {\r\n    if (rootContainer === void 0) { rootContainer = container; }\r\n    var width = 0;\r\n    var height = 0;\r\n    var rotation = 0;\r\n    var allResult = {};\r\n    var sizes = getSize(target);\r\n    if (target) {\r\n        width = sizes.offsetWidth;\r\n        height = sizes.offsetHeight;\r\n    }\r\n    if (target) {\r\n        var result = calculateMatrixStack(target, container, rootContainer, isAbsolute3d);\r\n        var position = calculateElementPosition(result.allMatrix, result.transformOrigin, width, height);\r\n        allResult = __assign(__assign({}, result), position);\r\n        var rotationPosition = calculateElementPosition(result.allMatrix, [50, 50], 100, 100);\r\n        rotation = getRotationRad([rotationPosition.pos1, rotationPosition.pos2], rotationPosition.direction);\r\n    }\r\n    var n = isAbsolute3d ? 4 : 3;\r\n    return __assign(__assign(__assign({ hasZoom: false, width: width, height: height, rotation: rotation }, sizes), { originalRootMatrix: createIdentityMatrix(n), rootMatrix: createIdentityMatrix(n), beforeMatrix: createIdentityMatrix(n), offsetMatrix: createIdentityMatrix(n), allMatrix: createIdentityMatrix(n), targetMatrix: createIdentityMatrix(n), targetTransform: \"\", inlineTransform: \"\", transformOrigin: [0, 0], targetOrigin: [0, 0], is3d: !!isAbsolute3d, left: 0, top: 0, right: 0, bottom: 0, origin: [0, 0], pos1: [0, 0], pos2: [0, 0], pos3: [0, 0], pos4: [0, 0], direction: 1, hasFixed: false, offsetContainer: null, offsetRootContainer: null, matrixes: [] }), allResult);\r\n}\r\nfunction getElementInfo(target, container, rootContainer) {\r\n    if (rootContainer === void 0) { rootContainer = container; }\r\n    return calculateElementInfo(target, container, rootContainer, true);\r\n}\n\nfunction getMoveableTargetInfo(moveableElement, target, container, parentContainer, rootContainer, requestStyles) {\r\n    if (requestStyles === void 0) { requestStyles = []; }\r\n    var beforeDirection = 1;\r\n    var beforeOrigin = [0, 0];\r\n    var targetClientRect = resetClientRect();\r\n    var moveableClientRect = resetClientRect();\r\n    var containerClientRect = resetClientRect();\r\n    var rootContainerClientRect = resetClientRect();\r\n    var offsetDelta = [0, 0];\r\n    var style = {};\r\n    var result = calculateElementInfo(target, container, rootContainer, true);\r\n    if (target) {\r\n        var getStyle_1 = getCachedStyle(target);\r\n        requestStyles.forEach(function (name) {\r\n            style[name] = getStyle_1(name);\r\n        });\r\n        var n = result.is3d ? 4 : 3;\r\n        var beforePosition = calculateElementPosition(result.offsetMatrix, plus(result.transformOrigin, getOrigin(result.targetMatrix, n)), result.width, result.height);\r\n        beforeDirection = beforePosition.direction;\r\n        beforeOrigin = plus(beforePosition.origin, [beforePosition.left - result.left, beforePosition.top - result.top]);\r\n        rootContainerClientRect = getClientRect(result.offsetRootContainer);\r\n        var offsetContainer = getOffsetInfo(parentContainer, parentContainer, true).offsetParent\r\n            || result.offsetRootContainer;\r\n        if (result.hasZoom) {\r\n            var absoluteTargetPosition = calculateElementPosition(multiply(result.originalRootMatrix, result.allMatrix), result.transformOrigin, result.width, result.height);\r\n            var absoluteContainerPosition = calculateElementPosition(result.originalRootMatrix, getTransformOriginArray(getCachedStyle(offsetContainer)(\"transformOrigin\")).map(function (pos) { return parseFloat(pos); }), offsetContainer.offsetWidth, offsetContainer.offsetHeight);\r\n            targetClientRect = getClientRectByPosition(absoluteTargetPosition, rootContainerClientRect);\r\n            containerClientRect = getClientRectByPosition(absoluteContainerPosition, rootContainerClientRect, offsetContainer, true);\r\n            if (moveableElement) {\r\n                var left = absoluteTargetPosition.left;\r\n                var top_1 = absoluteTargetPosition.top;\r\n                moveableClientRect = getClientRectByPosition({\r\n                    left: left,\r\n                    top: top_1,\r\n                    bottom: top_1,\r\n                    right: top_1,\r\n                }, rootContainerClientRect);\r\n            }\r\n        }\r\n        else {\r\n            targetClientRect = getClientRect(target);\r\n            containerClientRect = getCachedClientRect(offsetContainer);\r\n            if (moveableElement) {\r\n                moveableClientRect = getClientRect(moveableElement);\r\n            }\r\n            var containerClientRectLeft = containerClientRect.left, containerClientRectTop = containerClientRect.top, containterClientLeft = containerClientRect.clientLeft, containerClientTop = containerClientRect.clientTop;\r\n            var clientDelta = [\r\n                targetClientRect.left - containerClientRectLeft,\r\n                targetClientRect.top - containerClientRectTop,\r\n            ];\r\n            offsetDelta = minus(calculateInversePosition(result.rootMatrix, clientDelta, 4), [containterClientLeft + result.left, containerClientTop + result.top]);\r\n        }\r\n    }\r\n    return __assign({ targetClientRect: targetClientRect, containerClientRect: containerClientRect, moveableClientRect: moveableClientRect, rootContainerClientRect: rootContainerClientRect, beforeDirection: beforeDirection, beforeOrigin: beforeOrigin, originalBeforeOrigin: beforeOrigin, target: target, style: style, offsetDelta: offsetDelta }, result);\r\n}\n\nfunction getPersistState(rect) {\r\n    var pos1 = rect.pos1, pos2 = rect.pos2, pos3 = rect.pos3, pos4 = rect.pos4;\r\n    if (!pos1 || !pos2 || !pos3 || !pos4) {\r\n        return null;\r\n    }\r\n    var minPos = getMinMaxs([pos1, pos2, pos3, pos4]);\r\n    var posDelta = [minPos.minX, minPos.minY];\r\n    var origin = minus(rect.origin, posDelta);\r\n    pos1 = minus(pos1, posDelta);\r\n    pos2 = minus(pos2, posDelta);\r\n    pos3 = minus(pos3, posDelta);\r\n    pos4 = minus(pos4, posDelta);\r\n    return __assign(__assign({}, rect), { left: rect.left, top: rect.top, posDelta: posDelta, pos1: pos1, pos2: pos2, pos3: pos3, pos4: pos4, origin: origin, beforeOrigin: origin, \r\n        // originalBeforeOrigin: origin,\r\n        isPersisted: true });\r\n}\n\nvar MoveableManager = /*#__PURE__*/ (function (_super) {\r\n    __extends(MoveableManager, _super);\r\n    function MoveableManager() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.state = __assign({ container: null, gestos: {}, renderLines: [\r\n                [[0, 0], [0, 0]],\r\n                [[0, 0], [0, 0]],\r\n                [[0, 0], [0, 0]],\r\n                [[0, 0], [0, 0]],\r\n            ], renderPoses: [[0, 0], [0, 0], [0, 0], [0, 0]], disableNativeEvent: false, posDelta: [0, 0] }, getMoveableTargetInfo(null));\r\n        _this.renderState = {};\r\n        _this.enabledAbles = [];\r\n        _this.targetAbles = [];\r\n        _this.controlAbles = [];\r\n        _this.rotation = 0;\r\n        _this.scale = [1, 1];\r\n        _this.isMoveableMounted = false;\r\n        _this.isUnmounted = false;\r\n        _this.events = {\r\n            \"mouseEnter\": null,\r\n            \"mouseLeave\": null,\r\n        };\r\n        _this._emitter = new EventEmitter();\r\n        _this._prevOriginalDragTarget = null;\r\n        _this._originalDragTarget = null;\r\n        _this._prevDragTarget = null;\r\n        _this._dragTarget = null;\r\n        _this._prevPropTarget = null;\r\n        _this._propTarget = null;\r\n        _this._prevDragArea = false;\r\n        _this._isPropTargetChanged = false;\r\n        _this._hasFirstTarget = false;\r\n        _this._reiszeObserver = null;\r\n        _this._observerId = 0;\r\n        _this._mutationObserver = null;\r\n        _this._rootContainer = null;\r\n        _this._viewContainer = null;\r\n        _this._viewClassNames = [];\r\n        _this._store = {};\r\n        _this.checkUpdateRect = function () {\r\n            if (_this.isDragging()) {\r\n                return;\r\n            }\r\n            var parentMoveable = _this.props.parentMoveable;\r\n            if (parentMoveable) {\r\n                parentMoveable.checkUpdateRect();\r\n                return;\r\n            }\r\n            cancelAnimationFrame(_this._observerId);\r\n            _this._observerId = requestAnimationFrame(function () {\r\n                if (_this.isDragging()) {\r\n                    return;\r\n                }\r\n                _this.updateRect();\r\n            });\r\n        };\r\n        _this._onPreventClick = function (e) {\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n            // removeEvent(window, \"click\", this._onPreventClick, true);\r\n        };\r\n        return _this;\r\n    }\r\n    MoveableManager.prototype.render = function () {\r\n        var props = this.props;\r\n        var state = this.getState();\r\n        var parentPosition = props.parentPosition, className = props.className, propsTarget = props.target, zoom = props.zoom, cspNonce = props.cspNonce, translateZ = props.translateZ, ControlBoxElement = props.cssStyled, groupable = props.groupable, linePadding = props.linePadding, controlPadding = props.controlPadding;\r\n        this._checkUpdateRootContainer();\r\n        this.checkUpdate();\r\n        this.updateRenderPoses();\r\n        var _a = __read(parentPosition || [0, 0], 2), parentLeft = _a[0], parentTop = _a[1];\r\n        var left = state.left, top = state.top, stateTarget = state.target, direction = state.direction, hasFixed = state.hasFixed, offsetDelta = state.offsetDelta;\r\n        var groupTargets = props.targets;\r\n        var isDragging = this.isDragging();\r\n        var ableAttributes = {};\r\n        this.getEnabledAbles().forEach(function (able) {\r\n            ableAttributes[\"data-able-\".concat(able.name.toLowerCase())] = true;\r\n        });\r\n        var ableClassName = this._getAbleClassName();\r\n        var isDisplay = (groupTargets && groupTargets.length && (stateTarget || groupable))\r\n            || propsTarget\r\n            || (!this._hasFirstTarget && this.state.isPersisted);\r\n        var isVisible = this.controlBox || this.props.firstRenderState || this.props.persistData;\r\n        var translate = [left - parentLeft, top - parentTop];\r\n        if (!groupable && props.useAccuratePosition) {\r\n            translate[0] += offsetDelta[0];\r\n            translate[1] += offsetDelta[1];\r\n        }\r\n        var style = {\r\n            \"position\": hasFixed ? \"fixed\" : \"absolute\",\r\n            \"display\": isDisplay ? \"block\" : \"none\",\r\n            \"visibility\": isVisible ? \"visible\" : \"hidden\",\r\n            \"transform\": \"translate3d(\".concat(translate[0], \"px, \").concat(translate[1], \"px, \").concat(translateZ, \")\"),\r\n            \"--zoom\": zoom,\r\n            \"--zoompx\": \"\".concat(zoom, \"px\"),\r\n        };\r\n        if (linePadding) {\r\n            style[\"--moveable-line-padding\"] = linePadding;\r\n        }\r\n        if (controlPadding) {\r\n            style[\"--moveable-control-padding\"] = controlPadding;\r\n        }\r\n        return (React.createElement(ControlBoxElement, __assign({ cspNonce: cspNonce, ref: ref(this, \"controlBox\"), className: \"\".concat(prefix(\"control-box\", direction === -1 ? \"reverse\" : \"\", isDragging ? \"dragging\" : \"\"), \" \").concat(ableClassName, \" \").concat(className) }, ableAttributes, { onClick: this._onPreventClick, style: style }),\r\n            this.renderAbles(),\r\n            this._renderLines()));\r\n    };\r\n    MoveableManager.prototype.componentDidMount = function () {\r\n        this.isMoveableMounted = true;\r\n        this.isUnmounted = false;\r\n        var props = this.props;\r\n        var parentMoveable = props.parentMoveable, container = props.container;\r\n        this._checkUpdateRootContainer();\r\n        this._checkUpdateViewContainer();\r\n        this._updateTargets();\r\n        this._updateNativeEvents();\r\n        this._updateEvents();\r\n        this.updateCheckInput();\r\n        this._updateObserver(this.props);\r\n        if (!container && !parentMoveable && !this.state.isPersisted) {\r\n            this.updateRect(\"\", false, false);\r\n            this.forceUpdate();\r\n        }\r\n    };\r\n    MoveableManager.prototype.componentDidUpdate = function (prevProps) {\r\n        this._checkUpdateRootContainer();\r\n        this._checkUpdateViewContainer();\r\n        this._updateNativeEvents();\r\n        this._updateTargets();\r\n        this._updateEvents();\r\n        this.updateCheckInput();\r\n        this._updateObserver(prevProps);\r\n    };\r\n    MoveableManager.prototype.componentWillUnmount = function () {\r\n        var _a, _b;\r\n        this.isMoveableMounted = false;\r\n        this.isUnmounted = true;\r\n        this._emitter.off();\r\n        (_a = this._reiszeObserver) === null || _a === void 0 ? void 0 : _a.disconnect();\r\n        (_b = this._mutationObserver) === null || _b === void 0 ? void 0 : _b.disconnect();\r\n        var viewContainer = this._viewContainer;\r\n        if (viewContainer) {\r\n            this._changeAbleViewClassNames([]);\r\n        }\r\n        unsetGesto(this, false);\r\n        unsetGesto(this, true);\r\n        var events = this.events;\r\n        for (var name_1 in events) {\r\n            var manager = events[name_1];\r\n            manager && manager.destroy();\r\n        }\r\n    };\r\n    MoveableManager.prototype.getTargets = function () {\r\n        var target = this.props.target;\r\n        return target ? [target] : [];\r\n    };\r\n    /**\r\n     * Get the able used in MoveableManager.\r\n     * @method Moveable#getAble\r\n     * @param - able name\r\n     */\r\n    MoveableManager.prototype.getAble = function (ableName) {\r\n        var ables = this.props.ables || [];\r\n        return find(ables, function (able) { return able.name === ableName; });\r\n    };\r\n    MoveableManager.prototype.getContainer = function () {\r\n        var _a = this.props, parentMoveable = _a.parentMoveable, wrapperMoveable = _a.wrapperMoveable, container = _a.container;\r\n        return container\r\n            || (wrapperMoveable && wrapperMoveable.getContainer())\r\n            || (parentMoveable && parentMoveable.getContainer())\r\n            || this.controlBox.parentElement;\r\n    };\r\n    /**\r\n     * Returns the element of the control box.\r\n     * @method Moveable#getControlBoxElement\r\n     */\r\n    MoveableManager.prototype.getControlBoxElement = function () {\r\n        return this.controlBox;\r\n    };\r\n    /**\r\n     * Target element to be dragged in moveable\r\n     * @method Moveable#getDragElement\r\n     */\r\n    MoveableManager.prototype.getDragElement = function () {\r\n        return this._dragTarget;\r\n    };\r\n    /**\r\n     * Check if the target is an element included in the moveable.\r\n     * @method Moveable#isMoveableElement\r\n     * @param - the target\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * window.addEventListener(\"click\", e => {\r\n     *     if (!moveable.isMoveableElement(e.target)) {\r\n     *         moveable.target = e.target;\r\n     *     }\r\n     * });\r\n     */\r\n    MoveableManager.prototype.isMoveableElement = function (target) {\r\n        var _a;\r\n        return target && (((_a = target.getAttribute) === null || _a === void 0 ? void 0 : _a.call(target, \"class\")) || \"\").indexOf(PREFIX) > -1;\r\n    };\r\n    /**\r\n     * You can drag start the Moveable through the external `MouseEvent`or `TouchEvent`. (Angular: ngDragStart)\r\n     * @method Moveable#dragStart\r\n     * @param - external `MouseEvent`or `TouchEvent`\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * document.body.addEventListener(\"mousedown\", e => {\r\n     *     if (!moveable.isMoveableElement(e.target)) {\r\n     *          moveable.dragStart(e);\r\n     *     }\r\n     * });\r\n     */\r\n    MoveableManager.prototype.dragStart = function (e, target) {\r\n        if (target === void 0) { target = e.target; }\r\n        var targetGesto = this.targetGesto;\r\n        var controlGesto = this.controlGesto;\r\n        if (targetGesto && checkMoveableTarget(this)({ inputEvent: e }, target)) {\r\n            if (!targetGesto.isFlag()) {\r\n                targetGesto.triggerDragStart(e);\r\n            }\r\n        }\r\n        else if (controlGesto && this.isMoveableElement(target)) {\r\n            if (!controlGesto.isFlag()) {\r\n                controlGesto.triggerDragStart(e);\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * Hit test an element or rect on a moveable target.\r\n     * (100% = 100)\r\n     * @method Moveable#hitTest\r\n     * @param - element or rect to test\r\n     * @return - Get hit test rate (rate > 0 is hitted)\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * document.body.addEventListener(\"mousedown\", e => {\r\n     *     if (moveable.hitTest(e.target) > 0) {\r\n     *          console.log(\"hiited\");\r\n     *     }\r\n     * });\r\n     */\r\n    MoveableManager.prototype.hitTest = function (el) {\r\n        var _a = this.state, target = _a.target, pos1 = _a.pos1, pos2 = _a.pos2, pos3 = _a.pos3, pos4 = _a.pos4, targetClientRect = _a.targetClientRect;\r\n        if (!target) {\r\n            return 0;\r\n        }\r\n        var rect;\r\n        if (isNode(el)) {\r\n            var clientRect = el.getBoundingClientRect();\r\n            rect = {\r\n                left: clientRect.left,\r\n                top: clientRect.top,\r\n                width: clientRect.width,\r\n                height: clientRect.height,\r\n            };\r\n        }\r\n        else {\r\n            rect = __assign({ width: 0, height: 0 }, el);\r\n        }\r\n        var rectLeft = rect.left, rectTop = rect.top, rectWidth = rect.width, rectHeight = rect.height;\r\n        var points = fitPoints([pos1, pos2, pos4, pos3], targetClientRect);\r\n        var size = getOverlapSize(points, [\r\n            [rectLeft, rectTop],\r\n            [rectLeft + rectWidth, rectTop],\r\n            [rectLeft + rectWidth, rectTop + rectHeight],\r\n            [rectLeft, rectTop + rectHeight],\r\n        ]);\r\n        var totalSize = getAreaSize(points);\r\n        if (!size || !totalSize) {\r\n            return 0;\r\n        }\r\n        return Math.min(100, size / totalSize * 100);\r\n    };\r\n    /**\r\n     * Whether the coordinates are inside Moveable\r\n     * @method Moveable#isInside\r\n     * @param - x coordinate\r\n     * @param - y coordinate\r\n     * @return - True if the coordinate is in moveable or false\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * document.body.addEventListener(\"mousedown\", e => {\r\n     *     if (moveable.isInside(e.clientX, e.clientY)) {\r\n     *          console.log(\"inside\");\r\n     *     }\r\n     * });\r\n     */\r\n    MoveableManager.prototype.isInside = function (clientX, clientY) {\r\n        var _a = this.state, target = _a.target, pos1 = _a.pos1, pos2 = _a.pos2, pos3 = _a.pos3, pos4 = _a.pos4, targetClientRect = _a.targetClientRect;\r\n        if (!target) {\r\n            return false;\r\n        }\r\n        return isInside([clientX, clientY], fitPoints([pos1, pos2, pos4, pos3], targetClientRect));\r\n    };\r\n    /**\r\n     * If the width, height, left, and top of all elements change, update the shape of the moveable.\r\n     * @method Moveable#updateRect\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * window.addEventListener(\"resize\", e => {\r\n     *     moveable.updateRect();\r\n     * });\r\n     */\r\n    MoveableManager.prototype.updateRect = function (type, isTarget, isSetState) {\r\n        if (isSetState === void 0) { isSetState = true; }\r\n        var props = this.props;\r\n        var isSingle = !props.parentPosition && !props.wrapperMoveable;\r\n        if (isSingle) {\r\n            setStoreCache(true);\r\n        }\r\n        var parentMoveable = props.parentMoveable;\r\n        var state = this.state;\r\n        var target = (state.target || props.target);\r\n        var container = this.getContainer();\r\n        var rootContainer = parentMoveable\r\n            ? parentMoveable._rootContainer\r\n            : this._rootContainer;\r\n        var nextState = getMoveableTargetInfo(this.controlBox, target, container, container, rootContainer || container, this._getRequestStyles());\r\n        if (!target && this._hasFirstTarget && props.persistData) {\r\n            var persistState = getPersistState(props.persistData);\r\n            for (var name_2 in persistState) {\r\n                nextState[name_2] = persistState[name_2];\r\n            }\r\n        }\r\n        if (isSingle) {\r\n            setStoreCache();\r\n        }\r\n        this.updateState(nextState, parentMoveable ? false : isSetState);\r\n    };\r\n    /**\r\n     * Check if the moveable state is being dragged.\r\n     * @method Moveable#isDragging\r\n     * @param - If you want to check if able is dragging, specify ableName.\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * // false\r\n     * console.log(moveable.isDragging());\r\n     *\r\n     * moveable.on(\"drag\", () => {\r\n     *   // true\r\n     *   console.log(moveable.isDragging());\r\n     * });\r\n     */\r\n    MoveableManager.prototype.isDragging = function (ableName) {\r\n        var _a, _b;\r\n        var targetGesto = this.targetGesto;\r\n        var controlGesto = this.controlGesto;\r\n        if (targetGesto === null || targetGesto === void 0 ? void 0 : targetGesto.isFlag()) {\r\n            if (!ableName) {\r\n                return true;\r\n            }\r\n            var data = targetGesto.getEventData();\r\n            return !!((_a = data[ableName]) === null || _a === void 0 ? void 0 : _a.isEventStart);\r\n        }\r\n        if (controlGesto === null || controlGesto === void 0 ? void 0 : controlGesto.isFlag()) {\r\n            if (!ableName) {\r\n                return true;\r\n            }\r\n            var data = controlGesto.getEventData();\r\n            return !!((_b = data[ableName]) === null || _b === void 0 ? void 0 : _b.isEventStart);\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\n     * If the width, height, left, and top of the only target change, update the shape of the moveable.\r\n     * Use `.updateRect()` method\r\n     * @method Moveable#updateTarget\r\n     * @deprecated\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * moveable.updateTarget();\r\n     */\r\n    MoveableManager.prototype.updateTarget = function (type) {\r\n        this.updateRect(type, true);\r\n    };\r\n    /**\r\n     * You can get the vertex information, position and offset size information of the target based on the container.\r\n     * @method Moveable#getRect\r\n     * @return - The Rect Info\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * const rectInfo = moveable.getRect();\r\n     */\r\n    MoveableManager.prototype.getRect = function () {\r\n        var state = this.state;\r\n        var poses = getAbsolutePosesByState(this.state);\r\n        var _a = __read(poses, 4), pos1 = _a[0], pos2 = _a[1], pos3 = _a[2], pos4 = _a[3];\r\n        var rect = getRect(poses);\r\n        var offsetWidth = state.width, offsetHeight = state.height;\r\n        var width = rect.width, height = rect.height, left = rect.left, top = rect.top;\r\n        var statePos = [state.left, state.top];\r\n        var origin = plus(statePos, state.origin);\r\n        var beforeOrigin = plus(statePos, state.beforeOrigin);\r\n        var transformOrigin = state.transformOrigin;\r\n        return {\r\n            width: width,\r\n            height: height,\r\n            left: left,\r\n            top: top,\r\n            pos1: pos1,\r\n            pos2: pos2,\r\n            pos3: pos3,\r\n            pos4: pos4,\r\n            offsetWidth: offsetWidth,\r\n            offsetHeight: offsetHeight,\r\n            beforeOrigin: beforeOrigin,\r\n            origin: origin,\r\n            transformOrigin: transformOrigin,\r\n            rotation: this.getRotation(),\r\n        };\r\n    };\r\n    /**\r\n     * Get a manager that manages the moveable's state and props.\r\n     * @method Moveable#getManager\r\n     * @return - The Rect Info\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * const manager = moveable.getManager(); // real moveable class instance\r\n     */\r\n    MoveableManager.prototype.getManager = function () {\r\n        return this;\r\n    };\r\n    /**\r\n     * You can stop the dragging currently in progress through a method from outside.\r\n     * @method Moveable#stopDrag\r\n     * @return - The Rect Info\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * moveable.stopDrag();\r\n     */\r\n    MoveableManager.prototype.stopDrag = function (type) {\r\n        if (!type || type === \"target\") {\r\n            var gesto = this.targetGesto;\r\n            if ((gesto === null || gesto === void 0 ? void 0 : gesto.isIdle()) === false) {\r\n                unsetAbles(this, false);\r\n            }\r\n            gesto === null || gesto === void 0 ? void 0 : gesto.stop();\r\n        }\r\n        if (!type || type === \"control\") {\r\n            var gesto = this.controlGesto;\r\n            if ((gesto === null || gesto === void 0 ? void 0 : gesto.isIdle()) === false) {\r\n                unsetAbles(this, true);\r\n            }\r\n            gesto === null || gesto === void 0 ? void 0 : gesto.stop();\r\n        }\r\n    };\r\n    MoveableManager.prototype.getRotation = function () {\r\n        var _a = this.state, pos1 = _a.pos1, pos2 = _a.pos2, direction = _a.direction;\r\n        return getAbsoluteRotation(pos1, pos2, direction);\r\n    };\r\n    /**\r\n     * Request able through a method rather than an event.\r\n     * At the moment of execution, requestStart is executed,\r\n     * and then request and requestEnd can be executed through Requester.\r\n     * @method Moveable#request\r\n     * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Draggable.html#request|Draggable Requester}\r\n     * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Resizable.html#request|Resizable Requester}\r\n     * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Scalable.html#request|Scalable Requester}\r\n     * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Rotatable.html#request|Rotatable Requester}\r\n     * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.OriginDraggable.html#request|OriginDraggable Requester}\r\n     * @param - ableName\r\n     * @param - request to be able params.\r\n     * @param - If isInstant is true, request and requestEnd are executed immediately.\r\n     * @return - Able Requester. If there is no request in able, nothing will work.\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * // Instantly Request (requestStart - request - requestEnd)\r\n     * moveable.request(\"draggable\", { deltaX: 10, deltaY: 10 }, true);\r\n     *\r\n     * // Start move\r\n     * const requester = moveable.request(\"draggable\");\r\n     * requester.request({ deltaX: 10, deltaY: 10 });\r\n     * requester.request({ deltaX: 10, deltaY: 10 });\r\n     * requester.request({ deltaX: 10, deltaY: 10 });\r\n     * requester.requestEnd();\r\n     */\r\n    MoveableManager.prototype.request = function (ableName, param, isInstant) {\r\n        if (param === void 0) { param = {}; }\r\n        var self = this;\r\n        var props = self.props;\r\n        var manager = props.parentMoveable || props.wrapperMoveable || self;\r\n        var allAbles = manager.props.ables;\r\n        var groupable = props.groupable;\r\n        var requsetAble = find(allAbles, function (able) { return able.name === ableName; });\r\n        if (this.isDragging() || !requsetAble || !requsetAble.request) {\r\n            return {\r\n                request: function () {\r\n                    return this;\r\n                },\r\n                requestEnd: function () {\r\n                    return this;\r\n                },\r\n            };\r\n        }\r\n        var ableRequester = requsetAble.request(self);\r\n        var requestInstant = isInstant || param.isInstant;\r\n        var ableType = ableRequester.isControl ? \"controlAbles\" : \"targetAbles\";\r\n        var eventAffix = \"\".concat((groupable ? \"Group\" : \"\")).concat(ableRequester.isControl ? \"Control\" : \"\");\r\n        var moveableAbles = __spreadArray([], __read(manager[ableType]), false);\r\n        var requester = {\r\n            request: function (ableParam) {\r\n                triggerAble(self, moveableAbles, [\"drag\"], eventAffix, \"\", __assign(__assign({}, ableRequester.request(ableParam)), { requestAble: ableName, isRequest: true }), requestInstant);\r\n                return requester;\r\n            },\r\n            requestEnd: function () {\r\n                triggerAble(self, moveableAbles, [\"drag\"], eventAffix, \"End\", __assign(__assign({}, ableRequester.requestEnd()), { requestAble: ableName, isRequest: true }), requestInstant);\r\n                return requester;\r\n            },\r\n        };\r\n        triggerAble(self, moveableAbles, [\"drag\"], eventAffix, \"Start\", __assign(__assign({}, ableRequester.requestStart(param)), { requestAble: ableName, isRequest: true }), requestInstant);\r\n        return requestInstant ? requester.request(param).requestEnd() : requester;\r\n    };\r\n    /**\r\n     * moveable is the top level that manages targets\r\n     * `Single`: MoveableManager instance\r\n     * `Group`: MoveableGroup instance\r\n     * `IndividualGroup`: MoveableIndividaulGroup instance\r\n     * Returns leaf target MoveableManagers.\r\n     */\r\n    MoveableManager.prototype.getMoveables = function () {\r\n        return [this];\r\n    };\r\n    /**\r\n     * Remove the Moveable object and the events.\r\n     * @method Moveable#destroy\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * moveable.destroy();\r\n     */\r\n    MoveableManager.prototype.destroy = function () {\r\n        this.componentWillUnmount();\r\n    };\r\n    MoveableManager.prototype.updateRenderPoses = function () {\r\n        var state = this.getState();\r\n        var props = this.props;\r\n        var padding = props.padding;\r\n        var originalBeforeOrigin = state.originalBeforeOrigin, transformOrigin = state.transformOrigin, allMatrix = state.allMatrix, is3d = state.is3d, pos1 = state.pos1, pos2 = state.pos2, pos3 = state.pos3, pos4 = state.pos4, stateLeft = state.left, stateTop = state.top, isPersisted = state.isPersisted;\r\n        var zoom = props.zoom || 1;\r\n        if (!padding && zoom <= 1) {\r\n            state.renderPoses = [\r\n                pos1,\r\n                pos2,\r\n                pos3,\r\n                pos4,\r\n            ];\r\n            state.renderLines = [\r\n                [pos1, pos2],\r\n                [pos2, pos4],\r\n                [pos4, pos3],\r\n                [pos3, pos1],\r\n            ];\r\n            return;\r\n        }\r\n        var _a = getPaddingBox(padding || {}), left = _a.left, top = _a.top, bottom = _a.bottom, right = _a.right;\r\n        var n = is3d ? 4 : 3;\r\n        // const clipPathInfo = getClipPath(\r\n        //     props.target,\r\n        //     offsetWidth,\r\n        //     offsetHeight,\r\n        // );\r\n        // if (clipPathInfo) {\r\n        //     left -= Math.max(0, clipPathInfo.left);\r\n        //     top -= Math.max(0, clipPathInfo.top);\r\n        //     bottom -= Math.max(0, offsetHeight - clipPathInfo.bottom);\r\n        //     right -= Math.max(0, offsetWidth - clipPathInfo.right);\r\n        // }\r\n        var absoluteOrigin = [];\r\n        if (isPersisted) {\r\n            absoluteOrigin = transformOrigin;\r\n        }\r\n        else if (this.controlBox && props.groupable) {\r\n            absoluteOrigin = originalBeforeOrigin;\r\n        }\r\n        else {\r\n            absoluteOrigin = plus(originalBeforeOrigin, [stateLeft, stateTop]);\r\n        }\r\n        var nextMatrix = multiplies(n, createOriginMatrix(absoluteOrigin.map(function (v) { return -v; }), n), allMatrix, createOriginMatrix(transformOrigin, n));\r\n        var renderPos1 = calculatePadding(nextMatrix, pos1, [-left, -top], n);\r\n        var renderPos2 = calculatePadding(nextMatrix, pos2, [right, -top], n);\r\n        var renderPos3 = calculatePadding(nextMatrix, pos3, [-left, bottom], n);\r\n        var renderPos4 = calculatePadding(nextMatrix, pos4, [right, bottom], n);\r\n        state.renderPoses = [\r\n            renderPos1,\r\n            renderPos2,\r\n            renderPos3,\r\n            renderPos4,\r\n        ];\r\n        state.renderLines = [\r\n            [renderPos1, renderPos2],\r\n            [renderPos2, renderPos4],\r\n            [renderPos4, renderPos3],\r\n            [renderPos3, renderPos1],\r\n        ];\r\n        if (zoom) {\r\n            var zoomOffset = zoom / 2;\r\n            state.renderLines = [\r\n                [\r\n                    calculatePadding(nextMatrix, pos1, [-left - zoomOffset, -top], n),\r\n                    calculatePadding(nextMatrix, pos2, [right + zoomOffset, -top], n),\r\n                ],\r\n                [\r\n                    calculatePadding(nextMatrix, pos2, [right, -top - zoomOffset], n),\r\n                    calculatePadding(nextMatrix, pos4, [right, bottom + zoomOffset], n),\r\n                ],\r\n                [\r\n                    calculatePadding(nextMatrix, pos4, [right + zoomOffset, bottom], n),\r\n                    calculatePadding(nextMatrix, pos3, [-left - zoomOffset, bottom], n),\r\n                ],\r\n                [\r\n                    calculatePadding(nextMatrix, pos3, [-left, bottom + zoomOffset], n),\r\n                    calculatePadding(nextMatrix, pos1, [-left, -top - zoomOffset], n),\r\n                ],\r\n            ];\r\n        }\r\n    };\r\n    MoveableManager.prototype.checkUpdate = function () {\r\n        this._isPropTargetChanged = false;\r\n        var _a = this.props, target = _a.target, container = _a.container, parentMoveable = _a.parentMoveable;\r\n        var _b = this.state, stateTarget = _b.target, stateContainer = _b.container;\r\n        if (!stateTarget && !target) {\r\n            return;\r\n        }\r\n        this.updateAbles();\r\n        var isTargetChanged = !equals(stateTarget, target);\r\n        var isChanged = isTargetChanged || !equals(stateContainer, container);\r\n        if (!isChanged) {\r\n            return;\r\n        }\r\n        var moveableContainer = container || this.controlBox;\r\n        if (moveableContainer) {\r\n            this.unsetAbles();\r\n        }\r\n        this.updateState({ target: target, container: container });\r\n        if (!parentMoveable && moveableContainer) {\r\n            this.updateRect(\"End\", false, false);\r\n        }\r\n        this._isPropTargetChanged = isTargetChanged;\r\n    };\r\n    MoveableManager.prototype.waitToChangeTarget = function () {\r\n        return new Promise(function () { });\r\n    };\r\n    MoveableManager.prototype.triggerEvent = function (name, e) {\r\n        var props = this.props;\r\n        this._emitter.trigger(name, e);\r\n        if (props.parentMoveable && e.isRequest && !e.isRequestChild) {\r\n            return props.parentMoveable.triggerEvent(name, e, true);\r\n        }\r\n        var callback = props[name];\r\n        return callback && callback(e);\r\n    };\r\n    MoveableManager.prototype.useCSS = function (tag, css) {\r\n        var customStyleMap = this.props.customStyledMap;\r\n        var key = tag + css;\r\n        if (!customStyleMap[key]) {\r\n            customStyleMap[key] = styled(tag, css);\r\n        }\r\n        return customStyleMap[key];\r\n    };\r\n    MoveableManager.prototype.getState = function () {\r\n        var _a;\r\n        var props = this.props;\r\n        if (props.target || ((_a = props.targets) === null || _a === void 0 ? void 0 : _a.length)) {\r\n            this._hasFirstTarget = true;\r\n        }\r\n        var hasControlBox = this.controlBox;\r\n        var persistData = props.persistData;\r\n        var firstRenderState = props.firstRenderState;\r\n        if (firstRenderState && !hasControlBox) {\r\n            return firstRenderState;\r\n        }\r\n        if (!this._hasFirstTarget && persistData) {\r\n            var persistState = getPersistState(persistData);\r\n            if (persistState) {\r\n                this.updateState(persistState, false);\r\n                return this.state;\r\n            }\r\n        }\r\n        this.state.isPersisted = false;\r\n        return this.state;\r\n    };\r\n    MoveableManager.prototype.updateSelectors = function () { };\r\n    MoveableManager.prototype.unsetAbles = function () {\r\n        var _this = this;\r\n        this.targetAbles.forEach(function (able) {\r\n            if (able.unset) {\r\n                able.unset(_this);\r\n            }\r\n        });\r\n    };\r\n    MoveableManager.prototype.updateAbles = function (ables, eventAffix) {\r\n        if (ables === void 0) { ables = this.props.ables; }\r\n        if (eventAffix === void 0) { eventAffix = \"\"; }\r\n        var props = this.props;\r\n        var triggerAblesSimultaneously = props.triggerAblesSimultaneously;\r\n        var enabledAbles = this.getEnabledAbles(ables);\r\n        var dragStart = \"drag\".concat(eventAffix, \"Start\");\r\n        var pinchStart = \"pinch\".concat(eventAffix, \"Start\");\r\n        var dragControlStart = \"drag\".concat(eventAffix, \"ControlStart\");\r\n        var targetAbles = filterAbles(enabledAbles, [dragStart, pinchStart], triggerAblesSimultaneously);\r\n        var controlAbles = filterAbles(enabledAbles, [dragControlStart], triggerAblesSimultaneously);\r\n        this.enabledAbles = enabledAbles;\r\n        this.targetAbles = targetAbles;\r\n        this.controlAbles = controlAbles;\r\n    };\r\n    MoveableManager.prototype.updateState = function (nextState, isSetState) {\r\n        if (isSetState) {\r\n            if (this.isUnmounted) {\r\n                return;\r\n            }\r\n            this.setState(nextState);\r\n        }\r\n        else {\r\n            var state = this.state;\r\n            for (var name_3 in nextState) {\r\n                state[name_3] = nextState[name_3];\r\n            }\r\n        }\r\n    };\r\n    MoveableManager.prototype.getEnabledAbles = function (ables) {\r\n        if (ables === void 0) { ables = this.props.ables; }\r\n        var props = this.props;\r\n        return ables.filter(function (able) { return able && ((able.always && props[able.name] !== false)\r\n            || props[able.name]); });\r\n    };\r\n    MoveableManager.prototype.renderAbles = function () {\r\n        var _this = this;\r\n        var props = this.props;\r\n        var triggerAblesSimultaneously = props.triggerAblesSimultaneously;\r\n        var Renderer = {\r\n            createElement: createElement,\r\n        };\r\n        this.renderState = {};\r\n        return groupByMap(flat(filterAbles(this.getEnabledAbles(), [\"render\"], triggerAblesSimultaneously).map(function (_a) {\r\n            var render = _a.render;\r\n            return render(_this, Renderer) || [];\r\n        })).filter(function (el) { return el; }), function (_a) {\r\n            var key = _a.key;\r\n            return key;\r\n        }).map(function (group) { return group[0]; });\r\n    };\r\n    MoveableManager.prototype.updateCheckInput = function () {\r\n        this.targetGesto && (this.targetGesto.options.checkInput = this.props.checkInput);\r\n    };\r\n    MoveableManager.prototype._getRequestStyles = function () {\r\n        var styleNames = this.getEnabledAbles().reduce(function (names, able) {\r\n            var _a, _b;\r\n            var ableStyleNames = ((_b = (_a = able.requestStyle) === null || _a === void 0 ? void 0 : _a.call(able)) !== null && _b !== void 0 ? _b : []);\r\n            return __spreadArray(__spreadArray([], __read(names), false), __read(ableStyleNames), false);\r\n        }, __spreadArray([], __read((this.props.requestStyles || [])), false));\r\n        return styleNames;\r\n    };\r\n    MoveableManager.prototype._updateObserver = function (prevProps) {\r\n        this._updateResizeObserver(prevProps);\r\n        this._updateMutationObserver(prevProps);\r\n    };\r\n    MoveableManager.prototype._updateEvents = function () {\r\n        var hasTargetAble = this.targetAbles.length;\r\n        var hasControlAble = this.controlAbles.length;\r\n        var target = this._dragTarget;\r\n        var isUnset = (!hasTargetAble && this.targetGesto)\r\n            || this._isTargetChanged(true);\r\n        if (isUnset) {\r\n            unsetGesto(this, false);\r\n            this.updateState({ gestos: {} });\r\n        }\r\n        if (!hasControlAble) {\r\n            unsetGesto(this, true);\r\n        }\r\n        if (target && hasTargetAble && !this.targetGesto) {\r\n            this.targetGesto = getTargetAbleGesto(this, target, \"\");\r\n        }\r\n        if (!this.controlGesto && hasControlAble) {\r\n            this.controlGesto = getControlAbleGesto(this, \"Control\");\r\n        }\r\n    };\r\n    MoveableManager.prototype._updateTargets = function () {\r\n        var props = this.props;\r\n        this._prevPropTarget = this._propTarget;\r\n        this._prevDragTarget = this._dragTarget;\r\n        this._prevOriginalDragTarget = this._originalDragTarget;\r\n        this._prevDragArea = props.dragArea;\r\n        this._propTarget = props.target;\r\n        this._originalDragTarget = props.dragTarget || props.target;\r\n        this._dragTarget = getRefTarget(this._originalDragTarget, true);\r\n    };\r\n    MoveableManager.prototype._renderLines = function () {\r\n        var props = this.props;\r\n        var _a = props, zoom = _a.zoom, hideDefaultLines = _a.hideDefaultLines, hideChildMoveableDefaultLines = _a.hideChildMoveableDefaultLines, parentMoveable = _a.parentMoveable;\r\n        if (hideDefaultLines || (parentMoveable && hideChildMoveableDefaultLines)) {\r\n            return [];\r\n        }\r\n        var state = this.getState();\r\n        var Renderer = {\r\n            createElement: createElement,\r\n        };\r\n        return state.renderLines.map(function (line, i) {\r\n            return renderLine(Renderer, \"\", line[0], line[1], zoom, \"render-line-\".concat(i));\r\n        });\r\n    };\r\n    MoveableManager.prototype._isTargetChanged = function (useDragArea) {\r\n        var props = this.props;\r\n        var nextTarget = props.dragTarget || props.target;\r\n        var prevTarget = this._prevOriginalDragTarget;\r\n        var prevDragArea = this._prevDragArea;\r\n        var dragArea = props.dragArea;\r\n        // check target without dragArea\r\n        var isDragTargetChanged = !dragArea && prevTarget !== nextTarget;\r\n        var isDragAreaChanged = (useDragArea || dragArea) && prevDragArea !== dragArea;\r\n        return isDragTargetChanged || isDragAreaChanged || this._prevPropTarget != this._propTarget;\r\n    };\r\n    MoveableManager.prototype._updateNativeEvents = function () {\r\n        var _this = this;\r\n        var props = this.props;\r\n        var target = props.dragArea ? this.areaElement : this.state.target;\r\n        var events = this.events;\r\n        var eventKeys = getKeys(events);\r\n        if (this._isTargetChanged()) {\r\n            for (var eventName in events) {\r\n                var manager = events[eventName];\r\n                manager && manager.destroy();\r\n                events[eventName] = null;\r\n            }\r\n        }\r\n        if (!target) {\r\n            return;\r\n        }\r\n        var enabledAbles = this.enabledAbles;\r\n        eventKeys.forEach(function (eventName) {\r\n            var ables = filterAbles(enabledAbles, [eventName]);\r\n            var hasAbles = ables.length > 0;\r\n            var manager = events[eventName];\r\n            if (!hasAbles) {\r\n                if (manager) {\r\n                    manager.destroy();\r\n                    events[eventName] = null;\r\n                }\r\n                return;\r\n            }\r\n            if (!manager) {\r\n                manager = new EventManager(target, _this, eventName);\r\n                events[eventName] = manager;\r\n            }\r\n            manager.setAbles(ables);\r\n        });\r\n    };\r\n    MoveableManager.prototype._checkUpdateRootContainer = function () {\r\n        var rootContainer = this.props.rootContainer;\r\n        if (!this._rootContainer && rootContainer) {\r\n            this._rootContainer = getRefTarget(rootContainer, true);\r\n        }\r\n    };\r\n    MoveableManager.prototype._checkUpdateViewContainer = function () {\r\n        var viewContainerOption = this.props.viewContainer;\r\n        if (!this._viewContainer && viewContainerOption) {\r\n            this._viewContainer = getRefTarget(viewContainerOption, true);\r\n        }\r\n        var viewContainer = this._viewContainer;\r\n        if (viewContainer) {\r\n            this._changeAbleViewClassNames(__spreadArray(__spreadArray([], __read(this._getAbleViewClassNames()), false), [\r\n                this.isDragging() ? VIEW_DRAGGING : \"\",\r\n            ], false));\r\n        }\r\n    };\r\n    MoveableManager.prototype._changeAbleViewClassNames = function (classNames) {\r\n        var viewContainer = this._viewContainer;\r\n        var nextClassNames = groupBy(classNames.filter(Boolean), function (el) { return el; }).map(function (_a) {\r\n            var _b = __read(_a, 1), className = _b[0];\r\n            return className;\r\n        });\r\n        var prevClassNames = this._viewClassNames;\r\n        var _a = diff$1(prevClassNames, nextClassNames), removed = _a.removed, added = _a.added;\r\n        removed.forEach(function (index) {\r\n            removeClass(viewContainer, prevClassNames[index]);\r\n        });\r\n        added.forEach(function (index) {\r\n            addClass(viewContainer, nextClassNames[index]);\r\n        });\r\n        this._viewClassNames = nextClassNames;\r\n    };\r\n    MoveableManager.prototype._getAbleViewClassNames = function () {\r\n        var _this = this;\r\n        return (this.getEnabledAbles().map(function (able) {\r\n            var _a;\r\n            return (((_a = able.viewClassName) === null || _a === void 0 ? void 0 : _a.call(able, _this)) || \"\");\r\n        }).join(\" \") + \" \".concat(this._getAbleClassName(\"-view\"))).split(/\\s+/g);\r\n    };\r\n    MoveableManager.prototype._getAbleClassName = function (classPrefix) {\r\n        var _this = this;\r\n        if (classPrefix === void 0) { classPrefix = \"\"; }\r\n        var ables = this.getEnabledAbles();\r\n        var targetGesto = this.targetGesto;\r\n        var controlGesto = this.controlGesto;\r\n        var targetGestoData = (targetGesto === null || targetGesto === void 0 ? void 0 : targetGesto.isFlag())\r\n            ? targetGesto.getEventData() : {};\r\n        var controlGestoData = (controlGesto === null || controlGesto === void 0 ? void 0 : controlGesto.isFlag())\r\n            ? controlGesto.getEventData() : {};\r\n        return ables.map(function (able) {\r\n            var _a, _b, _c;\r\n            var name = able.name;\r\n            var className = ((_a = able.className) === null || _a === void 0 ? void 0 : _a.call(able, _this)) || \"\";\r\n            if (((_b = targetGestoData[name]) === null || _b === void 0 ? void 0 : _b.isEventStart)\r\n                || ((_c = controlGestoData[name]) === null || _c === void 0 ? void 0 : _c.isEventStart)) {\r\n                className += \" \".concat(prefix(\"\".concat(name).concat(classPrefix, \"-dragging\")));\r\n            }\r\n            return className.trim();\r\n        }).filter(Boolean).join(\" \");\r\n    };\r\n    MoveableManager.prototype._updateResizeObserver = function (prevProps) {\r\n        var _a;\r\n        var props = this.props;\r\n        var target = props.target;\r\n        var win = getWindow(this.getControlBoxElement());\r\n        if (!win.ResizeObserver || !target || !props.useResizeObserver) {\r\n            (_a = this._reiszeObserver) === null || _a === void 0 ? void 0 : _a.disconnect();\r\n            return;\r\n        }\r\n        if (prevProps.target === target && this._reiszeObserver) {\r\n            return;\r\n        }\r\n        var observer = new win.ResizeObserver(this.checkUpdateRect);\r\n        observer.observe(target, {\r\n            box: \"border-box\",\r\n        });\r\n        this._reiszeObserver = observer;\r\n    };\r\n    MoveableManager.prototype._updateMutationObserver = function (prevProps) {\r\n        var _this = this;\r\n        var _a;\r\n        var props = this.props;\r\n        var target = props.target;\r\n        var win = getWindow(this.getControlBoxElement());\r\n        if (!win.MutationObserver || !target || !props.useMutationObserver) {\r\n            (_a = this._mutationObserver) === null || _a === void 0 ? void 0 : _a.disconnect();\r\n            return;\r\n        }\r\n        if (prevProps.target === target && this._mutationObserver) {\r\n            return;\r\n        }\r\n        var observer = new win.MutationObserver(function (records) {\r\n            var e_1, _a;\r\n            try {\r\n                for (var records_1 = __values(records), records_1_1 = records_1.next(); !records_1_1.done; records_1_1 = records_1.next()) {\r\n                    var mutation = records_1_1.value;\r\n                    if (mutation.type === \"attributes\" && mutation.attributeName === \"style\") {\r\n                        _this.checkUpdateRect();\r\n                    }\r\n                }\r\n            }\r\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n            finally {\r\n                try {\r\n                    if (records_1_1 && !records_1_1.done && (_a = records_1.return)) _a.call(records_1);\r\n                }\r\n                finally { if (e_1) throw e_1.error; }\r\n            }\r\n        });\r\n        observer.observe(target, {\r\n            attributes: true,\r\n        });\r\n        this._mutationObserver = observer;\r\n    };\r\n    MoveableManager.defaultProps = {\r\n        dragTargetSelf: false,\r\n        target: null,\r\n        dragTarget: null,\r\n        container: null,\r\n        rootContainer: null,\r\n        origin: true,\r\n        parentMoveable: null,\r\n        wrapperMoveable: null,\r\n        isWrapperMounted: false,\r\n        parentPosition: null,\r\n        warpSelf: false,\r\n        svgOrigin: \"\",\r\n        dragContainer: null,\r\n        useResizeObserver: false,\r\n        useMutationObserver: false,\r\n        preventDefault: true,\r\n        preventRightClick: true,\r\n        preventWheelClick: true,\r\n        linePadding: 0,\r\n        controlPadding: 0,\r\n        ables: [],\r\n        pinchThreshold: 20,\r\n        dragArea: false,\r\n        passDragArea: false,\r\n        transformOrigin: \"\",\r\n        className: \"\",\r\n        zoom: 1,\r\n        triggerAblesSimultaneously: false,\r\n        padding: {},\r\n        pinchOutside: true,\r\n        checkInput: false,\r\n        dragFocusedInput: false,\r\n        groupable: false,\r\n        hideDefaultLines: false,\r\n        cspNonce: \"\",\r\n        translateZ: 0,\r\n        cssStyled: null,\r\n        customStyledMap: {},\r\n        props: {},\r\n        stopPropagation: false,\r\n        preventClickDefault: false,\r\n        preventClickEventOnDrag: true,\r\n        flushSync: defaultSync,\r\n        firstRenderState: null,\r\n        persistData: null,\r\n        viewContainer: null,\r\n        requestStyles: [],\r\n        useAccuratePosition: false,\r\n    };\r\n    return MoveableManager;\r\n}(React.PureComponent));\r\n/**\r\n * The target to indicate Moveable Control Box.\r\n * @name Moveable#target\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n * moveable.target = document.querySelector(\".target\");\r\n */\r\n/**\r\n * Zooms in the elements of a moveable.\r\n * @name Moveable#zoom\r\n * @default 1\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n * moveable.zoom = 2;\r\n */\r\n/**\r\n * Whether the target size is detected and updated whenever it changes.\r\n * @name Moveable#useResizeObserver\r\n * @default false\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n * moveable.useResizeObserver = true;\r\n */\r\n/**\r\n * Resize, Scale Events at edges\r\n * @name Moveable#edge\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n * moveable.edge = true;\r\n */\r\n/**\r\n * You can specify the className of the moveable controlbox.\r\n * @name Moveable#className\r\n * @default \"\"\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *   className: \"\",\r\n * });\r\n *\r\n * moveable.className = \"moveable1\";\r\n */\r\n/**\r\n * The target(s) to drag Moveable target(s)\r\n * @name Moveable#dragTarget\r\n * @default target\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n * moveable.target = document.querySelector(\".target\");\r\n * moveable.dragTarget = document.querySelector(\".dragTarget\");\r\n */\r\n/**\r\n * `renderStart` event occurs at the first start of all events.\r\n * @memberof Moveable\r\n * @event renderStart\r\n * @param {Moveable.OnRenderStart} - Parameters for the `renderStart` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: document.querySelector(\".target\"),\r\n * });\r\n * moveable.on(\"renderStart\", ({ target }) => {\r\n *     console.log(\"onRenderStart\", target);\r\n * });\r\n */\r\n/**\r\n * `render` event occurs before the target is drawn on the screen.\r\n * @memberof Moveable\r\n * @event render\r\n * @param {Moveable.OnRender} - Parameters for the `render` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: document.querySelector(\".target\"),\r\n * });\r\n * moveable.on(\"render\", ({ target }) => {\r\n *     console.log(\"onRender\", target);\r\n * });\r\n */\r\n/**\r\n * `renderEnd` event occurs at the end of all events.\r\n * @memberof Moveable\r\n * @event renderEnd\r\n * @param {Moveable.OnRenderEnd} - Parameters for the `renderEnd` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: document.querySelector(\".target\"),\r\n * });\r\n * moveable.on(\"renderEnd\", ({ target }) => {\r\n *     console.log(\"onRenderEnd\", target);\r\n * });\r\n */\r\n/**\r\n * `renderGroupStart` event occurs at the first start of all events in group.\r\n * @memberof Moveable\r\n * @event renderGroupStart\r\n * @param {Moveable.OnRenderGroupStart} - Parameters for the `renderGroupStart` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n * });\r\n * moveable.on(\"renderGroupStart\", ({ targets }) => {\r\n *     console.log(\"onRenderGroupStart\", targets);\r\n * });\r\n */\r\n/**\r\n * `renderGroup` event occurs before the target is drawn on the screen in group.\r\n * @memberof Moveable\r\n * @event renderGroup\r\n * @param {Moveable.OnRenderGroup} - Parameters for the `renderGroup` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n * });\r\n * moveable.on(\"renderGroup\", ({ targets }) => {\r\n *     console.log(\"onRenderGroup\", targets);\r\n * });\r\n */\r\n/**\r\n * `renderGroupEnd` event occurs at the end of all events in group.\r\n * @memberof Moveable\r\n * @event renderGroupEnd\r\n * @param {Moveable.OnRenderGroupEnd} - Parameters for the `renderGroupEnd` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n * });\r\n * moveable.on(\"renderGroupEnd\", ({ targets }) => {\r\n *     console.log(\"onRenderGroupEnd\", targets);\r\n * });\r\n */\n\nvar Groupable = {\r\n    name: \"groupable\",\r\n    props: [\r\n        \"defaultGroupRotate\",\r\n        \"useDefaultGroupRotate\",\r\n        \"defaultGroupOrigin\",\r\n        \"groupable\",\r\n        \"groupableProps\",\r\n        \"targetGroups\",\r\n        \"hideChildMoveableDefaultLines\",\r\n    ],\r\n    events: [],\r\n    render: function (moveable, React) {\r\n        var _a;\r\n        var props = moveable.props;\r\n        var targets = props.targets || [];\r\n        var _b = moveable.getState(), left = _b.left, top = _b.top, isPersisted = _b.isPersisted;\r\n        var zoom = props.zoom || 1;\r\n        var renderGroupRects = moveable.renderGroupRects;\r\n        var persistDatChildren = ((_a = props.persistData) === null || _a === void 0 ? void 0 : _a.children) || [];\r\n        if (isPersisted) {\r\n            targets = persistDatChildren.map(function () { return null; });\r\n        }\r\n        else {\r\n            persistDatChildren = [];\r\n        }\r\n        var parentPosition = watchValue(moveable, \"parentPosition\", [left, top], function (styles) { return styles.join(\",\"); });\r\n        var requestStyles = watchValue(moveable, \"requestStyles\", moveable.getRequestChildStyles(), function (styles) { return styles.join(\",\"); });\r\n        moveable.moveables = moveable.moveables.slice(0, targets.length);\r\n        return __spreadArray(__spreadArray([], __read(targets.map(function (target, i) {\r\n            return React.createElement(MoveableManager, { key: \"moveable\" + i, ref: refs(moveable, \"moveables\", i), target: target, origin: false, requestStyles: requestStyles, cssStyled: props.cssStyled, customStyledMap: props.customStyledMap, useResizeObserver: props.useResizeObserver, useMutationObserver: props.useMutationObserver, hideChildMoveableDefaultLines: props.hideChildMoveableDefaultLines, parentMoveable: moveable, parentPosition: [left, top], persistData: persistDatChildren[i], zoom: zoom });\r\n        })), false), __read(flat(renderGroupRects.map(function (_a, i) {\r\n            var pos1 = _a.pos1, pos2 = _a.pos2, pos3 = _a.pos3, pos4 = _a.pos4;\r\n            var poses = [pos1, pos2, pos3, pos4];\r\n            return [\r\n                [0, 1],\r\n                [1, 3],\r\n                [3, 2],\r\n                [2, 0],\r\n            ].map(function (_a, j) {\r\n                var _b = __read(_a, 2), from = _b[0], to = _b[1];\r\n                return renderLine(React, \"\", minus(poses[from], parentPosition), minus(poses[to], parentPosition), zoom, \"group-rect-\".concat(i, \"-\").concat(j));\r\n            });\r\n        }))), false);\r\n    },\r\n};\n\nvar Clickable = makeAble(\"clickable\", {\r\n    props: [\r\n        \"clickable\",\r\n    ],\r\n    events: [\r\n        \"click\",\r\n        \"clickGroup\",\r\n    ],\r\n    always: true,\r\n    dragRelation: \"weak\",\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    dragStart: function () {\r\n        return;\r\n    },\r\n    dragControlStart: function () {\r\n        return;\r\n    },\r\n    dragGroupStart: function (moveable, e) {\r\n        e.datas.inputTarget = e.inputEvent && e.inputEvent.target;\r\n    },\r\n    dragEnd: function (moveable, e) {\r\n        var target = moveable.props.target;\r\n        var inputEvent = e.inputEvent;\r\n        var inputTarget = e.inputTarget;\r\n        var isMoveableElement = moveable.isMoveableElement(inputTarget);\r\n        var containsElement = !isMoveableElement && moveable.controlBox.contains(inputTarget);\r\n        if (!inputEvent || !inputTarget || e.isDrag\r\n            || moveable.isMoveableElement(inputTarget)\r\n            || containsElement\r\n        // External event duplicate target or dragAreaElement\r\n        ) {\r\n            return;\r\n        }\r\n        var containsTarget = target.contains(inputTarget);\r\n        triggerEvent(moveable, \"onClick\", fillParams(moveable, e, {\r\n            isDouble: e.isDouble,\r\n            inputTarget: inputTarget,\r\n            isTarget: target === inputTarget,\r\n            moveableTarget: moveable.props.target,\r\n            containsTarget: containsTarget,\r\n        }));\r\n    },\r\n    dragGroupEnd: function (moveable, e) {\r\n        var inputEvent = e.inputEvent;\r\n        var inputTarget = e.inputTarget;\r\n        if (!inputEvent || !inputTarget || e.isDrag\r\n            || moveable.isMoveableElement(inputTarget)\r\n            // External event duplicate target or dragAreaElement\r\n            || e.datas.inputTarget === inputTarget) {\r\n            return;\r\n        }\r\n        var targets = moveable.props.targets;\r\n        var targetIndex = targets.indexOf(inputTarget);\r\n        var isTarget = targetIndex > -1;\r\n        var containsTarget = false;\r\n        if (targetIndex === -1) {\r\n            targetIndex = findIndex(targets, function (parentTarget) { return parentTarget.contains(inputTarget); });\r\n            containsTarget = targetIndex > -1;\r\n        }\r\n        triggerEvent(moveable, \"onClickGroup\", fillParams(moveable, e, {\r\n            isDouble: e.isDouble,\r\n            targets: targets,\r\n            inputTarget: inputTarget,\r\n            targetIndex: targetIndex,\r\n            isTarget: isTarget,\r\n            containsTarget: containsTarget,\r\n            moveableTarget: targets[targetIndex],\r\n        }));\r\n    },\r\n    dragControlEnd: function (moveable, e) {\r\n        this.dragEnd(moveable, e);\r\n    },\r\n    dragGroupControlEnd: function (moveable, e) {\r\n        this.dragEnd(moveable, e);\r\n    },\r\n});\r\n/**\r\n * When you click on the element, the `click` event is called.\r\n * @memberof Moveable\r\n * @event click\r\n * @param {Moveable.OnClick} - Parameters for the `click` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: document.querySelector(\".target\"),\r\n * });\r\n * moveable.on(\"click\", ({ hasTarget, containsTarget, targetIndex }) => {\r\n *     // If you click on an element other than the target and not included in the target, index is -1.\r\n *     console.log(\"onClickGroup\", target, hasTarget, containsTarget, targetIndex);\r\n * });\r\n */\r\n/**\r\n * When you click on the element inside the group, the `clickGroup` event is called.\r\n * @memberof Moveable\r\n * @event clickGroup\r\n * @param {Moveable.OnClickGroup} - Parameters for the `clickGroup` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n * });\r\n * moveable.on(\"clickGroup\", ({ inputTarget, isTarget, containsTarget, targetIndex }) => {\r\n *     // If you click on an element other than the target and not included in the target, index is -1.\r\n *     console.log(\"onClickGroup\", inputTarget, isTarget, containsTarget, targetIndex);\r\n * });\r\n */\n\nfunction getDraggableEvent(e) {\r\n    var datas = e.originalDatas.draggable;\r\n    if (!datas) {\r\n        e.originalDatas.draggable = {};\r\n        datas = e.originalDatas.draggable;\r\n    }\r\n    return __assign(__assign({}, e), { datas: datas });\r\n}\r\nvar edgeDraggable = makeAble(\"edgeDraggable\", {\r\n    css: [\r\n        \".edge.edgeDraggable.line {\\ncursor: move;\\n}\",\r\n    ],\r\n    render: function (moveable, React) {\r\n        var props = moveable.props;\r\n        var edge = props.edgeDraggable;\r\n        if (!edge) {\r\n            return [];\r\n        }\r\n        return renderEdgeLines(React, \"edgeDraggable\", edge, moveable.getState().renderPoses, props.zoom);\r\n    },\r\n    dragCondition: function (moveable, e) {\r\n        var _a;\r\n        var props = moveable.props;\r\n        var target = (_a = e.inputEvent) === null || _a === void 0 ? void 0 : _a.target;\r\n        if (!props.edgeDraggable || !target) {\r\n            return false;\r\n        }\r\n        return !props.draggable\r\n            && hasClass(target, prefix(\"direction\"))\r\n            && hasClass(target, prefix(\"edge\"))\r\n            && hasClass(target, prefix(\"edgeDraggable\"));\r\n    },\r\n    dragStart: function (moveable, e) {\r\n        return Draggable.dragStart(moveable, getDraggableEvent(e));\r\n    },\r\n    drag: function (moveable, e) {\r\n        return Draggable.drag(moveable, getDraggableEvent(e));\r\n    },\r\n    dragEnd: function (moveable, e) {\r\n        return Draggable.dragEnd(moveable, getDraggableEvent(e));\r\n    },\r\n    dragGroupCondition: function (moveable, e) {\r\n        var _a;\r\n        var props = moveable.props;\r\n        var target = (_a = e.inputEvent) === null || _a === void 0 ? void 0 : _a.target;\r\n        if (!props.edgeDraggable || !target) {\r\n            return false;\r\n        }\r\n        return !props.draggable && hasClass(target, prefix(\"direction\")) && hasClass(target, prefix(\"line\"));\r\n    },\r\n    dragGroupStart: function (moveable, e) {\r\n        return Draggable.dragGroupStart(moveable, getDraggableEvent(e));\r\n    },\r\n    dragGroup: function (moveable, e) {\r\n        return Draggable.dragGroup(moveable, getDraggableEvent(e));\r\n    },\r\n    dragGroupEnd: function (moveable, e) {\r\n        return Draggable.dragGroupEnd(moveable, getDraggableEvent(e));\r\n    },\r\n    unset: function (moveable) {\r\n        return Draggable.unset(moveable);\r\n    },\r\n});\r\n/**\r\n * Whether to move by dragging the edge line (default: false)\r\n * @name Moveable.Draggable#edgeDraggable\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *  draggable: true,\r\n *  edgeDraggable: false,\r\n * });\r\n *\r\n * moveable.edgeDraggable = true;\r\n */\n\nvar IndividualGroupable = {\r\n    name: \"individualGroupable\",\r\n    props: [\r\n        \"individualGroupable\",\r\n        \"individualGroupableProps\",\r\n    ],\r\n    events: [],\r\n};\n\nvar MOVEABLE_ABLES =  [\r\n    BeforeRenderable,\r\n    Default, Snappable, Pinchable,\r\n    Draggable, edgeDraggable,\r\n    Resizable, Scalable, Warpable, Rotatable,\r\n    Scrollable, Padding, Origin,\r\n    OriginDraggable,\r\n    Clippable, Roundable, Groupable, IndividualGroupable,\r\n    Clickable,\r\n    DragArea,\r\n    Renderable,\r\n];\r\nvar MOVEABLE_EVENTS = /*#__PURE__*/ MOVEABLE_ABLES.reduce(function (current, able) {\r\n    (able.events || []).forEach(function (name) {\r\n        pushSet(current, name);\r\n    });\r\n    return current;\r\n}, []);\r\nvar MOVEABLE_PROPS = /*#__PURE__*/ MOVEABLE_ABLES.reduce(function (current, able) {\r\n    (able.props || []).forEach(function (name) {\r\n        pushSet(current, name);\r\n    });\r\n    return current;\r\n}, []);\n\nfunction solveConstantsDistance(_a, pos) {\r\n    var _b = __read(_a, 3), a = _b[0], b = _b[1], c = _b[2];\r\n    return (a * pos[0] + b * pos[1] + c) / Math.sqrt(a * a + b * b);\r\n}\r\nfunction solveC(_a, pos) {\r\n    var _b = __read(_a, 2), a = _b[0], b = _b[1];\r\n    // ax + by + c = 0\r\n    // -ax -by;\r\n    return -a * pos[0] - b * pos[1];\r\n}\n\nfunction getMaxPos(poses, index) {\r\n    return Math.max.apply(Math, __spreadArray([], __read(poses.map(function (_a) {\r\n        var _b = __read(_a, 4), pos1 = _b[0], pos2 = _b[1], pos3 = _b[2], pos4 = _b[3];\r\n        return Math.max(pos1[index], pos2[index], pos3[index], pos4[index]);\r\n    })), false));\r\n}\r\nfunction getMinPos(poses, index) {\r\n    return Math.min.apply(Math, __spreadArray([], __read(poses.map(function (_a) {\r\n        var _b = __read(_a, 4), pos1 = _b[0], pos2 = _b[1], pos3 = _b[2], pos4 = _b[3];\r\n        return Math.min(pos1[index], pos2[index], pos3[index], pos4[index]);\r\n    })), false));\r\n}\r\nfunction getGroupRect(parentPoses, rotation) {\r\n    var _a, _b, _c;\r\n    var pos1 = [0, 0];\r\n    var pos2 = [0, 0];\r\n    var pos3 = [0, 0];\r\n    var pos4 = [0, 0];\r\n    var width = 0;\r\n    var height = 0;\r\n    if (!parentPoses.length) {\r\n        return {\r\n            pos1: pos1,\r\n            pos2: pos2,\r\n            pos3: pos3,\r\n            pos4: pos4,\r\n            minX: 0,\r\n            minY: 0,\r\n            maxX: 0,\r\n            maxY: 0,\r\n            width: width,\r\n            height: height,\r\n            rotation: rotation,\r\n        };\r\n    }\r\n    var fixedRotation = throttle(rotation, TINY_NUM);\r\n    if (fixedRotation % 90) {\r\n        var rad = fixedRotation / 180 * Math.PI;\r\n        var a1_1 = Math.tan(rad);\r\n        var a2_1 = -1 / a1_1;\r\n        // ax = y  // -ax + y = 0 // 0 => 1\r\n        // -ax = y // ax + y = 0  // 0 => 3\r\n        var a1MinMax_1 = [MAX_NUM, MIN_NUM];\r\n        var a1MinMaxPos_1 = [[0, 0], [0, 0]];\r\n        var a2MinMax_1 = [MAX_NUM, MIN_NUM];\r\n        var a2MinMaxPos_1 = [[0, 0], [0, 0]];\r\n        parentPoses.forEach(function (poses) {\r\n            poses.forEach(function (pos) {\r\n                // const b1 = pos[1] - a1 * pos[0];\r\n                // const b2 = pos[1] - a2 * pos[0];\r\n                var a1Dist = solveConstantsDistance([-a1_1, 1, 0], pos);\r\n                var a2Dist = solveConstantsDistance([-a2_1, 1, 0], pos);\r\n                if (a1MinMax_1[0] > a1Dist) {\r\n                    a1MinMaxPos_1[0] = pos;\r\n                    a1MinMax_1[0] = a1Dist;\r\n                }\r\n                if (a1MinMax_1[1] < a1Dist) {\r\n                    a1MinMaxPos_1[1] = pos;\r\n                    a1MinMax_1[1] = a1Dist;\r\n                }\r\n                if (a2MinMax_1[0] > a2Dist) {\r\n                    a2MinMaxPos_1[0] = pos;\r\n                    a2MinMax_1[0] = a2Dist;\r\n                }\r\n                if (a2MinMax_1[1] < a2Dist) {\r\n                    a2MinMaxPos_1[1] = pos;\r\n                    a2MinMax_1[1] = a2Dist;\r\n                }\r\n            });\r\n        });\r\n        var _d = __read(a1MinMaxPos_1, 2), a1MinPos = _d[0], a1MaxPos = _d[1];\r\n        var _e = __read(a2MinMaxPos_1, 2), a2MinPos = _e[0], a2MaxPos = _e[1];\r\n        var minHorizontalLine = [-a1_1, 1, solveC([-a1_1, 1], a1MinPos)];\r\n        var maxHorizontalLine = [-a1_1, 1, solveC([-a1_1, 1], a1MaxPos)];\r\n        var minVerticalLine = [-a2_1, 1, solveC([-a2_1, 1], a2MinPos)];\r\n        var maxVerticalLine = [-a2_1, 1, solveC([-a2_1, 1], a2MaxPos)];\r\n        _a = __read([\r\n            [minHorizontalLine, minVerticalLine],\r\n            [minHorizontalLine, maxVerticalLine],\r\n            [maxHorizontalLine, minVerticalLine],\r\n            [maxHorizontalLine, maxVerticalLine],\r\n        ].map(function (_a) {\r\n            var _b = __read(_a, 2), line1 = _b[0], line2 = _b[1];\r\n            return getIntersectionPointsByConstants(line1, line2)[0];\r\n        }), 4), pos1 = _a[0], pos2 = _a[1], pos3 = _a[2], pos4 = _a[3];\r\n        width = a2MinMax_1[1] - a2MinMax_1[0];\r\n        height = a1MinMax_1[1] - a1MinMax_1[0];\r\n    }\r\n    else {\r\n        var minX_1 = getMinPos(parentPoses, 0);\r\n        var minY_1 = getMinPos(parentPoses, 1);\r\n        var maxX_1 = getMaxPos(parentPoses, 0);\r\n        var maxY_1 = getMaxPos(parentPoses, 1);\r\n        pos1 = [minX_1, minY_1];\r\n        pos2 = [maxX_1, minY_1];\r\n        pos3 = [minX_1, maxY_1];\r\n        pos4 = [maxX_1, maxY_1];\r\n        width = maxX_1 - minX_1;\r\n        height = maxY_1 - minY_1;\r\n        if (fixedRotation % 180) {\r\n            // 0\r\n            // 1 2\r\n            // 3 4\r\n            // 90\r\n            // 3 1\r\n            // 4 2\r\n            // 180\r\n            // 4 3\r\n            // 2 1\r\n            // 270\r\n            // 2 4\r\n            // 1 3\r\n            // 1, 2, 3,4 = 3 1 4 2\r\n            var changedX = [pos3, pos1, pos4, pos2];\r\n            _b = __read(changedX, 4), pos1 = _b[0], pos2 = _b[1], pos3 = _b[2], pos4 = _b[3];\r\n            width = maxY_1 - minY_1;\r\n            height = maxX_1 - minX_1;\r\n        }\r\n    }\r\n    if (fixedRotation % 360 > 180) {\r\n        // 1 2   4 3\r\n        // 3 4   2 1\r\n        var changedX = [pos4, pos3, pos2, pos1];\r\n        _c = __read(changedX, 4), pos1 = _c[0], pos2 = _c[1], pos3 = _c[2], pos4 = _c[3];\r\n    }\r\n    var _f = getMinMaxs([pos1, pos2, pos3, pos4]), minX = _f.minX, minY = _f.minY, maxX = _f.maxX, maxY = _f.maxY;\r\n    return {\r\n        pos1: pos1,\r\n        pos2: pos2,\r\n        pos3: pos3,\r\n        pos4: pos4,\r\n        width: width,\r\n        height: height,\r\n        minX: minX,\r\n        minY: minY,\r\n        maxX: maxX,\r\n        maxY: maxY,\r\n        rotation: rotation,\r\n    };\r\n}\r\nfunction findMoveableGroups(moveables, childTargetGroups) {\r\n    var groups = childTargetGroups.map(function (targetGroup) {\r\n        if (isArray(targetGroup)) {\r\n            var childMoveableGroups = findMoveableGroups(moveables, targetGroup);\r\n            var length_1 = childMoveableGroups.length;\r\n            if (length_1 > 1) {\r\n                return childMoveableGroups;\r\n            }\r\n            else if (length_1 === 1) {\r\n                return childMoveableGroups[0];\r\n            }\r\n            else {\r\n                return null;\r\n            }\r\n        }\r\n        else {\r\n            var checked = find(moveables, function (_a) {\r\n                var manager = _a.manager;\r\n                return manager.props.target === targetGroup;\r\n            });\r\n            if (checked) {\r\n                checked.finded = true;\r\n                return checked.manager;\r\n            }\r\n            return null;\r\n        }\r\n    }).filter(Boolean);\r\n    if (groups.length === 1 && isArray(groups[0])) {\r\n        return groups[0];\r\n    }\r\n    return groups;\r\n}\r\n/**\r\n * @namespace Moveable.Group\r\n * @description You can make targets moveable.\r\n */\r\nvar MoveableGroup = /*#__PURE__*/ (function (_super) {\r\n    __extends(MoveableGroup, _super);\r\n    function MoveableGroup() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.differ = new ChildrenDiffer();\r\n        _this.moveables = [];\r\n        _this.transformOrigin = \"50% 50%\";\r\n        _this.renderGroupRects = [];\r\n        _this._targetGroups = [];\r\n        _this._hasFirstTargets = false;\r\n        return _this;\r\n    }\r\n    MoveableGroup.prototype.componentDidMount = function () {\r\n        _super.prototype.componentDidMount.call(this);\r\n    };\r\n    MoveableGroup.prototype.checkUpdate = function () {\r\n        this._isPropTargetChanged = false;\r\n        this.updateAbles();\r\n    };\r\n    MoveableGroup.prototype.getTargets = function () {\r\n        return this.props.targets;\r\n    };\r\n    MoveableGroup.prototype.updateRect = function (type, isTarget, isSetState) {\r\n        var _a;\r\n        if (isSetState === void 0) { isSetState = true; }\r\n        var state = this.state;\r\n        if (!this.controlBox || state.isPersisted) {\r\n            return;\r\n        }\r\n        setStoreCache(true);\r\n        this.moveables.forEach(function (moveable) {\r\n            moveable.updateRect(type, false, false);\r\n        });\r\n        var props = this.props;\r\n        var moveables = this.moveables;\r\n        var target = state.target || props.target;\r\n        var checkeds = moveables.map(function (moveable) { return ({ finded: false, manager: moveable }); });\r\n        var targetGroups = this.props.targetGroups || [];\r\n        var moveableGroups = findMoveableGroups(checkeds, targetGroups);\r\n        var useDefaultGroupRotate = props.useDefaultGroupRotate;\r\n        moveableGroups.push.apply(moveableGroups, __spreadArray([], __read(checkeds.filter(function (_a) {\r\n            var finded = _a.finded;\r\n            return !finded;\r\n        }).map(function (_a) {\r\n            var manager = _a.manager;\r\n            return manager;\r\n        })), false));\r\n        var renderGroupRects = [];\r\n        var isReset = !isTarget || (type !== \"\" && props.updateGroup);\r\n        var defaultGroupRotate = props.defaultGroupRotate || 0;\r\n        if (!this._hasFirstTargets) {\r\n            var persistedRoatation = (_a = props.persistData) === null || _a === void 0 ? void 0 : _a.rotation;\r\n            if (persistedRoatation != null) {\r\n                defaultGroupRotate = persistedRoatation;\r\n            }\r\n        }\r\n        function getMoveableGroupRect(group, parentRotation, isRoot) {\r\n            var posesRotations = group.map(function (moveable) {\r\n                if (isArray(moveable)) {\r\n                    var rect = getMoveableGroupRect(moveable, parentRotation);\r\n                    var poses = [rect.pos1, rect.pos2, rect.pos3, rect.pos4];\r\n                    renderGroupRects.push(rect);\r\n                    return { poses: poses, rotation: rect.rotation };\r\n                }\r\n                else {\r\n                    return {\r\n                        poses: getAbsolutePosesByState(moveable.state),\r\n                        rotation: moveable.getRotation(),\r\n                    };\r\n                }\r\n            });\r\n            var rotations = posesRotations.map(function (_a) {\r\n                var rotation = _a.rotation;\r\n                return rotation;\r\n            });\r\n            var groupRotation = 0;\r\n            var firstRotation = rotations[0];\r\n            var isSameRotation = rotations.every(function (nextRotation) {\r\n                return Math.abs(firstRotation - nextRotation) < 0.1;\r\n            });\r\n            if (isReset) {\r\n                groupRotation = !useDefaultGroupRotate && isSameRotation ? firstRotation : defaultGroupRotate;\r\n            }\r\n            else {\r\n                groupRotation = !useDefaultGroupRotate && !isRoot && isSameRotation ? firstRotation : parentRotation;\r\n            }\r\n            var groupPoses = posesRotations.map(function (_a) {\r\n                var poses = _a.poses;\r\n                return poses;\r\n            });\r\n            var groupRect = getGroupRect(groupPoses, groupRotation);\r\n            return groupRect;\r\n        }\r\n        var rootGroupRect = getMoveableGroupRect(moveableGroups, this.rotation, true);\r\n        if (isReset) {\r\n            // reset rotataion\r\n            this.rotation = rootGroupRect.rotation;\r\n            this.transformOrigin = props.defaultGroupOrigin || \"50% 50%\";\r\n            this.scale = [1, 1];\r\n        }\r\n        this._targetGroups = targetGroups;\r\n        this.renderGroupRects = renderGroupRects;\r\n        var transformOrigin = this.transformOrigin;\r\n        var rotation = this.rotation;\r\n        var scale = this.scale;\r\n        var width = rootGroupRect.width, height = rootGroupRect.height, minX = rootGroupRect.minX, minY = rootGroupRect.minY;\r\n        var posesInfo = rotatePosesInfo([\r\n            [0, 0],\r\n            [width, 0],\r\n            [0, height],\r\n            [width, height],\r\n        ], convertTransformOriginArray(transformOrigin, width, height), this.rotation / 180 * Math.PI);\r\n        var _b = getMinMaxs(posesInfo.result), deltaX = _b.minX, deltaY = _b.minY;\r\n        var rotateScale = \" rotate(\".concat(rotation, \"deg)\")\r\n            + \" scale(\".concat(sign(scale[0]), \", \").concat(sign(scale[1]), \")\");\r\n        var transform = \"translate(\".concat(-deltaX, \"px, \").concat(-deltaY, \"px)\").concat(rotateScale);\r\n        this.controlBox.style.transform\r\n            = \"translate3d(\".concat(minX, \"px, \").concat(minY, \"px, \").concat(this.props.translateZ || 0, \")\");\r\n        target.style.cssText += \"left:0px;top:0px;\"\r\n            + \"transform-origin:\".concat(transformOrigin, \";\")\r\n            + \"width:\".concat(width, \"px;height:\").concat(height, \"px;\")\r\n            + \"transform: \".concat(transform);\r\n        state.width = width;\r\n        state.height = height;\r\n        var container = this.getContainer();\r\n        var info = getMoveableTargetInfo(this.controlBox, target, this.controlBox, this.getContainer(), this._rootContainer || container, []);\r\n        var pos = [info.left, info.top];\r\n        var _c = __read(getAbsolutePosesByState(info), 4), pos1 = _c[0], pos2 = _c[1], pos3 = _c[2], pos4 = _c[3]; // info.left + info.pos(1 ~ 4)\r\n        var minPos = getMinMaxs([pos1, pos2, pos3, pos4]);\r\n        var delta = [minPos.minX, minPos.minY];\r\n        var direction = sign(scale[0] * scale[1]);\r\n        info.pos1 = minus(pos1, delta);\r\n        info.pos2 = minus(pos2, delta);\r\n        info.pos3 = minus(pos3, delta);\r\n        info.pos4 = minus(pos4, delta);\r\n        // info.left = info.left + delta[0];\r\n        // info.top = info.top + delta[1];\r\n        info.left = minX - info.left + delta[0];\r\n        info.top = minY - info.top + delta[1];\r\n        info.origin = minus(plus(pos, info.origin), delta);\r\n        info.beforeOrigin = minus(plus(pos, info.beforeOrigin), delta);\r\n        info.originalBeforeOrigin = plus(pos, info.originalBeforeOrigin);\r\n        info.transformOrigin = minus(plus(pos, info.transformOrigin), delta);\r\n        target.style.transform\r\n            = \"translate(\".concat(-deltaX - delta[0], \"px, \").concat(-deltaY - delta[1], \"px)\")\r\n                + rotateScale;\r\n        setStoreCache();\r\n        this.updateState(__assign(__assign({}, info), { posDelta: delta, direction: direction, beforeDirection: direction }), isSetState);\r\n    };\r\n    MoveableGroup.prototype.getRect = function () {\r\n        return __assign(__assign({}, _super.prototype.getRect.call(this)), { children: this.moveables.map(function (child) { return child.getRect(); }) });\r\n    };\r\n    MoveableGroup.prototype.triggerEvent = function (name, e, isManager) {\r\n        if (isManager || name.indexOf(\"Group\") > -1) {\r\n            return _super.prototype.triggerEvent.call(this, name, e);\r\n        }\r\n        else {\r\n            this._emitter.trigger(name, e);\r\n        }\r\n    };\r\n    MoveableGroup.prototype.getRequestChildStyles = function () {\r\n        var styleNames = this.getEnabledAbles().reduce(function (names, able) {\r\n            var _a, _b;\r\n            var ableStyleNames = ((_b = (_a = able.requestChildStyle) === null || _a === void 0 ? void 0 : _a.call(able)) !== null && _b !== void 0 ? _b : []);\r\n            return __spreadArray(__spreadArray([], __read(names), false), __read(ableStyleNames), false);\r\n        }, []);\r\n        return styleNames;\r\n    };\r\n    MoveableGroup.prototype.getMoveables = function () {\r\n        return __spreadArray([], __read(this.moveables), false);\r\n    };\r\n    MoveableGroup.prototype.updateAbles = function () {\r\n        _super.prototype.updateAbles.call(this, __spreadArray(__spreadArray([], __read(this.props.ables), false), [Groupable], false), \"Group\");\r\n    };\r\n    MoveableGroup.prototype._updateTargets = function () {\r\n        _super.prototype._updateTargets.call(this);\r\n        this._originalDragTarget = this.props.dragTarget || this.areaElement;\r\n        this._dragTarget = getRefTarget(this._originalDragTarget, true);\r\n    };\r\n    MoveableGroup.prototype._updateEvents = function () {\r\n        var state = this.state;\r\n        var props = this.props;\r\n        var prevTarget = this._prevDragTarget;\r\n        var nextTarget = props.dragTarget || this.areaElement;\r\n        var targets = props.targets;\r\n        var _a = this.differ.update(targets), added = _a.added, changed = _a.changed, removed = _a.removed;\r\n        var isTargetChanged = added.length || removed.length;\r\n        if (isTargetChanged || this._prevOriginalDragTarget !== this._originalDragTarget) {\r\n            unsetGesto(this, false);\r\n            unsetGesto(this, true);\r\n            this.updateState({ gestos: {} });\r\n        }\r\n        if (prevTarget !== nextTarget) {\r\n            state.target = null;\r\n        }\r\n        if (!state.target) {\r\n            state.target = this.areaElement;\r\n            this.controlBox.style.display = \"block\";\r\n        }\r\n        if (state.target) {\r\n            if (!this.targetGesto) {\r\n                this.targetGesto = getTargetAbleGesto(this, this._dragTarget, \"Group\");\r\n            }\r\n            if (!this.controlGesto) {\r\n                this.controlGesto = getControlAbleGesto(this, \"GroupControl\");\r\n            }\r\n        }\r\n        var isContainerChanged = !equals(state.container, props.container);\r\n        if (isContainerChanged) {\r\n            state.container = props.container;\r\n        }\r\n        if (isContainerChanged\r\n            || isTargetChanged\r\n            || this.transformOrigin !== (props.defaultGroupOrigin || \"50% 50%\")\r\n            || changed.length\r\n            || targets.length && !isDeepArrayEquals(this._targetGroups, props.targetGroups || [])) {\r\n            this.updateRect();\r\n            this._hasFirstTargets = true;\r\n        }\r\n        this._isPropTargetChanged = !!isTargetChanged;\r\n    };\r\n    MoveableGroup.prototype._updateObserver = function () { };\r\n    MoveableGroup.defaultProps = __assign(__assign({}, MoveableManager.defaultProps), { transformOrigin: [\"50%\", \"50%\"], groupable: true, dragArea: true, keepRatio: true, targets: [], defaultGroupRotate: 0, defaultGroupOrigin: \"50% 50%\" });\r\n    return MoveableGroup;\r\n}(MoveableManager));\n\n/**\r\n * @namespace Moveable.IndividualGroup\r\n * @description Create targets individually, not as a group.Create targets individually, not as a group.\r\n */\r\nvar MoveableIndividualGroup = /*#__PURE__*/ (function (_super) {\r\n    __extends(MoveableIndividualGroup, _super);\r\n    function MoveableIndividualGroup() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.moveables = [];\r\n        return _this;\r\n    }\r\n    MoveableIndividualGroup.prototype.render = function () {\r\n        var _this = this;\r\n        var _a;\r\n        var props = this.props;\r\n        var cspNonce = props.cspNonce, ControlBoxElement = props.cssStyled, persistData = props.persistData;\r\n        var targets = props.targets || [];\r\n        var length = targets.length;\r\n        var canPersist = this.isUnmounted || !length;\r\n        var persistDatChildren = (_a = persistData === null || persistData === void 0 ? void 0 : persistData.children) !== null && _a !== void 0 ? _a : [];\r\n        if (canPersist && !length && persistDatChildren.length) {\r\n            targets = persistDatChildren.map(function () { return null; });\r\n        }\r\n        else if (!canPersist) {\r\n            persistDatChildren = [];\r\n        }\r\n        return React.createElement(ControlBoxElement, { cspNonce: cspNonce, ref: ref(this, \"controlBox\"), className: prefix(\"control-box\") }, targets.map(function (target, i) {\r\n            var _a, _b;\r\n            var individualProps = (_b = (_a = props.individualGroupableProps) === null || _a === void 0 ? void 0 : _a.call(props, target, i)) !== null && _b !== void 0 ? _b : {};\r\n            return React.createElement(MoveableManager, __assign({ key: \"moveable\" + i, ref: refs(_this, \"moveables\", i) }, props, individualProps, { target: target, wrapperMoveable: _this, isWrapperMounted: _this.isMoveableMounted, persistData: persistDatChildren[i] }));\r\n        }));\r\n    };\r\n    MoveableIndividualGroup.prototype.componentDidMount = function () { };\r\n    MoveableIndividualGroup.prototype.componentDidUpdate = function () { };\r\n    MoveableIndividualGroup.prototype.getTargets = function () {\r\n        return this.props.targets;\r\n    };\r\n    MoveableIndividualGroup.prototype.updateRect = function (type, isTarget, isSetState) {\r\n        if (isSetState === void 0) { isSetState = true; }\r\n        setStoreCache(true);\r\n        this.moveables.forEach(function (moveable) {\r\n            moveable.updateRect(type, isTarget, isSetState);\r\n        });\r\n        setStoreCache();\r\n    };\r\n    MoveableIndividualGroup.prototype.getRect = function () {\r\n        return __assign(__assign({}, _super.prototype.getRect.call(this)), { children: this.moveables.map(function (child) { return child.getRect(); }) });\r\n    };\r\n    MoveableIndividualGroup.prototype.request = function (ableName, param, isInstant) {\r\n        if (param === void 0) { param = {}; }\r\n        var results = this.moveables.map(function (m) { return m.request(ableName, __assign(__assign({}, param), { isInstant: false }), false); });\r\n        var requestInstant = isInstant || param.isInstant;\r\n        var requester = {\r\n            request: function (ableParam) {\r\n                results.forEach(function (r) { return r.request(ableParam); });\r\n                return this;\r\n            },\r\n            requestEnd: function () {\r\n                results.forEach(function (r) { return r.requestEnd(); });\r\n                return this;\r\n            },\r\n        };\r\n        return requestInstant ? requester.request(param).requestEnd() : requester;\r\n    };\r\n    MoveableIndividualGroup.prototype.dragStart = function (e, target) {\r\n        if (target === void 0) { target = e.target; }\r\n        var inputTarget = target;\r\n        var childMoveable = find(this.moveables, function (child) {\r\n            var target = child.getTargets()[0];\r\n            var controlBoxElement = child.getControlBoxElement();\r\n            var dragElement = child.getDragElement();\r\n            if (!target || !dragElement) {\r\n                return false;\r\n            }\r\n            return dragElement === inputTarget || dragElement.contains(inputTarget)\r\n                || (dragElement !== target && target === inputTarget || target.contains(inputTarget))\r\n                || controlBoxElement === inputTarget || controlBoxElement.contains(inputTarget);\r\n        });\r\n        if (childMoveable) {\r\n            childMoveable.dragStart(e, target);\r\n        }\r\n        return this;\r\n    };\r\n    MoveableIndividualGroup.prototype.hitTest = function () {\r\n        return 0;\r\n    };\r\n    MoveableIndividualGroup.prototype.isInside = function () {\r\n        return false;\r\n    };\r\n    MoveableIndividualGroup.prototype.isDragging = function () {\r\n        return false;\r\n    };\r\n    MoveableIndividualGroup.prototype.getDragElement = function () {\r\n        return null;\r\n    };\r\n    MoveableIndividualGroup.prototype.getMoveables = function () {\r\n        return __spreadArray([], __read(this.moveables), false);\r\n    };\r\n    MoveableIndividualGroup.prototype.updateRenderPoses = function () { };\r\n    MoveableIndividualGroup.prototype.checkUpdate = function () { };\r\n    MoveableIndividualGroup.prototype.triggerEvent = function () { };\r\n    MoveableIndividualGroup.prototype.updateAbles = function () { };\r\n    MoveableIndividualGroup.prototype._updateEvents = function () { };\r\n    MoveableIndividualGroup.prototype._updateObserver = function () { };\r\n    return MoveableIndividualGroup;\r\n}(MoveableManager));\n\nfunction getElementTargets(refTargets, selectorMap) {\r\n    var elementTargets = [];\r\n    refTargets.forEach(function (target) {\r\n        if (!target) {\r\n            return;\r\n        }\r\n        if (isString(target)) {\r\n            if (selectorMap[target]) {\r\n                elementTargets.push.apply(elementTargets, __spreadArray([], __read(selectorMap[target]), false));\r\n            }\r\n            return;\r\n        }\r\n        if (isArray(target)) {\r\n            elementTargets.push.apply(elementTargets, __spreadArray([], __read(getElementTargets(target, selectorMap)), false));\r\n        }\r\n        else {\r\n            elementTargets.push(target);\r\n        }\r\n    });\r\n    return elementTargets;\r\n}\r\nfunction getTargetGroups(refTargets, selectorMap) {\r\n    var targetGroups = [];\r\n    refTargets.forEach(function (target) {\r\n        if (!target) {\r\n            return;\r\n        }\r\n        if (isString(target)) {\r\n            if (selectorMap[target]) {\r\n                targetGroups.push.apply(targetGroups, __spreadArray([], __read(selectorMap[target]), false));\r\n            }\r\n            return;\r\n        }\r\n        if (isArray(target)) {\r\n            targetGroups.push(getTargetGroups(target, selectorMap));\r\n        }\r\n        else {\r\n            targetGroups.push(target);\r\n        }\r\n    });\r\n    return targetGroups;\r\n}\r\nfunction compareRefTargets(prevRefTargets, nextRefTargets) {\r\n    return (prevRefTargets.length !== nextRefTargets.length) || prevRefTargets.some(function (target, i) {\r\n        var nextTarget = nextRefTargets[i];\r\n        if (!target && !nextTarget) {\r\n            return false;\r\n        }\r\n        else if (target != nextTarget) {\r\n            if (isArray(target) && isArray(nextTarget)) {\r\n                return compareRefTargets(target, nextTarget);\r\n            }\r\n            return true;\r\n        }\r\n        return false;\r\n    });\r\n}\r\nvar InitialMoveable = /*#__PURE__*/ (function (_super) {\r\n    __extends(InitialMoveable, _super);\r\n    function InitialMoveable() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.refTargets = [];\r\n        _this.selectorMap = {};\r\n        _this._differ = new ChildrenDiffer();\r\n        _this._elementTargets = [];\r\n        _this._tmpRefTargets = [];\r\n        _this._tmpSelectorMap = {};\r\n        _this._onChangeTargets = null;\r\n        return _this;\r\n    }\r\n    InitialMoveable.makeStyled = function () {\r\n        var cssMap = {};\r\n        var ables = this.getTotalAbles();\r\n        ables.forEach(function (_a) {\r\n            var css = _a.css;\r\n            if (!css) {\r\n                return;\r\n            }\r\n            css.forEach(function (text) {\r\n                cssMap[text] = true;\r\n            });\r\n        });\r\n        var style = getKeys(cssMap).join(\"\\n\");\r\n        this.defaultStyled = styled(\"div\", prefixCSS(PREFIX, MOVEABLE_CSS + style));\r\n    };\r\n    InitialMoveable.getTotalAbles = function () {\r\n        return __spreadArray([Default, Groupable, IndividualGroupable, DragArea], __read(this.defaultAbles), false);\r\n    };\r\n    InitialMoveable.prototype.render = function () {\r\n        var _a;\r\n        var moveableContructor = this.constructor;\r\n        if (!moveableContructor.defaultStyled) {\r\n            moveableContructor.makeStyled();\r\n        }\r\n        var _b = this.props, userAbles = _b.ables, userProps = _b.props, props = __rest(_b, [\"ables\", \"props\"]);\r\n        var _c = __read(this._updateRefs(true), 2), refTargets = _c[0], nextSelectorMap = _c[1];\r\n        var elementTargets = getElementTargets(refTargets, nextSelectorMap);\r\n        var isGroup = elementTargets.length > 1;\r\n        var totalAbles = moveableContructor.getTotalAbles();\r\n        var ables = __spreadArray(__spreadArray([], __read(totalAbles), false), __read((userAbles || [])), false);\r\n        var nextProps = __assign(__assign(__assign({}, props), (userProps || {})), { ables: ables, cssStyled: moveableContructor.defaultStyled, customStyledMap: moveableContructor.customStyledMap });\r\n        this._elementTargets = elementTargets;\r\n        var firstRenderState = null;\r\n        var prevMoveable = this.moveable;\r\n        var persistData = props.persistData;\r\n        if (persistData === null || persistData === void 0 ? void 0 : persistData.children) {\r\n            isGroup = true;\r\n        }\r\n        // Even one child is treated as a group if individualGroupable is enabled. #867\r\n        if (props.individualGroupable) {\r\n            return React.createElement(MoveableIndividualGroup, __assign({ key: \"individual-group\", ref: ref(this, \"moveable\") }, nextProps, { target: null, targets: elementTargets }));\r\n        }\r\n        if (isGroup) {\r\n            var targetGroups = getTargetGroups(refTargets, nextSelectorMap);\r\n            // manager\r\n            if (prevMoveable && !prevMoveable.props.groupable && !prevMoveable.props.individualGroupable) {\r\n                var target = prevMoveable.props.target;\r\n                if (target && elementTargets.indexOf(target) > -1) {\r\n                    firstRenderState = __assign({}, prevMoveable.state);\r\n                }\r\n            }\r\n            return React.createElement(MoveableGroup, __assign({ key: \"group\", ref: ref(this, \"moveable\") }, nextProps, (_a = props.groupableProps) !== null && _a !== void 0 ? _a : {}, { target: null, targets: elementTargets, targetGroups: targetGroups, firstRenderState: firstRenderState }));\r\n        }\r\n        else {\r\n            var target_1 = elementTargets[0];\r\n            // manager\r\n            if (prevMoveable && (prevMoveable.props.groupable || prevMoveable.props.individualGroupable)) {\r\n                var moveables = prevMoveable.moveables || [];\r\n                var prevTargetMoveable = find(moveables, function (mv) { return mv.props.target === target_1; });\r\n                if (prevTargetMoveable) {\r\n                    firstRenderState = __assign({}, prevTargetMoveable.state);\r\n                }\r\n            }\r\n            return React.createElement(MoveableManager, __assign({ key: \"single\", ref: ref(this, \"moveable\") }, nextProps, { target: target_1, firstRenderState: firstRenderState }));\r\n        }\r\n    };\r\n    InitialMoveable.prototype.componentDidMount = function () {\r\n        this._checkChangeTargets();\r\n    };\r\n    InitialMoveable.prototype.componentDidUpdate = function () {\r\n        this._checkChangeTargets();\r\n    };\r\n    InitialMoveable.prototype.componentWillUnmount = function () {\r\n        this.selectorMap = {};\r\n        this.refTargets = [];\r\n    };\r\n    /**\r\n     * Get targets set in moveable through target or targets of props.\r\n     * @method Moveable#getTargets\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body, {\r\n     *    target: [targetRef, \".target\", document.querySelectorAll(\".target\")],\r\n     * });\r\n     *\r\n     * console.log(moveable.getTargets());\r\n     */\r\n    InitialMoveable.prototype.getTargets = function () {\r\n        var _a, _b;\r\n        return (_b = (_a = this.moveable) === null || _a === void 0 ? void 0 : _a.getTargets()) !== null && _b !== void 0 ? _b : [];\r\n    };\r\n    /**\r\n     * If the element list corresponding to the selector among the targets is changed, it is updated.\r\n     * @method Moveable#updateSelectors\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body, {\r\n     *    target: \".target\",\r\n     * });\r\n     *\r\n     * moveable.updateSelectors();\r\n     */\r\n    InitialMoveable.prototype.updateSelectors = function () {\r\n        this.selectorMap = {};\r\n        this._updateRefs();\r\n        this.forceUpdate();\r\n    };\r\n    /**\r\n     * User changes target and waits for target to change.\r\n     * @method Moveable#waitToChangeTarget\r\n     * @story combination-with-other-components--components-selecto\r\n     * @example\r\n     * document.querySelector(\".target\").addEventListener(\"mousedown\", e => {\r\n     *   moveable.waitToChangeTarget().then(() => {\r\n     *      moveable.dragStart(e, e.currentTarget);\r\n     *   });\r\n     *   moveable.target = e.currentTarget;\r\n     * });\r\n     */\r\n    InitialMoveable.prototype.waitToChangeTarget = function () {\r\n        // let resolvePromise: (e: OnChangeTarget) => void;\r\n        var _this = this;\r\n        // this._onChangeTargets = () => {\r\n        //     this._onChangeTargets = null;\r\n        //     resolvePromise({\r\n        //         moveable: this.getManager(),\r\n        //         targets: this._elementTargets,\r\n        //     });\r\n        // };\r\n        // return new Promise<OnChangeTarget>(resolve => {\r\n        //     resolvePromise = resolve;\r\n        // });\r\n        var resolvePromise;\r\n        this._onChangeTargets = function () {\r\n            _this._onChangeTargets = null;\r\n            resolvePromise();\r\n        };\r\n        return new Promise(function (resolve) {\r\n            resolvePromise = resolve;\r\n        });\r\n    };\r\n    InitialMoveable.prototype.waitToChangeTargets = function () {\r\n        return this.waitToChangeTarget();\r\n    };\r\n    InitialMoveable.prototype.getManager = function () {\r\n        return this.moveable;\r\n    };\r\n    InitialMoveable.prototype.getMoveables = function () {\r\n        return this.moveable.getMoveables();\r\n    };\r\n    InitialMoveable.prototype.getDragElement = function () {\r\n        return this.moveable.getDragElement();\r\n    };\r\n    InitialMoveable.prototype._updateRefs = function (isRender) {\r\n        var prevRefTargets = this.refTargets;\r\n        var nextRefTargets = getRefTargets((this.props.target || this.props.targets));\r\n        var isBrowser = typeof document !== \"undefined\";\r\n        var isUpdate = compareRefTargets(prevRefTargets, nextRefTargets);\r\n        var selectorMap = this.selectorMap;\r\n        var nextSelectorMap = {};\r\n        this.refTargets.forEach(function updateSelectorMap(target) {\r\n            if (isString(target)) {\r\n                var selectorTarget = selectorMap[target];\r\n                if (selectorTarget) {\r\n                    nextSelectorMap[target] = selectorMap[target];\r\n                }\r\n                else if (isBrowser) {\r\n                    isUpdate = true;\r\n                    nextSelectorMap[target] = [].slice.call(document.querySelectorAll(target));\r\n                }\r\n            }\r\n            else if (isArray(target)) {\r\n                target.forEach(updateSelectorMap);\r\n            }\r\n        });\r\n        this._tmpRefTargets = nextRefTargets;\r\n        this._tmpSelectorMap = nextSelectorMap;\r\n        return [\r\n            nextRefTargets,\r\n            nextSelectorMap,\r\n            !isRender && isUpdate,\r\n        ];\r\n    };\r\n    InitialMoveable.prototype._checkChangeTargets = function () {\r\n        var _a, _b, _c;\r\n        this.refTargets = this._tmpRefTargets;\r\n        this.selectorMap = this._tmpSelectorMap;\r\n        var _d = this._differ.update(this._elementTargets), added = _d.added, removed = _d.removed;\r\n        var isTargetChanged = added.length || removed.length;\r\n        if (isTargetChanged) {\r\n            (_b = (_a = this.props).onChangeTargets) === null || _b === void 0 ? void 0 : _b.call(_a, {\r\n                moveable: this.moveable,\r\n                targets: this._elementTargets,\r\n            });\r\n            (_c = this._onChangeTargets) === null || _c === void 0 ? void 0 : _c.call(this);\r\n        }\r\n        var _e = __read(this._updateRefs(), 3), refTargets = _e[0], selectorMap = _e[1], isUpdate = _e[2];\r\n        this.refTargets = refTargets;\r\n        this.selectorMap = selectorMap;\r\n        if (isUpdate) {\r\n            this.forceUpdate();\r\n        }\r\n    };\r\n    InitialMoveable.defaultAbles = [];\r\n    InitialMoveable.customStyledMap = {};\r\n    InitialMoveable.defaultStyled = null;\r\n    __decorate([\r\n        withMethods(MOVEABLE_METHODS)\r\n    ], InitialMoveable.prototype, \"moveable\", void 0);\r\n    return InitialMoveable;\r\n}(React.PureComponent));\n\nvar Moveable = /*#__PURE__*/ (function (_super) {\r\n    __extends(Moveable, _super);\r\n    function Moveable() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Moveable.defaultAbles = MOVEABLE_ABLES;\r\n    return Moveable;\r\n}(InitialMoveable));\n\nfunction makeMoveable(ables) {\r\n    var _a;\r\n    return _a = /*#__PURE__*/ (function (_super) {\r\n            __extends(Moveable, _super);\r\n            function Moveable() {\r\n                return _super !== null && _super.apply(this, arguments) || this;\r\n            }\r\n            return Moveable;\r\n        }(InitialMoveable)),\r\n        _a.defaultAbles = ables,\r\n        _a;\r\n}\n\nexport { Clippable, DIRECTIONS, Draggable, edgeDraggable as EdgeDraggable, InitialMoveable, MOVEABLE_ABLES, MOVEABLE_EVENTS, MOVEABLE_METHODS, MOVEABLE_PROPS, Pinchable, Resizable, Rotatable, Roundable, Scalable, Snappable, Warpable, calculateElementPosition, Moveable as default, getElementInfo, makeAble, makeMoveable };\n//# sourceMappingURL=moveable.esm.js.map\n","/* ***** BEGIN LICENSE BLOCK *****\n\tCopyright (c) 2024-2024 Famibee (famibee.blog38.fc2.com)\n\n\tThis software is released under the MIT License.\n\thttp://opensource.org/licenses/mit-license.php\n** ***** END LICENSE BLOCK ***** */\n\nimport type {T_LAY_IDX, T_LAY_CMN} from './Stage';\nimport {SEARCH_PATH_ARG_EXT} from '../ts/ConfigBase';\n\nimport {MouseEvent, useRef} from 'react';\nimport Moveable from 'react-moveable';\n\n\ntype T_GRPARG = T_LAY_CMN & {\n\tfn\t\t: string;\n};\nexport type T_GRPLAY = T_LAY_IDX & {cls: 'GRP'} & T_GRPARG;\n\n\nexport default function GrpLayer({cmn: {styChild, sys, sty4Moveable}, fn}: T_GRPARG) {\n\tconst search = (fn: string)=> sys.cfg.searchPath(fn, SEARCH_PATH_ARG_EXT.SP_GSM);\n\n\tconst onMouseDown = (e: MouseEvent)=> {\t// left, middle, right\n\t\tif (e.button != 1) {\n\t\t\treturn\n\t\t}\nconsole.log(`fn:GrpLayer.tsx line:28 MIDDLE:`);\n\t};\n\n\tconst img0 = useRef<HTMLImageElement>(null);\n\treturn <>\n\t\t<img css={styChild} src={search(fn)} ref={img0} style={sty4Moveable} onMouseDown={e=> onMouseDown(e)}/>\n\t\t<Moveable\n\t\t\ttarget={img0}\n\n\t\t\t/* draggable */\n\t\t\tdraggable={true}\n\t\t\tthrottleDrag={1}\n\t\t\tonDrag={({target: {style}, transform})=> {\n\t\t\t\tstyle.transform = transform;\n\t\t\t}}\n\n\t\t\t/* resizable*/\n\t\t\tresizable={true}\n\t\t\tkeepRatio={true}\n\t\t\tonResize={({target: {style}, width, height, drag})=> {\n\t\t\t\tstyle.width = `${width}px`;\n\t\t\t\tstyle.height = `${height}px`;\n\t\t\t\tstyle.transform = drag.transform;\n\t\t\t}}\n\n\t\t\t/* rotatable */\n\t\t\trotatable={true}\n\t\t\tthrottleRotate={0}\n\t\t\tstartDragRotate={0}\n\t\t\tthrottleDragRotate={0}\n\t\t\trotationPosition={'top'}\n\t\t\tonRotate={({target: {style}, drag})=> {\n\t\t\t\tstyle.transform = drag.transform;\n\t\t\t}}\n\n\t\t\toriginDraggable={true}\n\t\t\tonDragOrigin={({target: {style}, transformOrigin, drag})=> {\n\t\t\t\tstyle.transformOrigin = transformOrigin;\n\t\t\t\tstyle.transform = drag.transform;\n\t\t\t}}\n\t\t/>\n\t</>;\n}\n","import { h as hasOwn, E as Emotion, c as createEmotionProps, w as withEmotionCache, T as ThemeContext, i as isDevelopment } from './emotion-element-f0de968e.browser.esm.js';\nexport { C as CacheProvider, T as ThemeContext, a as ThemeProvider, _ as __unsafe_useEmotionCache, u as useTheme, w as withEmotionCache, b as withTheme } from './emotion-element-f0de968e.browser.esm.js';\nimport * as React from 'react';\nimport { insertStyles, registerStyles, getRegisteredStyles } from '@emotion/utils';\nimport { useInsertionEffectWithLayoutFallback, useInsertionEffectAlwaysWithSyncFallback } from '@emotion/use-insertion-effect-with-fallbacks';\nimport { serializeStyles } from '@emotion/serialize';\nimport '@emotion/cache';\nimport '@babel/runtime/helpers/extends';\nimport '@emotion/weak-memoize';\nimport '../_isolated-hnrs/dist/emotion-react-_isolated-hnrs.browser.esm.js';\nimport 'hoist-non-react-statics';\n\nvar jsx = function jsx(type, props) {\n  // eslint-disable-next-line prefer-rest-params\n  var args = arguments;\n\n  if (props == null || !hasOwn.call(props, 'css')) {\n    return React.createElement.apply(undefined, args);\n  }\n\n  var argsLength = args.length;\n  var createElementArgArray = new Array(argsLength);\n  createElementArgArray[0] = Emotion;\n  createElementArgArray[1] = createEmotionProps(type, props);\n\n  for (var i = 2; i < argsLength; i++) {\n    createElementArgArray[i] = args[i];\n  }\n\n  return React.createElement.apply(null, createElementArgArray);\n};\n\n(function (_jsx) {\n  var JSX;\n\n  (function (_JSX) {})(JSX || (JSX = _jsx.JSX || (_jsx.JSX = {})));\n})(jsx || (jsx = {}));\n\n// initial render from browser, insertBefore context.sheet.tags[0] or if a style hasn't been inserted there yet, appendChild\n// initial client-side render from SSR, use place of hydrating tag\n\nvar Global = /* #__PURE__ */withEmotionCache(function (props, cache) {\n\n  var styles = props.styles;\n  var serialized = serializeStyles([styles], undefined, React.useContext(ThemeContext));\n  // but it is based on a constant that will never change at runtime\n  // it's effectively like having two implementations and switching them out\n  // so it's not actually breaking anything\n\n\n  var sheetRef = React.useRef();\n  useInsertionEffectWithLayoutFallback(function () {\n    var key = cache.key + \"-global\"; // use case of https://github.com/emotion-js/emotion/issues/2675\n\n    var sheet = new cache.sheet.constructor({\n      key: key,\n      nonce: cache.sheet.nonce,\n      container: cache.sheet.container,\n      speedy: cache.sheet.isSpeedy\n    });\n    var rehydrating = false;\n    var node = document.querySelector(\"style[data-emotion=\\\"\" + key + \" \" + serialized.name + \"\\\"]\");\n\n    if (cache.sheet.tags.length) {\n      sheet.before = cache.sheet.tags[0];\n    }\n\n    if (node !== null) {\n      rehydrating = true; // clear the hash so this node won't be recognizable as rehydratable by other <Global/>s\n\n      node.setAttribute('data-emotion', key);\n      sheet.hydrate([node]);\n    }\n\n    sheetRef.current = [sheet, rehydrating];\n    return function () {\n      sheet.flush();\n    };\n  }, [cache]);\n  useInsertionEffectWithLayoutFallback(function () {\n    var sheetRefCurrent = sheetRef.current;\n    var sheet = sheetRefCurrent[0],\n        rehydrating = sheetRefCurrent[1];\n\n    if (rehydrating) {\n      sheetRefCurrent[1] = false;\n      return;\n    }\n\n    if (serialized.next !== undefined) {\n      // insert keyframes\n      insertStyles(cache, serialized.next, true);\n    }\n\n    if (sheet.tags.length) {\n      // if this doesn't exist then it will be null so the style element will be appended\n      var element = sheet.tags[sheet.tags.length - 1].nextElementSibling;\n      sheet.before = element;\n      sheet.flush();\n    }\n\n    cache.insert(\"\", serialized, sheet, false);\n  }, [cache, serialized.name]);\n  return null;\n});\n\nfunction css() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  return serializeStyles(args);\n}\n\nfunction keyframes() {\n  var insertable = css.apply(void 0, arguments);\n  var name = \"animation-\" + insertable.name;\n  return {\n    name: name,\n    styles: \"@keyframes \" + name + \"{\" + insertable.styles + \"}\",\n    anim: 1,\n    toString: function toString() {\n      return \"_EMO_\" + this.name + \"_\" + this.styles + \"_EMO_\";\n    }\n  };\n}\n\nvar classnames = function classnames(args) {\n  var len = args.length;\n  var i = 0;\n  var cls = '';\n\n  for (; i < len; i++) {\n    var arg = args[i];\n    if (arg == null) continue;\n    var toAdd = void 0;\n\n    switch (typeof arg) {\n      case 'boolean':\n        break;\n\n      case 'object':\n        {\n          if (Array.isArray(arg)) {\n            toAdd = classnames(arg);\n          } else {\n\n            toAdd = '';\n\n            for (var k in arg) {\n              if (arg[k] && k) {\n                toAdd && (toAdd += ' ');\n                toAdd += k;\n              }\n            }\n          }\n\n          break;\n        }\n\n      default:\n        {\n          toAdd = arg;\n        }\n    }\n\n    if (toAdd) {\n      cls && (cls += ' ');\n      cls += toAdd;\n    }\n  }\n\n  return cls;\n};\n\nfunction merge(registered, css, className) {\n  var registeredStyles = [];\n  var rawClassName = getRegisteredStyles(registered, registeredStyles, className);\n\n  if (registeredStyles.length < 2) {\n    return className;\n  }\n\n  return rawClassName + css(registeredStyles);\n}\n\nvar Insertion = function Insertion(_ref) {\n  var cache = _ref.cache,\n      serializedArr = _ref.serializedArr;\n  useInsertionEffectAlwaysWithSyncFallback(function () {\n\n    for (var i = 0; i < serializedArr.length; i++) {\n      insertStyles(cache, serializedArr[i], false);\n    }\n  });\n\n  return null;\n};\n\nvar ClassNames = /* #__PURE__ */withEmotionCache(function (props, cache) {\n  var hasRendered = false;\n  var serializedArr = [];\n\n  var css = function css() {\n    if (hasRendered && isDevelopment) {\n      throw new Error('css can only be used during render');\n    }\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var serialized = serializeStyles(args, cache.registered);\n    serializedArr.push(serialized); // registration has to happen here as the result of this might get consumed by `cx`\n\n    registerStyles(cache, serialized, false);\n    return cache.key + \"-\" + serialized.name;\n  };\n\n  var cx = function cx() {\n    if (hasRendered && isDevelopment) {\n      throw new Error('cx can only be used during render');\n    }\n\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    return merge(cache.registered, css, classnames(args));\n  };\n\n  var content = {\n    css: css,\n    cx: cx,\n    theme: React.useContext(ThemeContext)\n  };\n  var ele = props.children(content);\n  hasRendered = true;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Insertion, {\n    cache: cache,\n    serializedArr: serializedArr\n  }), ele);\n});\n\nexport { ClassNames, Global, jsx as createElement, css, jsx, keyframes };\n","/* ***** BEGIN LICENSE BLOCK *****\n\tCopyright (c) 2024-2024 Famibee (famibee.blog38.fc2.com)\n\n\tThis software is released under the MIT License.\n\thttp://opensource.org/licenses/mit-license.php\n** ***** END LICENSE BLOCK ***** */\n\nimport type {T_LAY_IDX, T_LAY_CMN} from './Stage';\n\nimport {css} from '@emotion/react';\nimport {useRef} from 'react';\nimport Moveable from 'react-moveable';\n\n\ntype T_TXTARG = T_LAY_CMN & {\n\tstr\t\t: string;\n\tb_color?: number;\n};\nexport type T_TXTLAY = T_LAY_IDX & {cls: 'TXT'} & T_TXTARG;\n\n\nexport default function TxtLayer({cmn: {styChild, sty4Moveable}, str}: T_TXTARG) {\n\tconst styTxt = css`\n\t\tpadding: 1em 1.5em;\n\t\tmargin: 2em 0;\n\t\tbackground-color: aquamarine;\n\t\tborder: dotted 6px #ffa500;\n\n\t\tfont-size: xxx-large;\n\t\ttop: 48%;\n\t\twidth: 70%;\n\t`;\n\n\tconst mes = useRef<HTMLSpanElement>(null);\n\treturn <>\n\t\t<span css={[styChild, styTxt]} ref={mes} style={sty4Moveable}>{str}</span>\n\t\t<Moveable\n\t\t\ttarget={mes}\n\n\t\t\t/* draggable */\n\t\t\tdraggable={true}\n\t\t\tthrottleDrag={1}\n\t\t\tonDrag={({target: {style}, transform})=> {\n\t\t\t\tstyle.transform = transform;\n\t\t\t}}\n\n\t\t\t/* resizable*/\n\t\t\tresizable={true}\n\t\t\tkeepRatio={false}\n\t\t\tonResize={({target: {style}, width, height, drag})=> {\n\t\t\t\tstyle.width = `${width}px`;\n\t\t\t\tstyle.height = `${height}px`;\n\t\t\t\tstyle.transform = drag.transform;\n\t\t\t}}\n\n\t\t\t/* rotatable */\n\t\t\trotatable={true}\n\t\t\tthrottleRotate={0}\n\t\t\tstartDragRotate={0}\n\t\t\tthrottleDragRotate={0}\n\t\t\trotationPosition={'top'}\n\t\t\tonRotate={({target: {style}, drag})=> {\n\t\t\t\tstyle.transform = drag.transform;\n\t\t\t}}\n\n\t\t\toriginDraggable={true}\n\t\t\tonDragOrigin={({target: {style}, transformOrigin, drag})=> {\n\t\t\t\tstyle.transformOrigin = transformOrigin;\n\t\t\t\tstyle.transform = drag.transform;\n\t\t\t}}\n\t\t/>\n\t</>;\n}\n","const createStoreImpl = (createState) => {\n  let state;\n  const listeners = /* @__PURE__ */ new Set();\n  const setState = (partial, replace) => {\n    const nextState = typeof partial === \"function\" ? partial(state) : partial;\n    if (!Object.is(nextState, state)) {\n      const previousState = state;\n      state = (replace != null ? replace : typeof nextState !== \"object\" || nextState === null) ? nextState : Object.assign({}, state, nextState);\n      listeners.forEach((listener) => listener(state, previousState));\n    }\n  };\n  const getState = () => state;\n  const getInitialState = () => initialState;\n  const subscribe = (listener) => {\n    listeners.add(listener);\n    return () => listeners.delete(listener);\n  };\n  const api = { setState, getState, getInitialState, subscribe };\n  const initialState = state = createState(setState, getState, api);\n  return api;\n};\nconst createStore = (createState) => createState ? createStoreImpl(createState) : createStoreImpl;\n\nexport { createStore };\n","import React from 'react';\nimport { createStore } from 'zustand/vanilla';\n\nconst identity = (arg) => arg;\nfunction useStore(api, selector = identity) {\n  const slice = React.useSyncExternalStore(\n    api.subscribe,\n    () => selector(api.getState()),\n    () => selector(api.getInitialState())\n  );\n  React.useDebugValue(slice);\n  return slice;\n}\nconst createImpl = (createState) => {\n  const api = createStore(createState);\n  const useBoundStore = (selector) => useStore(api, selector);\n  Object.assign(useBoundStore, api);\n  return useBoundStore;\n};\nconst create = (createState) => createState ? createImpl(createState) : createImpl;\n\nexport { create, useStore };\n","/* ***** BEGIN LICENSE BLOCK *****\n\tCopyright (c) 2024-2024 Famibee (famibee.blog38.fc2.com)\n\n\tThis software is released under the MIT License.\n\thttp://opensource.org/licenses/mit-license.php\n** ***** END LICENSE BLOCK ***** */\n\nimport type {T_LAY} from '../components/Stage';\n\nimport {create} from 'zustand';\n\ntype T_STATE = {\n\ttxt\t\t: string;\n\taddTxt\t: (t: string)=> void;\n\tclearTxt: ()=> void;\n\n\taLay\t: T_LAY[];\n\treplace\t: (arg: string)=> void;\n\taddLayer: (arg: T_LAY)=> void,\n\tchgPic\t: (arg: T_CHGPIC)=> void,\n\tchgStr\t: (arg: T_CHGSTR)=> void,\n}\nexport type T_CHGPIC = {\n\tnm\t: string;\n\tfn\t: string;\n}\nexport type T_CHGSTR = {\n\tnm\t: string;\n\tstr\t: string;\n}\n\n\nexport const useStore = create<T_STATE>()(set=> ({\t// \n\ttxt\t\t: '',\n\taddTxt\t: t=> set(s=> ({txt: s.txt + t})),\n\tclearTxt: ()=> set(()=> ({txt: ''})),\n\n\taLay\t: [],\n\treplace\t: (arg: string)=> set(_=> ({aLay: JSON.parse(arg)})),\n\taddLayer: (arg: T_LAY)=> set(s=> ({aLay: [...s.aLay, arg]})),\n\tchgPic\t: ({nm, fn}: T_CHGPIC)=> set(s=> {\n\t\tconst aLay = [...s.aLay];\n\t\tconst e = aLay.find(e=> e.nm === nm);\n\t\tif (! e) throw ` ${nm} `;\n\t\tif (e.cls !== 'GRP') throw `${nm} `;\n\n\t\te.fn = fn;\n\t\treturn {aLay};\n\t}),\n\tchgStr\t: ({nm, str}: T_CHGSTR)=> set(s=> {\n\t\tconst aLay = [...s.aLay];\n\t\tconst e = aLay.find(e=> e.nm === nm);\n\t\tif (! e) throw ` ${nm} `;\n\t\tif (e.cls !== 'TXT') throw `${nm} `;\n\n\t\te.str = str;\n\t\treturn {aLay};\n\t}),\n}))\n","export var noop = function () { };\nexport function on(obj) {\n    var args = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n    }\n    if (obj && obj.addEventListener) {\n        obj.addEventListener.apply(obj, args);\n    }\n}\nexport function off(obj) {\n    var args = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n    }\n    if (obj && obj.removeEventListener) {\n        obj.removeEventListener.apply(obj, args);\n    }\n}\nexport var isBrowser = typeof window !== 'undefined';\nexport var isNavigator = typeof navigator !== 'undefined';\n","import { useReducer } from 'react';\nvar toggleReducer = function (state, nextValue) {\n    return typeof nextValue === 'boolean' ? nextValue : !state;\n};\nvar useToggle = function (initialValue) {\n    return useReducer(toggleReducer, initialValue);\n};\nexport default useToggle;\n","import { useEffect } from 'react';\nvar useEffectOnce = function (effect) {\n    useEffect(effect, []);\n};\nexport default useEffectOnce;\n","import { useEffect } from 'react';\nimport { isBrowser, off, on } from './misc/util';\nvar defaultTarget = isBrowser ? window : null;\nvar isListenerType1 = function (target) {\n    return !!target.addEventListener;\n};\nvar isListenerType2 = function (target) {\n    return !!target.on;\n};\nvar useEvent = function (name, handler, target, options) {\n    if (target === void 0) { target = defaultTarget; }\n    useEffect(function () {\n        if (!handler) {\n            return;\n        }\n        if (!target) {\n            return;\n        }\n        if (isListenerType1(target)) {\n            on(target, name, handler, options);\n        }\n        else if (isListenerType2(target)) {\n            target.on(name, handler, options);\n        }\n        return function () {\n            if (isListenerType1(target)) {\n                off(target, name, handler, options);\n            }\n            else if (isListenerType2(target)) {\n                target.off(name, handler, options);\n            }\n        };\n    }, [name, handler, target, JSON.stringify(options)]);\n};\nexport default useEvent;\n","import { useMemo } from 'react';\nimport useEvent from './useEvent';\nimport { noop } from './misc/util';\nvar createKeyPredicate = function (keyFilter) {\n    return typeof keyFilter === 'function'\n        ? keyFilter\n        : typeof keyFilter === 'string'\n            ? function (event) { return event.key === keyFilter; }\n            : keyFilter\n                ? function () { return true; }\n                : function () { return false; };\n};\nvar useKey = function (key, fn, opts, deps) {\n    if (fn === void 0) { fn = noop; }\n    if (opts === void 0) { opts = {}; }\n    if (deps === void 0) { deps = [key]; }\n    var _a = opts.event, event = _a === void 0 ? 'keydown' : _a, target = opts.target, options = opts.options;\n    var useMemoHandler = useMemo(function () {\n        var predicate = createKeyPredicate(key);\n        var handler = function (handlerEvent) {\n            if (predicate(handlerEvent)) {\n                return fn(handlerEvent);\n            }\n        };\n        return handler;\n    }, deps);\n    useEvent(event, useMemoHandler, target, options);\n};\nexport default useKey;\n","import { useCallback, useRef } from 'react';\nimport { off, on } from './misc/util';\nvar isTouchEvent = function (ev) {\n    return 'touches' in ev;\n};\nvar preventDefault = function (ev) {\n    if (!isTouchEvent(ev))\n        return;\n    if (ev.touches.length < 2 && ev.preventDefault) {\n        ev.preventDefault();\n    }\n};\nvar useLongPress = function (callback, _a) {\n    var _b = _a === void 0 ? {} : _a, _c = _b.isPreventDefault, isPreventDefault = _c === void 0 ? true : _c, _d = _b.delay, delay = _d === void 0 ? 300 : _d;\n    var timeout = useRef();\n    var target = useRef();\n    var start = useCallback(function (event) {\n        // prevent ghost click on mobile devices\n        if (isPreventDefault && event.target) {\n            on(event.target, 'touchend', preventDefault, { passive: false });\n            target.current = event.target;\n        }\n        timeout.current = setTimeout(function () { return callback(event); }, delay);\n    }, [callback, delay, isPreventDefault]);\n    var clear = useCallback(function () {\n        // clearTimeout and removeEventListener\n        timeout.current && clearTimeout(timeout.current);\n        if (isPreventDefault && target.current) {\n            off(target.current, 'touchend', preventDefault);\n        }\n    }, [isPreventDefault]);\n    return {\n        onMouseDown: function (e) { return start(e); },\n        onTouchStart: function (e) { return start(e); },\n        onMouseUp: clear,\n        onMouseLeave: clear,\n        onTouchEnd: clear,\n    };\n};\nexport default useLongPress;\n","import useEffectOnce from './useEffectOnce';\nvar useMount = function (fn) {\n    useEffectOnce(function () {\n        fn();\n    });\n};\nexport default useMount;\n","import { useEffect, useRef } from 'react';\nvar DEFAULT_USE_TITLE_OPTIONS = {\n    restoreOnUnmount: false,\n};\nfunction useTitle(title, options) {\n    if (options === void 0) { options = DEFAULT_USE_TITLE_OPTIONS; }\n    var prevTitleRef = useRef(document.title);\n    if (document.title !== title)\n        document.title = title;\n    useEffect(function () {\n        if (options && options.restoreOnUnmount) {\n            return function () {\n                document.title = prevTitleRef.current;\n            };\n        }\n        else {\n            return;\n        }\n    }, []);\n}\nexport default typeof document !== 'undefined' ? useTitle : function (_title) { };\n","/* ***** BEGIN LICENSE BLOCK *****\n\tCopyright (c) 2024-2024 Famibee (famibee.blog38.fc2.com)\n\n\tThis software is released under the MIT License.\n\thttp://opensource.org/licenses/mit-license.php\n** ***** END LICENSE BLOCK ***** */\n\nimport type {SysBase} from '../SysBase';\nimport {CmnLib, uint} from '../ts/CmnLib';\nimport GrpLayer, {type T_GRPLAY} from './GrpLayer';\nimport TxtLayer, {type T_TXTLAY} from './TxtLayer';\nimport {onLong, type T_ARG} from './Main';\nimport {useStore} from '../store/store';\nimport {BaseMemento} from '../ts/Memento';\n\nimport {useState} from 'react';\nimport {useLongPress, useMount, useToggle} from 'react-use';\nimport {css, type SerializedStyles} from '@emotion/react';\n\nexport type T_LAY_IDX = {\n\tcls\t\t: 'GRP'|'TXT';\n\tnm\t\t: string;\n};\nexport type T_LAY_CMN = {\n\tcmn: {\n\t\tsys\t\t\t: SysBase;\n\t\tstyChild\t: SerializedStyles;\n\t\tsty4Moveable: any;\n\t\tvisible?\t: boolean;\n\t};\n};\nexport type T_LAY = T_GRPLAY | T_TXTLAY;\n\n\nexport default function Stage({arg: {sys}, onClick}: {arg: T_ARG, onClick: ()=> void}) {\n// console.log(`fn:Stage.tsx 0`);\n\tconst aLay = useStore(s=> s.aLay);\n\n\tconst replace = useStore(s=> s.replace);\n\tclass Memento extends BaseMemento {\n\t\treadonly\tnm = 'Stage';\n\t\trestore() {replace(this.stt)}\t// this.stt \n\t}\n\tsys.caretaker.update(()=> new Memento(JSON.stringify(aLay)));\n\n\t// \n\tconst [wh, setWH] = useState<T_WH>(innWH());\n\tuseMount(()=> {\n\t\tfunction onResize() {setWH(innWH())}\n\t\tglobalThis.addEventListener('resize', onResize);\n\t\treturn ()=> globalThis.removeEventListener('resize', onResize);\n\t});\n\tconst {cvsScale} = calcScale(wh);\n\n\t// css\n\tconst styParent = css`\n\t\tposition: relative;\n\n\t\ttransform-origin: left top;\n\t\ttransform: scale(${cvsScale});\n\t\twidth\t: calc(${CmnLib.stageW}px / ${cvsScale});\n\t\theight\t: calc(${CmnLib.stageH}px / ${cvsScale});\n\t`;\n\tconst styChild = css`position: absolute; top: 0; left: 0;`;\n\n\tconst styBtn = css`\n\t\tposition: relative; z-index: 1;\n\n\t\tdisplay: inline-block;\n\t\ttext-align: center;\n\t\tvertical-align: middle;\n\t\ttext-decoration: none;\n\t\twidth: 120px;\n\t\tmargin: auto;\n\t\tpadding: 1rem 4rem;\n\t\tfont-weight: bold;\n\t\tborder: 2px solid #27acd9;\n\t\tcolor: #27acd9;\n\t\tborder-radius: 100vh;\n\t\ttransition: 0.5s;\n\t\ttop: 48%;\n\t\t&:hover {\n\t\t\tcolor: #fff;\n\t\t\tbackground: #27acd9;\n\t\t}\n\t`;\n\n\tconst [isDesignMode, tglDesignMode] = useToggle(false);\n\n\tconst longPressEvent = useLongPress(e=> {\n\t\te.stopPropagation();\t// \n\t\tonLong();\t\t\t// \n\n\t\ttglDesignMode();\n\t\t$isDesignMode = isDesignMode;\n\t}, {isPreventDefault: true, delay: 300,});\n\n\tconst c: T_LAY_CMN = {cmn: {sys, styChild, sty4Moveable: {\n\t\tmaxWidth\t: 'auto',\n\t\tmaxHeight\t: 'auto',\n\t\tminWidth\t: 'auto',\n\t\tminHeight\t: 'auto',\n\t\ttransform\t: 'translate(0px, 0px) rotate(0deg)',\n\t}}};\n\t//\n\treturn <div css={styParent}  onClick={onClick} {...longPressEvent}>\n\t\t{isDesignMode && <>\n\t\t\t<button onClick={()=> {}} css={styBtn}>Click</button>\n\t\t\t<button onClick={()=> {}} css={styBtn}>Back</button>\n\t\t\t<button onClick={()=> {}} css={styBtn}>Prev</button>\n\t\t</>}\n\t\t{aLay.map(l=> l.cls === 'GRP'\n\t\t\t? <GrpLayer key={l.nm} cmn={c.cmn} fn={l.fn}/>\n\t\t\t: <TxtLayer key={l.nm} cmn={c.cmn} str={l.str}/>)}\n\t</div>;\n};\n\ttype T_WH = {\n\t\twidth\t: number;\n\t\theight\t: number;\n\t};\n\tfunction calcScale({width: w, height: h}: T_WH) {\n\t\tlet cvsWidth = 0;\n\t\tlet cvsHeight = 0;\n\t\tlet cvsScale = 1;\n\n\t\t// const cr = heStage.getBoundingClientRect();\n\t\t// if (argChk_Boolean(CmnLib.hDip, 'expanding', true) || isGallery\n\t\tif (CmnLib.stageW > w\n\t\t\t|| CmnLib.stageH > h) {\n\t\t\tif (CmnLib.stageW / CmnLib.stageH <= w / h) {\n\t\t\t\tcvsHeight = h;\n\t\t\t\tcvsWidth = uint(CmnLib.stageW / CmnLib.stageH * h);\n\t\t\t\t// cvsWidth  = CmnLib.stageW /CmnLib.stageH *h;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcvsWidth = w;\n\t\t\t\tcvsHeight = uint(CmnLib.stageH / CmnLib.stageW * w);\n\t\t\t\t// cvsHeight = CmnLib.stageH /CmnLib.stageW *w;\n\t\t\t}\n\t\t\tcvsScale = cvsWidth / CmnLib.stageW;\n\t\t\t// if (isGallery) {\n\t\t\t// \tofsPadLeft_Dom2PIXI\t= 0;\n\t\t\t// \tofsPadTop_Dom2PIXI\t= 0;\n\t\t\t// }\n\t\t\t// else {\n\t\t\t// const sc = 1 -cvsScale;\n\t\t\t// if (CmnLib.isMobile) {\n\t\t\t// \tofsPadLeft_Dom2PIXI = (w -cvsWidth) /2 *sc;\n\t\t\t// \tofsPadTop_Dom2PIXI  = (h -cvsHeight)/2 *sc;\n\t\t\t// }\n\t\t\t// else {\n\t\t\t// \tofsPadLeft_Dom2PIXI = cr.left*sc;\n\t\t\t// \tofsPadTop_Dom2PIXI  = cr.top *sc;\n\t\t\t// }\n\t\t\t// [left] /cvsScale -[left]\n\t\t\t// PaddingLeft  DOMPIXI\n\t\t\t// }\n\t\t}\n\t\telse {\n\t\t\tcvsWidth = CmnLib.stageW;\n\t\t\tcvsHeight = CmnLib.stageH;\n\t\t\tcvsScale = 1;\n\t\t\t// ofsPadLeft_Dom2PIXI\t= 0;\n\t\t\t// ofsPadTop_Dom2PIXI\t= 0;\n\t\t}\n\t\treturn {cvsScale, cvsWidth, cvsHeight};\n\t}\n\tfunction innWH(): T_WH {\n\t\tconst {innerWidth: width, innerHeight: height} = globalThis;\n\t\treturn {width, height};\n\t}\n\nlet $isDesignMode: boolean = false;\nexport const getDesignMode = ()=> $isDesignMode\t// \n","var ExtensionType = /* @__PURE__ */ ((ExtensionType2) => (ExtensionType2.Renderer = \"renderer\", ExtensionType2.Application = \"application\", ExtensionType2.RendererSystem = \"renderer-webgl-system\", ExtensionType2.RendererPlugin = \"renderer-webgl-plugin\", ExtensionType2.CanvasRendererSystem = \"renderer-canvas-system\", ExtensionType2.CanvasRendererPlugin = \"renderer-canvas-plugin\", ExtensionType2.Asset = \"asset\", ExtensionType2.LoadParser = \"load-parser\", ExtensionType2.ResolveParser = \"resolve-parser\", ExtensionType2.CacheParser = \"cache-parser\", ExtensionType2.DetectionParser = \"detection-parser\", ExtensionType2))(ExtensionType || {});\nconst normalizeExtension = (ext) => {\n  if (typeof ext == \"function\" || typeof ext == \"object\" && ext.extension) {\n    if (!ext.extension)\n      throw new Error(\"Extension class must have an extension object\");\n    ext = { ...typeof ext.extension != \"object\" ? { type: ext.extension } : ext.extension, ref: ext };\n  }\n  if (typeof ext == \"object\")\n    ext = { ...ext };\n  else\n    throw new Error(\"Invalid extension type\");\n  return typeof ext.type == \"string\" && (ext.type = [ext.type]), ext;\n}, normalizePriority = (ext, defaultPriority) => normalizeExtension(ext).priority ?? defaultPriority, extensions = {\n  /** @ignore */\n  _addHandlers: {},\n  /** @ignore */\n  _removeHandlers: {},\n  /** @ignore */\n  _queue: {},\n  /**\n   * Remove extensions from PixiJS.\n   * @param extensions - Extensions to be removed.\n   * @returns {PIXI.extensions} For chaining.\n   */\n  remove(...extensions2) {\n    return extensions2.map(normalizeExtension).forEach((ext) => {\n      ext.type.forEach((type) => this._removeHandlers[type]?.(ext));\n    }), this;\n  },\n  /**\n   * Register new extensions with PixiJS.\n   * @param extensions - The spread of extensions to add to PixiJS.\n   * @returns {PIXI.extensions} For chaining.\n   */\n  add(...extensions2) {\n    return extensions2.map(normalizeExtension).forEach((ext) => {\n      ext.type.forEach((type) => {\n        const handlers = this._addHandlers, queue = this._queue;\n        handlers[type] ? handlers[type]?.(ext) : (queue[type] = queue[type] || [], queue[type]?.push(ext));\n      });\n    }), this;\n  },\n  /**\n   * Internal method to handle extensions by name.\n   * @param type - The extension type.\n   * @param onAdd  - Function for handling when extensions are added/registered passes {@link PIXI.ExtensionFormat}.\n   * @param onRemove  - Function for handling when extensions are removed/unregistered passes {@link PIXI.ExtensionFormat}.\n   * @returns {PIXI.extensions} For chaining.\n   */\n  handle(type, onAdd, onRemove) {\n    const addHandlers = this._addHandlers, removeHandlers = this._removeHandlers;\n    if (addHandlers[type] || removeHandlers[type])\n      throw new Error(`Extension type ${type} already has a handler`);\n    addHandlers[type] = onAdd, removeHandlers[type] = onRemove;\n    const queue = this._queue;\n    return queue[type] && (queue[type]?.forEach((ext) => onAdd(ext)), delete queue[type]), this;\n  },\n  /**\n   * Handle a type, but using a map by `name` property.\n   * @param type - Type of extension to handle.\n   * @param map - The object map of named extensions.\n   * @returns {PIXI.extensions} For chaining.\n   */\n  handleByMap(type, map) {\n    return this.handle(\n      type,\n      (extension) => {\n        extension.name && (map[extension.name] = extension.ref);\n      },\n      (extension) => {\n        extension.name && delete map[extension.name];\n      }\n    );\n  },\n  /**\n   * Handle a type, but using a list of extensions.\n   * @param type - Type of extension to handle.\n   * @param list - The list of extensions.\n   * @param defaultPriority - The default priority to use if none is specified.\n   * @returns {PIXI.extensions} For chaining.\n   */\n  handleByList(type, list, defaultPriority = -1) {\n    return this.handle(\n      type,\n      (extension) => {\n        list.includes(extension.ref) || (list.push(extension.ref), list.sort((a, b) => normalizePriority(b, defaultPriority) - normalizePriority(a, defaultPriority)));\n      },\n      (extension) => {\n        const index = list.indexOf(extension.ref);\n        index !== -1 && list.splice(index, 1);\n      }\n    );\n  }\n};\nexport {\n  ExtensionType,\n  extensions\n};\n//# sourceMappingURL=index.mjs.map\n","/* ***** BEGIN LICENSE BLOCK *****\n\tCopyright (c) 2024-2024 Famibee (famibee.blog38.fc2.com)\n\n\tThis software is released under the MIT License.\n\thttp://opensource.org/licenses/mit-license.php\n** ***** END LICENSE BLOCK ***** */\n\nimport type {SysBase} from '../SysBase';\nimport {getDesignMode, type T_LAY} from './Stage';\nimport {useStore, type T_CHGPIC, type T_CHGSTR} from '../store/store';\n\nimport {lazy, Suspense} from 'react';\nimport {useEffectOnce, useKey, useTitle} from 'react-use';\nimport {extensions, ExtensionType} from '@pixi/extensions';\n\nexport type T_ARG = {\n\theStage\t: HTMLElement;\n\tsys\t\t: SysBase;\n};\n\n\nexport async function opening({heStage, sys}: T_ARG) {\n\tconst {createRoot} = await import('react-dom/client');\n\tcreateRoot(heStage).render(<Main heStage={heStage} sys={sys} />);\n\n\tawait Promise.all([\n\t\timport('@pixi/assets'),\n\t\timport('../ts/ScriptMng'),\n\t]).then(async ([{Assets}, {ScriptMng}])=> {\n\t\tawait Assets.init({basePath: location.origin});\n\t\textensions.add({\n\t\t\textension: {\n\t\t\t\ttype: ExtensionType.LoadParser,\n\t\t\t\tname: 'sn-loader',\n\t\t\t\t//priority: LoaderParserPriority.High,\n\t\t\t},\n\t\t\ttest: (url: string)=> url.endsWith('.sn'),\n\t\t\tload: (url: string)=> new Promise(async (re, rj)=> {\n\t\t\t\tconst res = await fetch(url);\n\t\t\t\tif (! res.ok) {rj(`sn-loader fetch err:`+ res.statusText); return}\n\t\n\t\t\t\ttry {\n\t\t\t\t\tre(await sys.dec('sn', await res.text()));\n\t\t\t\t} catch (e) {rj(`sn-loader err url:${url} ${e}`)}\n\t\t\t}),\n\t\t});\n\n\t\tconst scrMng = new ScriptMng(sys, Assets);\n\t\tawait scrMng.load('main');\n\t});\n}\n\n\nfunction Main({heStage, sys}: T_ARG) {\n\tuseTitle(sys.cfg.oCfg.book.title);\n\n\tconst addLayer = useStore(s=> s.addLayer);\n\tconst chgPic = useStore(s=> s.chgPic);\n\tconst chgStr = useStore(s=> s.chgStr);\n\tfunction onClick() {\n\t\tif (isLong) {isLong = false; return}\n\t\tif (getDesignMode() || sys.caretaker.afterKey()) return;\n\nconsole.log(`fn:Main.tsx == next ==`);\n\t\twhile (true) {\n\t\t\tconst {done, value: o} = gen.next();\n\t\t\tif (done) break;\n\n\t\t\tsys.caretaker.key = 'main' + ':'+ ++idxDummy;\n\t\t\tif ('cls' in o) addLayer(o); else\n\t\t\tif ('fn' in o) chgPic(o); else chgStr(o);\n\t\t\tbreak;\n\t\t}\n\t}\n\tuseEffectOnce(()=> onClick());\n\n\t// \n\tuseKey('ArrowDown', e=> {\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\t\tonClick();\n\t});\n\tuseKey('ArrowUp', e=> {\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\t\tsys.caretaker.beforeKey();\n\t});\n// \tconst mouseWheel = useMouseWheel();\t\t//TODO: \n// \tuseEffect(()=> {\n// // \t\tconst isDown = yyy > mouseWheel ?'downwheel' :'upwheel';\n// // console.log(`fn:Main.tsx line:88 ${isDown}`);\n// \t\tif (deltaY_wheel > mouseWheel) onClick(); else sys.caretaker.beforeKey();\n// \t\tdeltaY_wheel = mouseWheel;\n// \t}, [mouseWheel]);\n\n\tconst Stage = lazy(()=> import('./Stage'));\n\treturn <Suspense fallback={<>Loading</>}>\n\t\t<Stage arg={{heStage, sys}} onClick={onClick} />\n\t</Suspense>;\n};\n\tlet idxDummy = 0;\n\t// let deltaY_wheel = 0;\n\tconst gen = generator();\n\t// NOTE: TS\n\tfunction* generator(): Generator<T_LAY | T_CHGPIC | T_CHGSTR> {\n\t\tyield {cls: 'GRP', nm: 'base', fn: 'yun_1184'};\n\t\tyield {cls: 'TXT', nm: 'mes', str: ''};\n\t\tyield {nm: 'mes', str: ''};\n\t\tyield {cls: 'GRP', nm: 'fg0', fn: 'F_1024a'};\n\t\tyield {nm: 'base', fn: 'yun_1317'};\n\t}\n\nlet isLong = false;\nexport function onLong() {isLong = true}\n"],"names":["REACT_ELEMENT_TYPE","REACT_FRAGMENT_TYPE","jsxProd","type","config","maybeKey","key","propName","reactJsxRuntime_production","REACT_PORTAL_TYPE","REACT_STRICT_MODE_TYPE","REACT_PROFILER_TYPE","REACT_CONSUMER_TYPE","REACT_CONTEXT_TYPE","REACT_FORWARD_REF_TYPE","REACT_SUSPENSE_TYPE","REACT_MEMO_TYPE","REACT_LAZY_TYPE","MAYBE_ITERATOR_SYMBOL","getIteratorFn","maybeIterable","ReactNoopUpdateQueue","assign","emptyObject","Component","props","context","updater","partialState","callback","ComponentDummy","PureComponent","pureComponentPrototype","isArrayImpl","ReactSharedInternals","hasOwnProperty","ReactElement","self","source","owner","cloneAndReplaceKey","oldElement","newKey","isValidElement","object","escape","escaperLookup","match","userProvidedKeyEscapeRegex","getElementKey","element","index","noop$1","resolveThenable","thenable","fulfilledValue","error","mapIntoArray","children","array","escapedPrefix","nameSoFar","invokeCallback","c","nextNamePrefix","i","mapChildren","func","result","count","child","lazyInitializer","payload","ctor","moduleObject","reportGlobalError","event","noop","react_production","forEachFunc","forEachContext","n","fn","childArray","defaultValue","childrenLength","render","compare","scope","prevTransition","currentTransition","returnValue","onStartTransitionFinish","usable","action","initialState","permalink","deps","Context","value","initialValue","create","ref","passthrough","reducer","initialArg","init","subscribe","getSnapshot","getServerSnapshot","defineDeprecationWarning","methodName","info","warnNoop","publicInstance","callerName","warningKey","didWarnStateUpdateForUnmountedComponent","testStringCoercion","checkKeyStringCoercion","JSCompiler_inline_result","JSCompiler_temp_const","JSCompiler_inline_result$jscomp$0","getComponentNameFromType","REACT_CLIENT_REFERENCE$2","REACT_SUSPENSE_LIST_TYPE","innerType","isValidElementType","REACT_OFFSCREEN_TYPE","REACT_CLIENT_REFERENCE$1","disabledLog","disableLogs","disabledDepth","prevLog","prevInfo","prevWarn","prevError","prevGroup","prevGroupCollapsed","prevGroupEnd","reenableLogs","describeBuiltInComponentFrame","name","prefix","x","suffix","describeNativeComponentFrame","construct","reentry","frame","componentFrameCache","previousDispatcher","RunInRootFrame","Fake","control","x$0","x$1","sample","namePropDescriptor","_RunInRootFrame$Deter","sampleStack","controlStack","sampleLines","controlLines","_frame","describeUnknownElementTypeFrameInDEV","prototype","getOwner","dispatcher","hasValidKey","getter","defineKeyPropWarningGetter","displayName","warnAboutAccessingKey","specialPropKeyWarningShown","elementRefGetterWithDeprecationWarning","componentName","didWarnAboutElementRef","validateChildKeys","node","parentType","REACT_CLIENT_REFERENCE","validateExplicitKey","getCurrentComponentErrorInfo","ownerHasKeyUseWarning","childOwner","prevGetCurrentStack","stack","childKey","didWarnAboutMaps","resolveDispatcher","enqueueTask","task","enqueueTaskImpl","requireString","module","didWarnAboutMessageChannel","channel","aggregateErrors","errors","popActScope","prevActQueue","prevActScopeDepth","actScopeDepth","recursivelyFlushAsyncActWork","resolve","reject","queue","flushActQueue","isFlushing","continuation","deprecatedAPIs","fnName","didWarnAboutOldJSXRuntime","didWarnNoAwaitAct","queueSeveralMicrotasks","exports","didAwaitActCall","error$2","_thrownError","returnValue$jscomp$0","a","typeString","_i","refObject","elementType","ownName","formatterFn","reactModule","require$$0","require$$1","jsxDEVImpl","isStaticChildren","keys","k","didWarnAboutKeySpread","React","reactJsxRuntime_development","jsxRuntimeModule","isDevelopment","sheetForTag","tag","createStyleElement","options","StyleSheet","_this","before","_proto","nodes","rule","sheet","_tag$parentNode","MS","MOZ","WEBKIT","COMMENT","RULESET","DECLARATION","IMPORT","KEYFRAMES","LAYER","abs","from","hash","length","charat","trim","pattern","replace","replacement","indexof","search","substr","begin","end","strlen","sizeof","append","combine","line","column","position","character","characters","root","parent","copy","char","prev","next","peek","caret","slice","token","alloc","dealloc","delimit","delimiter","whitespace","escaping","commenter","identifier","compile","parse","rules","rulesets","pseudo","points","declarations","offset","atrule","property","previous","variable","scanning","ampersand","reference","comment","declaration","ruleset","post","size","j","y","z","serialize","output","stringify","middleware","collection","rulesheet","memoize","cache","arg","identifierWithPointTracking","toRules","parsed","getRules","fixedElements","compat","isImplicitRule","parentRules","removeLabel","prefixer","defaultStylisPlugins","createCache","ssrStyles","dataEmotionAttribute","stylisPlugins","inserted","container","nodesToHydrate","attrib","_insert","omnipresentPlugins","currentSheet","finalizingPlugins","serializer","stylis","styles","selector","serialized","shouldCache","b","d","e","f","g","h","l","m","p","q","r","t","v","w","u","A","reactIs_production_min","hasSymbol","REACT_PROVIDER_TYPE","REACT_ASYNC_MODE_TYPE","REACT_CONCURRENT_MODE_TYPE","REACT_BLOCK_TYPE","REACT_FUNDAMENTAL_TYPE","REACT_RESPONDER_TYPE","REACT_SCOPE_TYPE","typeOf","$$typeof","$$typeofType","AsyncMode","ConcurrentMode","ContextConsumer","ContextProvider","Element","ForwardRef","Fragment","Lazy","Memo","Portal","Profiler","StrictMode","Suspense","hasWarnedAboutDeprecatedIsAsyncMode","isAsyncMode","isConcurrentMode","isContextConsumer","isContextProvider","isElement","isForwardRef","isFragment","isLazy","isMemo","isPortal","isProfiler","isStrictMode","isSuspense","reactIs_development","reactIsModule","reactIs","REACT_STATICS","KNOWN_STATICS","FORWARD_REF_STATICS","MEMO_STATICS","TYPE_STATICS","getStatics","component","defineProperty","getOwnPropertyNames","getOwnPropertySymbols","getOwnPropertyDescriptor","getPrototypeOf","objectPrototype","hoistNonReactStatics","targetComponent","sourceComponent","blacklist","inheritedComponent","targetStatics","sourceStatics","descriptor","hoistNonReactStatics_cjs","isBrowser","getRegisteredStyles","registered","registeredStyles","classNames","rawClassName","className","registerStyles","isStringTag","insertStyles","current","murmur2","str","len","unitlessKeys","hyphenateRegex","animationRegex","isCustomProperty","isProcessableValue","processStyleName","styleName","processStyleValue","p1","p2","cursor","unitless","noComponentSelectorMessage","handleInterpolation","mergedProps","interpolation","componentSelector","keyframes","serializedStyles","createStringFromObject","previousCursor","asString","obj","string","interpolated","labelPattern","serializeStyles","args","stringMode","strings","asTemplateStringsArr","templateStringsArr","identifierName","hashString","syncFallback","useInsertionEffect","useInsertionEffectAlwaysWithSyncFallback","EmotionCacheContext","React.createContext","withEmotionCache","forwardRef","useContext","ThemeContext","hasOwn","typePropName","createEmotionProps","newProps","_key","Insertion","_ref","Emotion","cssProp","WrappedComponent","React.useContext","_key2","React.createElement","React.Fragment","Emotion$1","ReactJSXRuntime.Fragment","jsx","ReactJSXRuntime.jsx","jsxs","ReactJSXRuntime.jsxs","some","arr","find","getUserAgentString","agent","userAgent","execRegExp","text","hasUserAgentData","userAgentData","brands","findVersion","versionTest","convertVersion","findPreset","presets","userPreset","version","preset","findPresetBrand","brandInfo","findBrand","_a","brand","BROWSER_PRESETS","CHROMIUM_PRESETS","WEBKIT_PRESETS","WEBVIEW_PRESETS","OS_PRESETS","isWebView","getLegacyAgent","nextAgent","isMobile","browser","os","browserPreset","browserVersion","_b","osPreset","osVersion","chromiumPreset","webkitPreset","getClientHintsAgent","osData","firstBrand","platform","chromiumBrand","webkitBrand","platfomResult","browserBrand","prefixNames","prefixCSS","css","_","target","refs","withMethods","methods","duplicate","propertyName","FUNCTION","OBJECT","STRING","NUMBER","UNDEFINED","IS_WINDOW","doc","OPEN_CLOSED_CHARACTERS","TINY_NUM","DEFAULT_UNIT_PRESETS","pos","__spreadArrays","s","il","jl","dot","a1","a2","b1","b2","isUndefined","isObject","isArray","isString","isNumber","isFunction","isEqualSeparator","separator","isCharacterSpace","isSeparatorSpace","findOpen","openCharacter","texts","openCloseCharacters","isIgnore","findIgnore","findClose","otherText","closeCharacter","_loop_1","nextIndex","open","out_i_1","state_1","splitText","splitOptions","isSeparateFirst","isSeparateOnlyOpenClose","_c","isSeparateOpenClose","_d","openClosedText","close","regexText","regex","chr","values","tempValues","resetTemp","_loop_2","out_i_2","nextOpenCloseCharacters","state_2","splitSpace","splitComma","splitBracket","matches","splitUnit","unit","decamelize","all","letter","letter2","now","findIndex","defaultIndex","defalutValue","requestAnimationFrame","firstTime","raf","currTime","id","cancelAnimationFrame","caf","handle","getKeys","convertUnitSize","sizeFunction","between","min","max","checkBoundSize","targetSize","compareSize","isMax","ratio","throttle","defaultSize","throttledSize","calculateBoundSize","minSize","maxSize","keepRatio","width","height","minWidth","minHeight","maxWidth","maxHeight","sum","nums","total","average","getRad","pos1","pos2","distX","distY","rad","getCenterPoint","getShapeDirection","center","pos1Rad","pos2Rad","getDist","num","reverseUnit","throttleArray","counter","flat","cur","hasClass","addClass","removeClass","reg","addEvent","el","listener","removeEvent","getDocument","getDocumentElement","getDocumentBody","getWindow","isWindow","val","isNode","add","matrix","inverseMatrix","startIndex","fromIndex","fromX","swap","iv","divide","ignoreDimension","newMatrix","invert","createIdentityMatrix","identityIndex","targetStartIndex","targetIndex","transpose","getOrigin","originMatrix","fromTranslation","convertPositionMatrix","convertDimension","multiplies","matrixes","multiply","matrix2","plus","nextPos","minus","convertCSStoMatrix","is2d","convertMatrixtoCSS","calculate","rotateX3d","rotateY3d","rotateZ3d","createRotateMatrix","scale3d","sx","sy","sz","rotate","translate3d","tx","ty","tz","matrix3d","matrix1","cos","sin","createScaleMatrix","scale","createOriginMatrix","origin","createWarpMatrix","pos0","pos3","nextPos0","nextPos1","nextPos2","nextPos3","x0","y0","x1","y1","x2","y2","x3","y3","u0","v0","u1","v1","u2","v2","u3","v3","__assign","createMatrix","parseMat","transform","toMat","calculateMatrixDist","res","matrixInfos","matrixFunction","functionValue","transforms","functionName","nextSize_1","posX","posY","posZ","nextSize","_e","_f","_g","_h","unitValue","PolyMap","__proto","prevIndex","HashMap","SUPPORT_MAP","Link","prevLink","nextLink","link","orderChanged","changed","fixed","fromLinks","toLinks","to","fromLink","toLink","toIndex","Result","prevList","list","added","removed","maintained","changedBeforeAdded","ordered","pureChanged","fromBefore","toBefore","diff","findKeyCallback","mapClass","prevKeys","prevKeyMap","keyMap","removedMap","addedCount","removedCount","prevListIndex","listIndex","ListDiffer","newData","extendStatics","__extends","__","childrenCount","ChildrenDiffer","_super","diff$1","EventEmitter","eventName","events","param","isStop","listeners","getDefaultScrollPosition","checkDefaultScrollEvent","getContainerElement","DragScroll","inputEvent","top","left","rect","clientX","clientY","threshold","_startRect","_startPos","direction","prevScrollPos","throttleTime","isDrag","nextScrollPos","offsetX","offsetY","nextDirection","getScrollPosition","useScroll","nowTime","distTime","checkScrollEvent","tinyThrottle","isSameConstants","linearConstants1","linearConstants2","isSamePoint","point1","point2","getAreaSize","point","nextPoint","fitPoints","getMinMaxs","minX","minY","maxX","maxY","ratioX","ratioY","xs","ys","isInside","excludeLine","xLine","xLinearConstants","getLinearConstants","lines","convertLines","intersectionPosInfos","linearConstants","standardPoint","xPoints","getPointsOnLines","getIntersectionPointsByConstants","linePoint","intersectionCount","xMap","prevValue","nextValue","dx","dy","c1","c2","isZeroA","isZeroB","results","minMaxs","order","minMax","right","bottom","pointX","pointY","getOverlapPointInfos","points1","points2","targetPoints1","targetPoints2","lines1","lines2","linearConstantsList1","line1","linearConstantsList2","line2","overlapInfos","linePointInfos","intersectionPoints","isNext","index2","index1","pointMap","getOverlapPoints","infos","getOverlapSize","getRotatiion","touches","isMultiTouch","getEventClients","getClients","getClient","isMouseEvent","getPosition","clients","prevClients","startClients","getAverageClient","originalClientX","originalClientY","prevX","prevY","startX","startY","deltaX","deltaY","sumClient","minLength","client","ClientStore","isAdd","positions","movement","currentClient","prevClient","INPUT_TAGNAMES","Gesto","targets","isTrusted","isDragAPI","pinchOutside","preventWheelClick","preventRightClick","preventDefault","checkInput","dragFocusedInput","preventClickEventOnDragStart","preventClickEventOnDrag","preventClickEventByCondition","useTouch","isDragStart","activeElement","tagName","hasInput","hasContentEditable","activeTagName","timer","isScroll","dragResult","clientsLength","currentTime","isDouble","elements","firstTarget","checkWindowBlur","passive_1","isCallDrag","store","nextClients","data","currentData","name_1","pinchThreshold","isPinch","isPrevDrag","isFirstDrag","storePosition","win","passive","stringHash","getHash","getShadowRoot","parentElement","rootNode","replaceStyle","trimmedSelector","subSelector","trimmedSubSelector","injectStyle","shadowRoot","style","styled","injectClassName","styleElement","injectCount","__rest","Tag","injector","cssStyled","cssId","attributes","targetRef","useRef","useImperativeHandle","useEffect","injectResult","createElement","__decorate","decorators","desc","__values","o","__read","ar","__spreadArray","pack","makeAble","able","DIRECTIONS4","DIRECTIONS","getSVGCursor","degree","getCursorCSS","degree45","defaultCursor","getAgent","IS_WEBKIT","IS_WEBKIT605","navi","browserName","IS_CHROME","IS_CHROMIUM","chromiumVersion","IS_CHROMIUM109","IS_FIREFOX","IS_SAFARI_ABOVE15","PREFIX","directionCSS","dir","originX","originY","MOVEABLE_CSS","NEARBY_POS","FLOAT_POINT_NUM","MIN_SCALE","MAX_NUM","MIN_NUM","DIRECTION_REGION_TO_DIRECTION","DIRECTION_INDEXES","DIRECTION_ROTATIONS","MOVEABLE_METHODS","setCustomDrag","state","delta","isConvert","ableName","datas","ableDatas","CustomGesto","originalDatas","calculateElementPosition","is3d","poses","calculatePoses","x4","y4","calculatePosition","sign","calculatePointerDist","moveable","moveableClientRect","rootMatrix","calculateInversePosition","getDragDist","setDragStart","allMatrix","beforeMatrix","offsetMatrix","targetMatrix","transformOrigin","getTransformDirection","resolveTransformEvent","nextTransforms","nextTransformAppendedIndexes","convertTransformInfo","targetFunction","matFunctionName","convertTransformFormat","dist","getTransformDist","getBeforeDragDist","bx","by","getTransfromMatrix","isAfter","beforeTransform","afterTransform","beforeTransform2","afterTransform2","targetAllTransform","nextTargetMatrix","res1","afterTargetMatrix","inverseBeforeMatrix","startDragBeforeDist","absoluteOrigin","isBefore","startDragDist","getInverseDragDist","calculateTransformOrigin","prevWidth","prevHeight","prevOrigin","prevSize","measureRatio","getPosIndexesByDirection","indexes","getPosesByDirection","getPosBySingleDirection","getPosByDirection","startPos","fixedDirection","fixedPos","getNextMatrix","getAbsoluteMatrix","getNextTransformMatrix","isAllTransform","targetTransform","scaleMatrix","fillTransformStartEvent","getBeforeRenderableDatas","setTransformIndex","setDefaultTransformIndex","startTransforms","fillOriginalTransform","getNextTransforms","getNextTransformText","getNextStyle","fillTransformEvent","nextTransform","drag","Draggable","fillCSSObject","getTranslateFixedPosition","fixedOffset","nextMatrix","nextFixedPosition","getDirectionOffset","getTranslateDist","fixedPosition","groupable","groupLeft","groupTop","getScaleDist","getDirectionByPos","fixedOffsetPosition","getRotateDist","rotateDist","getResizeDist","nextOrigin","getAbsolutePosition","getAbsolutePosesByState","getGestoData","targetGesto","controlGesto","getIndividualTransforms","getStyle","translate","individualTransforms","getMatrixStackInfo","checkContainer","documentElement","requestEnd","isEnd","targetTransformOrigin","hasFixed","offsetContainer","getOffsetInfo","zoom","getCachedStyle","getElementTransform","isFixed","getTransformMatrix","offsetParent","isOffsetEnd","isStatic","parentClientLeft","parentClientTop","fixedClientLeft","fixedClientTop","fixedInfo","getPositionFixedInfo","length_1","convert3DMatrixes","getOffsetPosInfo","hasOffset","isSVG","origin_1","targetOrigin","offsetPos","offsetLeft","offsetTop","getSVGMatrix","targetZoom","offsetInfo","offsetZoom","parentSlotElement","customOffsetParent","customOffsetLeft","customOffsetTop","margin","getBodyOffset","isElementTarget","scrollLeft","scrollTop","cacheStyleMap","clientRectStyleMap","matrixContainerInfos","setStoreCache","useCache","getCachedClientRect","clientRect","nextClientRect","getClientRect","getCachedMatrixContainerInfo","result_1","nextStyle_1","cached","fillChildEvents","groupableDatas","childDatas","triggerChildGesto","isStart","moveables","childEvents","eventParams","ev","childMoveable","gestos","childEvent","triggerChildAbles","eachEvent","childs","startChildDist","parentDatas","startPositions","originalX","originalY","renderDirectionControlsByInfos","renderDirections","renderPoses","rotationRad","getProps","degRotation","absDegree","directionMap","renderState","renderDirectionMap","directionSign","directionRotation","dataAttrs","getControlTransform","renderDirectionControls","defaultDirections","directions","displayAroundControls","renderAroundControls","renderLine","rotation","getLineStyle","renderEdgeLines","edge","getRenderDirections","renderDiagonalDirections","renderAllDirections","checkBoundPoses","bounds","verticalPoses","horizontalPoses","nextBounds","checkBounds","getBounds","externalBounds","containerHeight","containerWidth","clientLeft","clientTop","snapOffsetLeft","snapOffsetTop","snapOffsetRight","snapOffsetBottom","isCSS","checkBoundKeepRatio","endPos","endX","endY","isBottom","isRight","verticalInfo","horizontalInfo","isBound","isVertical","startBoundPos","endBoundPos","minPos","maxPos","boundInfos","isBoundRotate$1","relativePoses","boundRect","nextPoses","boundRotate","vec","boundPos","getDistSize","checkRotateBounds","prevPoses","relativeLeft","relativeRight","relativeTop","relativeBottom","relativeRad1","relativeRad2","nextRad","VERTICAL_NAMES","HORIZONTAL_NAMES","SNAP_SKIP_NAMES_MAP","VERTICAL_NAMES_MAP","HORIZONTAL_NAMES_MAP","getInitialBounds","hasGuidelines","snappable","innerBounds","verticalGuidelines","horizontalGuidelines","snapGridWidth","snapGridHeight","guidelines","enableSnap","getSnapDirections","snapDirections","mapSnapDirectionPoses","snapPoses","nextSnapDirections","nextSnapPoses","splitSnapDirectionPoses","horizontalNames","verticalNames","calculateContainerPos","containerRect","clientPos","solveLineConstants","TINY_NUM$1","NAME_snapRotationThreshold","NAME_snapRotationDegrees","NAME_snapHorizontalThreshold","NAME_snapVerticalThreshold","checkMoveableSnapPoses","posesX","posesY","dirXs","dirYs","customSnapVerticalThreshold","customSnapHorizontalThreshold","snapThresholdMultiples","snapHorizontalThreshold","selectValue","snapVerticalThreshold","checkSnapPoses","multiples","checkSnap","checkSnapKeepRatio","getTinyDist","verticalSnapInfo","horizontalSnapInfo","getNearestSnapGuidelineInfo","isVerticalSnap","verticalGuideline","isHorizontalSnap","horizontalGuideline","horizontalPos","verticalPos","isSnap","getStringDirection","stringDirection","checkSnaps","horizontalDirection","verticalDirection","snapInfo","posInfo","guidelineInfo","guideline","targetType","targetPoses","snapThreshold","dirs","posType","snapPosInfos","targetPos","guidelineInfos","snapPosInfo","getSnapInfosByDirection","snapDirection","nextDir","checkSnapBoundPriority","aDist","bDist","getNearOffsetInfo","offsets","aSign","bSign","aOffset","bOffset","getCheckSnapDirections","endDirection_1","signX","signY","signs","isStartLine","cx","cy","hitTestLine","test1","test2","isSameStartLine","dots","centerSign","checkInnerBoundDot","start","checkInnerBound","verticalSign","horizontalSign","lineConstants","leftLine","topLine","rightLine","bottomLine","topBoundInfo","checkLineBoundCollision","bottomBoundInfo","leftBoundInfo","rightBoundInfo","isAllVerticalBound","isVerticalBound","isAllHorizontalBound","isHorizontalBound","verticalOffset","maxOffset","horizontalOffset","isAllBound","boundLine","isRender","dot1","boundDot1","boundDot2","dy2","dx2","hasDx","hasDy","slope","getInnerBoundInfo","lineInfos","multiple","sizeOffset","getInnerBoundDragInfo","getCheckInnerBoundLineInfos","innerBoundInfo","widthOffsetInfo","heightOffsetInfo","getCheckSnapLineDirections","lineDirections","virtualPoses","dir1","dir2","virtualLine","isBoundRotate","boundDots","getDistPointLine","solveReverseLine","checkRotateInnerBounds","dotInfos","lineRad","lineDist","dotDist","dotRad","distRad","nextRad1","nextRad2","checkInnerBoundPoses","boundMap","pos4","lineInfo","isHorizontalStart","isVerticalStart","solveEquation","snapOffset","solveNextOffset","getDist$1","dist1","dist2","isOutside","widthOffset","heightOffset","getSnapBound","boundInfo","checkThrottleDragRotate","throttleDragRotate","adjustPoses","adjustPos","prevDistY","checkSnapBoundsDrag","ignoreSnap","getAbsolutePoses","getRect","boundPoses","checkMoveableSnapBounds","verticalSnapBoundInfo","horizontalSnapBoundInfo","verticalInnerBoundInfo","horizontalInnerBoundInfo","horizontalBoundInfos","verticalBoundInfos","horizontalDist","verticalDist","checkSnapBounds","guideines","checkSnapRightLine","snapBoundInfo","rad180","isHorizontalLine","isVerticalLine","getSnapBoundInfo","isRequest","startDirection","endDirection","otherStartPos","otherEndPos","checkSnapBoundsKeepRatio","otherHorizontalOffset","isOtherHorizontalBound","isOtherHorizontalSnap","otherVerticalOffset","isOtherVerticalBound","isOtherVerticalSnap","snapLine","getSnapBoundOffset","horizontalBoundInfo","verticalBoundInfo","checkMaxBounds","left_1","top_1","right_1","bottom_1","otherDirection","isCheckVertical","isCheckHorizontal","otherPos","deg","nextOtherPos","isHeightOutside","isWidthOutside","hideThrottleDragRotateLine","dragInfo","beforeOrigin","parentEvent","parentGesto","startCheckSnapDrag","params","fillParams","triggerEvent","parentFlag","deltaOffset","useSnap","isGroup","parentThrottleDrag","prevDist","prevBeforeDist","startValue","parentMoveable","throttleDrag","dragRotateRad","startDragRotate","ry","rx","beforeTranslate","beforeDist","beforeDelta","fillEndParams","nextParams","passDelta","getFixedDirectionInfo","getOffsetFixedDirectionInfo","nextFixedOffset","getOffsetFixedPositionInfo","offsetFixedPosition","directionCondition$2","getDirectionCondition","Resizable","getDirectionViewClassName","parentDirection","parentFixedDirection","getTotalDirection","setRatio","setFixedDirection","setFixedPosition","setMin","setMax","nextMaxSize","startWidth","startHeight","parentKeepRatio","dragClient","parentDist","resolveMatrix","isResize","startOffsetWidth","startOffsetHeight","isWidth","startOffsetMatrix","startTransformOrigin","targetN","nextAllMatrix","resizeFormat","throttleResize","keepRatioFinally","sizeDirection","distWidth","distHeight","getNextBoundingSize","getOffsetSizeDist","nextWidth","nextHeight","boundingWidth","boundingHeight","nextFixedDirection","snapDist","checkSnapResize","computeSize","isNoSnap","inverseDelta","fillAfterTransform","errorWidth","errorHeight","isErrorWidth","isErrorHeight","originalEvents","parentStartOffsetWidth","parentStartOffsetHeight","updateGroupMin","originalMinSize","childMinSize","childStartOffsetWidth","childStartOffsetHeight","parentMinWidth","parentMinHeight","updateGroupMax","originalMaxSize","childMaxSize","parentMaxWidth","parentMaxHeight","catchEvent","parentScale","setRotateStartInfo","startAbsoluteOrigin","getAbsoluteDist","defaultDeg","prevDeg","normalizedPrevDeg","loop","getAbsoluteDistByClient","getRotateInfo","moveableRect","throttleRotate","prevSnapDeg","snapRotation","checkSnapRotate","snapDeg","getRotationPositions","rotationPosition","radPoses","getRotationRad","isReverse","dragControlCondition","rotationTarget","getRefTargets","Rotatable","rotatable","rotateAroundControls","resolveAblesWithRotatable","ables","resolveMap_1","directionControlInfos","parentRotate","beforeDirection","resizeStart","startClientX","startClientY","externalRotate","inputTarget","regionDirection","controlDirection","clientPoses","calculateMoveableClientPositions","originalFixedPosition_1","fixedBeforeOrigin","fixedAfterOrigin","posDelta","dragStart","resolveAble","getTotalOrigin","rotatation","clientDistX","clientDistY","groupDelta","beforeInfo","afterInfo","absoluteInfo","isRotate","targetDirection","beforeRotation","absoluteDelta","absoluteDist","absoluteRotation","startRotation","absoluteStartRotation","nextClientX","nextClientY","nextRotation","inverseDist","dragEvent","transformEvent","parentDistance","resize","resizeEvent","parentLeft","parentTop","parentBeforeOrigin","childClient","startGroupClient","prevClientX","prevClientY","distRotate","renderGuideline","isHorizontal","scaleType","renderInnerGuideline","renderSnapPoses","renderPos","renderGuidelines","targetRect","isDisplayInnerSnapDigit","mainNames","targetStart","targetEnd","hide","elementRect","renderDigitLine","lineType","gap","snapDigit","isDisplaySnapDigit","snapDistFormat","sizeName","absGap","snapSize","groupByElementGuidelines","otherIndex","names","groupBy","nextGuidelines","inner","elementRect1","elementRect2","renderDashedGuidelines","rendered","groups","sideNames","sidePos","prevRect","nextRect","size1","size2","renderPos1","renderPos2","renderGapGuidelines","targetSideStart","targetSideEnd","gapRects","sideStartPos","sideEndPos","sideCenterPos","getTotalGuidelines","containerClientRect","overflow","containerClientHeight","containerClientWidth","snapGap","maxSnapElementGuidelineDistance","isDisplayGridGuidelines","elementGuidelines","getElementGuidelines","totalGuidelines","getGapGuidelines","getGridGuidelines","getDefaultGuidelines","checkBetweenRects","snapThresholds","maxSnapElementGapDistance","elementRects","gapGuidelines","targetCenter","targetStart2","targetEnd2","snapThresholdMap","nextElementRects","snapRect1","snapRect2","rect1","rect2","rect1Start","rect1End","rect2Start","rect2End","isCenter","startGridGroupGuidelines","snapGridAll","snapRenderInfo","hasDirection","rect_1","children_1","posName","clientOffset","rectSize","rectPos","childSizes","flat$1","firstChildSize","childSnapSizes","rectRatio","childSize","startOffset","snapThresholdInfo","defaultSnapGridWidth","defaultSnapGridHeight","pushGuideline","distance","prevValues","snapRect","nextElementGuidelines","getRefTarget","nextValues","getSnapElementRects","elementSnapDirections","topValue","leftValue","rightValue","bottomValue","centerValue","middleValue","horizontal","vertical","rectTop","rectLeft","sizes","getObjectGuidelines","containerSize","posGuideline","snapWidth","snapHeight","offsetDelta","containerLeft","containerTop","elementLeft","elementTop","elementRight","elementBottom","checkSnapInfo","snapContainer","snapContainerTarget","snapContainerRect","offset1","getDragDistByState","offset2","getNextFixedPoses","nextFixedPos","normalized","getSizeOffsetInfo","innerBoundLineInfos","recheckSizeByTwoDirection","snapPos","nextWidthOffset","nextHeightOffset","checkSizeDist","getNextPoses","isWidthBound","isHeightBound","widthDist","heightDist","isGetWidthOffset","bumpDegree","baseDeg","deg1","deg2","getMinDegreeDistance","deg3","snapRotationThreshold","snapRotationDegrees","origin2_1","rad_1","sorted","firstDegree","checkSnapScale","sizeDist","getSnapGuidelines","posInfos","addBoundGuidelines","verticalSnapPoses","horizontalSnapPoses","innerBoundMap","verticalInnerBoundPoses","horizontalInnerBoundPoses","innerPos","directionCondition$1","Snappable","targetTop","targetLeft","snapRenderThreshold","watchValue","minLeft","minTop","externalPoses","snapInfos","hasExternalPoses","externalRect","verticalPosInfos","horizontalPosInfos","allGuidelines","nextBoundMap","nextInnerBoundMap","multiply2","defaultSync","measureSVGSize","viewBox","getSVGViewBox","getBeforeTransformOrigin","relativeOrigin","getTransformOrigin","getComputedStyle","getTransformOriginArray","computedTransform","baseVal","lastParent","isParent","checkZoom","getTargetStyle","hasSlot","assignedSlotParentElement","isCustomElement","targetPosition","willChange","slotParentNode","targetParentNode","parentNode","getSVGGraphicsOffset","getBodyStyle","bodyPosition","marginLeft","marginTop","fixedContainer","hasTransform","body","makeMatrixCSS","clientWidth","clientHeight","viewBoxWidth","viewBoxHeight","scaleX","scaleY","preserveAspectRatio","align","meetOrSlice","svgOrigin","xAlign","yAlign","scaleDimension","isGTarget","isFillBox","bbox","rectWidth","rectHeight","calculateRect","getSVGOffset","targetInfo","getSize","mat","prevLeft","prevTop","posOrigin","rectOrigin","mat2","nextLeft","nextTop","distLeft","distTop","rootClientRect","rootPoses","getDiagonalSize","offsetWidth","offsetHeight","cssWidth","cssHeight","contentWidth","contentHeight","minOffsetWidth","minOffsetHeight","maxOffsetWidth","maxOffsetHeight","inlineCSSWidth","inlineCSSHeight","svg","targetStyle","boxSizing","borderLeft","borderRight","borderTop","borderBottom","paddingLeft","paddingRight","paddingTop","paddingBottom","horizontalPadding","verticalPadding","horizontalBorder","verticalBorder","getParentStyle","resetClientRect","getExtendsRect","isRoot","extendsRect","getClientRectByPosition","base","isExtends","baseTop","baseLeft","convertTransformOriginArray","getDirection","direciton","unsetAbles","isControl","unsetGesto","gestoName","gesto","resolvedEvent","prevEvent","nextEvent","isBeforeEvent","isManager","pseudoElt","filterAbles","triggerAblesSimultaneously","enabledAbles","ableGroups","method","equals","groupKeys","groupKey","keyIndex","group","groupByMap","convertDragDist","calculatePadding","xAdded","yAdded","nextAdded","convertCSSSize","isRelative","checkAbles","beforeFunctionTexts","beforeFunctionTexts2","targetFunctionText","afterFunctionTexts","afterFunctionTexts2","beforeFunctions","beforeFunctions2","afterFunctions","afterFunctions2","targetFunctions","beforeFunctionMatrix","beforeFunctionMatrix2","afterFunctionMatrix","afterFunctionMatrix2","allFunctionMatrix","isArrayFormat","isSelector","userTargets","getAbsoluteRotation","getSizeDistByDist","startSize","standardRad","signSize","startWidthSize","startHeightSize","secondRad","firstRad","distSize","pinchScale","startFixedDirection","directionsDists","directionRatios","ratioDistance","dist_1","convertTransformUnit","xy","leftOrigin","rightOrigin","originObject","nextOriginObject","rotatePosesInfo","isDeepArrayEquals","arr1","arr2","value1","value2","isArray1","isArray2","valueKey","countEach","getPaddingBox","padding","Pinchable","angle","pinchable","controlEventName","pinchAbles","ableEvent","directionCondition","Scalable","setMinScaleSize","setMaxScaleSize","isScale","throttleScale","tempScaleValue","getNextScale","stateDirection","nextScale","distSign","isSelfPinch","startOffsetSize","scaleSize","distText","scaleText","isZeroScale","scaleEndParam","moveableScale","getMiddleLinePos","getTriangleRad","rad1","rad2","isValidPos","poses1","poses2","pi","Warpable","resizable","scalable","warpable","linePosFrom1","linePosFrom2","linePosFrom3","linePosFrom4","linePosTo1","linePosTo2","linePosTo3","linePosTo4","targetInverseMatrix","prevMatrix","isWarp","posIndexes","absolutePoses","selectedPoses","nearByPoses","afterMatrix","totalMatrix","AREA_PIECES","AREA_PIECE","AVOID","VIEW_DRAGGING","restoreStyle","renderPieces","DragArea","dragArea","passDragArea","areaElement","rects","Origin","originStyle","scrollContainer","Scrollable","scrollOptions","dragScroll","scrollContainerElement","scrollThreshold","scrollThrottleTime","Default","Padding","paddingDirections","paddingPos1","paddingPos2","paddingPos3","paddingPos4","RADIUS_DIRECTIONS","calculateRatio","sumSize","sumRatio","HORIZONTAL_RADIUS_ORDER","VERTICAL_RADIUS_ORDER","HORIZONTAL_RADIUS_DIRECTIONS","VERTICAL_RADIUS_DIRECTIONS","getRadiusStyles","clipStyles","radiusPoses","raws","rawPos","getRadiusRange","controlPoses","horizontalRange","verticalRange","clipPose","getRadiusValues","minCounts","full","splitIndex","splitLength","horizontalValues","verticalValues","horizontalValuesLength","verticalValuesLength","hasVerticalValues","nwValue","neValue","seValue","_j","swValue","_k","_l","wnValue","_m","enValue","_o","esValue","_p","wsValue","horizontalRawPoses","verticalRawPoses","nextHorizontalPoses","nextVerticalPoses","removeRadiusPos","radiuslIndex","deleteCount","addRadiusPos","horizontalIndex","verticalIndex","radiusX","radiusY","startVerticalIndex","splitRadiusPoses","horizontals","verticals","CLIP_DIRECTIONS","CLIP_RECT_DIRECTIONS","getClipStyles","clipPath","clipRelative","clipType","clipPoses","isRect","isCircle","subWidth","subHeight","getRectPoses","dirx","diry","getControlSize","xRange","yRange","getClipPath","defaultClip","customClip","clipText","clipPrefix","splitter","xPos","yPos","radiusX_1","radiusY_1","radius","xRadius","yRadius","centerPos_1","roundIndex","rectLength","radiusValues","_q","_r","_s","top_2","_t","nextRight","nextBottom","_u","posValue","top_3","moveControlPos","sub","dists","verticalDirections","horizontalDirections","verticalDirection_1","horizontalDirection_1","fixedIndex","nextDist","nextControlPoses_1","controlPose","controlDir","dirDir","dirHorizontal","dirVertical","addClipPath","clipIndex","clipStyle","removeClipPath","Clippable","customClipPath","defaultClipPath","clipArea","clipPathState","snapBoundInfos","calculatedPos","controls","isInset","isPolygon","linePoses_1","clipLeft","clipTop","ellipseClipPath","piece","areaPoses","allWidth","allHeight","allLeft_1","allTop_1","directionType","snapPos1","snapPos2","dragWithClip","isDragTarget","isLine","isArea","originalDraggable","originalDist","firstDist","isDragWithTarget","isAll","guidePoses","isEllipse","guideRect","guideXPoses","guideYPoses","rectPoses","rectDists_1","boundDelta","snapOffsetY","snapOffsetX","distSnapX","distSnapY","width_1","height_1","nextControlPoses_2","nextClipStyles","dragDist","isClipStart","OriginDraggable","originRelative","distOrigin","dragDelta","addBorderRadiusByLine","lineIndex","horizontalsLength","virtual","verticalsLength","controlIndex","controlPoseInfo","addBorderRadius","removeBorderRadius","getBorderRadius","borderRadius","triggerRoundEvent","getStyleBorderRadius","firstMoveable","Roundable","roundClickable","borderRadiusState","minRoundControls","maxRoundControls","roundPadding","isDisplayShadowRoundControls","verticalCount","horizontalCount","basePos","originalPos","isDisplayVerticalShadow","isDisplay","indexAttr","roundRelative","selectedControlPose","selectedVertical","selectedHorizontal","pose","poseDist","isIdentityMatrix","identityMatrix","BeforeRenderable","inlineTransform","cssMatrix","startTransform","Renderable","transformObject","matrixInfo","triggerAble","moveableAbles","eventOperations","eventAffix","eventType","requestInstant","requestAble_1","isDragStop","stop","isFirstStart","gestoType","prevGesto","trigger","conditionName","nextDatas","forceEndedCount","updatedCount","eventOperation","eventAbles","isUpdate","isForceEnd","flushSync","checkMoveableTarget","eventTarget","dragTargetElement","getTargetAbleGesto","moveableTarget","controlBox","dragTarget","checkTarget","getAbleGesto","getControlAbleGesto","checkControlTarget","ableType","conditionFunctions","isTargetAbles","preventClickDefault","dragContaienrOption","dragContainer","isPinchScheduled","EventManager","calculateMatrixStack","rootContainer","isAbsolute3d","prevTargetMatrix","containerZoom","rootMatrixes","isRoot3d","offsetRootContainer","rootZoom","isNext3d","isSVGGraphicElement","nextRootMatrixes","originalRootContainer","endContainer","rootMatrixBeforeOffset","nextInfo","isMatrix3d","originalRootMatrix","calculateElementInfo","allResult","getMoveableTargetInfo","moveableElement","parentContainer","requestStyles","targetClientRect","rootContainerClientRect","getStyle_1","beforePosition","absoluteTargetPosition","absoluteContainerPosition","containerClientRectLeft","containerClientRectTop","containterClientLeft","containerClientTop","clientDelta","getPersistState","MoveableManager","parentPosition","propsTarget","cspNonce","translateZ","ControlBoxElement","linePadding","controlPadding","stateTarget","groupTargets","isDragging","ableAttributes","ableClassName","isVisible","prevProps","viewContainer","manager","wrapperMoveable","totalSize","isTarget","isSetState","isSingle","nextState","persistState","name_2","statePos","isInstant","allAbles","requsetAble","ableRequester","requester","ableParam","originalBeforeOrigin","stateLeft","stateTop","isPersisted","renderPos3","renderPos4","zoomOffset","stateContainer","isTargetChanged","isChanged","moveableContainer","customStyleMap","hasControlBox","persistData","firstRenderState","pinchStart","dragControlStart","targetAbles","controlAbles","name_3","Renderer","styleNames","ableStyleNames","hasTargetAble","hasControlAble","isUnset","hideDefaultLines","hideChildMoveableDefaultLines","useDragArea","nextTarget","prevTarget","prevDragArea","isDragTargetChanged","isDragAreaChanged","eventKeys","hasAbles","viewContainerOption","nextClassNames","prevClassNames","classPrefix","targetGestoData","controlGestoData","observer","records","e_1","records_1","records_1_1","mutation","e_1_1","React.PureComponent","Groupable","renderGroupRects","persistDatChildren","Clickable","isMoveableElement","containsElement","containsTarget","parentTarget","getDraggableEvent","edgeDraggable","IndividualGroupable","MOVEABLE_ABLES","solveConstantsDistance","solveC","getMaxPos","getMinPos","getGroupRect","parentPoses","fixedRotation","a1_1","a2_1","a1MinMax_1","a1MinMaxPos_1","a2MinMax_1","a2MinMaxPos_1","a1Dist","a2Dist","a1MinPos","a1MaxPos","a2MinPos","a2MaxPos","minHorizontalLine","maxHorizontalLine","minVerticalLine","maxVerticalLine","minX_1","minY_1","maxX_1","maxY_1","changedX","findMoveableGroups","childTargetGroups","targetGroup","childMoveableGroups","checked","MoveableGroup","checkeds","targetGroups","moveableGroups","useDefaultGroupRotate","finded","isReset","defaultGroupRotate","persistedRoatation","getMoveableGroupRect","parentRotation","posesRotations","rotations","groupRotation","firstRotation","isSameRotation","groupPoses","groupRect","rootGroupRect","posesInfo","rotateScale","isContainerChanged","MoveableIndividualGroup","canPersist","individualProps","controlBoxElement","dragElement","getElementTargets","refTargets","selectorMap","elementTargets","getTargetGroups","compareRefTargets","prevRefTargets","nextRefTargets","InitialMoveable","cssMap","moveableContructor","userAbles","userProps","nextSelectorMap","totalAbles","nextProps","prevMoveable","target_1","prevTargetMoveable","mv","resolvePromise","updateSelectorMap","selectorTarget","Moveable","GrpLayer","styChild","sys","sty4Moveable","SEARCH_PATH_ARG_EXT","onMouseDown","img0","argsLength","createElementArgArray","_jsx","JSX","_len","TxtLayer","styTxt","mes","createStoreImpl","createState","setState","partial","previousState","getState","api","createStore","identity","useStore","createImpl","useBoundStore","set","nm","aLay","on","off","toggleReducer","useToggle","useReducer","useEffectOnce","effect","defaultTarget","isListenerType1","isListenerType2","useEvent","handler","createKeyPredicate","keyFilter","useKey","opts","useMemoHandler","useMemo","predicate","handlerEvent","isTouchEvent","useLongPress","isPreventDefault","delay","timeout","useCallback","clear","useMount","DEFAULT_USE_TITLE_OPTIONS","useTitle","title","prevTitleRef","useTitle$1","_title","Stage","onClick","Memento","BaseMemento","wh","setWH","useState","innWH","onResize","cvsScale","calcScale","styParent","CmnLib","styBtn","isDesignMode","tglDesignMode","longPressEvent","onLong","$isDesignMode","cvsWidth","cvsHeight","uint","getDesignMode","ExtensionType","ExtensionType2","normalizeExtension","ext","normalizePriority","defaultPriority","extensions","extensions2","handlers","onAdd","onRemove","addHandlers","removeHandlers","map","extension","opening","heStage","createRoot","Main","Assets","ScriptMng","url","re","rj","addLayer","chgPic","chgStr","isLong","done","gen","idxDummy","lazy","generator"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,41,43,44,46,47,48,49,50,51,52,53,55]}