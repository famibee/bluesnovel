{"version":3,"file":"store.js","sources":["../node_modules/zustand/esm/vanilla.mjs","../node_modules/zustand/esm/react.mjs","../src/store/store.tsx"],"sourcesContent":["const createStoreImpl = (createState) => {\n  let state;\n  const listeners = /* @__PURE__ */ new Set();\n  const setState = (partial, replace) => {\n    const nextState = typeof partial === \"function\" ? partial(state) : partial;\n    if (!Object.is(nextState, state)) {\n      const previousState = state;\n      state = (replace != null ? replace : typeof nextState !== \"object\" || nextState === null) ? nextState : Object.assign({}, state, nextState);\n      listeners.forEach((listener) => listener(state, previousState));\n    }\n  };\n  const getState = () => state;\n  const getInitialState = () => initialState;\n  const subscribe = (listener) => {\n    listeners.add(listener);\n    return () => listeners.delete(listener);\n  };\n  const api = { setState, getState, getInitialState, subscribe };\n  const initialState = state = createState(setState, getState, api);\n  return api;\n};\nconst createStore = (createState) => createState ? createStoreImpl(createState) : createStoreImpl;\n\nexport { createStore };\n","import React from 'react';\nimport { createStore } from 'zustand/vanilla';\n\nconst identity = (arg) => arg;\nfunction useStore(api, selector = identity) {\n  const slice = React.useSyncExternalStore(\n    api.subscribe,\n    () => selector(api.getState()),\n    () => selector(api.getInitialState())\n  );\n  React.useDebugValue(slice);\n  return slice;\n}\nconst createImpl = (createState) => {\n  const api = createStore(createState);\n  const useBoundStore = (selector) => useStore(api, selector);\n  Object.assign(useBoundStore, api);\n  return useBoundStore;\n};\nconst create = (createState) => createState ? createImpl(createState) : createImpl;\n\nexport { create, useStore };\n","/* ***** BEGIN LICENSE BLOCK *****\n\tCopyright (c) 2024-2024 Famibee (famibee.blog38.fc2.com)\n\n\tThis software is released under the MIT License.\n\thttp://opensource.org/licenses/mit-license.php\n** ***** END LICENSE BLOCK ***** */\n\nimport type {T_LAY} from '../components/Stage';\n\nimport {create} from 'zustand';\n\ntype T_STATE = {\n\ttxt\t\t: string;\n\taddTxt\t: (t: string)=> void;\n\tclearTxt: ()=> void;\n\n\taLay\t: T_LAY[];\n\treplace\t: (arg: string)=> void;\n\taddLayer: (arg: T_LAY)=> void,\n\tchgPic\t: (arg: T_CHGPIC)=> void,\n\tchgStr\t: (arg: T_CHGSTR)=> void,\n}\nexport type T_CHGPIC = {\n\tnm\t: string;\n\tfn\t: string;\n}\nexport type T_CHGSTR = {\n\tnm\t: string;\n\tstr\t: string;\n}\n\nexport type T_INIT_FNCS = Readonly<Pick<T_STATE, 'addLayer'|'chgPic'|'chgStr'>>;\n\n\nexport const useStore = create<T_STATE>()(set=> ({\t// わざとカーリー化\n\ttxt\t\t: '',\n\taddTxt\t: t=> set(s=> ({txt: s.txt + t})),\n\tclearTxt: ()=> set(()=> ({txt: ''})),\n\n\taLay\t: [],\n\treplace\t: (arg: string)=> set(_=> ({aLay: JSON.parse(arg)})),\n\taddLayer: (arg: T_LAY)=> set(s=> ({aLay: [...s.aLay, arg]})),\n\tchgPic\t: ({nm, fn}: T_CHGPIC)=> set(s=> {\n\t\tconst aLay = [...s.aLay];\n\t\tconst e = aLay.find(e=> e.nm === nm);\n\t\tif (! e) throw `存在しないレイヤ ${nm} です`;\n\t\tif (e.cls !== 'GRP') throw `${nm} は画像レイヤではありません`;\n\n\t\te.fn = fn;\n\t\treturn {aLay};\n\t}),\n\tchgStr\t: ({nm, str}: T_CHGSTR)=> set(s=> {\n\t\tconst aLay = [...s.aLay];\n\t\tconst e = aLay.find(e=> e.nm === nm);\n\t\tif (! e) throw `存在しないレイヤ ${nm} です`;\n\t\tif (e.cls !== 'TXT') throw `${nm} は文字レイヤではありません`;\n\n\t\te.str = str;\n\t\treturn {aLay};\n\t}),\n}))\n"],"names":["createStoreImpl","createState","state","listeners","setState","partial","replace","nextState","previousState","listener","getState","api","initialState","createStore","identity","arg","useStore","selector","slice","React","createImpl","useBoundStore","create","set","s","_","nm","fn","aLay","e","str"],"mappings":";;;;;;;;;;;;;;;;;;;;;;SAAMA,IAAkB,CAACC,MAAgB;AACvC,MAAIC;AACJ,QAAMC,IAA4B,oBAAI,IAAK,GACrCC,IAAW,CAACC,GAASC,MAAY;AACrC,UAAMC,IAAY,OAAOF,KAAY,aAAaA,EAAQH,CAAK,IAAIG;AACnE,QAAI,CAAC,OAAO,GAAGE,GAAWL,CAAK,GAAG;AAChC,YAAMM,IAAgBN;AACtB,MAAAA,IAASI,MAA4B,OAAOC,KAAc,YAAYA,MAAc,QAAQA,IAAY,OAAO,OAAO,CAAE,GAAEL,GAAOK,CAAS,GAC1IJ,EAAU,QAAQ,CAACM,MAAaA,EAASP,GAAOM,CAAa,CAAC;AAAA,IACpE;AAAA,EACG,GACKE,IAAW,MAAMR,GAMjBS,IAAM,EAAE,UAAAP,GAAU,UAAAM,GAAU,iBALV,MAAME,GAKqB,WAJjC,CAACH,OACjBN,EAAU,IAAIM,CAAQ,GACf,MAAMN,EAAU,OAAOM,CAAQ,GAEsB,GACxDG,IAAeV,IAAQD,EAAYG,GAAUM,GAAUC,CAAG;AAChE,SAAOA;AACT,GACME,IAAc,CAACZ,MAAgBA,IAAcD,EAAgBC,CAAW,IAAID,GClB5Ec,IAAW,CAACC,MAAQA;AAC1B,SAASC,EAASL,GAAKM,IAAWH,GAAU;AAC1C,QAAMI,IAAQC,EAAM;AAAA,IAClBR,EAAI;AAAA,IACJ,MAAMM,EAASN,EAAI,UAAU;AAAA,IAC7B,MAAMM,EAASN,EAAI,gBAAiB,CAAA;AAAA,EACrC;AACD,SAAAQ,EAAM,cAAcD,CAAK,GAClBA;AACT;AACA,MAAME,IAAa,CAACnB,MAAgB;AAClC,QAAMU,IAAME,EAAYZ,CAAW,GAC7BoB,IAAgB,CAACJ,MAAaD,EAASL,GAAKM,CAAQ;AAC1D,gBAAO,OAAOI,GAAeV,CAAG,GACzBU;AACT,GACMC,IAAS,CAACrB,MAAwDmB,GCe3DJ,IAAWM,IAAkB,CAAOC,OAAA;AAAA;AAAA,EAChD,KAAO;AAAA,EACP,QAAS,OAAIA,EAAI,CAAAC,OAAK,EAAC,KAAKA,EAAE,MAAM,EAAA,EAAG;AAAA,EACvC,UAAU,MAAKD,EAAI,OAAM,EAAC,KAAK,GAAI,EAAA;AAAA,EAEnC,MAAO,CAAC;AAAA,EACR,SAAU,CAACR,MAAeQ,EAAI,CAAAE,OAAK,EAAC,MAAM,KAAK,MAAMV,CAAG,EAAG,EAAA;AAAA,EAC3D,UAAU,CAACA,MAAcQ,EAAI,CAAKC,OAAA,EAAC,MAAM,CAAC,GAAGA,EAAE,MAAMT,CAAG,EAAG,EAAA;AAAA,EAC3D,QAAS,CAAC,EAAC,IAAAW,GAAI,IAAAC,EAAE,MAAeJ,EAAI,CAAIC,MAAA;AACvC,UAAMI,IAAO,CAAC,GAAGJ,EAAE,IAAI,GACjBK,IAAID,EAAK,KAAK,CAAAC,MAAIA,EAAE,OAAOH,CAAE;AACnC,QAAI,CAAEG,EAAS,OAAA,YAAYH,CAAE;AAC7B,QAAIG,EAAE,QAAQ,MAAO,OAAM,GAAGH,CAAE;AAEhC,WAAAG,EAAE,KAAKF,GACA,EAAC,MAAAC,EAAI;AAAA,EAAA,CACZ;AAAA,EACD,QAAS,CAAC,EAAC,IAAAF,GAAI,KAAAI,EAAG,MAAeP,EAAI,CAAIC,MAAA;AACxC,UAAMI,IAAO,CAAC,GAAGJ,EAAE,IAAI,GACjBK,IAAID,EAAK,KAAK,CAAAC,MAAIA,EAAE,OAAOH,CAAE;AACnC,QAAI,CAAEG,EAAS,OAAA,YAAYH,CAAE;AAC7B,QAAIG,EAAE,QAAQ,MAAO,OAAM,GAAGH,CAAE;AAEhC,WAAAG,EAAE,MAAMC,GACD,EAAC,MAAAF,EAAI;AAAA,EACZ,CAAA;AACF,EAAE;","x_google_ignoreList":[0,1]}